function H_(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const u=Object.getOwnPropertyDescriptor(i,s);u&&Object.defineProperty(e,s,u.get?u:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(s){if(s.ep)return;s.ep=!0;const u=r(s);fetch(s.href,u)}})();function qp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sm={exports:{}},bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function F_(){if(Sy)return bc;Sy=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(i,s,u){var d=null;if(u!==void 0&&(d=""+u),s.key!==void 0&&(d=""+s.key),"key"in s){u={};for(var m in s)m!=="key"&&(u[m]=s[m])}else u=s;return s=u.ref,{$$typeof:e,type:i,key:d,ref:s!==void 0?s:null,props:u}}return bc.Fragment=t,bc.jsx=r,bc.jsxs=r,bc}var jy;function Y_(){return jy||(jy=1,Sm.exports=F_()),Sm.exports}var o=Y_(),jm={exports:{}},At={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function q_(){if(_y)return At;_y=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function w(T){return T===null||typeof T!="object"?null:(T=b&&T[b]||T["@@iterator"],typeof T=="function"?T:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,j={};function N(T,P,A){this.props=T,this.context=P,this.refs=j,this.updater=A||S}N.prototype.isReactComponent={},N.prototype.setState=function(T,P){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,P,"setState")},N.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=N.prototype;function _(T,P,A){this.props=T,this.context=P,this.refs=j,this.updater=A||S}var M=_.prototype=new E;M.constructor=_,y(M,N.prototype),M.isPureReactComponent=!0;var O=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function B(T,P,A,H,U,W){return A=W.ref,{$$typeof:e,type:T,key:P,ref:A!==void 0?A:null,props:W}}function Z(T,P){return B(T.type,P,void 0,void 0,void 0,T.props)}function R(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function X(T){var P={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(A){return P[A]})}var te=/\/+/g;function xe(T,P){return typeof T=="object"&&T!==null&&T.key!=null?X(""+T.key):P.toString(36)}function Pe(){}function ve(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Pe,Pe):(T.status="pending",T.then(function(P){T.status==="pending"&&(T.status="fulfilled",T.value=P)},function(P){T.status==="pending"&&(T.status="rejected",T.reason=P)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function se(T,P,A,H,U){var W=typeof T;(W==="undefined"||W==="boolean")&&(T=null);var ue=!1;if(T===null)ue=!0;else switch(W){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(T.$$typeof){case e:case t:ue=!0;break;case g:return ue=T._init,se(ue(T._payload),P,A,H,U)}}if(ue)return U=U(T),ue=H===""?"."+xe(T,0):H,O(U)?(A="",ue!=null&&(A=ue.replace(te,"$&/")+"/"),se(U,P,A,"",function(Be){return Be})):U!=null&&(R(U)&&(U=Z(U,A+(U.key==null||T&&T.key===U.key?"":(""+U.key).replace(te,"$&/")+"/")+ue)),P.push(U)),1;ue=0;var Ee=H===""?".":H+":";if(O(T))for(var be=0;be<T.length;be++)H=T[be],W=Ee+xe(H,be),ue+=se(H,P,A,W,U);else if(be=w(T),typeof be=="function")for(T=be.call(T),be=0;!(H=T.next()).done;)H=H.value,W=Ee+xe(H,be++),ue+=se(H,P,A,W,U);else if(W==="object"){if(typeof T.then=="function")return se(ve(T),P,A,H,U);throw P=String(T),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ue}function V(T,P,A){if(T==null)return T;var H=[],U=0;return se(T,H,"","",function(W){return P.call(A,W,U++)}),H}function F(T){if(T._status===-1){var P=T._result;P=P(),P.then(function(A){(T._status===0||T._status===-1)&&(T._status=1,T._result=A)},function(A){(T._status===0||T._status===-1)&&(T._status=2,T._result=A)}),T._status===-1&&(T._status=0,T._result=P)}if(T._status===1)return T._result.default;throw T._result}var Y=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function z(){}return At.Children={map:V,forEach:function(T,P,A){V(T,function(){P.apply(this,arguments)},A)},count:function(T){var P=0;return V(T,function(){P++}),P},toArray:function(T){return V(T,function(P){return P})||[]},only:function(T){if(!R(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},At.Component=N,At.Fragment=r,At.Profiler=s,At.PureComponent=_,At.StrictMode=i,At.Suspense=h,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,At.__COMPILER_RUNTIME={__proto__:null,c:function(T){return C.H.useMemoCache(T)}},At.cache=function(T){return function(){return T.apply(null,arguments)}},At.cloneElement=function(T,P,A){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var H=y({},T.props),U=T.key,W=void 0;if(P!=null)for(ue in P.ref!==void 0&&(W=void 0),P.key!==void 0&&(U=""+P.key),P)!L.call(P,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&P.ref===void 0||(H[ue]=P[ue]);var ue=arguments.length-2;if(ue===1)H.children=A;else if(1<ue){for(var Ee=Array(ue),be=0;be<ue;be++)Ee[be]=arguments[be+2];H.children=Ee}return B(T.type,U,void 0,void 0,W,H)},At.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},At.createElement=function(T,P,A){var H,U={},W=null;if(P!=null)for(H in P.key!==void 0&&(W=""+P.key),P)L.call(P,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(U[H]=P[H]);var ue=arguments.length-2;if(ue===1)U.children=A;else if(1<ue){for(var Ee=Array(ue),be=0;be<ue;be++)Ee[be]=arguments[be+2];U.children=Ee}if(T&&T.defaultProps)for(H in ue=T.defaultProps,ue)U[H]===void 0&&(U[H]=ue[H]);return B(T,W,void 0,void 0,null,U)},At.createRef=function(){return{current:null}},At.forwardRef=function(T){return{$$typeof:m,render:T}},At.isValidElement=R,At.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:F}},At.memo=function(T,P){return{$$typeof:p,type:T,compare:P===void 0?null:P}},At.startTransition=function(T){var P=C.T,A={};C.T=A;try{var H=T(),U=C.S;U!==null&&U(A,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(z,Y)}catch(W){Y(W)}finally{C.T=P}},At.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},At.use=function(T){return C.H.use(T)},At.useActionState=function(T,P,A){return C.H.useActionState(T,P,A)},At.useCallback=function(T,P){return C.H.useCallback(T,P)},At.useContext=function(T){return C.H.useContext(T)},At.useDebugValue=function(){},At.useDeferredValue=function(T,P){return C.H.useDeferredValue(T,P)},At.useEffect=function(T,P,A){var H=C.H;if(typeof A=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(T,P)},At.useId=function(){return C.H.useId()},At.useImperativeHandle=function(T,P,A){return C.H.useImperativeHandle(T,P,A)},At.useInsertionEffect=function(T,P){return C.H.useInsertionEffect(T,P)},At.useLayoutEffect=function(T,P){return C.H.useLayoutEffect(T,P)},At.useMemo=function(T,P){return C.H.useMemo(T,P)},At.useOptimistic=function(T,P){return C.H.useOptimistic(T,P)},At.useReducer=function(T,P,A){return C.H.useReducer(T,P,A)},At.useRef=function(T){return C.H.useRef(T)},At.useState=function(T){return C.H.useState(T)},At.useSyncExternalStore=function(T,P,A){return C.H.useSyncExternalStore(T,P,A)},At.useTransition=function(){return C.H.useTransition()},At.version="19.1.0",At}var Ny;function Gp(){return Ny||(Ny=1,jm.exports=q_()),jm.exports}var f=Gp();const Rc=qp(f),Cy=H_({__proto__:null,default:Rc},[f]);var _m={exports:{}},yc={},Nm={exports:{}},Cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function G_(){return Ey||(Ey=1,function(e){function t(V,F){var Y=V.length;V.push(F);e:for(;0<Y;){var z=Y-1>>>1,T=V[z];if(0<s(T,F))V[z]=F,V[Y]=T,Y=z;else break e}}function r(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var F=V[0],Y=V.pop();if(Y!==F){V[0]=Y;e:for(var z=0,T=V.length,P=T>>>1;z<P;){var A=2*(z+1)-1,H=V[A],U=A+1,W=V[U];if(0>s(H,Y))U<T&&0>s(W,H)?(V[z]=W,V[U]=Y,z=U):(V[z]=H,V[A]=Y,z=A);else if(U<T&&0>s(W,Y))V[z]=W,V[U]=Y,z=U;else break e}}return F}function s(V,F){var Y=V.sortIndex-F.sortIndex;return Y!==0?Y:V.id-F.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();e.unstable_now=function(){return d.now()-m}}var h=[],p=[],g=1,b=null,w=3,S=!1,y=!1,j=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function O(V){for(var F=r(p);F!==null;){if(F.callback===null)i(p);else if(F.startTime<=V)i(p),F.sortIndex=F.expirationTime,t(h,F);else break;F=r(p)}}function C(V){if(j=!1,O(V),!y)if(r(h)!==null)y=!0,L||(L=!0,xe());else{var F=r(p);F!==null&&se(C,F.startTime-V)}}var L=!1,B=-1,Z=5,R=-1;function X(){return N?!0:!(e.unstable_now()-R<Z)}function te(){if(N=!1,L){var V=e.unstable_now();R=V;var F=!0;try{e:{y=!1,j&&(j=!1,_(B),B=-1),S=!0;var Y=w;try{t:{for(O(V),b=r(h);b!==null&&!(b.expirationTime>V&&X());){var z=b.callback;if(typeof z=="function"){b.callback=null,w=b.priorityLevel;var T=z(b.expirationTime<=V);if(V=e.unstable_now(),typeof T=="function"){b.callback=T,O(V),F=!0;break t}b===r(h)&&i(h),O(V)}else i(h);b=r(h)}if(b!==null)F=!0;else{var P=r(p);P!==null&&se(C,P.startTime-V),F=!1}}break e}finally{b=null,w=Y,S=!1}F=void 0}}finally{F?xe():L=!1}}}var xe;if(typeof M=="function")xe=function(){M(te)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,ve=Pe.port2;Pe.port1.onmessage=te,xe=function(){ve.postMessage(null)}}else xe=function(){E(te,0)};function se(V,F){B=E(function(){V(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(V){switch(w){case 1:case 2:case 3:var F=3;break;default:F=w}var Y=w;w=F;try{return V()}finally{w=Y}},e.unstable_requestPaint=function(){N=!0},e.unstable_runWithPriority=function(V,F){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=w;w=V;try{return F()}finally{w=Y}},e.unstable_scheduleCallback=function(V,F,Y){var z=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?z+Y:z):Y=z,V){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=Y+T,V={id:g++,callback:F,priorityLevel:V,startTime:Y,expirationTime:T,sortIndex:-1},Y>z?(V.sortIndex=Y,t(p,V),r(h)===null&&V===r(p)&&(j?(_(B),B=-1):j=!0,se(C,Y-z))):(V.sortIndex=T,t(h,V),y||S||(y=!0,L||(L=!0,xe()))),V},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(V){var F=w;return function(){var Y=w;w=F;try{return V.apply(this,arguments)}finally{w=Y}}}}(Cm)),Cm}var My;function W_(){return My||(My=1,Nm.exports=G_()),Nm.exports}var Em={exports:{}},jr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function Z_(){if(Oy)return jr;Oy=1;var e=Gp();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function u(h,p,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:h,containerInfo:p,implementation:g}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jr.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(h,p,null,g)},jr.flushSync=function(h){var p=d.T,g=i.p;try{if(d.T=null,i.p=2,h)return h()}finally{d.T=p,i.p=g,i.d.f()}},jr.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(h,p))},jr.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},jr.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,b=m(g,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:S}):g==="script"&&i.d.X(h,{crossOrigin:b,integrity:w,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jr.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=m(p.as,p.crossOrigin);i.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(h)},jr.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,b=m(g,p.crossOrigin);i.d.L(h,g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jr.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=m(p.as,p.crossOrigin);i.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(h)},jr.requestFormReset=function(h){i.d.r(h)},jr.unstable_batchedUpdates=function(h,p){return h(p)},jr.useFormState=function(h,p,g){return d.H.useFormState(h,p,g)},jr.useFormStatus=function(){return d.H.useHostTransitionStatus()},jr.version="19.1.0",jr}var Ly;function $w(){if(Ly)return Em.exports;Ly=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Em.exports=Z_(),Em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function X_(){if(ky)return yc;ky=1;var e=W_(),t=Gp(),r=$w();function i(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var a=n,l=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(l=a.return),n=a.return;while(n)}return a.tag===3?l:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(i(188))}function h(n){var a=n.alternate;if(!a){if(a=u(n),a===null)throw Error(i(188));return a!==n?null:n}for(var l=n,c=a;;){var v=l.return;if(v===null)break;var x=v.alternate;if(x===null){if(c=v.return,c!==null){l=c;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===l)return m(v),n;if(x===c)return m(v),a;x=x.sibling}throw Error(i(188))}if(l.return!==c.return)l=v,c=x;else{for(var k=!1,$=v.child;$;){if($===l){k=!0,l=v,c=x;break}if($===c){k=!0,c=v,l=x;break}$=$.sibling}if(!k){for($=x.child;$;){if($===l){k=!0,l=x,c=v;break}if($===c){k=!0,c=x,l=v;break}$=$.sibling}if(!k)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?n:a}function p(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=p(n),a!==null)return a;n=n.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function xe(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var Pe=Symbol.for("react.client.reference");function ve(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Pe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case y:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case C:return"Suspense";case L:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case M:return(n.displayName||"Context")+".Provider";case _:return(n._context.displayName||"Context")+".Consumer";case O:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return a=n.displayName||null,a!==null?a:ve(n.type)||"Memo";case Z:a=n._payload,n=n._init;try{return ve(n(a))}catch{}}return null}var se=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},z=[],T=-1;function P(n){return{current:n}}function A(n){0>T||(n.current=z[T],z[T]=null,T--)}function H(n,a){T++,z[T]=n.current,n.current=a}var U=P(null),W=P(null),ue=P(null),Ee=P(null);function be(n,a){switch(H(ue,a),H(W,n),H(U,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?Xb(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=Xb(a),n=Kb(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}A(U),H(U,n)}function Be(){A(U),A(W),A(ue)}function Te(n){n.memoizedState!==null&&H(Ee,n);var a=U.current,l=Kb(a,n.type);a!==l&&(H(W,n),H(U,l))}function Ge(n){W.current===n&&(A(U),A(W)),Ee.current===n&&(A(Ee),hc._currentValue=Y)}var ge=Object.prototype.hasOwnProperty,Ke=e.unstable_scheduleCallback,le=e.unstable_cancelCallback,ce=e.unstable_shouldYield,K=e.unstable_requestPaint,Ae=e.unstable_now,Se=e.unstable_getCurrentPriorityLevel,De=e.unstable_ImmediatePriority,Ze=e.unstable_UserBlockingPriority,Ve=e.unstable_NormalPriority,de=e.unstable_LowPriority,I=e.unstable_IdlePriority,oe=e.log,he=e.unstable_setDisableYieldValue,_e=null,ae=null;function fe(n){if(typeof oe=="function"&&he(n),ae&&typeof ae.setStrictMode=="function")try{ae.setStrictMode(_e,n)}catch{}}var ne=Math.clz32?Math.clz32:et,Xe=Math.log,Je=Math.LN2;function et(n){return n>>>=0,n===0?32:31-(Xe(n)/Je|0)|0}var ot=256,wt=4194304;function rt(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function $t(n,a,l){var c=n.pendingLanes;if(c===0)return 0;var v=0,x=n.suspendedLanes,k=n.pingedLanes;n=n.warmLanes;var $=c&134217727;return $!==0?(c=$&~x,c!==0?v=rt(c):(k&=$,k!==0?v=rt(k):l||(l=$&~n,l!==0&&(v=rt(l))))):($=c&~x,$!==0?v=rt($):k!==0?v=rt(k):l||(l=c&~n,l!==0&&(v=rt(l)))),v===0?0:a!==0&&a!==v&&(a&x)===0&&(x=v&-v,l=a&-a,x>=l||x===32&&(l&4194048)!==0)?a:v}function Lt(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Yn(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Un(){var n=ot;return ot<<=1,(ot&4194048)===0&&(ot=256),n}function ea(){var n=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),n}function bt(n){for(var a=[],l=0;31>l;l++)a.push(n);return a}function mt(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gt(n,a,l,c,v,x){var k=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var $=n.entanglements,ie=n.expirationTimes,Ne=n.hiddenUpdates;for(l=k&~l;0<l;){var Ue=31-ne(l),qe=1<<Ue;$[Ue]=0,ie[Ue]=-1;var Me=Ne[Ue];if(Me!==null)for(Ne[Ue]=null,Ue=0;Ue<Me.length;Ue++){var Oe=Me[Ue];Oe!==null&&(Oe.lane&=-536870913)}l&=~qe}c!==0&&Zt(n,c,0),x!==0&&v===0&&n.tag!==0&&(n.suspendedLanes|=x&~(k&~a))}function Zt(n,a,l){n.pendingLanes|=a,n.suspendedLanes&=~a;var c=31-ne(a);n.entangledLanes|=a,n.entanglements[c]=n.entanglements[c]|1073741824|l&4194090}function qn(n,a){var l=n.entangledLanes|=a;for(n=n.entanglements;l;){var c=31-ne(l),v=1<<c;v&a|n[c]&a&&(n[c]|=a),l&=~v}}function Ft(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function jn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function nn(){var n=F.p;return n!==0?n:(n=window.event,n===void 0?32:gy(n.type))}function Qn(n,a){var l=F.p;try{return F.p=n,a()}finally{F.p=l}}var Yt=Math.random().toString(36).slice(2),lt="__reactFiber$"+Yt,An="__reactProps$"+Yt,xn="__reactContainer$"+Yt,kr="__reactEvents$"+Yt,Oa="__reactListeners$"+Yt,Cr="__reactHandles$"+Yt,La="__reactResources$"+Yt,ke="__reactMarker$"+Yt;function nt(n){delete n[lt],delete n[An],delete n[kr],delete n[Oa],delete n[Cr]}function We(n){var a=n[lt];if(a)return a;for(var l=n.parentNode;l;){if(a=l[xn]||l[lt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(n=ty(n);n!==null;){if(l=n[lt])return l;n=ty(n)}return a}n=l,l=n.parentNode}return null}function st(n){if(n=n[lt]||n[xn]){var a=n.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return n}return null}function ze(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(i(33))}function Fe(n){var a=n[La];return a||(a=n[La]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Qe(n){n[ke]=!0}var ut=new Set,ct={};function Xt(n,a){Nn(n,a),Nn(n+"Capture",a)}function Nn(n,a){for(ct[n]=a,n=0;n<a.length;n++)ut.add(a[n])}var wn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),In={},pa={};function vr(n){return ge.call(pa,n)?!0:ge.call(In,n)?!1:wn.test(n)?pa[n]=!0:(In[n]=!0,!1)}function On(n,a,l){if(vr(a))if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+l)}}function Jn(n,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+l)}}function sr(n,a,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(a,l,""+c)}}var hl,Mi;function Ja(n){if(hl===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);hl=a&&a[1]||"",Mi=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hl+n+Mi}var ei=!1;function Js(n,a){if(!n||ei)return"";ei=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var qe=function(){throw Error()};if(Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(Oe){var Me=Oe}Reflect.construct(n,[],qe)}else{try{qe.call()}catch(Oe){Me=Oe}n.call(qe.prototype)}}else{try{throw Error()}catch(Oe){Me=Oe}(qe=n())&&typeof qe.catch=="function"&&qe.catch(function(){})}}catch(Oe){if(Oe&&Me&&typeof Oe.stack=="string")return[Oe.stack,Me.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=c.DetermineComponentFrameRoot(),k=x[0],$=x[1];if(k&&$){var ie=k.split(`
`),Ne=$.split(`
`);for(v=c=0;c<ie.length&&!ie[c].includes("DetermineComponentFrameRoot");)c++;for(;v<Ne.length&&!Ne[v].includes("DetermineComponentFrameRoot");)v++;if(c===ie.length||v===Ne.length)for(c=ie.length-1,v=Ne.length-1;1<=c&&0<=v&&ie[c]!==Ne[v];)v--;for(;1<=c&&0<=v;c--,v--)if(ie[c]!==Ne[v]){if(c!==1||v!==1)do if(c--,v--,0>v||ie[c]!==Ne[v]){var Ue=`
`+ie[c].replace(" at new "," at ");return n.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",n.displayName)),Ue}while(1<=c&&0<=v);break}}}finally{ei=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Ja(l):""}function bs(n){switch(n.tag){case 26:case 27:case 5:return Ja(n.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 15:return Js(n.type,!1);case 11:return Js(n.type.render,!1);case 1:return Js(n.type,!0);case 31:return Ja("Activity");default:return""}}function ml(n){try{var a="";do a+=bs(n),n=n.return;while(n);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function er(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pl(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function eo(n){var a=pl(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),c=""+n[a];if(!n.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,x=l.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return v.call(this)},set:function(k){c=""+k,x.call(this,k)}}),Object.defineProperty(n,a,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(k){c=""+k},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Oi(n){n._valueTracker||(n._valueTracker=eo(n))}function ys(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return n&&(c=pl(n)?n.checked?"true":"false":n.value),n=c,n!==l?(a.setValue(n),!0):!1}function Li(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var iu=/[\n"\\]/g;function Ar(n){return n.replace(iu,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function gl(n,a,l,c,v,x,k,$){n.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.type=k:n.removeAttribute("type"),a!=null?k==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+er(a)):n.value!==""+er(a)&&(n.value=""+er(a)):k!=="submit"&&k!=="reset"||n.removeAttribute("value"),a!=null?vl(n,k,er(a)):l!=null?vl(n,k,er(l)):c!=null&&n.removeAttribute("value"),v==null&&x!=null&&(n.defaultChecked=!!x),v!=null&&(n.checked=v&&typeof v!="function"&&typeof v!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?n.name=""+er($):n.removeAttribute("name")}function su(n,a,l,c,v,x,k,$){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.type=x),a!=null||l!=null){if(!(x!=="submit"&&x!=="reset"||a!=null))return;l=l!=null?""+er(l):"",a=a!=null?""+er(a):l,$||a===n.value||(n.value=a),n.defaultValue=a}c=c??v,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=$?n.checked:!!c,n.defaultChecked=!!c,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(n.name=k)}function vl(n,a,l){a==="number"&&Li(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function ti(n,a,l,c){if(n=n.options,a){a={};for(var v=0;v<l.length;v++)a["$"+l[v]]=!0;for(l=0;l<n.length;l++)v=a.hasOwnProperty("$"+n[l].value),n[l].selected!==v&&(n[l].selected=v),v&&c&&(n[l].defaultSelected=!0)}else{for(l=""+er(l),a=null,v=0;v<n.length;v++){if(n[v].value===l){n[v].selected=!0,c&&(n[v].defaultSelected=!0);return}a!==null||n[v].disabled||(a=n[v])}a!==null&&(a.selected=!0)}}function bl(n,a,l){if(a!=null&&(a=""+er(a),a!==n.value&&(n.value=a),l==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=l!=null?""+er(l):""}function ta(n,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(i(92));if(se(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=er(a),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c)}function Er(n,a){if(a){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=a;return}}n.textContent=a}var Rt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ki(n,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":c?n.setProperty(a,l):typeof l!="number"||l===0||Rt.has(a)?a==="float"?n.cssFloat=l:n[a]=(""+l).trim():n[a]=l+"px"}function yl(n,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var v in a)c=a[v],a.hasOwnProperty(v)&&l[v]!==c&&ki(n,v,c)}else for(var x in a)a.hasOwnProperty(x)&&ki(n,x,a[x])}function ni(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var to=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function na(n){return Tg.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ga=null;function _t(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var br=null,or=null;function ra(n){var a=st(n);if(a&&(n=a.stateNode)){var l=n[An]||null;e:switch(n=a.stateNode,a.type){case"input":if(gl(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ar(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==n&&c.form===n.form){var v=c[An]||null;if(!v)throw Error(i(90));gl(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===n.form&&ys(c)}break e;case"textarea":bl(n,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ti(n,!!l.multiple,a,!1)}}}var Ai=!1;function va(n,a,l){if(Ai)return n(a,l);Ai=!0;try{var c=n(a);return c}finally{if(Ai=!1,(br!==null||or!==null)&&(Xu(),br&&(a=br,n=or,or=br=null,ra(a),n)))for(a=0;a<n.length;a++)ra(n[a])}}function Tn(n,a){var l=n.stateNode;if(l===null)return null;var c=l[An]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(tr)try{var no={};Object.defineProperty(no,"passive",{get:function(){ou=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{ou=!1}var aa=null,xl=null,ro=null;function wl(){if(ro)return ro;var n,a=xl,l=a.length,c,v="value"in aa?aa.value:aa.textContent,x=v.length;for(n=0;n<l&&a[n]===v[n];n++);var k=l-n;for(c=1;c<=k&&a[l-c]===v[x-c];c++);return ro=v.slice(n,1<c?1-c:void 0)}function ao(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function xs(){return!0}function Sl(){return!1}function yr(n){function a(l,c,v,x,k){this._reactName=l,this._targetInst=v,this.type=c,this.nativeEvent=x,this.target=k,this.currentTarget=null;for(var $ in n)n.hasOwnProperty($)&&(l=n[$],this[$]=l?l(x):x[$]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?xs:Sl,this.isPropagationStopped=Sl,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),a}var Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ia=yr(Qt),sn=g({},Qt,{view:0,detail:0}),Mr=yr(sn),jl,ka,Ti,Di=g({},sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ti&&(Ti&&n.type==="mousemove"?(jl=n.screenX-Ti.screenX,ka=n.screenY-Ti.screenY):ka=jl=0,Ti=n),jl)},movementY:function(n){return"movementY"in n?n.movementY:ka}}),_l=yr(Di),Nl=g({},Di,{dataTransfer:0}),$f=yr(Nl),lu=g({},sn,{relatedTarget:0}),io=yr(lu),so=g({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0}),ws=yr(so),ri=g({},Qt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cu=yr(ri),oo=g({},Qt,{data:0}),uu=yr(oo),Uf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ri={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lr(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Ri[n])?!!a[n]:!1}function Ss(){return lr}var If=g({},sn,{key:function(n){if(n.key){var a=Uf[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=ao(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?sa[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(n){return n.type==="keypress"?ao(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ao(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),du=yr(If),Vf=g({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bf=yr(Vf),Dg=g({},sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss}),Hf=yr(Dg),oa=g({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aa=yr(oa),js=g({},Di,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fu=yr(js),Ff=g({},Qt,{newState:0,oldState:0}),_s=yr(Ff),hu=[9,13,27,32],Cl=tr&&"CompositionEvent"in window,Ta=null;tr&&"documentMode"in document&&(Ta=document.documentMode);var Yf=tr&&"TextEvent"in window&&!Ta,mu=tr&&(!Cl||Ta&&8<Ta&&11>=Ta),cr=" ",pu=!1;function gu(n,a){switch(n){case"keyup":return hu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pi=!1;function zi(n,a){switch(n){case"compositionend":return lo(a);case"keypress":return a.which!==32?null:(pu=!0,cr);case"textInput":return n=a.data,n===cr&&pu?null:n;default:return null}}function El(n,a){if(Pi)return n==="compositionend"||!Cl&&gu(n,a)?(n=wl(),ro=xl=aa=null,Pi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return mu&&a.locale!=="ko"?null:a.data;default:return null}}var co={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ml(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!co[n.type]:a==="textarea"}function Ol(n,a,l,c){br?or?or.push(c):or=[c]:br=c,a=nd(a,"onChange"),0<a.length&&(l=new ia("onChange","change",null,l,c),n.push({event:l,listeners:a}))}var Da=null,ba=null;function la(n){Yb(n,0)}function $i(n){var a=ze(n);if(ys(a))return n}function Ll(n,a){if(n==="change")return a}var vu=!1;if(tr){var uo;if(tr){var ya="oninput"in document;if(!ya){var bu=document.createElement("div");bu.setAttribute("oninput","return;"),ya=typeof bu.oninput=="function"}uo=ya}else uo=!1;vu=uo&&(!document.documentMode||9<document.documentMode)}function fo(){Da&&(Da.detachEvent("onpropertychange",yu),ba=Da=null)}function yu(n){if(n.propertyName==="value"&&$i(ba)){var a=[];Ol(a,ba,n,_t(n)),va(la,a)}}function Ra(n,a,l){n==="focusin"?(fo(),Da=a,ba=l,Da.attachEvent("onpropertychange",yu)):n==="focusout"&&fo()}function ho(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $i(ba)}function qf(n,a){if(n==="click")return $i(a)}function Gf(n,a){if(n==="input"||n==="change")return $i(a)}function Wf(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var xr=typeof Object.is=="function"?Object.is:Wf;function Ns(n,a){if(xr(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var l=Object.keys(n),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var v=l[c];if(!ge.call(a,v)||!xr(n[v],a[v]))return!1}return!0}function Zf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xu(n,a){var l=Zf(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=a&&c>=a)return{node:l,offset:a-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zf(l)}}function Cs(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Cs(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function mo(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=Li(n.document);a instanceof n.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)n=a.contentWindow;else break;a=Li(n.document)}return a}function Es(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var wu=tr&&"documentMode"in document&&11>=document.documentMode,Ui=null,po=null,ai=null,ii=!1;function Ms(n,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ii||Ui==null||Ui!==Li(c)||(c=Ui,"selectionStart"in c&&Es(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ai&&Ns(ai,c)||(ai=c,c=nd(po,"onSelect"),0<c.length&&(a=new ia("onSelect","select",null,a,l),n.push({event:a,listeners:c}),a.target=Ui)))}function Tr(n,a){var l={};return l[n.toLowerCase()]=a.toLowerCase(),l["Webkit"+n]="webkit"+a,l["Moz"+n]="moz"+a,l}var Ii={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionrun:Tr("Transition","TransitionRun"),transitionstart:Tr("Transition","TransitionStart"),transitioncancel:Tr("Transition","TransitionCancel"),transitionend:Tr("Transition","TransitionEnd")},kl={},Su={};tr&&(Su=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function si(n){if(kl[n])return kl[n];if(!Ii[n])return n;var a=Ii[n],l;for(l in a)if(a.hasOwnProperty(l)&&l in Su)return kl[n]=a[l];return n}var go=si("animationend"),Al=si("animationiteration"),Tl=si("animationstart"),D=si("transitionrun"),G=si("transitionstart"),Q=si("transitioncancel"),J=si("transitionend"),q=new Map,ee="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ee.push("scrollEnd");function re(n,a){q.set(n,a),Xt(a,[n])}var we=new WeakMap;function Ie(n,a){if(typeof n=="object"&&n!==null){var l=we.get(n);return l!==void 0?l:(a={value:n,source:a,stack:ml(a)},we.set(n,a),a)}return{value:n,source:a,stack:ml(a)}}var pe=[],Ce=0,$e=0;function pt(){for(var n=Ce,a=$e=Ce=0;a<n;){var l=pe[a];pe[a++]=null;var c=pe[a];pe[a++]=null;var v=pe[a];pe[a++]=null;var x=pe[a];if(pe[a++]=null,c!==null&&v!==null){var k=c.pending;k===null?v.next=v:(v.next=k.next,k.next=v),c.pending=v}x!==0&&qt(l,v,x)}}function yt(n,a,l,c){pe[Ce++]=n,pe[Ce++]=a,pe[Ce++]=l,pe[Ce++]=c,$e|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function vn(n,a,l,c){return yt(n,a,l,c),Ot(n)}function on(n,a){return yt(n,null,null,a),Ot(n)}function qt(n,a,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var v=!1,x=n.return;x!==null;)x.childLanes|=l,c=x.alternate,c!==null&&(c.childLanes|=l),x.tag===22&&(n=x.stateNode,n===null||n._visibility&1||(v=!0)),n=x,x=x.return;return n.tag===3?(x=n.stateNode,v&&a!==null&&(v=31-ne(l),n=x.hiddenUpdates,c=n[v],c===null?n[v]=[a]:c.push(a),a.lane=l|536870912),x):null}function Ot(n){if(50<ic)throw ic=0,qh=null,Error(i(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var tt={};function at(n,a,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(n,a,l,c){return new at(n,a,l,c)}function ln(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nr(n,a){var l=n.alternate;return l===null?(l=Ye(n.tag,a,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=a,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,a=n.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Pa(n,a){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,a=l.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function ur(n,a,l,c,v,x){var k=0;if(c=n,typeof n=="function")ln(n)&&(k=1);else if(typeof n=="string")k=L_(n,l,U.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=Ye(31,l,a,v),n.elementType=R,n.lanes=x,n;case y:return Dr(l.children,v,x,a);case j:k=8,v|=24;break;case N:return n=Ye(12,l,a,v|2),n.elementType=N,n.lanes=x,n;case C:return n=Ye(13,l,a,v),n.elementType=C,n.lanes=x,n;case L:return n=Ye(19,l,a,v),n.elementType=L,n.lanes=x,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case E:case M:k=10;break e;case _:k=9;break e;case O:k=11;break e;case B:k=14;break e;case Z:k=16,c=null;break e}k=29,l=Error(i(130,n===null?"null":typeof n,"")),c=null}return a=Ye(k,l,a,v),a.elementType=n,a.type=c,a.lanes=x,a}function Dr(n,a,l,c){return n=Ye(7,n,c,a),n.lanes=l,n}function oi(n,a,l){return n=Ye(6,n,null,a),n.lanes=l,n}function Dl(n,a,l){return a=Ye(4,n.children!==null?n.children:[],n.key,a),a.lanes=l,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Br=[],li=0,vo=null,Os=0,it=[],Gt=0,bn=null,cn=1,Ln="";function Hr(n,a){Br[li++]=Os,Br[li++]=vo,vo=n,Os=a}function Or(n,a,l){it[Gt++]=cn,it[Gt++]=Ln,it[Gt++]=bn,bn=n;var c=cn;n=Ln;var v=32-ne(c)-1;c&=~(1<<v),l+=1;var x=32-ne(a)+v;if(30<x){var k=v-v%5;x=(c&(1<<k)-1).toString(32),c>>=k,v-=k,cn=1<<32-ne(a)+v|l<<v|c,Ln=x+n}else cn=1<<x|l<<v|c,Ln=n}function Rl(n){n.return!==null&&(Hr(n,1),Or(n,1,0))}function bo(n){for(;n===vo;)vo=Br[--li],Br[li]=null,Os=Br[--li],Br[li]=null;for(;n===bn;)bn=it[--Gt],it[Gt]=null,Ln=it[--Gt],it[Gt]=null,cn=it[--Gt],it[Gt]=null}var Dn=null,_n=null,Kt=!1,za=null,Fr=!1,$a=Error(i(519));function xa(n){var a=Error(i(418,""));throw Ls(Ie(a,n)),$a}function Vi(n){var a=n.stateNode,l=n.type,c=n.memoizedProps;switch(a[lt]=n,a[An]=c,l){case"dialog":Bt("cancel",a),Bt("close",a);break;case"iframe":case"object":case"embed":Bt("load",a);break;case"video":case"audio":for(l=0;l<oc.length;l++)Bt(oc[l],a);break;case"source":Bt("error",a);break;case"img":case"image":case"link":Bt("error",a),Bt("load",a);break;case"details":Bt("toggle",a);break;case"input":Bt("invalid",a),su(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Oi(a);break;case"select":Bt("invalid",a);break;case"textarea":Bt("invalid",a),ta(a,c.value,c.defaultValue,c.children),Oi(a)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||Zb(a.textContent,l)?(c.popover!=null&&(Bt("beforetoggle",a),Bt("toggle",a)),c.onScroll!=null&&Bt("scroll",a),c.onScrollEnd!=null&&Bt("scrollend",a),c.onClick!=null&&(a.onclick=rd),a=!0):a=!1,a||xa(n)}function yo(n){for(Dn=n.return;Dn;)switch(Dn.tag){case 5:case 13:Fr=!1;return;case 27:case 3:Fr=!0;return;default:Dn=Dn.return}}function wa(n){if(n!==Dn)return!1;if(!Kt)return yo(n),Kt=!0,!1;var a=n.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||lm(n.type,n.memoizedProps)),l=!l),l&&_n&&xa(n),yo(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8)if(l=n.data,l==="/$"){if(a===0){_n=_a(n.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;n=n.nextSibling}_n=null}}else a===27?(a=_n,ns(n.type)?(n=fm,fm=null,_n=n):_n=a):_n=Dn?_a(n.stateNode.nextSibling):null;return!0}function Vn(){_n=Dn=null,Kt=!1}function Pl(){var n=za;return n!==null&&($r===null?$r=n:$r.push.apply($r,n),za=null),n}function Ls(n){za===null?za=[n]:za.push(n)}var xo=P(null),Dt=null,wr=null;function Rr(n,a,l){H(xo,a._currentValue),a._currentValue=l}function Sa(n){n._currentValue=xo.current,A(xo)}function ju(n,a,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),n===l)break;n=n.return}}function zl(n,a,l,c){var v=n.child;for(v!==null&&(v.return=n);v!==null;){var x=v.dependencies;if(x!==null){var k=v.child;x=x.firstContext;e:for(;x!==null;){var $=x;x=v;for(var ie=0;ie<a.length;ie++)if($.context===a[ie]){x.lanes|=l,$=x.alternate,$!==null&&($.lanes|=l),ju(x.return,l,n),c||(k=null);break e}x=$.next}}else if(v.tag===18){if(k=v.return,k===null)throw Error(i(341));k.lanes|=l,x=k.alternate,x!==null&&(x.lanes|=l),ju(k,l,n),k=null}else k=v.child;if(k!==null)k.return=v;else for(k=v;k!==null;){if(k===n){k=null;break}if(v=k.sibling,v!==null){v.return=k.return,k=v;break}k=k.return}v=k}}function $l(n,a,l,c){n=null;for(var v=a,x=!1;v!==null;){if(!x){if((v.flags&524288)!==0)x=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var k=v.alternate;if(k===null)throw Error(i(387));if(k=k.memoizedProps,k!==null){var $=v.type;xr(v.pendingProps.value,k.value)||(n!==null?n.push($):n=[$])}}else if(v===Ee.current){if(k=v.alternate,k===null)throw Error(i(387));k.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(n!==null?n.push(hc):n=[hc])}v=v.return}n!==null&&zl(a,n,l,c),a.flags|=262144}function _u(n){for(n=n.firstContext;n!==null;){if(!xr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ks(n){Dt=n,wr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Sr(n){return Rg(Dt,n)}function Nu(n,a){return Dt===null&&ks(n),Rg(n,a)}function Rg(n,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},wr===null){if(n===null)throw Error(i(308));wr=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else wr=wr.next=a;return l}var O1=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){a.aborted=!0,n.forEach(function(l){return l()})}},L1=e.unstable_scheduleCallback,k1=e.unstable_NormalPriority,Gn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new O1,data:new Map,refCount:0}}function Ul(n){n.refCount--,n.refCount===0&&L1(k1,function(){n.controller.abort()})}var Il=null,Kf=0,wo=0,So=null;function A1(n,a){if(Il===null){var l=Il=[];Kf=0,wo=Jh(),So={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Kf++,a.then(Pg,Pg),a}function Pg(){if(--Kf===0&&Il!==null){So!==null&&(So.status="fulfilled");var n=Il;Il=null,wo=0,So=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function T1(n,a){var l=[],c={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return n.then(function(){c.status="fulfilled",c.value=a;for(var v=0;v<l.length;v++)(0,l[v])(a)},function(v){for(c.status="rejected",c.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),c}var zg=V.S;V.S=function(n,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&A1(n,a),zg!==null&&zg(n,a)};var As=P(null);function Qf(){var n=As.current;return n!==null?n:Sn.pooledCache}function Cu(n,a){a===null?H(As,As.current):H(As,a.pool)}function $g(){var n=Qf();return n===null?null:{parent:Gn._currentValue,pool:n}}var Vl=Error(i(460)),Ug=Error(i(474)),Eu=Error(i(542)),Jf={then:function(){}};function Ig(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Mu(){}function Vg(n,a,l){switch(l=n[l],l===void 0?n.push(a):l!==a&&(a.then(Mu,Mu),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Hg(n),n;default:if(typeof a.status=="string")a.then(Mu,Mu);else{if(n=Sn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=a,n.status="pending",n.then(function(c){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=c}},function(c){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Hg(n),n}throw Bl=a,Vl}}var Bl=null;function Bg(){if(Bl===null)throw Error(i(459));var n=Bl;return Bl=null,n}function Hg(n){if(n===Vl||n===Eu)throw Error(i(483))}var Bi=!1;function eh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function th(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Hi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Fi(n,a,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(dn&2)!==0){var v=c.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),c.pending=a,a=Ot(n),qt(n,null,l),a}return yt(n,c,a,l),Ot(n)}function Hl(n,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=n.pendingLanes,l|=c,a.lanes=l,qn(n,l)}}function nh(n,a){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var v=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var k={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};x===null?v=x=k:x=x.next=k,l=l.next}while(l!==null);x===null?v=x=a:x=x.next=a}else v=x=a;l={baseState:c.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=a:n.next=a,l.lastBaseUpdate=a}var rh=!1;function Fl(){if(rh){var n=So;if(n!==null)throw n}}function Yl(n,a,l,c){rh=!1;var v=n.updateQueue;Bi=!1;var x=v.firstBaseUpdate,k=v.lastBaseUpdate,$=v.shared.pending;if($!==null){v.shared.pending=null;var ie=$,Ne=ie.next;ie.next=null,k===null?x=Ne:k.next=Ne,k=ie;var Ue=n.alternate;Ue!==null&&(Ue=Ue.updateQueue,$=Ue.lastBaseUpdate,$!==k&&($===null?Ue.firstBaseUpdate=Ne:$.next=Ne,Ue.lastBaseUpdate=ie))}if(x!==null){var qe=v.baseState;k=0,Ue=Ne=ie=null,$=x;do{var Me=$.lane&-536870913,Oe=Me!==$.lane;if(Oe?(Wt&Me)===Me:(c&Me)===Me){Me!==0&&Me===wo&&(rh=!0),Ue!==null&&(Ue=Ue.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var Mt=n,Nt=$;Me=a;var gn=l;switch(Nt.tag){case 1:if(Mt=Nt.payload,typeof Mt=="function"){qe=Mt.call(gn,qe,Me);break e}qe=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Nt.payload,Me=typeof Mt=="function"?Mt.call(gn,qe,Me):Mt,Me==null)break e;qe=g({},qe,Me);break e;case 2:Bi=!0}}Me=$.callback,Me!==null&&(n.flags|=64,Oe&&(n.flags|=8192),Oe=v.callbacks,Oe===null?v.callbacks=[Me]:Oe.push(Me))}else Oe={lane:Me,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ue===null?(Ne=Ue=Oe,ie=qe):Ue=Ue.next=Oe,k|=Me;if($=$.next,$===null){if($=v.shared.pending,$===null)break;Oe=$,$=Oe.next,Oe.next=null,v.lastBaseUpdate=Oe,v.shared.pending=null}}while(!0);Ue===null&&(ie=qe),v.baseState=ie,v.firstBaseUpdate=Ne,v.lastBaseUpdate=Ue,x===null&&(v.shared.lanes=0),Qi|=k,n.lanes=k,n.memoizedState=qe}}function Fg(n,a){if(typeof n!="function")throw Error(i(191,n));n.call(a)}function Yg(n,a){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Fg(l[n],a)}var jo=P(null),Ou=P(0);function qg(n,a){n=pi,H(Ou,n),H(jo,a),pi=n|a.baseLanes}function ah(){H(Ou,pi),H(jo,jo.current)}function ih(){pi=Ou.current,A(jo),A(Ou)}var Yi=0,Pt=null,mn=null,Bn=null,Lu=!1,_o=!1,Ts=!1,ku=0,ql=0,No=null,D1=0;function zn(){throw Error(i(321))}function sh(n,a){if(a===null)return!1;for(var l=0;l<a.length&&l<n.length;l++)if(!xr(n[l],a[l]))return!1;return!0}function oh(n,a,l,c,v,x){return Yi=x,Pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,V.H=n===null||n.memoizedState===null?Ov:Lv,Ts=!1,x=l(c,v),Ts=!1,_o&&(x=Wg(a,l,c,v)),Gg(n),x}function Gg(n){V.H=zu;var a=mn!==null&&mn.next!==null;if(Yi=0,Bn=mn=Pt=null,Lu=!1,ql=0,No=null,a)throw Error(i(300));n===null||rr||(n=n.dependencies,n!==null&&_u(n)&&(rr=!0))}function Wg(n,a,l,c){Pt=n;var v=0;do{if(_o&&(No=null),ql=0,_o=!1,25<=v)throw Error(i(301));if(v+=1,Bn=mn=null,n.updateQueue!=null){var x=n.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}V.H=V1,x=a(l,c)}while(_o);return x}function R1(){var n=V.H,a=n.useState()[0];return a=typeof a.then=="function"?Gl(a):a,n=n.useState()[0],(mn!==null?mn.memoizedState:null)!==n&&(Pt.flags|=1024),a}function lh(){var n=ku!==0;return ku=0,n}function ch(n,a,l){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~l}function uh(n){if(Lu){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Lu=!1}Yi=0,Bn=mn=Pt=null,_o=!1,ql=ku=0,No=null}function Pr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?Pt.memoizedState=Bn=n:Bn=Bn.next=n,Bn}function Hn(){if(mn===null){var n=Pt.alternate;n=n!==null?n.memoizedState:null}else n=mn.next;var a=Bn===null?Pt.memoizedState:Bn.next;if(a!==null)Bn=a,mn=n;else{if(n===null)throw Pt.alternate===null?Error(i(467)):Error(i(310));mn=n,n={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Bn===null?Pt.memoizedState=Bn=n:Bn=Bn.next=n}return Bn}function dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(n){var a=ql;return ql+=1,No===null&&(No=[]),n=Vg(No,n,a),a=Pt,(Bn===null?a.memoizedState:Bn.next)===null&&(a=a.alternate,V.H=a===null||a.memoizedState===null?Ov:Lv),n}function Au(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Gl(n);if(n.$$typeof===M)return Sr(n)}throw Error(i(438,String(n)))}function fh(n){var a=null,l=Pt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=Pt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=dh(),Pt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(n),c=0;c<n;c++)l[c]=X;return a.index++,l}function ci(n,a){return typeof a=="function"?a(n):a}function Tu(n){var a=Hn();return hh(a,mn,n)}function hh(n,a,l){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var v=n.baseQueue,x=c.pending;if(x!==null){if(v!==null){var k=v.next;v.next=x.next,x.next=k}a.baseQueue=v=x,c.pending=null}if(x=n.baseState,v===null)n.memoizedState=x;else{a=v.next;var $=k=null,ie=null,Ne=a,Ue=!1;do{var qe=Ne.lane&-536870913;if(qe!==Ne.lane?(Wt&qe)===qe:(Yi&qe)===qe){var Me=Ne.revertLane;if(Me===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),qe===wo&&(Ue=!0);else if((Yi&Me)===Me){Ne=Ne.next,Me===wo&&(Ue=!0);continue}else qe={lane:0,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},ie===null?($=ie=qe,k=x):ie=ie.next=qe,Pt.lanes|=Me,Qi|=Me;qe=Ne.action,Ts&&l(x,qe),x=Ne.hasEagerState?Ne.eagerState:l(x,qe)}else Me={lane:qe,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},ie===null?($=ie=Me,k=x):ie=ie.next=Me,Pt.lanes|=qe,Qi|=qe;Ne=Ne.next}while(Ne!==null&&Ne!==a);if(ie===null?k=x:ie.next=$,!xr(x,n.memoizedState)&&(rr=!0,Ue&&(l=So,l!==null)))throw l;n.memoizedState=x,n.baseState=k,n.baseQueue=ie,c.lastRenderedState=x}return v===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function mh(n){var a=Hn(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=n;var c=l.dispatch,v=l.pending,x=a.memoizedState;if(v!==null){l.pending=null;var k=v=v.next;do x=n(x,k.action),k=k.next;while(k!==v);xr(x,a.memoizedState)||(rr=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),l.lastRenderedState=x}return[x,c]}function Zg(n,a,l){var c=Pt,v=Hn(),x=Kt;if(x){if(l===void 0)throw Error(i(407));l=l()}else l=a();var k=!xr((mn||v).memoizedState,l);k&&(v.memoizedState=l,rr=!0),v=v.queue;var $=Qg.bind(null,c,v,n);if(Wl(2048,8,$,[n]),v.getSnapshot!==a||k||Bn!==null&&Bn.memoizedState.tag&1){if(c.flags|=2048,Co(9,Du(),Kg.bind(null,c,v,l,a),null),Sn===null)throw Error(i(349));x||(Yi&124)!==0||Xg(c,a,l)}return l}function Xg(n,a,l){n.flags|=16384,n={getSnapshot:a,value:l},a=Pt.updateQueue,a===null?(a=dh(),Pt.updateQueue=a,a.stores=[n]):(l=a.stores,l===null?a.stores=[n]:l.push(n))}function Kg(n,a,l,c){a.value=l,a.getSnapshot=c,Jg(a)&&ev(n)}function Qg(n,a,l){return l(function(){Jg(a)&&ev(n)})}function Jg(n){var a=n.getSnapshot;n=n.value;try{var l=a();return!xr(n,l)}catch{return!0}}function ev(n){var a=on(n,2);a!==null&&Zr(a,n,2)}function ph(n){var a=Pr();if(typeof n=="function"){var l=n;if(n=l(),Ts){fe(!0);try{l()}finally{fe(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:n},a}function tv(n,a,l,c){return n.baseState=l,hh(n,mn,typeof c=="function"?c:ci)}function P1(n,a,l,c,v){if(Pu(n))throw Error(i(485));if(n=a.action,n!==null){var x={payload:v,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){x.listeners.push(k)}};V.T!==null?l(!0):x.isTransition=!1,c(x),l=a.pending,l===null?(x.next=a.pending=x,nv(a,x)):(x.next=l.next,a.pending=l.next=x)}}function nv(n,a){var l=a.action,c=a.payload,v=n.state;if(a.isTransition){var x=V.T,k={};V.T=k;try{var $=l(v,c),ie=V.S;ie!==null&&ie(k,$),rv(n,a,$)}catch(Ne){gh(n,a,Ne)}finally{V.T=x}}else try{x=l(v,c),rv(n,a,x)}catch(Ne){gh(n,a,Ne)}}function rv(n,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){av(n,a,c)},function(c){return gh(n,a,c)}):av(n,a,l)}function av(n,a,l){a.status="fulfilled",a.value=l,iv(a),n.state=l,a=n.pending,a!==null&&(l=a.next,l===a?n.pending=null:(l=l.next,a.next=l,nv(n,l)))}function gh(n,a,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,iv(a),a=a.next;while(a!==c)}n.action=null}function iv(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function sv(n,a){return a}function ov(n,a){if(Kt){var l=Sn.formState;if(l!==null){e:{var c=Pt;if(Kt){if(_n){t:{for(var v=_n,x=Fr;v.nodeType!==8;){if(!x){v=null;break t}if(v=_a(v.nextSibling),v===null){v=null;break t}}x=v.data,v=x==="F!"||x==="F"?v:null}if(v){_n=_a(v.nextSibling),c=v.data==="F!";break e}}xa(c)}c=!1}c&&(a=l[0])}}return l=Pr(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sv,lastRenderedState:a},l.queue=c,l=Cv.bind(null,Pt,c),c.dispatch=l,c=ph(!1),x=wh.bind(null,Pt,!1,c.queue),c=Pr(),v={state:a,dispatch:null,action:n,pending:null},c.queue=v,l=P1.bind(null,Pt,v,x,l),v.dispatch=l,c.memoizedState=n,[a,l,!1]}function lv(n){var a=Hn();return cv(a,mn,n)}function cv(n,a,l){if(a=hh(n,a,sv)[0],n=Tu(ci)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=Gl(a)}catch(k){throw k===Vl?Eu:k}else c=a;a=Hn();var v=a.queue,x=v.dispatch;return l!==a.memoizedState&&(Pt.flags|=2048,Co(9,Du(),z1.bind(null,v,l),null)),[c,x,n]}function z1(n,a){n.action=a}function uv(n){var a=Hn(),l=mn;if(l!==null)return cv(a,l,n);Hn(),a=a.memoizedState,l=Hn();var c=l.queue.dispatch;return l.memoizedState=n,[a,c,!1]}function Co(n,a,l,c){return n={tag:n,create:l,deps:c,inst:a,next:null},a=Pt.updateQueue,a===null&&(a=dh(),Pt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,a.lastEffect=n),n}function Du(){return{destroy:void 0,resource:void 0}}function dv(){return Hn().memoizedState}function Ru(n,a,l,c){var v=Pr();c=c===void 0?null:c,Pt.flags|=n,v.memoizedState=Co(1|a,Du(),l,c)}function Wl(n,a,l,c){var v=Hn();c=c===void 0?null:c;var x=v.memoizedState.inst;mn!==null&&c!==null&&sh(c,mn.memoizedState.deps)?v.memoizedState=Co(a,x,l,c):(Pt.flags|=n,v.memoizedState=Co(1|a,x,l,c))}function fv(n,a){Ru(8390656,8,n,a)}function hv(n,a){Wl(2048,8,n,a)}function mv(n,a){return Wl(4,2,n,a)}function pv(n,a){return Wl(4,4,n,a)}function gv(n,a){if(typeof a=="function"){n=n();var l=a(n);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function vv(n,a,l){l=l!=null?l.concat([n]):null,Wl(4,4,gv.bind(null,a,n),l)}function vh(){}function bv(n,a){var l=Hn();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&sh(a,c[1])?c[0]:(l.memoizedState=[n,a],n)}function yv(n,a){var l=Hn();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&sh(a,c[1]))return c[0];if(c=n(),Ts){fe(!0);try{n()}finally{fe(!1)}}return l.memoizedState=[c,a],c}function bh(n,a,l){return l===void 0||(Yi&1073741824)!==0?n.memoizedState=a:(n.memoizedState=l,n=Sb(),Pt.lanes|=n,Qi|=n,l)}function xv(n,a,l,c){return xr(l,a)?l:jo.current!==null?(n=bh(n,l,c),xr(n,a)||(rr=!0),n):(Yi&42)===0?(rr=!0,n.memoizedState=l):(n=Sb(),Pt.lanes|=n,Qi|=n,a)}function wv(n,a,l,c,v){var x=F.p;F.p=x!==0&&8>x?x:8;var k=V.T,$={};V.T=$,wh(n,!1,a,l);try{var ie=v(),Ne=V.S;if(Ne!==null&&Ne($,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Ue=T1(ie,c);Zl(n,a,Ue,Wr(n))}else Zl(n,a,c,Wr(n))}catch(qe){Zl(n,a,{then:function(){},status:"rejected",reason:qe},Wr())}finally{F.p=x,V.T=k}}function $1(){}function yh(n,a,l,c){if(n.tag!==5)throw Error(i(476));var v=Sv(n).queue;wv(n,v,a,Y,l===null?$1:function(){return jv(n),l(c)})}function Sv(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:Y},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:l},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function jv(n){var a=Sv(n).next.queue;Zl(n,a,{},Wr())}function xh(){return Sr(hc)}function _v(){return Hn().memoizedState}function Nv(){return Hn().memoizedState}function U1(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var l=Wr();n=Hi(l);var c=Fi(a,n,l);c!==null&&(Zr(c,a,l),Hl(c,a,l)),a={cache:Xf()},n.payload=a;return}a=a.return}}function I1(n,a,l){var c=Wr();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Pu(n)?Ev(a,l):(l=vn(n,a,l,c),l!==null&&(Zr(l,n,c),Mv(l,a,c)))}function Cv(n,a,l){var c=Wr();Zl(n,a,l,c)}function Zl(n,a,l,c){var v={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Pu(n))Ev(a,v);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var k=a.lastRenderedState,$=x(k,l);if(v.hasEagerState=!0,v.eagerState=$,xr($,k))return yt(n,a,v,0),Sn===null&&pt(),!1}catch{}finally{}if(l=vn(n,a,v,c),l!==null)return Zr(l,n,c),Mv(l,a,c),!0}return!1}function wh(n,a,l,c){if(c={lane:2,revertLane:Jh(),action:c,hasEagerState:!1,eagerState:null,next:null},Pu(n)){if(a)throw Error(i(479))}else a=vn(n,l,c,2),a!==null&&Zr(a,n,2)}function Pu(n){var a=n.alternate;return n===Pt||a!==null&&a===Pt}function Ev(n,a){_o=Lu=!0;var l=n.pending;l===null?a.next=a:(a.next=l.next,l.next=a),n.pending=a}function Mv(n,a,l){if((l&4194048)!==0){var c=a.lanes;c&=n.pendingLanes,l|=c,a.lanes=l,qn(n,l)}}var zu={readContext:Sr,use:Au,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useLayoutEffect:zn,useInsertionEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useSyncExternalStore:zn,useId:zn,useHostTransitionStatus:zn,useFormState:zn,useActionState:zn,useOptimistic:zn,useMemoCache:zn,useCacheRefresh:zn},Ov={readContext:Sr,use:Au,useCallback:function(n,a){return Pr().memoizedState=[n,a===void 0?null:a],n},useContext:Sr,useEffect:fv,useImperativeHandle:function(n,a,l){l=l!=null?l.concat([n]):null,Ru(4194308,4,gv.bind(null,a,n),l)},useLayoutEffect:function(n,a){return Ru(4194308,4,n,a)},useInsertionEffect:function(n,a){Ru(4,2,n,a)},useMemo:function(n,a){var l=Pr();a=a===void 0?null:a;var c=n();if(Ts){fe(!0);try{n()}finally{fe(!1)}}return l.memoizedState=[c,a],c},useReducer:function(n,a,l){var c=Pr();if(l!==void 0){var v=l(a);if(Ts){fe(!0);try{l(a)}finally{fe(!1)}}}else v=a;return c.memoizedState=c.baseState=v,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:v},c.queue=n,n=n.dispatch=I1.bind(null,Pt,n),[c.memoizedState,n]},useRef:function(n){var a=Pr();return n={current:n},a.memoizedState=n},useState:function(n){n=ph(n);var a=n.queue,l=Cv.bind(null,Pt,a);return a.dispatch=l,[n.memoizedState,l]},useDebugValue:vh,useDeferredValue:function(n,a){var l=Pr();return bh(l,n,a)},useTransition:function(){var n=ph(!1);return n=wv.bind(null,Pt,n.queue,!0,!1),Pr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,l){var c=Pt,v=Pr();if(Kt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),Sn===null)throw Error(i(349));(Wt&124)!==0||Xg(c,a,l)}v.memoizedState=l;var x={value:l,getSnapshot:a};return v.queue=x,fv(Qg.bind(null,c,x,n),[n]),c.flags|=2048,Co(9,Du(),Kg.bind(null,c,x,l,a),null),l},useId:function(){var n=Pr(),a=Sn.identifierPrefix;if(Kt){var l=Ln,c=cn;l=(c&~(1<<32-ne(c)-1)).toString(32)+l,a=""+a+"R"+l,l=ku++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=D1++,a=""+a+"r"+l.toString(32)+"";return n.memoizedState=a},useHostTransitionStatus:xh,useFormState:ov,useActionState:ov,useOptimistic:function(n){var a=Pr();a.memoizedState=a.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=wh.bind(null,Pt,!0,l),l.dispatch=a,[n,a]},useMemoCache:fh,useCacheRefresh:function(){return Pr().memoizedState=U1.bind(null,Pt)}},Lv={readContext:Sr,use:Au,useCallback:bv,useContext:Sr,useEffect:hv,useImperativeHandle:vv,useInsertionEffect:mv,useLayoutEffect:pv,useMemo:yv,useReducer:Tu,useRef:dv,useState:function(){return Tu(ci)},useDebugValue:vh,useDeferredValue:function(n,a){var l=Hn();return xv(l,mn.memoizedState,n,a)},useTransition:function(){var n=Tu(ci)[0],a=Hn().memoizedState;return[typeof n=="boolean"?n:Gl(n),a]},useSyncExternalStore:Zg,useId:_v,useHostTransitionStatus:xh,useFormState:lv,useActionState:lv,useOptimistic:function(n,a){var l=Hn();return tv(l,mn,n,a)},useMemoCache:fh,useCacheRefresh:Nv},V1={readContext:Sr,use:Au,useCallback:bv,useContext:Sr,useEffect:hv,useImperativeHandle:vv,useInsertionEffect:mv,useLayoutEffect:pv,useMemo:yv,useReducer:mh,useRef:dv,useState:function(){return mh(ci)},useDebugValue:vh,useDeferredValue:function(n,a){var l=Hn();return mn===null?bh(l,n,a):xv(l,mn.memoizedState,n,a)},useTransition:function(){var n=mh(ci)[0],a=Hn().memoizedState;return[typeof n=="boolean"?n:Gl(n),a]},useSyncExternalStore:Zg,useId:_v,useHostTransitionStatus:xh,useFormState:uv,useActionState:uv,useOptimistic:function(n,a){var l=Hn();return mn!==null?tv(l,mn,n,a):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:fh,useCacheRefresh:Nv},Eo=null,Xl=0;function $u(n){var a=Xl;return Xl+=1,Eo===null&&(Eo=[]),Vg(Eo,n,a)}function Kl(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Uu(n,a){throw a.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(a),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function kv(n){var a=n._init;return a(n._payload)}function Av(n){function a(ye,me){if(n){var je=ye.deletions;je===null?(ye.deletions=[me],ye.flags|=16):je.push(me)}}function l(ye,me){if(!n)return null;for(;me!==null;)a(ye,me),me=me.sibling;return null}function c(ye){for(var me=new Map;ye!==null;)ye.key!==null?me.set(ye.key,ye):me.set(ye.index,ye),ye=ye.sibling;return me}function v(ye,me){return ye=nr(ye,me),ye.index=0,ye.sibling=null,ye}function x(ye,me,je){return ye.index=je,n?(je=ye.alternate,je!==null?(je=je.index,je<me?(ye.flags|=67108866,me):je):(ye.flags|=67108866,me)):(ye.flags|=1048576,me)}function k(ye){return n&&ye.alternate===null&&(ye.flags|=67108866),ye}function $(ye,me,je,He){return me===null||me.tag!==6?(me=oi(je,ye.mode,He),me.return=ye,me):(me=v(me,je),me.return=ye,me)}function ie(ye,me,je,He){var dt=je.type;return dt===y?Ue(ye,me,je.props.children,He,je.key):me!==null&&(me.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Z&&kv(dt)===me.type)?(me=v(me,je.props),Kl(me,je),me.return=ye,me):(me=ur(je.type,je.key,je.props,null,ye.mode,He),Kl(me,je),me.return=ye,me)}function Ne(ye,me,je,He){return me===null||me.tag!==4||me.stateNode.containerInfo!==je.containerInfo||me.stateNode.implementation!==je.implementation?(me=Dl(je,ye.mode,He),me.return=ye,me):(me=v(me,je.children||[]),me.return=ye,me)}function Ue(ye,me,je,He,dt){return me===null||me.tag!==7?(me=Dr(je,ye.mode,He,dt),me.return=ye,me):(me=v(me,je),me.return=ye,me)}function qe(ye,me,je){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=oi(""+me,ye.mode,je),me.return=ye,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return je=ur(me.type,me.key,me.props,null,ye.mode,je),Kl(je,me),je.return=ye,je;case S:return me=Dl(me,ye.mode,je),me.return=ye,me;case Z:var He=me._init;return me=He(me._payload),qe(ye,me,je)}if(se(me)||xe(me))return me=Dr(me,ye.mode,je,null),me.return=ye,me;if(typeof me.then=="function")return qe(ye,$u(me),je);if(me.$$typeof===M)return qe(ye,Nu(ye,me),je);Uu(ye,me)}return null}function Me(ye,me,je,He){var dt=me!==null?me.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return dt!==null?null:$(ye,me,""+je,He);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case w:return je.key===dt?ie(ye,me,je,He):null;case S:return je.key===dt?Ne(ye,me,je,He):null;case Z:return dt=je._init,je=dt(je._payload),Me(ye,me,je,He)}if(se(je)||xe(je))return dt!==null?null:Ue(ye,me,je,He,null);if(typeof je.then=="function")return Me(ye,me,$u(je),He);if(je.$$typeof===M)return Me(ye,me,Nu(ye,je),He);Uu(ye,je)}return null}function Oe(ye,me,je,He,dt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return ye=ye.get(je)||null,$(me,ye,""+He,dt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case w:return ye=ye.get(He.key===null?je:He.key)||null,ie(me,ye,He,dt);case S:return ye=ye.get(He.key===null?je:He.key)||null,Ne(me,ye,He,dt);case Z:var Ut=He._init;return He=Ut(He._payload),Oe(ye,me,je,He,dt)}if(se(He)||xe(He))return ye=ye.get(je)||null,Ue(me,ye,He,dt,null);if(typeof He.then=="function")return Oe(ye,me,je,$u(He),dt);if(He.$$typeof===M)return Oe(ye,me,je,Nu(me,He),dt);Uu(me,He)}return null}function Mt(ye,me,je,He){for(var dt=null,Ut=null,xt=me,Ct=me=0,ir=null;xt!==null&&Ct<je.length;Ct++){xt.index>Ct?(ir=xt,xt=null):ir=xt.sibling;var Jt=Me(ye,xt,je[Ct],He);if(Jt===null){xt===null&&(xt=ir);break}n&&xt&&Jt.alternate===null&&a(ye,xt),me=x(Jt,me,Ct),Ut===null?dt=Jt:Ut.sibling=Jt,Ut=Jt,xt=ir}if(Ct===je.length)return l(ye,xt),Kt&&Hr(ye,Ct),dt;if(xt===null){for(;Ct<je.length;Ct++)xt=qe(ye,je[Ct],He),xt!==null&&(me=x(xt,me,Ct),Ut===null?dt=xt:Ut.sibling=xt,Ut=xt);return Kt&&Hr(ye,Ct),dt}for(xt=c(xt);Ct<je.length;Ct++)ir=Oe(xt,ye,Ct,je[Ct],He),ir!==null&&(n&&ir.alternate!==null&&xt.delete(ir.key===null?Ct:ir.key),me=x(ir,me,Ct),Ut===null?dt=ir:Ut.sibling=ir,Ut=ir);return n&&xt.forEach(function(os){return a(ye,os)}),Kt&&Hr(ye,Ct),dt}function Nt(ye,me,je,He){if(je==null)throw Error(i(151));for(var dt=null,Ut=null,xt=me,Ct=me=0,ir=null,Jt=je.next();xt!==null&&!Jt.done;Ct++,Jt=je.next()){xt.index>Ct?(ir=xt,xt=null):ir=xt.sibling;var os=Me(ye,xt,Jt.value,He);if(os===null){xt===null&&(xt=ir);break}n&&xt&&os.alternate===null&&a(ye,xt),me=x(os,me,Ct),Ut===null?dt=os:Ut.sibling=os,Ut=os,xt=ir}if(Jt.done)return l(ye,xt),Kt&&Hr(ye,Ct),dt;if(xt===null){for(;!Jt.done;Ct++,Jt=je.next())Jt=qe(ye,Jt.value,He),Jt!==null&&(me=x(Jt,me,Ct),Ut===null?dt=Jt:Ut.sibling=Jt,Ut=Jt);return Kt&&Hr(ye,Ct),dt}for(xt=c(xt);!Jt.done;Ct++,Jt=je.next())Jt=Oe(xt,ye,Ct,Jt.value,He),Jt!==null&&(n&&Jt.alternate!==null&&xt.delete(Jt.key===null?Ct:Jt.key),me=x(Jt,me,Ct),Ut===null?dt=Jt:Ut.sibling=Jt,Ut=Jt);return n&&xt.forEach(function(B_){return a(ye,B_)}),Kt&&Hr(ye,Ct),dt}function gn(ye,me,je,He){if(typeof je=="object"&&je!==null&&je.type===y&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case w:e:{for(var dt=je.key;me!==null;){if(me.key===dt){if(dt=je.type,dt===y){if(me.tag===7){l(ye,me.sibling),He=v(me,je.props.children),He.return=ye,ye=He;break e}}else if(me.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Z&&kv(dt)===me.type){l(ye,me.sibling),He=v(me,je.props),Kl(He,je),He.return=ye,ye=He;break e}l(ye,me);break}else a(ye,me);me=me.sibling}je.type===y?(He=Dr(je.props.children,ye.mode,He,je.key),He.return=ye,ye=He):(He=ur(je.type,je.key,je.props,null,ye.mode,He),Kl(He,je),He.return=ye,ye=He)}return k(ye);case S:e:{for(dt=je.key;me!==null;){if(me.key===dt)if(me.tag===4&&me.stateNode.containerInfo===je.containerInfo&&me.stateNode.implementation===je.implementation){l(ye,me.sibling),He=v(me,je.children||[]),He.return=ye,ye=He;break e}else{l(ye,me);break}else a(ye,me);me=me.sibling}He=Dl(je,ye.mode,He),He.return=ye,ye=He}return k(ye);case Z:return dt=je._init,je=dt(je._payload),gn(ye,me,je,He)}if(se(je))return Mt(ye,me,je,He);if(xe(je)){if(dt=xe(je),typeof dt!="function")throw Error(i(150));return je=dt.call(je),Nt(ye,me,je,He)}if(typeof je.then=="function")return gn(ye,me,$u(je),He);if(je.$$typeof===M)return gn(ye,me,Nu(ye,je),He);Uu(ye,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,me!==null&&me.tag===6?(l(ye,me.sibling),He=v(me,je),He.return=ye,ye=He):(l(ye,me),He=oi(je,ye.mode,He),He.return=ye,ye=He),k(ye)):l(ye,me)}return function(ye,me,je,He){try{Xl=0;var dt=gn(ye,me,je,He);return Eo=null,dt}catch(xt){if(xt===Vl||xt===Eu)throw xt;var Ut=Ye(29,xt,null,ye.mode);return Ut.lanes=He,Ut.return=ye,Ut}finally{}}}var Mo=Av(!0),Tv=Av(!1),ca=P(null),Ua=null;function qi(n){var a=n.alternate;H(Wn,Wn.current&1),H(ca,n),Ua===null&&(a===null||jo.current!==null||a.memoizedState!==null)&&(Ua=n)}function Dv(n){if(n.tag===22){if(H(Wn,Wn.current),H(ca,n),Ua===null){var a=n.alternate;a!==null&&a.memoizedState!==null&&(Ua=n)}}else Gi()}function Gi(){H(Wn,Wn.current),H(ca,ca.current)}function ui(n){A(ca),Ua===n&&(Ua=null),A(Wn)}var Wn=P(0);function Iu(n){for(var a=n;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||dm(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Sh(n,a,l,c){a=n.memoizedState,l=l(c,a),l=l==null?a:g({},a,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var jh={enqueueSetState:function(n,a,l){n=n._reactInternals;var c=Wr(),v=Hi(c);v.payload=a,l!=null&&(v.callback=l),a=Fi(n,v,c),a!==null&&(Zr(a,n,c),Hl(a,n,c))},enqueueReplaceState:function(n,a,l){n=n._reactInternals;var c=Wr(),v=Hi(c);v.tag=1,v.payload=a,l!=null&&(v.callback=l),a=Fi(n,v,c),a!==null&&(Zr(a,n,c),Hl(a,n,c))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var l=Wr(),c=Hi(l);c.tag=2,a!=null&&(c.callback=a),a=Fi(n,c,l),a!==null&&(Zr(a,n,l),Hl(a,n,l))}};function Rv(n,a,l,c,v,x,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,x,k):a.prototype&&a.prototype.isPureReactComponent?!Ns(l,c)||!Ns(v,x):!0}function Pv(n,a,l,c){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==n&&jh.enqueueReplaceState(a,a.state,null)}function Ds(n,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(n=n.defaultProps){l===a&&(l=g({},l));for(var v in n)l[v]===void 0&&(l[v]=n[v])}return l}var Vu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function zv(n){Vu(n)}function $v(n){console.error(n)}function Uv(n){Vu(n)}function Bu(n,a){try{var l=n.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function Iv(n,a,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function _h(n,a,l){return l=Hi(l),l.tag=3,l.payload={element:null},l.callback=function(){Bu(n,a)},l}function Vv(n){return n=Hi(n),n.tag=3,n}function Bv(n,a,l,c){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var x=c.value;n.payload=function(){return v(x)},n.callback=function(){Iv(a,l,c)}}var k=l.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(n.callback=function(){Iv(a,l,c),typeof v!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var $=c.stack;this.componentDidCatch(c.value,{componentStack:$!==null?$:""})})}function B1(n,a,l,c,v){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&$l(a,l,v,!0),l=ca.current,l!==null){switch(l.tag){case 13:return Ua===null?Wh():l.alternate===null&&Rn===0&&(Rn=3),l.flags&=-257,l.flags|=65536,l.lanes=v,c===Jf?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),Xh(n,c,v)),!1;case 22:return l.flags|=65536,c===Jf?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),Xh(n,c,v)),!1}throw Error(i(435,l.tag))}return Xh(n,c,v),Wh(),!1}if(Kt)return a=ca.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,c!==$a&&(n=Error(i(422),{cause:c}),Ls(Ie(n,l)))):(c!==$a&&(a=Error(i(423),{cause:c}),Ls(Ie(a,l))),n=n.current.alternate,n.flags|=65536,v&=-v,n.lanes|=v,c=Ie(c,l),v=_h(n.stateNode,c,v),nh(n,v),Rn!==4&&(Rn=2)),!1;var x=Error(i(520),{cause:c});if(x=Ie(x,l),ac===null?ac=[x]:ac.push(x),Rn!==4&&(Rn=2),a===null)return!0;c=Ie(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,n=v&-v,l.lanes|=n,n=_h(l.stateNode,c,n),nh(l,n),!1;case 1:if(a=l.type,x=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ji===null||!Ji.has(x))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Vv(v),Bv(v,n,l,c),nh(l,v),!1}l=l.return}while(l!==null);return!1}var Hv=Error(i(461)),rr=!1;function dr(n,a,l,c){a.child=n===null?Tv(a,null,l,c):Mo(a,n.child,l,c)}function Fv(n,a,l,c,v){l=l.render;var x=a.ref;if("ref"in c){var k={};for(var $ in c)$!=="ref"&&(k[$]=c[$])}else k=c;return ks(a),c=oh(n,a,l,k,x,v),$=lh(),n!==null&&!rr?(ch(n,a,v),di(n,a,v)):(Kt&&$&&Rl(a),a.flags|=1,dr(n,a,c,v),a.child)}function Yv(n,a,l,c,v){if(n===null){var x=l.type;return typeof x=="function"&&!ln(x)&&x.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=x,qv(n,a,x,c,v)):(n=ur(l.type,null,c,a,a.mode,v),n.ref=a.ref,n.return=a,a.child=n)}if(x=n.child,!Ah(n,v)){var k=x.memoizedProps;if(l=l.compare,l=l!==null?l:Ns,l(k,c)&&n.ref===a.ref)return di(n,a,v)}return a.flags|=1,n=nr(x,c),n.ref=a.ref,n.return=a,a.child=n}function qv(n,a,l,c,v){if(n!==null){var x=n.memoizedProps;if(Ns(x,c)&&n.ref===a.ref)if(rr=!1,a.pendingProps=c=x,Ah(n,v))(n.flags&131072)!==0&&(rr=!0);else return a.lanes=n.lanes,di(n,a,v)}return Nh(n,a,l,c,v)}function Gv(n,a,l){var c=a.pendingProps,v=c.children,x=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((a.flags&128)!==0){if(c=x!==null?x.baseLanes|l:l,n!==null){for(v=a.child=n.child,x=0;v!==null;)x=x|v.lanes|v.childLanes,v=v.sibling;a.childLanes=x&~c}else a.childLanes=0,a.child=null;return Wv(n,a,c,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&Cu(a,x!==null?x.cachePool:null),x!==null?qg(a,x):ah(),Dv(a);else return a.lanes=a.childLanes=536870912,Wv(n,a,x!==null?x.baseLanes|l:l,l)}else x!==null?(Cu(a,x.cachePool),qg(a,x),Gi(),a.memoizedState=null):(n!==null&&Cu(a,null),ah(),Gi());return dr(n,a,v,l),a.child}function Wv(n,a,l,c){var v=Qf();return v=v===null?null:{parent:Gn._currentValue,pool:v},a.memoizedState={baseLanes:l,cachePool:v},n!==null&&Cu(a,null),ah(),Dv(a),n!==null&&$l(n,a,c,!0),null}function Hu(n,a){var l=a.ref;if(l===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(n===null||n.ref!==l)&&(a.flags|=4194816)}}function Nh(n,a,l,c,v){return ks(a),l=oh(n,a,l,c,void 0,v),c=lh(),n!==null&&!rr?(ch(n,a,v),di(n,a,v)):(Kt&&c&&Rl(a),a.flags|=1,dr(n,a,l,v),a.child)}function Zv(n,a,l,c,v,x){return ks(a),a.updateQueue=null,l=Wg(a,c,l,v),Gg(n),c=lh(),n!==null&&!rr?(ch(n,a,x),di(n,a,x)):(Kt&&c&&Rl(a),a.flags|=1,dr(n,a,l,x),a.child)}function Xv(n,a,l,c,v){if(ks(a),a.stateNode===null){var x=tt,k=l.contextType;typeof k=="object"&&k!==null&&(x=Sr(k)),x=new l(c,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=jh,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=c,x.state=a.memoizedState,x.refs={},eh(a),k=l.contextType,x.context=typeof k=="object"&&k!==null?Sr(k):tt,x.state=a.memoizedState,k=l.getDerivedStateFromProps,typeof k=="function"&&(Sh(a,l,k,c),x.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(k=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),k!==x.state&&jh.enqueueReplaceState(x,x.state,null),Yl(a,c,x,v),Fl(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(n===null){x=a.stateNode;var $=a.memoizedProps,ie=Ds(l,$);x.props=ie;var Ne=x.context,Ue=l.contextType;k=tt,typeof Ue=="object"&&Ue!==null&&(k=Sr(Ue));var qe=l.getDerivedStateFromProps;Ue=typeof qe=="function"||typeof x.getSnapshotBeforeUpdate=="function",$=a.pendingProps!==$,Ue||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||($||Ne!==k)&&Pv(a,x,c,k),Bi=!1;var Me=a.memoizedState;x.state=Me,Yl(a,c,x,v),Fl(),Ne=a.memoizedState,$||Me!==Ne||Bi?(typeof qe=="function"&&(Sh(a,l,qe,c),Ne=a.memoizedState),(ie=Bi||Rv(a,l,ie,c,Me,Ne,k))?(Ue||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=Ne),x.props=c,x.state=Ne,x.context=k,c=ie):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{x=a.stateNode,th(n,a),k=a.memoizedProps,Ue=Ds(l,k),x.props=Ue,qe=a.pendingProps,Me=x.context,Ne=l.contextType,ie=tt,typeof Ne=="object"&&Ne!==null&&(ie=Sr(Ne)),$=l.getDerivedStateFromProps,(Ne=typeof $=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==qe||Me!==ie)&&Pv(a,x,c,ie),Bi=!1,Me=a.memoizedState,x.state=Me,Yl(a,c,x,v),Fl();var Oe=a.memoizedState;k!==qe||Me!==Oe||Bi||n!==null&&n.dependencies!==null&&_u(n.dependencies)?(typeof $=="function"&&(Sh(a,l,$,c),Oe=a.memoizedState),(Ue=Bi||Rv(a,l,Ue,c,Me,Oe,ie)||n!==null&&n.dependencies!==null&&_u(n.dependencies))?(Ne||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,Oe,ie),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,Oe,ie)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&Me===n.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&Me===n.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=Oe),x.props=c,x.state=Oe,x.context=ie,c=Ue):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&Me===n.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&Me===n.memoizedState||(a.flags|=1024),c=!1)}return x=c,Hu(n,a),c=(a.flags&128)!==0,x||c?(x=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,n!==null&&c?(a.child=Mo(a,n.child,null,v),a.child=Mo(a,null,l,v)):dr(n,a,l,v),a.memoizedState=x.state,n=a.child):n=di(n,a,v),n}function Kv(n,a,l,c){return Vn(),a.flags|=256,dr(n,a,l,c),a.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eh(n){return{baseLanes:n,cachePool:$g()}}function Mh(n,a,l){return n=n!==null?n.childLanes&~l:0,a&&(n|=ua),n}function Qv(n,a,l){var c=a.pendingProps,v=!1,x=(a.flags&128)!==0,k;if((k=x)||(k=n!==null&&n.memoizedState===null?!1:(Wn.current&2)!==0),k&&(v=!0,a.flags&=-129),k=(a.flags&32)!==0,a.flags&=-33,n===null){if(Kt){if(v?qi(a):Gi(),Kt){var $=_n,ie;if(ie=$){e:{for(ie=$,$=Fr;ie.nodeType!==8;){if(!$){$=null;break e}if(ie=_a(ie.nextSibling),ie===null){$=null;break e}}$=ie}$!==null?(a.memoizedState={dehydrated:$,treeContext:bn!==null?{id:cn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},ie=Ye(18,null,null,0),ie.stateNode=$,ie.return=a,a.child=ie,Dn=a,_n=null,ie=!0):ie=!1}ie||xa(a)}if($=a.memoizedState,$!==null&&($=$.dehydrated,$!==null))return dm($)?a.lanes=32:a.lanes=536870912,null;ui(a)}return $=c.children,c=c.fallback,v?(Gi(),v=a.mode,$=Fu({mode:"hidden",children:$},v),c=Dr(c,v,l,null),$.return=a,c.return=a,$.sibling=c,a.child=$,v=a.child,v.memoizedState=Eh(l),v.childLanes=Mh(n,k,l),a.memoizedState=Ch,c):(qi(a),Oh(a,$))}if(ie=n.memoizedState,ie!==null&&($=ie.dehydrated,$!==null)){if(x)a.flags&256?(qi(a),a.flags&=-257,a=Lh(n,a,l)):a.memoizedState!==null?(Gi(),a.child=n.child,a.flags|=128,a=null):(Gi(),v=c.fallback,$=a.mode,c=Fu({mode:"visible",children:c.children},$),v=Dr(v,$,l,null),v.flags|=2,c.return=a,v.return=a,c.sibling=v,a.child=c,Mo(a,n.child,null,l),c=a.child,c.memoizedState=Eh(l),c.childLanes=Mh(n,k,l),a.memoizedState=Ch,a=v);else if(qi(a),dm($)){if(k=$.nextSibling&&$.nextSibling.dataset,k)var Ne=k.dgst;k=Ne,c=Error(i(419)),c.stack="",c.digest=k,Ls({value:c,source:null,stack:null}),a=Lh(n,a,l)}else if(rr||$l(n,a,l,!1),k=(l&n.childLanes)!==0,rr||k){if(k=Sn,k!==null&&(c=l&-l,c=(c&42)!==0?1:Ft(c),c=(c&(k.suspendedLanes|l))!==0?0:c,c!==0&&c!==ie.retryLane))throw ie.retryLane=c,on(n,c),Zr(k,n,c),Hv;$.data==="$?"||Wh(),a=Lh(n,a,l)}else $.data==="$?"?(a.flags|=192,a.child=n.child,a=null):(n=ie.treeContext,_n=_a($.nextSibling),Dn=a,Kt=!0,za=null,Fr=!1,n!==null&&(it[Gt++]=cn,it[Gt++]=Ln,it[Gt++]=bn,cn=n.id,Ln=n.overflow,bn=a),a=Oh(a,c.children),a.flags|=4096);return a}return v?(Gi(),v=c.fallback,$=a.mode,ie=n.child,Ne=ie.sibling,c=nr(ie,{mode:"hidden",children:c.children}),c.subtreeFlags=ie.subtreeFlags&65011712,Ne!==null?v=nr(Ne,v):(v=Dr(v,$,l,null),v.flags|=2),v.return=a,c.return=a,c.sibling=v,a.child=c,c=v,v=a.child,$=n.child.memoizedState,$===null?$=Eh(l):(ie=$.cachePool,ie!==null?(Ne=Gn._currentValue,ie=ie.parent!==Ne?{parent:Ne,pool:Ne}:ie):ie=$g(),$={baseLanes:$.baseLanes|l,cachePool:ie}),v.memoizedState=$,v.childLanes=Mh(n,k,l),a.memoizedState=Ch,c):(qi(a),l=n.child,n=l.sibling,l=nr(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,n!==null&&(k=a.deletions,k===null?(a.deletions=[n],a.flags|=16):k.push(n)),a.child=l,a.memoizedState=null,l)}function Oh(n,a){return a=Fu({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Fu(n,a){return n=Ye(22,n,null,a),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Lh(n,a,l){return Mo(a,n.child,null,l),n=Oh(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Jv(n,a,l){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a),ju(n.return,a,l)}function kh(n,a,l,c,v){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:v}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=l,x.tailMode=v)}function eb(n,a,l){var c=a.pendingProps,v=c.revealOrder,x=c.tail;if(dr(n,a,c.children,l),c=Wn.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Jv(n,l,a);else if(n.tag===19)Jv(n,l,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(H(Wn,c),v){case"forwards":for(l=a.child,v=null;l!==null;)n=l.alternate,n!==null&&Iu(n)===null&&(v=l),l=l.sibling;l=v,l===null?(v=a.child,a.child=null):(v=l.sibling,l.sibling=null),kh(a,!1,v,l,x);break;case"backwards":for(l=null,v=a.child,a.child=null;v!==null;){if(n=v.alternate,n!==null&&Iu(n)===null){a.child=v;break}n=v.sibling,v.sibling=l,l=v,v=n}kh(a,!0,l,null,x);break;case"together":kh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function di(n,a,l){if(n!==null&&(a.dependencies=n.dependencies),Qi|=a.lanes,(l&a.childLanes)===0)if(n!==null){if($l(n,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(i(153));if(a.child!==null){for(n=a.child,l=nr(n,n.pendingProps),a.child=l,l.return=a;n.sibling!==null;)n=n.sibling,l=l.sibling=nr(n,n.pendingProps),l.return=a;l.sibling=null}return a.child}function Ah(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&_u(n)))}function H1(n,a,l){switch(a.tag){case 3:be(a,a.stateNode.containerInfo),Rr(a,Gn,n.memoizedState.cache),Vn();break;case 27:case 5:Te(a);break;case 4:be(a,a.stateNode.containerInfo);break;case 10:Rr(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(qi(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Qv(n,a,l):(qi(a),n=di(n,a,l),n!==null?n.sibling:null);qi(a);break;case 19:var v=(n.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||($l(n,a,l,!1),c=(l&a.childLanes)!==0),v){if(c)return eb(n,a,l);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),H(Wn,Wn.current),c)break;return null;case 22:case 23:return a.lanes=0,Gv(n,a,l);case 24:Rr(a,Gn,n.memoizedState.cache)}return di(n,a,l)}function tb(n,a,l){if(n!==null)if(n.memoizedProps!==a.pendingProps)rr=!0;else{if(!Ah(n,l)&&(a.flags&128)===0)return rr=!1,H1(n,a,l);rr=(n.flags&131072)!==0}else rr=!1,Kt&&(a.flags&1048576)!==0&&Or(a,Os,a.index);switch(a.lanes=0,a.tag){case 16:e:{n=a.pendingProps;var c=a.elementType,v=c._init;if(c=v(c._payload),a.type=c,typeof c=="function")ln(c)?(n=Ds(c,n),a.tag=1,a=Xv(null,a,c,n,l)):(a.tag=0,a=Nh(null,a,c,n,l));else{if(c!=null){if(v=c.$$typeof,v===O){a.tag=11,a=Fv(null,a,c,n,l);break e}else if(v===B){a.tag=14,a=Yv(null,a,c,n,l);break e}}throw a=ve(c)||c,Error(i(306,a,""))}}return a;case 0:return Nh(n,a,a.type,a.pendingProps,l);case 1:return c=a.type,v=Ds(c,a.pendingProps),Xv(n,a,c,v,l);case 3:e:{if(be(a,a.stateNode.containerInfo),n===null)throw Error(i(387));c=a.pendingProps;var x=a.memoizedState;v=x.element,th(n,a),Yl(a,c,null,l);var k=a.memoizedState;if(c=k.cache,Rr(a,Gn,c),c!==x.cache&&zl(a,[Gn],l,!0),Fl(),c=k.element,x.isDehydrated)if(x={element:c,isDehydrated:!1,cache:k.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=Kv(n,a,c,l);break e}else if(c!==v){v=Ie(Error(i(424)),a),Ls(v),a=Kv(n,a,c,l);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(_n=_a(n.firstChild),Dn=a,Kt=!0,za=null,Fr=!0,l=Tv(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Vn(),c===v){a=di(n,a,l);break e}dr(n,a,c,l)}a=a.child}return a;case 26:return Hu(n,a),n===null?(l=iy(a.type,null,a.pendingProps,null))?a.memoizedState=l:Kt||(l=a.type,n=a.pendingProps,c=ad(ue.current).createElement(l),c[lt]=a,c[An]=n,hr(c,l,n),Qe(c),a.stateNode=c):a.memoizedState=iy(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Te(a),n===null&&Kt&&(c=a.stateNode=ny(a.type,a.pendingProps,ue.current),Dn=a,Fr=!0,v=_n,ns(a.type)?(fm=v,_n=_a(c.firstChild)):_n=v),dr(n,a,a.pendingProps.children,l),Hu(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&Kt&&((v=c=_n)&&(c=v_(c,a.type,a.pendingProps,Fr),c!==null?(a.stateNode=c,Dn=a,_n=_a(c.firstChild),Fr=!1,v=!0):v=!1),v||xa(a)),Te(a),v=a.type,x=a.pendingProps,k=n!==null?n.memoizedProps:null,c=x.children,lm(v,x)?c=null:k!==null&&lm(v,k)&&(a.flags|=32),a.memoizedState!==null&&(v=oh(n,a,R1,null,null,l),hc._currentValue=v),Hu(n,a),dr(n,a,c,l),a.child;case 6:return n===null&&Kt&&((n=l=_n)&&(l=b_(l,a.pendingProps,Fr),l!==null?(a.stateNode=l,Dn=a,_n=null,n=!0):n=!1),n||xa(a)),null;case 13:return Qv(n,a,l);case 4:return be(a,a.stateNode.containerInfo),c=a.pendingProps,n===null?a.child=Mo(a,null,c,l):dr(n,a,c,l),a.child;case 11:return Fv(n,a,a.type,a.pendingProps,l);case 7:return dr(n,a,a.pendingProps,l),a.child;case 8:return dr(n,a,a.pendingProps.children,l),a.child;case 12:return dr(n,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Rr(a,a.type,c.value),dr(n,a,c.children,l),a.child;case 9:return v=a.type._context,c=a.pendingProps.children,ks(a),v=Sr(v),c=c(v),a.flags|=1,dr(n,a,c,l),a.child;case 14:return Yv(n,a,a.type,a.pendingProps,l);case 15:return qv(n,a,a.type,a.pendingProps,l);case 19:return eb(n,a,l);case 31:return c=a.pendingProps,l=a.mode,c={mode:c.mode,children:c.children},n===null?(l=Fu(c,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=nr(n.child,c),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return Gv(n,a,l);case 24:return ks(a),c=Sr(Gn),n===null?(v=Qf(),v===null&&(v=Sn,x=Xf(),v.pooledCache=x,x.refCount++,x!==null&&(v.pooledCacheLanes|=l),v=x),a.memoizedState={parent:c,cache:v},eh(a),Rr(a,Gn,v)):((n.lanes&l)!==0&&(th(n,a),Yl(a,null,null,l),Fl()),v=n.memoizedState,x=a.memoizedState,v.parent!==c?(v={parent:c,cache:c},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),Rr(a,Gn,c)):(c=x.cache,Rr(a,Gn,c),c!==v.cache&&zl(a,[Gn],l,!0))),dr(n,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function fi(n){n.flags|=4}function nb(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!uy(a)){if(a=ca.current,a!==null&&((Wt&4194048)===Wt?Ua!==null:(Wt&62914560)!==Wt&&(Wt&536870912)===0||a!==Ua))throw Bl=Jf,Ug;n.flags|=8192}}function Yu(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?ea():536870912,n.lanes|=a,Ao|=a)}function Ql(n,a){if(!Kt)switch(n.tailMode){case"hidden":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function kn(n){var a=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(a)for(var v=n.child;v!==null;)l|=v.lanes|v.childLanes,c|=v.subtreeFlags&65011712,c|=v.flags&65011712,v.return=n,v=v.sibling;else for(v=n.child;v!==null;)l|=v.lanes|v.childLanes,c|=v.subtreeFlags,c|=v.flags,v.return=n,v=v.sibling;return n.subtreeFlags|=c,n.childLanes=l,a}function F1(n,a,l){var c=a.pendingProps;switch(bo(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(a),null;case 1:return kn(a),null;case 3:return l=a.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Sa(Gn),Be(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(wa(a)?fi(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Pl())),kn(a),null;case 26:return l=a.memoizedState,n===null?(fi(a),l!==null?(kn(a),nb(a,l)):(kn(a),a.flags&=-16777217)):l?l!==n.memoizedState?(fi(a),kn(a),nb(a,l)):(kn(a),a.flags&=-16777217):(n.memoizedProps!==c&&fi(a),kn(a),a.flags&=-16777217),null;case 27:Ge(a),l=ue.current;var v=a.type;if(n!==null&&a.stateNode!=null)n.memoizedProps!==c&&fi(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return kn(a),null}n=U.current,wa(a)?Vi(a):(n=ny(v,c,l),a.stateNode=n,fi(a))}return kn(a),null;case 5:if(Ge(a),l=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==c&&fi(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return kn(a),null}if(n=U.current,wa(a))Vi(a);else{switch(v=ad(ue.current),n){case 1:n=v.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:n=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":n=v.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":n=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?v.createElement(l,{is:c.is}):v.createElement(l)}}n[lt]=a,n[An]=c;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)n.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=n;e:switch(hr(n,l,c),l){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&fi(a)}}return kn(a),a.flags&=-16777217,null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==c&&fi(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(i(166));if(n=ue.current,wa(a)){if(n=a.stateNode,l=a.memoizedProps,c=null,v=Dn,v!==null)switch(v.tag){case 27:case 5:c=v.memoizedProps}n[lt]=a,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Zb(n.nodeValue,l)),n||xa(a)}else n=ad(n).createTextNode(c),n[lt]=a,a.stateNode=n}return kn(a),null;case 13:if(c=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(v=wa(a),c!==null&&c.dehydrated!==null){if(n===null){if(!v)throw Error(i(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[lt]=a}else Vn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;kn(a),v=!1}else v=Pl(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(ui(a),a):(ui(a),null)}if(ui(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=c!==null,n=n!==null&&n.memoizedState!==null,l){c=a.child,v=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(v=c.alternate.memoizedState.cachePool.pool);var x=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==v&&(c.flags|=2048)}return l!==n&&l&&(a.child.flags|=8192),Yu(a,a.updateQueue),kn(a),null;case 4:return Be(),n===null&&rm(a.stateNode.containerInfo),kn(a),null;case 10:return Sa(a.type),kn(a),null;case 19:if(A(Wn),v=a.memoizedState,v===null)return kn(a),null;if(c=(a.flags&128)!==0,x=v.rendering,x===null)if(c)Ql(v,!1);else{if(Rn!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(x=Iu(n),x!==null){for(a.flags|=128,Ql(v,!1),n=x.updateQueue,a.updateQueue=n,Yu(a,n),a.subtreeFlags=0,n=l,l=a.child;l!==null;)Pa(l,n),l=l.sibling;return H(Wn,Wn.current&1|2),a.child}n=n.sibling}v.tail!==null&&Ae()>Wu&&(a.flags|=128,c=!0,Ql(v,!1),a.lanes=4194304)}else{if(!c)if(n=Iu(x),n!==null){if(a.flags|=128,c=!0,n=n.updateQueue,a.updateQueue=n,Yu(a,n),Ql(v,!0),v.tail===null&&v.tailMode==="hidden"&&!x.alternate&&!Kt)return kn(a),null}else 2*Ae()-v.renderingStartTime>Wu&&l!==536870912&&(a.flags|=128,c=!0,Ql(v,!1),a.lanes=4194304);v.isBackwards?(x.sibling=a.child,a.child=x):(n=v.last,n!==null?n.sibling=x:a.child=x,v.last=x)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=Ae(),a.sibling=null,n=Wn.current,H(Wn,c?n&1|2:n&1),a):(kn(a),null);case 22:case 23:return ui(a),ih(),c=a.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(kn(a),a.subtreeFlags&6&&(a.flags|=8192)):kn(a),l=a.updateQueue,l!==null&&Yu(a,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),n!==null&&A(As),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Sa(Gn),kn(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Y1(n,a){switch(bo(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Sa(Gn),Be(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return Ge(a),null;case 13:if(ui(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Vn()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return A(Wn),null;case 4:return Be(),null;case 10:return Sa(a.type),null;case 22:case 23:return ui(a),ih(),n!==null&&A(As),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Sa(Gn),null;case 25:return null;default:return null}}function rb(n,a){switch(bo(a),a.tag){case 3:Sa(Gn),Be();break;case 26:case 27:case 5:Ge(a);break;case 4:Be();break;case 13:ui(a);break;case 19:A(Wn);break;case 10:Sa(a.type);break;case 22:case 23:ui(a),ih(),n!==null&&A(As);break;case 24:Sa(Gn)}}function Jl(n,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var v=c.next;l=v;do{if((l.tag&n)===n){c=void 0;var x=l.create,k=l.inst;c=x(),k.destroy=c}l=l.next}while(l!==v)}}catch($){yn(a,a.return,$)}}function Wi(n,a,l){try{var c=a.updateQueue,v=c!==null?c.lastEffect:null;if(v!==null){var x=v.next;c=x;do{if((c.tag&n)===n){var k=c.inst,$=k.destroy;if($!==void 0){k.destroy=void 0,v=a;var ie=l,Ne=$;try{Ne()}catch(Ue){yn(v,ie,Ue)}}}c=c.next}while(c!==x)}}catch(Ue){yn(a,a.return,Ue)}}function ab(n){var a=n.updateQueue;if(a!==null){var l=n.stateNode;try{Yg(a,l)}catch(c){yn(n,n.return,c)}}}function ib(n,a,l){l.props=Ds(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){yn(n,a,c)}}function ec(n,a){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof l=="function"?n.refCleanup=l(c):l.current=c}}catch(v){yn(n,a,v)}}function Ia(n,a){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(v){yn(n,a,v)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){yn(n,a,v)}else l.current=null}function sb(n){var a=n.type,l=n.memoizedProps,c=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(v){yn(n,n.return,v)}}function Th(n,a,l){try{var c=n.stateNode;f_(c,n.type,l,a),c[An]=a}catch(v){yn(n,n.return,v)}}function ob(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ns(n.type)||n.tag===4}function Dh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ob(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ns(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rh(n,a,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(n),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=rd));else if(c!==4&&(c===27&&ns(n.type)&&(l=n.stateNode,a=null),n=n.child,n!==null))for(Rh(n,a,l),n=n.sibling;n!==null;)Rh(n,a,l),n=n.sibling}function qu(n,a,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?l.insertBefore(n,a):l.appendChild(n);else if(c!==4&&(c===27&&ns(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(qu(n,a,l),n=n.sibling;n!==null;)qu(n,a,l),n=n.sibling}function lb(n){var a=n.stateNode,l=n.memoizedProps;try{for(var c=n.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);hr(a,c,l),a[lt]=n,a[An]=l}catch(x){yn(n,n.return,x)}}var hi=!1,$n=!1,Ph=!1,cb=typeof WeakSet=="function"?WeakSet:Set,ar=null;function q1(n,a){if(n=n.containerInfo,sm=ud,n=mo(n),Es(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var v=c.anchorOffset,x=c.focusNode;c=c.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var k=0,$=-1,ie=-1,Ne=0,Ue=0,qe=n,Me=null;t:for(;;){for(var Oe;qe!==l||v!==0&&qe.nodeType!==3||($=k+v),qe!==x||c!==0&&qe.nodeType!==3||(ie=k+c),qe.nodeType===3&&(k+=qe.nodeValue.length),(Oe=qe.firstChild)!==null;)Me=qe,qe=Oe;for(;;){if(qe===n)break t;if(Me===l&&++Ne===v&&($=k),Me===x&&++Ue===c&&(ie=k),(Oe=qe.nextSibling)!==null)break;qe=Me,Me=qe.parentNode}qe=Oe}l=$===-1||ie===-1?null:{start:$,end:ie}}else l=null}l=l||{start:0,end:0}}else l=null;for(om={focusedElem:n,selectionRange:l},ud=!1,ar=a;ar!==null;)if(a=ar,n=a.child,(a.subtreeFlags&1024)!==0&&n!==null)n.return=a,ar=n;else for(;ar!==null;){switch(a=ar,x=a.alternate,n=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&x!==null){n=void 0,l=a,v=x.memoizedProps,x=x.memoizedState,c=l.stateNode;try{var Mt=Ds(l.type,v,l.elementType===l.type);n=c.getSnapshotBeforeUpdate(Mt,x),c.__reactInternalSnapshotBeforeUpdate=n}catch(Nt){yn(l,l.return,Nt)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,l=n.nodeType,l===9)um(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":um(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=a.sibling,n!==null){n.return=a.return,ar=n;break}ar=a.return}}function ub(n,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Zi(n,l),c&4&&Jl(5,l);break;case 1:if(Zi(n,l),c&4)if(n=l.stateNode,a===null)try{n.componentDidMount()}catch(k){yn(l,l.return,k)}else{var v=Ds(l.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(v,a,n.__reactInternalSnapshotBeforeUpdate)}catch(k){yn(l,l.return,k)}}c&64&&ab(l),c&512&&ec(l,l.return);break;case 3:if(Zi(n,l),c&64&&(n=l.updateQueue,n!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Yg(n,a)}catch(k){yn(l,l.return,k)}}break;case 27:a===null&&c&4&&lb(l);case 26:case 5:Zi(n,l),a===null&&c&4&&sb(l),c&512&&ec(l,l.return);break;case 12:Zi(n,l);break;case 13:Zi(n,l),c&4&&hb(n,l),c&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=t_.bind(null,l),y_(n,l))));break;case 22:if(c=l.memoizedState!==null||hi,!c){a=a!==null&&a.memoizedState!==null||$n,v=hi;var x=$n;hi=c,($n=a)&&!x?Xi(n,l,(l.subtreeFlags&8772)!==0):Zi(n,l),hi=v,$n=x}break;case 30:break;default:Zi(n,l)}}function db(n){var a=n.alternate;a!==null&&(n.alternate=null,db(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&nt(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Cn=null,zr=!1;function mi(n,a,l){for(l=l.child;l!==null;)fb(n,a,l),l=l.sibling}function fb(n,a,l){if(ae&&typeof ae.onCommitFiberUnmount=="function")try{ae.onCommitFiberUnmount(_e,l)}catch{}switch(l.tag){case 26:$n||Ia(l,a),mi(n,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:$n||Ia(l,a);var c=Cn,v=zr;ns(l.type)&&(Cn=l.stateNode,zr=!1),mi(n,a,l),cc(l.stateNode),Cn=c,zr=v;break;case 5:$n||Ia(l,a);case 6:if(c=Cn,v=zr,Cn=null,mi(n,a,l),Cn=c,zr=v,Cn!==null)if(zr)try{(Cn.nodeType===9?Cn.body:Cn.nodeName==="HTML"?Cn.ownerDocument.body:Cn).removeChild(l.stateNode)}catch(x){yn(l,a,x)}else try{Cn.removeChild(l.stateNode)}catch(x){yn(l,a,x)}break;case 18:Cn!==null&&(zr?(n=Cn,ey(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),vc(n)):ey(Cn,l.stateNode));break;case 4:c=Cn,v=zr,Cn=l.stateNode.containerInfo,zr=!0,mi(n,a,l),Cn=c,zr=v;break;case 0:case 11:case 14:case 15:$n||Wi(2,l,a),$n||Wi(4,l,a),mi(n,a,l);break;case 1:$n||(Ia(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&ib(l,a,c)),mi(n,a,l);break;case 21:mi(n,a,l);break;case 22:$n=(c=$n)||l.memoizedState!==null,mi(n,a,l),$n=c;break;default:mi(n,a,l)}}function hb(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{vc(n)}catch(l){yn(a,a.return,l)}}function G1(n){switch(n.tag){case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new cb),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new cb),a;default:throw Error(i(435,n.tag))}}function zh(n,a){var l=G1(n);a.forEach(function(c){var v=n_.bind(null,n,c);l.has(c)||(l.add(c),c.then(v,v))})}function Yr(n,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var v=l[c],x=n,k=a,$=k;e:for(;$!==null;){switch($.tag){case 27:if(ns($.type)){Cn=$.stateNode,zr=!1;break e}break;case 5:Cn=$.stateNode,zr=!1;break e;case 3:case 4:Cn=$.stateNode.containerInfo,zr=!0;break e}$=$.return}if(Cn===null)throw Error(i(160));fb(x,k,v),Cn=null,zr=!1,x=v.alternate,x!==null&&(x.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)mb(a,n),a=a.sibling}var ja=null;function mb(n,a){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Yr(a,n),qr(n),c&4&&(Wi(3,n,n.return),Jl(3,n),Wi(5,n,n.return));break;case 1:Yr(a,n),qr(n),c&512&&($n||l===null||Ia(l,l.return)),c&64&&hi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var v=ja;if(Yr(a,n),qr(n),c&512&&($n||l===null||Ia(l,l.return)),c&4){var x=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){e:{c=n.type,l=n.memoizedProps,v=v.ownerDocument||v;t:switch(c){case"title":x=v.getElementsByTagName("title")[0],(!x||x[ke]||x[lt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=v.createElement(c),v.head.insertBefore(x,v.querySelector("head > title"))),hr(x,c,l),x[lt]=n,Qe(x),c=x;break e;case"link":var k=ly("link","href",v).get(c+(l.href||""));if(k){for(var $=0;$<k.length;$++)if(x=k[$],x.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&x.getAttribute("rel")===(l.rel==null?null:l.rel)&&x.getAttribute("title")===(l.title==null?null:l.title)&&x.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){k.splice($,1);break t}}x=v.createElement(c),hr(x,c,l),v.head.appendChild(x);break;case"meta":if(k=ly("meta","content",v).get(c+(l.content||""))){for($=0;$<k.length;$++)if(x=k[$],x.getAttribute("content")===(l.content==null?null:""+l.content)&&x.getAttribute("name")===(l.name==null?null:l.name)&&x.getAttribute("property")===(l.property==null?null:l.property)&&x.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&x.getAttribute("charset")===(l.charSet==null?null:l.charSet)){k.splice($,1);break t}}x=v.createElement(c),hr(x,c,l),v.head.appendChild(x);break;default:throw Error(i(468,c))}x[lt]=n,Qe(x),c=x}n.stateNode=c}else cy(v,n.type,n.stateNode);else n.stateNode=oy(v,c,n.memoizedProps);else x!==c?(x===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):x.count--,c===null?cy(v,n.type,n.stateNode):oy(v,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Th(n,n.memoizedProps,l.memoizedProps)}break;case 27:Yr(a,n),qr(n),c&512&&($n||l===null||Ia(l,l.return)),l!==null&&c&4&&Th(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Yr(a,n),qr(n),c&512&&($n||l===null||Ia(l,l.return)),n.flags&32){v=n.stateNode;try{Er(v,"")}catch(Oe){yn(n,n.return,Oe)}}c&4&&n.stateNode!=null&&(v=n.memoizedProps,Th(n,v,l!==null?l.memoizedProps:v)),c&1024&&(Ph=!0);break;case 6:if(Yr(a,n),qr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(Oe){yn(n,n.return,Oe)}}break;case 3:if(od=null,v=ja,ja=id(a.containerInfo),Yr(a,n),ja=v,qr(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{vc(a.containerInfo)}catch(Oe){yn(n,n.return,Oe)}Ph&&(Ph=!1,pb(n));break;case 4:c=ja,ja=id(n.stateNode.containerInfo),Yr(a,n),qr(n),ja=c;break;case 12:Yr(a,n),qr(n);break;case 13:Yr(a,n),qr(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Hh=Ae()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,zh(n,c)));break;case 22:v=n.memoizedState!==null;var ie=l!==null&&l.memoizedState!==null,Ne=hi,Ue=$n;if(hi=Ne||v,$n=Ue||ie,Yr(a,n),$n=Ue,hi=Ne,qr(n),c&8192)e:for(a=n.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(l===null||ie||hi||$n||Rs(n)),l=null,a=n;;){if(a.tag===5||a.tag===26){if(l===null){ie=l=a;try{if(x=ie.stateNode,v)k=x.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{$=ie.stateNode;var qe=ie.memoizedProps.style,Me=qe!=null&&qe.hasOwnProperty("display")?qe.display:null;$.style.display=Me==null||typeof Me=="boolean"?"":(""+Me).trim()}}catch(Oe){yn(ie,ie.return,Oe)}}}else if(a.tag===6){if(l===null){ie=a;try{ie.stateNode.nodeValue=v?"":ie.memoizedProps}catch(Oe){yn(ie,ie.return,Oe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,zh(n,l))));break;case 19:Yr(a,n),qr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,zh(n,c)));break;case 30:break;case 21:break;default:Yr(a,n),qr(n)}}function qr(n){var a=n.flags;if(a&2){try{for(var l,c=n.return;c!==null;){if(ob(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var v=l.stateNode,x=Dh(n);qu(n,x,v);break;case 5:var k=l.stateNode;l.flags&32&&(Er(k,""),l.flags&=-33);var $=Dh(n);qu(n,$,k);break;case 3:case 4:var ie=l.stateNode.containerInfo,Ne=Dh(n);Rh(n,Ne,ie);break;default:throw Error(i(161))}}catch(Ue){yn(n,n.return,Ue)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function pb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;pb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function Zi(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ub(n,a.alternate,a),a=a.sibling}function Rs(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Wi(4,a,a.return),Rs(a);break;case 1:Ia(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&ib(a,a.return,l),Rs(a);break;case 27:cc(a.stateNode);case 26:case 5:Ia(a,a.return),Rs(a);break;case 22:a.memoizedState===null&&Rs(a);break;case 30:Rs(a);break;default:Rs(a)}n=n.sibling}}function Xi(n,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,v=n,x=a,k=x.flags;switch(x.tag){case 0:case 11:case 15:Xi(v,x,l),Jl(4,x);break;case 1:if(Xi(v,x,l),c=x,v=c.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Ne){yn(c,c.return,Ne)}if(c=x,v=c.updateQueue,v!==null){var $=c.stateNode;try{var ie=v.shared.hiddenCallbacks;if(ie!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ie.length;v++)Fg(ie[v],$)}catch(Ne){yn(c,c.return,Ne)}}l&&k&64&&ab(x),ec(x,x.return);break;case 27:lb(x);case 26:case 5:Xi(v,x,l),l&&c===null&&k&4&&sb(x),ec(x,x.return);break;case 12:Xi(v,x,l);break;case 13:Xi(v,x,l),l&&k&4&&hb(v,x);break;case 22:x.memoizedState===null&&Xi(v,x,l),ec(x,x.return);break;case 30:break;default:Xi(v,x,l)}a=a.sibling}}function $h(n,a){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Ul(l))}function Uh(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Ul(n))}function Va(n,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)gb(n,a,l,c),a=a.sibling}function gb(n,a,l,c){var v=a.flags;switch(a.tag){case 0:case 11:case 15:Va(n,a,l,c),v&2048&&Jl(9,a);break;case 1:Va(n,a,l,c);break;case 3:Va(n,a,l,c),v&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Ul(n)));break;case 12:if(v&2048){Va(n,a,l,c),n=a.stateNode;try{var x=a.memoizedProps,k=x.id,$=x.onPostCommit;typeof $=="function"&&$(k,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(ie){yn(a,a.return,ie)}}else Va(n,a,l,c);break;case 13:Va(n,a,l,c);break;case 23:break;case 22:x=a.stateNode,k=a.alternate,a.memoizedState!==null?x._visibility&2?Va(n,a,l,c):tc(n,a):x._visibility&2?Va(n,a,l,c):(x._visibility|=2,Oo(n,a,l,c,(a.subtreeFlags&10256)!==0)),v&2048&&$h(k,a);break;case 24:Va(n,a,l,c),v&2048&&Uh(a.alternate,a);break;default:Va(n,a,l,c)}}function Oo(n,a,l,c,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var x=n,k=a,$=l,ie=c,Ne=k.flags;switch(k.tag){case 0:case 11:case 15:Oo(x,k,$,ie,v),Jl(8,k);break;case 23:break;case 22:var Ue=k.stateNode;k.memoizedState!==null?Ue._visibility&2?Oo(x,k,$,ie,v):tc(x,k):(Ue._visibility|=2,Oo(x,k,$,ie,v)),v&&Ne&2048&&$h(k.alternate,k);break;case 24:Oo(x,k,$,ie,v),v&&Ne&2048&&Uh(k.alternate,k);break;default:Oo(x,k,$,ie,v)}a=a.sibling}}function tc(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=n,c=a,v=c.flags;switch(c.tag){case 22:tc(l,c),v&2048&&$h(c.alternate,c);break;case 24:tc(l,c),v&2048&&Uh(c.alternate,c);break;default:tc(l,c)}a=a.sibling}}var nc=8192;function Lo(n){if(n.subtreeFlags&nc)for(n=n.child;n!==null;)vb(n),n=n.sibling}function vb(n){switch(n.tag){case 26:Lo(n),n.flags&nc&&n.memoizedState!==null&&A_(ja,n.memoizedState,n.memoizedProps);break;case 5:Lo(n);break;case 3:case 4:var a=ja;ja=id(n.stateNode.containerInfo),Lo(n),ja=a;break;case 22:n.memoizedState===null&&(a=n.alternate,a!==null&&a.memoizedState!==null?(a=nc,nc=16777216,Lo(n),nc=a):Lo(n));break;default:Lo(n)}}function bb(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function rc(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];ar=c,xb(c,n)}bb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)yb(n),n=n.sibling}function yb(n){switch(n.tag){case 0:case 11:case 15:rc(n),n.flags&2048&&Wi(9,n,n.return);break;case 3:rc(n);break;case 12:rc(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Gu(n)):rc(n);break;default:rc(n)}}function Gu(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];ar=c,xb(c,n)}bb(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Wi(8,a,a.return),Gu(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Gu(a));break;default:Gu(a)}n=n.sibling}}function xb(n,a){for(;ar!==null;){var l=ar;switch(l.tag){case 0:case 11:case 15:Wi(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ul(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,ar=c;else e:for(l=n;ar!==null;){c=ar;var v=c.sibling,x=c.return;if(db(c),c===l){ar=null;break e}if(v!==null){v.return=x,ar=v;break e}ar=x}}}var W1={getCacheForType:function(n){var a=Sr(Gn),l=a.data.get(n);return l===void 0&&(l=n(),a.data.set(n,l)),l}},Z1=typeof WeakMap=="function"?WeakMap:Map,dn=0,Sn=null,Vt=null,Wt=0,fn=0,Gr=null,Ki=!1,ko=!1,Ih=!1,pi=0,Rn=0,Qi=0,Ps=0,Vh=0,ua=0,Ao=0,ac=null,$r=null,Bh=!1,Hh=0,Wu=1/0,Zu=null,Ji=null,fr=0,es=null,To=null,Do=0,Fh=0,Yh=null,wb=null,ic=0,qh=null;function Wr(){if((dn&2)!==0&&Wt!==0)return Wt&-Wt;if(V.T!==null){var n=wo;return n!==0?n:Jh()}return nn()}function Sb(){ua===0&&(ua=(Wt&536870912)===0||Kt?Un():536870912);var n=ca.current;return n!==null&&(n.flags|=32),ua}function Zr(n,a,l){(n===Sn&&(fn===2||fn===9)||n.cancelPendingCommit!==null)&&(Ro(n,0),ts(n,Wt,ua,!1)),mt(n,l),((dn&2)===0||n!==Sn)&&(n===Sn&&((dn&2)===0&&(Ps|=l),Rn===4&&ts(n,Wt,ua,!1)),Ba(n))}function jb(n,a,l){if((dn&6)!==0)throw Error(i(327));var c=!l&&(a&124)===0&&(a&n.expiredLanes)===0||Lt(n,a),v=c?Q1(n,a):Zh(n,a,!0),x=c;do{if(v===0){ko&&!c&&ts(n,a,0,!1);break}else{if(l=n.current.alternate,x&&!X1(l)){v=Zh(n,a,!1),x=!1;continue}if(v===2){if(x=a,n.errorRecoveryDisabledLanes&x)var k=0;else k=n.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){a=k;e:{var $=n;v=ac;var ie=$.current.memoizedState.isDehydrated;if(ie&&(Ro($,k).flags|=256),k=Zh($,k,!1),k!==2){if(Ih&&!ie){$.errorRecoveryDisabledLanes|=x,Ps|=x,v=4;break e}x=$r,$r=v,x!==null&&($r===null?$r=x:$r.push.apply($r,x))}v=k}if(x=!1,v!==2)continue}}if(v===1){Ro(n,0),ts(n,a,0,!0);break}e:{switch(c=n,x=v,x){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:ts(c,a,ua,!Ki);break e;case 2:$r=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(v=Hh+300-Ae(),10<v)){if(ts(c,a,ua,!Ki),$t(c,0,!0)!==0)break e;c.timeoutHandle=Qb(_b.bind(null,c,l,$r,Zu,Bh,a,ua,Ps,Ao,Ki,x,2,-0,0),v);break e}_b(c,l,$r,Zu,Bh,a,ua,Ps,Ao,Ki,x,0,-0,0)}}break}while(!0);Ba(n)}function _b(n,a,l,c,v,x,k,$,ie,Ne,Ue,qe,Me,Oe){if(n.timeoutHandle=-1,qe=a.subtreeFlags,(qe&8192||(qe&16785408)===16785408)&&(fc={stylesheets:null,count:0,unsuspend:k_},vb(a),qe=T_(),qe!==null)){n.cancelPendingCommit=qe(kb.bind(null,n,a,x,l,c,v,k,$,ie,Ue,1,Me,Oe)),ts(n,x,k,!Ne);return}kb(n,a,x,l,c,v,k,$,ie)}function X1(n){for(var a=n;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var v=l[c],x=v.getSnapshot;v=v.value;try{if(!xr(x(),v))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ts(n,a,l,c){a&=~Vh,a&=~Ps,n.suspendedLanes|=a,n.pingedLanes&=~a,c&&(n.warmLanes|=a),c=n.expirationTimes;for(var v=a;0<v;){var x=31-ne(v),k=1<<x;c[x]=-1,v&=~k}l!==0&&Zt(n,l,a)}function Xu(){return(dn&6)===0?(sc(0),!1):!0}function Gh(){if(Vt!==null){if(fn===0)var n=Vt.return;else n=Vt,wr=Dt=null,uh(n),Eo=null,Xl=0,n=Vt;for(;n!==null;)rb(n.alternate,n),n=n.return;Vt=null}}function Ro(n,a){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,m_(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Gh(),Sn=n,Vt=l=nr(n.current,null),Wt=a,fn=0,Gr=null,Ki=!1,ko=Lt(n,a),Ih=!1,Ao=ua=Vh=Ps=Qi=Rn=0,$r=ac=null,Bh=!1,(a&8)!==0&&(a|=a&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=a;0<c;){var v=31-ne(c),x=1<<v;a|=n[v],c&=~x}return pi=a,pt(),l}function Nb(n,a){Pt=null,V.H=zu,a===Vl||a===Eu?(a=Bg(),fn=3):a===Ug?(a=Bg(),fn=4):fn=a===Hv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Gr=a,Vt===null&&(Rn=1,Bu(n,Ie(a,n.current)))}function Cb(){var n=V.H;return V.H=zu,n===null?zu:n}function Eb(){var n=V.A;return V.A=W1,n}function Wh(){Rn=4,Ki||(Wt&4194048)!==Wt&&ca.current!==null||(ko=!0),(Qi&134217727)===0&&(Ps&134217727)===0||Sn===null||ts(Sn,Wt,ua,!1)}function Zh(n,a,l){var c=dn;dn|=2;var v=Cb(),x=Eb();(Sn!==n||Wt!==a)&&(Zu=null,Ro(n,a)),a=!1;var k=Rn;e:do try{if(fn!==0&&Vt!==null){var $=Vt,ie=Gr;switch(fn){case 8:Gh(),k=6;break e;case 3:case 2:case 9:case 6:ca.current===null&&(a=!0);var Ne=fn;if(fn=0,Gr=null,Po(n,$,ie,Ne),l&&ko){k=0;break e}break;default:Ne=fn,fn=0,Gr=null,Po(n,$,ie,Ne)}}K1(),k=Rn;break}catch(Ue){Nb(n,Ue)}while(!0);return a&&n.shellSuspendCounter++,wr=Dt=null,dn=c,V.H=v,V.A=x,Vt===null&&(Sn=null,Wt=0,pt()),k}function K1(){for(;Vt!==null;)Mb(Vt)}function Q1(n,a){var l=dn;dn|=2;var c=Cb(),v=Eb();Sn!==n||Wt!==a?(Zu=null,Wu=Ae()+500,Ro(n,a)):ko=Lt(n,a);e:do try{if(fn!==0&&Vt!==null){a=Vt;var x=Gr;t:switch(fn){case 1:fn=0,Gr=null,Po(n,a,x,1);break;case 2:case 9:if(Ig(x)){fn=0,Gr=null,Ob(a);break}a=function(){fn!==2&&fn!==9||Sn!==n||(fn=7),Ba(n)},x.then(a,a);break e;case 3:fn=7;break e;case 4:fn=5;break e;case 7:Ig(x)?(fn=0,Gr=null,Ob(a)):(fn=0,Gr=null,Po(n,a,x,7));break;case 5:var k=null;switch(Vt.tag){case 26:k=Vt.memoizedState;case 5:case 27:var $=Vt;if(!k||uy(k)){fn=0,Gr=null;var ie=$.sibling;if(ie!==null)Vt=ie;else{var Ne=$.return;Ne!==null?(Vt=Ne,Ku(Ne)):Vt=null}break t}}fn=0,Gr=null,Po(n,a,x,5);break;case 6:fn=0,Gr=null,Po(n,a,x,6);break;case 8:Gh(),Rn=6;break e;default:throw Error(i(462))}}J1();break}catch(Ue){Nb(n,Ue)}while(!0);return wr=Dt=null,V.H=c,V.A=v,dn=l,Vt!==null?0:(Sn=null,Wt=0,pt(),Rn)}function J1(){for(;Vt!==null&&!ce();)Mb(Vt)}function Mb(n){var a=tb(n.alternate,n,pi);n.memoizedProps=n.pendingProps,a===null?Ku(n):Vt=a}function Ob(n){var a=n,l=a.alternate;switch(a.tag){case 15:case 0:a=Zv(l,a,a.pendingProps,a.type,void 0,Wt);break;case 11:a=Zv(l,a,a.pendingProps,a.type.render,a.ref,Wt);break;case 5:uh(a);default:rb(l,a),a=Vt=Pa(a,pi),a=tb(l,a,pi)}n.memoizedProps=n.pendingProps,a===null?Ku(n):Vt=a}function Po(n,a,l,c){wr=Dt=null,uh(a),Eo=null,Xl=0;var v=a.return;try{if(B1(n,v,a,l,Wt)){Rn=1,Bu(n,Ie(l,n.current)),Vt=null;return}}catch(x){if(v!==null)throw Vt=v,x;Rn=1,Bu(n,Ie(l,n.current)),Vt=null;return}a.flags&32768?(Kt||c===1?n=!0:ko||(Wt&536870912)!==0?n=!1:(Ki=n=!0,(c===2||c===9||c===3||c===6)&&(c=ca.current,c!==null&&c.tag===13&&(c.flags|=16384))),Lb(a,n)):Ku(a)}function Ku(n){var a=n;do{if((a.flags&32768)!==0){Lb(a,Ki);return}n=a.return;var l=F1(a.alternate,a,pi);if(l!==null){Vt=l;return}if(a=a.sibling,a!==null){Vt=a;return}Vt=a=n}while(a!==null);Rn===0&&(Rn=5)}function Lb(n,a){do{var l=Y1(n.alternate,n);if(l!==null){l.flags&=32767,Vt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(n=n.sibling,n!==null)){Vt=n;return}Vt=n=l}while(n!==null);Rn=6,Vt=null}function kb(n,a,l,c,v,x,k,$,ie){n.cancelPendingCommit=null;do Qu();while(fr!==0);if((dn&6)!==0)throw Error(i(327));if(a!==null){if(a===n.current)throw Error(i(177));if(x=a.lanes|a.childLanes,x|=$e,gt(n,l,x,k,$,ie),n===Sn&&(Vt=Sn=null,Wt=0),To=a,es=n,Do=l,Fh=x,Yh=v,wb=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,r_(Ve,function(){return Pb(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=V.T,V.T=null,v=F.p,F.p=2,k=dn,dn|=4;try{q1(n,a,l)}finally{dn=k,F.p=v,V.T=c}}fr=1,Ab(),Tb(),Db()}}function Ab(){if(fr===1){fr=0;var n=es,a=To,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=V.T,V.T=null;var c=F.p;F.p=2;var v=dn;dn|=4;try{mb(a,n);var x=om,k=mo(n.containerInfo),$=x.focusedElem,ie=x.selectionRange;if(k!==$&&$&&$.ownerDocument&&Cs($.ownerDocument.documentElement,$)){if(ie!==null&&Es($)){var Ne=ie.start,Ue=ie.end;if(Ue===void 0&&(Ue=Ne),"selectionStart"in $)$.selectionStart=Ne,$.selectionEnd=Math.min(Ue,$.value.length);else{var qe=$.ownerDocument||document,Me=qe&&qe.defaultView||window;if(Me.getSelection){var Oe=Me.getSelection(),Mt=$.textContent.length,Nt=Math.min(ie.start,Mt),gn=ie.end===void 0?Nt:Math.min(ie.end,Mt);!Oe.extend&&Nt>gn&&(k=gn,gn=Nt,Nt=k);var ye=xu($,Nt),me=xu($,gn);if(ye&&me&&(Oe.rangeCount!==1||Oe.anchorNode!==ye.node||Oe.anchorOffset!==ye.offset||Oe.focusNode!==me.node||Oe.focusOffset!==me.offset)){var je=qe.createRange();je.setStart(ye.node,ye.offset),Oe.removeAllRanges(),Nt>gn?(Oe.addRange(je),Oe.extend(me.node,me.offset)):(je.setEnd(me.node,me.offset),Oe.addRange(je))}}}}for(qe=[],Oe=$;Oe=Oe.parentNode;)Oe.nodeType===1&&qe.push({element:Oe,left:Oe.scrollLeft,top:Oe.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<qe.length;$++){var He=qe[$];He.element.scrollLeft=He.left,He.element.scrollTop=He.top}}ud=!!sm,om=sm=null}finally{dn=v,F.p=c,V.T=l}}n.current=a,fr=2}}function Tb(){if(fr===2){fr=0;var n=es,a=To,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=V.T,V.T=null;var c=F.p;F.p=2;var v=dn;dn|=4;try{ub(n,a.alternate,a)}finally{dn=v,F.p=c,V.T=l}}fr=3}}function Db(){if(fr===4||fr===3){fr=0,K();var n=es,a=To,l=Do,c=wb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?fr=5:(fr=0,To=es=null,Rb(n,n.pendingLanes));var v=n.pendingLanes;if(v===0&&(Ji=null),jn(l),a=a.stateNode,ae&&typeof ae.onCommitFiberRoot=="function")try{ae.onCommitFiberRoot(_e,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=V.T,v=F.p,F.p=2,V.T=null;try{for(var x=n.onRecoverableError,k=0;k<c.length;k++){var $=c[k];x($.value,{componentStack:$.stack})}}finally{V.T=a,F.p=v}}(Do&3)!==0&&Qu(),Ba(n),v=n.pendingLanes,(l&4194090)!==0&&(v&42)!==0?n===qh?ic++:(ic=0,qh=n):ic=0,sc(0)}}function Rb(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Ul(a)))}function Qu(n){return Ab(),Tb(),Db(),Pb()}function Pb(){if(fr!==5)return!1;var n=es,a=Fh;Fh=0;var l=jn(Do),c=V.T,v=F.p;try{F.p=32>l?32:l,V.T=null,l=Yh,Yh=null;var x=es,k=Do;if(fr=0,To=es=null,Do=0,(dn&6)!==0)throw Error(i(331));var $=dn;if(dn|=4,yb(x.current),gb(x,x.current,k,l),dn=$,sc(0,!1),ae&&typeof ae.onPostCommitFiberRoot=="function")try{ae.onPostCommitFiberRoot(_e,x)}catch{}return!0}finally{F.p=v,V.T=c,Rb(n,a)}}function zb(n,a,l){a=Ie(l,a),a=_h(n.stateNode,a,2),n=Fi(n,a,2),n!==null&&(mt(n,2),Ba(n))}function yn(n,a,l){if(n.tag===3)zb(n,n,l);else for(;a!==null;){if(a.tag===3){zb(a,n,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ji===null||!Ji.has(c))){n=Ie(l,n),l=Vv(2),c=Fi(a,l,2),c!==null&&(Bv(l,c,a,n),mt(c,2),Ba(c));break}}a=a.return}}function Xh(n,a,l){var c=n.pingCache;if(c===null){c=n.pingCache=new Z1;var v=new Set;c.set(a,v)}else v=c.get(a),v===void 0&&(v=new Set,c.set(a,v));v.has(l)||(Ih=!0,v.add(l),n=e_.bind(null,n,a,l),a.then(n,n))}function e_(n,a,l){var c=n.pingCache;c!==null&&c.delete(a),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Sn===n&&(Wt&l)===l&&(Rn===4||Rn===3&&(Wt&62914560)===Wt&&300>Ae()-Hh?(dn&2)===0&&Ro(n,0):Vh|=l,Ao===Wt&&(Ao=0)),Ba(n)}function $b(n,a){a===0&&(a=ea()),n=on(n,a),n!==null&&(mt(n,a),Ba(n))}function t_(n){var a=n.memoizedState,l=0;a!==null&&(l=a.retryLane),$b(n,l)}function n_(n,a){var l=0;switch(n.tag){case 13:var c=n.stateNode,v=n.memoizedState;v!==null&&(l=v.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(a),$b(n,l)}function r_(n,a){return Ke(n,a)}var Ju=null,zo=null,Kh=!1,ed=!1,Qh=!1,zs=0;function Ba(n){n!==zo&&n.next===null&&(zo===null?Ju=zo=n:zo=zo.next=n),ed=!0,Kh||(Kh=!0,i_())}function sc(n,a){if(!Qh&&ed){Qh=!0;do for(var l=!1,c=Ju;c!==null;){if(n!==0){var v=c.pendingLanes;if(v===0)var x=0;else{var k=c.suspendedLanes,$=c.pingedLanes;x=(1<<31-ne(42|n)+1)-1,x&=v&~(k&~$),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(l=!0,Bb(c,x))}else x=Wt,x=$t(c,c===Sn?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(x&3)===0||Lt(c,x)||(l=!0,Bb(c,x));c=c.next}while(l);Qh=!1}}function a_(){Ub()}function Ub(){ed=Kh=!1;var n=0;zs!==0&&(h_()&&(n=zs),zs=0);for(var a=Ae(),l=null,c=Ju;c!==null;){var v=c.next,x=Ib(c,a);x===0?(c.next=null,l===null?Ju=v:l.next=v,v===null&&(zo=l)):(l=c,(n!==0||(x&3)!==0)&&(ed=!0)),c=v}sc(n)}function Ib(n,a){for(var l=n.suspendedLanes,c=n.pingedLanes,v=n.expirationTimes,x=n.pendingLanes&-62914561;0<x;){var k=31-ne(x),$=1<<k,ie=v[k];ie===-1?(($&l)===0||($&c)!==0)&&(v[k]=Yn($,a)):ie<=a&&(n.expiredLanes|=$),x&=~$}if(a=Sn,l=Wt,l=$t(n,n===a?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,l===0||n===a&&(fn===2||fn===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&le(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Lt(n,l)){if(a=l&-l,a===n.callbackPriority)return a;switch(c!==null&&le(c),jn(l)){case 2:case 8:l=Ze;break;case 32:l=Ve;break;case 268435456:l=I;break;default:l=Ve}return c=Vb.bind(null,n),l=Ke(l,c),n.callbackPriority=a,n.callbackNode=l,a}return c!==null&&c!==null&&le(c),n.callbackPriority=2,n.callbackNode=null,2}function Vb(n,a){if(fr!==0&&fr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Qu()&&n.callbackNode!==l)return null;var c=Wt;return c=$t(n,n===Sn?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(jb(n,c,a),Ib(n,Ae()),n.callbackNode!=null&&n.callbackNode===l?Vb.bind(null,n):null)}function Bb(n,a){if(Qu())return null;jb(n,a,!0)}function i_(){p_(function(){(dn&6)!==0?Ke(De,a_):Ub()})}function Jh(){return zs===0&&(zs=Un()),zs}function Hb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:na(""+n)}function Fb(n,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,n.id&&l.setAttribute("form",n.id),a.parentNode.insertBefore(l,a),n=new FormData(n),l.parentNode.removeChild(l),n}function s_(n,a,l,c,v){if(a==="submit"&&l&&l.stateNode===v){var x=Hb((v[An]||null).action),k=c.submitter;k&&(a=(a=k[An]||null)?Hb(a.formAction):k.getAttribute("formAction"),a!==null&&(x=a,k=null));var $=new ia("action","action",null,c,v);n.push({event:$,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(zs!==0){var ie=k?Fb(v,k):new FormData(v);yh(l,{pending:!0,data:ie,method:v.method,action:x},null,ie)}}else typeof x=="function"&&($.preventDefault(),ie=k?Fb(v,k):new FormData(v),yh(l,{pending:!0,data:ie,method:v.method,action:x},x,ie))},currentTarget:v}]})}}for(var em=0;em<ee.length;em++){var tm=ee[em],o_=tm.toLowerCase(),l_=tm[0].toUpperCase()+tm.slice(1);re(o_,"on"+l_)}re(go,"onAnimationEnd"),re(Al,"onAnimationIteration"),re(Tl,"onAnimationStart"),re("dblclick","onDoubleClick"),re("focusin","onFocus"),re("focusout","onBlur"),re(D,"onTransitionRun"),re(G,"onTransitionStart"),re(Q,"onTransitionCancel"),re(J,"onTransitionEnd"),Nn("onMouseEnter",["mouseout","mouseover"]),Nn("onMouseLeave",["mouseout","mouseover"]),Nn("onPointerEnter",["pointerout","pointerover"]),Nn("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oc));function Yb(n,a){a=(a&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],v=c.event;c=c.listeners;e:{var x=void 0;if(a)for(var k=c.length-1;0<=k;k--){var $=c[k],ie=$.instance,Ne=$.currentTarget;if($=$.listener,ie!==x&&v.isPropagationStopped())break e;x=$,v.currentTarget=Ne;try{x(v)}catch(Ue){Vu(Ue)}v.currentTarget=null,x=ie}else for(k=0;k<c.length;k++){if($=c[k],ie=$.instance,Ne=$.currentTarget,$=$.listener,ie!==x&&v.isPropagationStopped())break e;x=$,v.currentTarget=Ne;try{x(v)}catch(Ue){Vu(Ue)}v.currentTarget=null,x=ie}}}}function Bt(n,a){var l=a[kr];l===void 0&&(l=a[kr]=new Set);var c=n+"__bubble";l.has(c)||(qb(a,n,2,!1),l.add(c))}function nm(n,a,l){var c=0;a&&(c|=4),qb(l,n,c,a)}var td="_reactListening"+Math.random().toString(36).slice(2);function rm(n){if(!n[td]){n[td]=!0,ut.forEach(function(l){l!=="selectionchange"&&(c_.has(l)||nm(l,!1,n),nm(l,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[td]||(a[td]=!0,nm("selectionchange",!1,a))}}function qb(n,a,l,c){switch(gy(a)){case 2:var v=P_;break;case 8:v=z_;break;default:v=vm}l=v.bind(null,a,l,n),v=void 0,!ou||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),c?v!==void 0?n.addEventListener(a,l,{capture:!0,passive:v}):n.addEventListener(a,l,!0):v!==void 0?n.addEventListener(a,l,{passive:v}):n.addEventListener(a,l,!1)}function am(n,a,l,c,v){var x=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var k=c.tag;if(k===3||k===4){var $=c.stateNode.containerInfo;if($===v)break;if(k===4)for(k=c.return;k!==null;){var ie=k.tag;if((ie===3||ie===4)&&k.stateNode.containerInfo===v)return;k=k.return}for(;$!==null;){if(k=We($),k===null)return;if(ie=k.tag,ie===5||ie===6||ie===26||ie===27){c=x=k;continue e}$=$.parentNode}}c=c.return}va(function(){var Ne=x,Ue=_t(l),qe=[];e:{var Me=q.get(n);if(Me!==void 0){var Oe=ia,Mt=n;switch(n){case"keypress":if(ao(l)===0)break e;case"keydown":case"keyup":Oe=du;break;case"focusin":Mt="focus",Oe=io;break;case"focusout":Mt="blur",Oe=io;break;case"beforeblur":case"afterblur":Oe=io;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=$f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=Hf;break;case go:case Al:case Tl:Oe=ws;break;case J:Oe=Aa;break;case"scroll":case"scrollend":Oe=Mr;break;case"wheel":Oe=fu;break;case"copy":case"cut":case"paste":Oe=cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Bf;break;case"toggle":case"beforetoggle":Oe=_s}var Nt=(a&4)!==0,gn=!Nt&&(n==="scroll"||n==="scrollend"),ye=Nt?Me!==null?Me+"Capture":null:Me;Nt=[];for(var me=Ne,je;me!==null;){var He=me;if(je=He.stateNode,He=He.tag,He!==5&&He!==26&&He!==27||je===null||ye===null||(He=Tn(me,ye),He!=null&&Nt.push(lc(me,He,je))),gn)break;me=me.return}0<Nt.length&&(Me=new Oe(Me,Mt,null,l,Ue),qe.push({event:Me,listeners:Nt}))}}if((a&7)===0){e:{if(Me=n==="mouseover"||n==="pointerover",Oe=n==="mouseout"||n==="pointerout",Me&&l!==ga&&(Mt=l.relatedTarget||l.fromElement)&&(We(Mt)||Mt[xn]))break e;if((Oe||Me)&&(Me=Ue.window===Ue?Ue:(Me=Ue.ownerDocument)?Me.defaultView||Me.parentWindow:window,Oe?(Mt=l.relatedTarget||l.toElement,Oe=Ne,Mt=Mt?We(Mt):null,Mt!==null&&(gn=u(Mt),Nt=Mt.tag,Mt!==gn||Nt!==5&&Nt!==27&&Nt!==6)&&(Mt=null)):(Oe=null,Mt=Ne),Oe!==Mt)){if(Nt=_l,He="onMouseLeave",ye="onMouseEnter",me="mouse",(n==="pointerout"||n==="pointerover")&&(Nt=Bf,He="onPointerLeave",ye="onPointerEnter",me="pointer"),gn=Oe==null?Me:ze(Oe),je=Mt==null?Me:ze(Mt),Me=new Nt(He,me+"leave",Oe,l,Ue),Me.target=gn,Me.relatedTarget=je,He=null,We(Ue)===Ne&&(Nt=new Nt(ye,me+"enter",Mt,l,Ue),Nt.target=je,Nt.relatedTarget=gn,He=Nt),gn=He,Oe&&Mt)t:{for(Nt=Oe,ye=Mt,me=0,je=Nt;je;je=$o(je))me++;for(je=0,He=ye;He;He=$o(He))je++;for(;0<me-je;)Nt=$o(Nt),me--;for(;0<je-me;)ye=$o(ye),je--;for(;me--;){if(Nt===ye||ye!==null&&Nt===ye.alternate)break t;Nt=$o(Nt),ye=$o(ye)}Nt=null}else Nt=null;Oe!==null&&Gb(qe,Me,Oe,Nt,!1),Mt!==null&&gn!==null&&Gb(qe,gn,Mt,Nt,!0)}}e:{if(Me=Ne?ze(Ne):window,Oe=Me.nodeName&&Me.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&Me.type==="file")var dt=Ll;else if(Ml(Me))if(vu)dt=Gf;else{dt=ho;var Ut=Ra}else Oe=Me.nodeName,!Oe||Oe.toLowerCase()!=="input"||Me.type!=="checkbox"&&Me.type!=="radio"?Ne&&ni(Ne.elementType)&&(dt=Ll):dt=qf;if(dt&&(dt=dt(n,Ne))){Ol(qe,dt,l,Ue);break e}Ut&&Ut(n,Me,Ne),n==="focusout"&&Ne&&Me.type==="number"&&Ne.memoizedProps.value!=null&&vl(Me,"number",Me.value)}switch(Ut=Ne?ze(Ne):window,n){case"focusin":(Ml(Ut)||Ut.contentEditable==="true")&&(Ui=Ut,po=Ne,ai=null);break;case"focusout":ai=po=Ui=null;break;case"mousedown":ii=!0;break;case"contextmenu":case"mouseup":case"dragend":ii=!1,Ms(qe,l,Ue);break;case"selectionchange":if(wu)break;case"keydown":case"keyup":Ms(qe,l,Ue)}var xt;if(Cl)e:{switch(n){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else Pi?gu(n,l)&&(Ct="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Ct="onCompositionStart");Ct&&(mu&&l.locale!=="ko"&&(Pi||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Pi&&(xt=wl()):(aa=Ue,xl="value"in aa?aa.value:aa.textContent,Pi=!0)),Ut=nd(Ne,Ct),0<Ut.length&&(Ct=new uu(Ct,n,null,l,Ue),qe.push({event:Ct,listeners:Ut}),xt?Ct.data=xt:(xt=lo(l),xt!==null&&(Ct.data=xt)))),(xt=Yf?zi(n,l):El(n,l))&&(Ct=nd(Ne,"onBeforeInput"),0<Ct.length&&(Ut=new uu("onBeforeInput","beforeinput",null,l,Ue),qe.push({event:Ut,listeners:Ct}),Ut.data=xt)),s_(qe,n,Ne,l,Ue)}Yb(qe,a)})}function lc(n,a,l){return{instance:n,listener:a,currentTarget:l}}function nd(n,a){for(var l=a+"Capture",c=[];n!==null;){var v=n,x=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||x===null||(v=Tn(n,l),v!=null&&c.unshift(lc(n,v,x)),v=Tn(n,a),v!=null&&c.push(lc(n,v,x))),n.tag===3)return c;n=n.return}return[]}function $o(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Gb(n,a,l,c,v){for(var x=a._reactName,k=[];l!==null&&l!==c;){var $=l,ie=$.alternate,Ne=$.stateNode;if($=$.tag,ie!==null&&ie===c)break;$!==5&&$!==26&&$!==27||Ne===null||(ie=Ne,v?(Ne=Tn(l,x),Ne!=null&&k.unshift(lc(l,Ne,ie))):v||(Ne=Tn(l,x),Ne!=null&&k.push(lc(l,Ne,ie)))),l=l.return}k.length!==0&&n.push({event:a,listeners:k})}var u_=/\r\n?/g,d_=/\u0000|\uFFFD/g;function Wb(n){return(typeof n=="string"?n:""+n).replace(u_,`
`).replace(d_,"")}function Zb(n,a){return a=Wb(a),Wb(n)===a}function rd(){}function pn(n,a,l,c,v,x){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Er(n,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Er(n,""+c);break;case"className":Jn(n,"class",c);break;case"tabIndex":Jn(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(n,l,c);break;case"style":yl(n,c,x);break;case"data":if(a!=="object"){Jn(n,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=na(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(l==="formAction"?(a!=="input"&&pn(n,a,"name",v.name,v,null),pn(n,a,"formEncType",v.formEncType,v,null),pn(n,a,"formMethod",v.formMethod,v,null),pn(n,a,"formTarget",v.formTarget,v,null)):(pn(n,a,"encType",v.encType,v,null),pn(n,a,"method",v.method,v,null),pn(n,a,"target",v.target,v,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=na(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=rd);break;case"onScroll":c!=null&&Bt("scroll",n);break;case"onScrollEnd":c!=null&&Bt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(v.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=na(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":Bt("beforetoggle",n),Bt("toggle",n),On(n,"popover",c);break;case"xlinkActuate":sr(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":sr(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":sr(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":sr(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":sr(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":sr(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":sr(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":sr(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":sr(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":On(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=to.get(l)||l,On(n,l,c))}}function im(n,a,l,c,v,x){switch(l){case"style":yl(n,c,x);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(v.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"children":typeof c=="string"?Er(n,c):(typeof c=="number"||typeof c=="bigint")&&Er(n,""+c);break;case"onScroll":c!=null&&Bt("scroll",n);break;case"onScrollEnd":c!=null&&Bt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=rd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ct.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),a=l.slice(2,v?l.length-7:void 0),x=n[An]||null,x=x!=null?x[l]:null,typeof x=="function"&&n.removeEventListener(a,x,v),typeof c=="function")){typeof x!="function"&&x!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(a,c,v);break e}l in n?n[l]=c:c===!0?n.setAttribute(l,""):On(n,l,c)}}}function hr(n,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",n),Bt("load",n);var c=!1,v=!1,x;for(x in l)if(l.hasOwnProperty(x)){var k=l[x];if(k!=null)switch(x){case"src":c=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:pn(n,a,x,k,l,null)}}v&&pn(n,a,"srcSet",l.srcSet,l,null),c&&pn(n,a,"src",l.src,l,null);return;case"input":Bt("invalid",n);var $=x=k=v=null,ie=null,Ne=null;for(c in l)if(l.hasOwnProperty(c)){var Ue=l[c];if(Ue!=null)switch(c){case"name":v=Ue;break;case"type":k=Ue;break;case"checked":ie=Ue;break;case"defaultChecked":Ne=Ue;break;case"value":x=Ue;break;case"defaultValue":$=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(i(137,a));break;default:pn(n,a,c,Ue,l,null)}}su(n,x,$,ie,Ne,k,v,!1),Oi(n);return;case"select":Bt("invalid",n),c=k=x=null;for(v in l)if(l.hasOwnProperty(v)&&($=l[v],$!=null))switch(v){case"value":x=$;break;case"defaultValue":k=$;break;case"multiple":c=$;default:pn(n,a,v,$,l,null)}a=x,l=k,n.multiple=!!c,a!=null?ti(n,!!c,a,!1):l!=null&&ti(n,!!c,l,!0);return;case"textarea":Bt("invalid",n),x=v=c=null;for(k in l)if(l.hasOwnProperty(k)&&($=l[k],$!=null))switch(k){case"value":c=$;break;case"defaultValue":v=$;break;case"children":x=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(i(91));break;default:pn(n,a,k,$,l,null)}ta(n,c,v,x),Oi(n);return;case"option":for(ie in l)if(l.hasOwnProperty(ie)&&(c=l[ie],c!=null))switch(ie){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:pn(n,a,ie,c,l,null)}return;case"dialog":Bt("beforetoggle",n),Bt("toggle",n),Bt("cancel",n),Bt("close",n);break;case"iframe":case"object":Bt("load",n);break;case"video":case"audio":for(c=0;c<oc.length;c++)Bt(oc[c],n);break;case"image":Bt("error",n),Bt("load",n);break;case"details":Bt("toggle",n);break;case"embed":case"source":case"link":Bt("error",n),Bt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ne in l)if(l.hasOwnProperty(Ne)&&(c=l[Ne],c!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:pn(n,a,Ne,c,l,null)}return;default:if(ni(a)){for(Ue in l)l.hasOwnProperty(Ue)&&(c=l[Ue],c!==void 0&&im(n,a,Ue,c,l,void 0));return}}for($ in l)l.hasOwnProperty($)&&(c=l[$],c!=null&&pn(n,a,$,c,l,null))}function f_(n,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,x=null,k=null,$=null,ie=null,Ne=null,Ue=null;for(Oe in l){var qe=l[Oe];if(l.hasOwnProperty(Oe)&&qe!=null)switch(Oe){case"checked":break;case"value":break;case"defaultValue":ie=qe;default:c.hasOwnProperty(Oe)||pn(n,a,Oe,null,c,qe)}}for(var Me in c){var Oe=c[Me];if(qe=l[Me],c.hasOwnProperty(Me)&&(Oe!=null||qe!=null))switch(Me){case"type":x=Oe;break;case"name":v=Oe;break;case"checked":Ne=Oe;break;case"defaultChecked":Ue=Oe;break;case"value":k=Oe;break;case"defaultValue":$=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,a));break;default:Oe!==qe&&pn(n,a,Me,Oe,c,qe)}}gl(n,k,$,ie,Ne,Ue,x,v);return;case"select":Oe=k=$=Me=null;for(x in l)if(ie=l[x],l.hasOwnProperty(x)&&ie!=null)switch(x){case"value":break;case"multiple":Oe=ie;default:c.hasOwnProperty(x)||pn(n,a,x,null,c,ie)}for(v in c)if(x=c[v],ie=l[v],c.hasOwnProperty(v)&&(x!=null||ie!=null))switch(v){case"value":Me=x;break;case"defaultValue":$=x;break;case"multiple":k=x;default:x!==ie&&pn(n,a,v,x,c,ie)}a=$,l=k,c=Oe,Me!=null?ti(n,!!l,Me,!1):!!c!=!!l&&(a!=null?ti(n,!!l,a,!0):ti(n,!!l,l?[]:"",!1));return;case"textarea":Oe=Me=null;for($ in l)if(v=l[$],l.hasOwnProperty($)&&v!=null&&!c.hasOwnProperty($))switch($){case"value":break;case"children":break;default:pn(n,a,$,null,c,v)}for(k in c)if(v=c[k],x=l[k],c.hasOwnProperty(k)&&(v!=null||x!=null))switch(k){case"value":Me=v;break;case"defaultValue":Oe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==x&&pn(n,a,k,v,c,x)}bl(n,Me,Oe);return;case"option":for(var Mt in l)if(Me=l[Mt],l.hasOwnProperty(Mt)&&Me!=null&&!c.hasOwnProperty(Mt))switch(Mt){case"selected":n.selected=!1;break;default:pn(n,a,Mt,null,c,Me)}for(ie in c)if(Me=c[ie],Oe=l[ie],c.hasOwnProperty(ie)&&Me!==Oe&&(Me!=null||Oe!=null))switch(ie){case"selected":n.selected=Me&&typeof Me!="function"&&typeof Me!="symbol";break;default:pn(n,a,ie,Me,c,Oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nt in l)Me=l[Nt],l.hasOwnProperty(Nt)&&Me!=null&&!c.hasOwnProperty(Nt)&&pn(n,a,Nt,null,c,Me);for(Ne in c)if(Me=c[Ne],Oe=l[Ne],c.hasOwnProperty(Ne)&&Me!==Oe&&(Me!=null||Oe!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(i(137,a));break;default:pn(n,a,Ne,Me,c,Oe)}return;default:if(ni(a)){for(var gn in l)Me=l[gn],l.hasOwnProperty(gn)&&Me!==void 0&&!c.hasOwnProperty(gn)&&im(n,a,gn,void 0,c,Me);for(Ue in c)Me=c[Ue],Oe=l[Ue],!c.hasOwnProperty(Ue)||Me===Oe||Me===void 0&&Oe===void 0||im(n,a,Ue,Me,c,Oe);return}}for(var ye in l)Me=l[ye],l.hasOwnProperty(ye)&&Me!=null&&!c.hasOwnProperty(ye)&&pn(n,a,ye,null,c,Me);for(qe in c)Me=c[qe],Oe=l[qe],!c.hasOwnProperty(qe)||Me===Oe||Me==null&&Oe==null||pn(n,a,qe,Me,c,Oe)}var sm=null,om=null;function ad(n){return n.nodeType===9?n:n.ownerDocument}function Xb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kb(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function lm(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var cm=null;function h_(){var n=window.event;return n&&n.type==="popstate"?n===cm?!1:(cm=n,!0):(cm=null,!1)}var Qb=typeof setTimeout=="function"?setTimeout:void 0,m_=typeof clearTimeout=="function"?clearTimeout:void 0,Jb=typeof Promise=="function"?Promise:void 0,p_=typeof queueMicrotask=="function"?queueMicrotask:typeof Jb<"u"?function(n){return Jb.resolve(null).then(n).catch(g_)}:Qb;function g_(n){setTimeout(function(){throw n})}function ns(n){return n==="head"}function ey(n,a){var l=a,c=0,v=0;do{var x=l.nextSibling;if(n.removeChild(l),x&&x.nodeType===8)if(l=x.data,l==="/$"){if(0<c&&8>c){l=c;var k=n.ownerDocument;if(l&1&&cc(k.documentElement),l&2&&cc(k.body),l&4)for(l=k.head,cc(l),k=l.firstChild;k;){var $=k.nextSibling,ie=k.nodeName;k[ke]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&k.rel.toLowerCase()==="stylesheet"||l.removeChild(k),k=$}}if(v===0){n.removeChild(x),vc(a);return}v--}else l==="$"||l==="$?"||l==="$!"?v++:c=l.charCodeAt(0)-48;else c=0;l=x}while(l);vc(a)}function um(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":um(l),nt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function v_(n,a,l,c){for(;n.nodeType===1;){var v=l;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[ke])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(x=n.getAttribute("rel"),x==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(x!==v.rel||n.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||n.getAttribute("title")!==(v.title==null?null:v.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(x=n.getAttribute("src"),(x!==(v.src==null?null:v.src)||n.getAttribute("type")!==(v.type==null?null:v.type)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&x&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var x=v.name==null?null:""+v.name;if(v.type==="hidden"&&n.getAttribute("name")===x)return n}else return n;if(n=_a(n.nextSibling),n===null)break}return null}function b_(n,a,l){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=_a(n.nextSibling),n===null))return null;return n}function dm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function y_(n,a){var l=n.ownerDocument;if(n.data!=="$?"||l.readyState==="complete")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function _a(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return n}var fm=null;function ty(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return n;a--}else l==="/$"&&a++}n=n.previousSibling}return null}function ny(n,a,l){switch(a=ad(l),n){case"html":if(n=a.documentElement,!n)throw Error(i(452));return n;case"head":if(n=a.head,!n)throw Error(i(453));return n;case"body":if(n=a.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function cc(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);nt(n)}var da=new Map,ry=new Set;function id(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var gi=F.d;F.d={f:x_,r:w_,D:S_,C:j_,L:__,m:N_,X:E_,S:C_,M:M_};function x_(){var n=gi.f(),a=Xu();return n||a}function w_(n){var a=st(n);a!==null&&a.tag===5&&a.type==="form"?jv(a):gi.r(n)}var Uo=typeof document>"u"?null:document;function ay(n,a,l){var c=Uo;if(c&&typeof a=="string"&&a){var v=Ar(a);v='link[rel="'+n+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),ry.has(v)||(ry.add(v),n={rel:n,crossOrigin:l,href:a},c.querySelector(v)===null&&(a=c.createElement("link"),hr(a,"link",n),Qe(a),c.head.appendChild(a)))}}function S_(n){gi.D(n),ay("dns-prefetch",n,null)}function j_(n,a){gi.C(n,a),ay("preconnect",n,a)}function __(n,a,l){gi.L(n,a,l);var c=Uo;if(c&&n&&a){var v='link[rel="preload"][as="'+Ar(a)+'"]';a==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Ar(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Ar(l.imageSizes)+'"]')):v+='[href="'+Ar(n)+'"]';var x=v;switch(a){case"style":x=Io(n);break;case"script":x=Vo(n)}da.has(x)||(n=g({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:n,as:a},l),da.set(x,n),c.querySelector(v)!==null||a==="style"&&c.querySelector(uc(x))||a==="script"&&c.querySelector(dc(x))||(a=c.createElement("link"),hr(a,"link",n),Qe(a),c.head.appendChild(a)))}}function N_(n,a){gi.m(n,a);var l=Uo;if(l&&n){var c=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+Ar(c)+'"][href="'+Ar(n)+'"]',x=v;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Vo(n)}if(!da.has(x)&&(n=g({rel:"modulepreload",href:n},a),da.set(x,n),l.querySelector(v)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(dc(x)))return}c=l.createElement("link"),hr(c,"link",n),Qe(c),l.head.appendChild(c)}}}function C_(n,a,l){gi.S(n,a,l);var c=Uo;if(c&&n){var v=Fe(c).hoistableStyles,x=Io(n);a=a||"default";var k=v.get(x);if(!k){var $={loading:0,preload:null};if(k=c.querySelector(uc(x)))$.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":a},l),(l=da.get(x))&&hm(n,l);var ie=k=c.createElement("link");Qe(ie),hr(ie,"link",n),ie._p=new Promise(function(Ne,Ue){ie.onload=Ne,ie.onerror=Ue}),ie.addEventListener("load",function(){$.loading|=1}),ie.addEventListener("error",function(){$.loading|=2}),$.loading|=4,sd(k,a,c)}k={type:"stylesheet",instance:k,count:1,state:$},v.set(x,k)}}}function E_(n,a){gi.X(n,a);var l=Uo;if(l&&n){var c=Fe(l).hoistableScripts,v=Vo(n),x=c.get(v);x||(x=l.querySelector(dc(v)),x||(n=g({src:n,async:!0},a),(a=da.get(v))&&mm(n,a),x=l.createElement("script"),Qe(x),hr(x,"link",n),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(v,x))}}function M_(n,a){gi.M(n,a);var l=Uo;if(l&&n){var c=Fe(l).hoistableScripts,v=Vo(n),x=c.get(v);x||(x=l.querySelector(dc(v)),x||(n=g({src:n,async:!0,type:"module"},a),(a=da.get(v))&&mm(n,a),x=l.createElement("script"),Qe(x),hr(x,"link",n),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(v,x))}}function iy(n,a,l,c){var v=(v=ue.current)?id(v):null;if(!v)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Io(l.href),l=Fe(v).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Io(l.href);var x=Fe(v).hoistableStyles,k=x.get(n);if(k||(v=v.ownerDocument||v,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(n,k),(x=v.querySelector(uc(n)))&&!x._p&&(k.instance=x,k.state.loading=5),da.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},da.set(n,l),x||O_(v,n,l,k.state))),a&&c===null)throw Error(i(528,""));return k}if(a&&c!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Vo(l),l=Fe(v).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Io(n){return'href="'+Ar(n)+'"'}function uc(n){return'link[rel="stylesheet"]['+n+"]"}function sy(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function O_(n,a,l,c){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=n.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),hr(a,"link",l),Qe(a),n.head.appendChild(a))}function Vo(n){return'[src="'+Ar(n)+'"]'}function dc(n){return"script[async]"+n}function oy(n,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=n.querySelector('style[data-href~="'+Ar(l.href)+'"]');if(c)return a.instance=c,Qe(c),c;var v=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Qe(c),hr(c,"style",v),sd(c,l.precedence,n),a.instance=c;case"stylesheet":v=Io(l.href);var x=n.querySelector(uc(v));if(x)return a.state.loading|=4,a.instance=x,Qe(x),x;c=sy(l),(v=da.get(v))&&hm(c,v),x=(n.ownerDocument||n).createElement("link"),Qe(x);var k=x;return k._p=new Promise(function($,ie){k.onload=$,k.onerror=ie}),hr(x,"link",c),a.state.loading|=4,sd(x,l.precedence,n),a.instance=x;case"script":return x=Vo(l.src),(v=n.querySelector(dc(x)))?(a.instance=v,Qe(v),v):(c=l,(v=da.get(x))&&(c=g({},l),mm(c,v)),n=n.ownerDocument||n,v=n.createElement("script"),Qe(v),hr(v,"link",c),n.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,sd(c,l.precedence,n));return a.instance}function sd(n,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=c.length?c[c.length-1]:null,x=v,k=0;k<c.length;k++){var $=c[k];if($.dataset.precedence===a)x=$;else if(x!==v)break}x?x.parentNode.insertBefore(n,x.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(n,a.firstChild))}function hm(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function mm(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var od=null;function ly(n,a,l){if(od===null){var c=new Map,v=od=new Map;v.set(l,c)}else v=od,c=v.get(l),c||(c=new Map,v.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),v=0;v<l.length;v++){var x=l[v];if(!(x[ke]||x[lt]||n==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var k=x.getAttribute(a)||"";k=n+k;var $=c.get(k);$?$.push(x):c.set(k,[x])}}return c}function cy(n,a,l){n=n.ownerDocument||n,n.head.insertBefore(l,a==="title"?n.querySelector("head > title"):null)}function L_(n,a,l){if(l===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function uy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var fc=null;function k_(){}function A_(n,a,l){if(fc===null)throw Error(i(475));var c=fc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=Io(l.href),x=n.querySelector(uc(v));if(x){n=x._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=ld.bind(c),n.then(c,c)),a.state.loading|=4,a.instance=x,Qe(x);return}x=n.ownerDocument||n,l=sy(l),(v=da.get(v))&&hm(l,v),x=x.createElement("link"),Qe(x);var k=x;k._p=new Promise(function($,ie){k.onload=$,k.onerror=ie}),hr(x,"link",l),a.instance=x}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=ld.bind(c),n.addEventListener("load",a),n.addEventListener("error",a))}}function T_(){if(fc===null)throw Error(i(475));var n=fc;return n.stylesheets&&n.count===0&&pm(n,n.stylesheets),0<n.count?function(a){var l=setTimeout(function(){if(n.stylesheets&&pm(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l)}}:null}function ld(){if(this.count--,this.count===0){if(this.stylesheets)pm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var cd=null;function pm(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,cd=new Map,a.forEach(D_,n),cd=null,ld.call(n))}function D_(n,a){if(!(a.state.loading&4)){var l=cd.get(n);if(l)var c=l.get(null);else{l=new Map,cd.set(n,l);for(var v=n.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<v.length;x++){var k=v[x];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(l.set(k.dataset.precedence,k),c=k)}c&&l.set(null,c)}v=a.instance,k=v.getAttribute("data-precedence"),x=l.get(k)||c,x===c&&l.set(null,v),l.set(k,v),this.count++,c=ld.bind(this),v.addEventListener("load",c),v.addEventListener("error",c),x?x.parentNode.insertBefore(v,x.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(v,n.firstChild)),a.state.loading|=4}}var hc={$$typeof:M,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function R_(n,a,l,c,v,x,k,$){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=c,this.onUncaughtError=v,this.onCaughtError=x,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function dy(n,a,l,c,v,x,k,$,ie,Ne,Ue,qe){return n=new R_(n,a,l,k,$,ie,Ne,qe),a=1,x===!0&&(a|=24),x=Ye(3,null,null,a),n.current=x,x.stateNode=n,a=Xf(),a.refCount++,n.pooledCache=a,a.refCount++,x.memoizedState={element:c,isDehydrated:l,cache:a},eh(x),n}function fy(n){return n?(n=tt,n):tt}function hy(n,a,l,c,v,x){v=fy(v),c.context===null?c.context=v:c.pendingContext=v,c=Hi(a),c.payload={element:l},x=x===void 0?null:x,x!==null&&(c.callback=x),l=Fi(n,c,a),l!==null&&(Zr(l,n,a),Hl(l,n,a))}function my(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<a?l:a}}function gm(n,a){my(n,a),(n=n.alternate)&&my(n,a)}function py(n){if(n.tag===13){var a=on(n,67108864);a!==null&&Zr(a,n,67108864),gm(n,67108864)}}var ud=!0;function P_(n,a,l,c){var v=V.T;V.T=null;var x=F.p;try{F.p=2,vm(n,a,l,c)}finally{F.p=x,V.T=v}}function z_(n,a,l,c){var v=V.T;V.T=null;var x=F.p;try{F.p=8,vm(n,a,l,c)}finally{F.p=x,V.T=v}}function vm(n,a,l,c){if(ud){var v=bm(c);if(v===null)am(n,a,c,dd,l),vy(n,c);else if(U_(v,n,a,l,c))c.stopPropagation();else if(vy(n,c),a&4&&-1<$_.indexOf(n)){for(;v!==null;){var x=st(v);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var k=rt(x.pendingLanes);if(k!==0){var $=x;for($.pendingLanes|=2,$.entangledLanes|=2;k;){var ie=1<<31-ne(k);$.entanglements[1]|=ie,k&=~ie}Ba(x),(dn&6)===0&&(Wu=Ae()+500,sc(0))}}break;case 13:$=on(x,2),$!==null&&Zr($,x,2),Xu(),gm(x,2)}if(x=bm(c),x===null&&am(n,a,c,dd,l),x===v)break;v=x}v!==null&&c.stopPropagation()}else am(n,a,c,null,l)}}function bm(n){return n=_t(n),ym(n)}var dd=null;function ym(n){if(dd=null,n=We(n),n!==null){var a=u(n);if(a===null)n=null;else{var l=a.tag;if(l===13){if(n=d(a),n!==null)return n;n=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return dd=n,null}function gy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case De:return 2;case Ze:return 8;case Ve:case de:return 32;case I:return 268435456;default:return 32}default:return 32}}var xm=!1,rs=null,as=null,is=null,mc=new Map,pc=new Map,ss=[],$_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vy(n,a){switch(n){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":mc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(a.pointerId)}}function gc(n,a,l,c,v,x){return n===null||n.nativeEvent!==x?(n={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:x,targetContainers:[v]},a!==null&&(a=st(a),a!==null&&py(a)),n):(n.eventSystemFlags|=c,a=n.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),n)}function U_(n,a,l,c,v){switch(a){case"focusin":return rs=gc(rs,n,a,l,c,v),!0;case"dragenter":return as=gc(as,n,a,l,c,v),!0;case"mouseover":return is=gc(is,n,a,l,c,v),!0;case"pointerover":var x=v.pointerId;return mc.set(x,gc(mc.get(x)||null,n,a,l,c,v)),!0;case"gotpointercapture":return x=v.pointerId,pc.set(x,gc(pc.get(x)||null,n,a,l,c,v)),!0}return!1}function by(n){var a=We(n.target);if(a!==null){var l=u(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){n.blockedOn=a,Qn(n.priority,function(){if(l.tag===13){var c=Wr();c=Ft(c);var v=on(l,c);v!==null&&Zr(v,l,c),gm(l,c)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fd(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var l=bm(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);ga=c,l.target.dispatchEvent(c),ga=null}else return a=st(l),a!==null&&py(a),n.blockedOn=l,!1;a.shift()}return!0}function yy(n,a,l){fd(n)&&l.delete(a)}function I_(){xm=!1,rs!==null&&fd(rs)&&(rs=null),as!==null&&fd(as)&&(as=null),is!==null&&fd(is)&&(is=null),mc.forEach(yy),pc.forEach(yy)}function hd(n,a){n.blockedOn===a&&(n.blockedOn=null,xm||(xm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,I_)))}var md=null;function xy(n){md!==n&&(md=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){md===n&&(md=null);for(var a=0;a<n.length;a+=3){var l=n[a],c=n[a+1],v=n[a+2];if(typeof c!="function"){if(ym(c||l)===null)continue;break}var x=st(l);x!==null&&(n.splice(a,3),a-=3,yh(x,{pending:!0,data:v,method:l.method,action:c},c,v))}}))}function vc(n){function a(ie){return hd(ie,n)}rs!==null&&hd(rs,n),as!==null&&hd(as,n),is!==null&&hd(is,n),mc.forEach(a),pc.forEach(a);for(var l=0;l<ss.length;l++){var c=ss[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ss.length&&(l=ss[0],l.blockedOn===null);)by(l),l.blockedOn===null&&ss.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var v=l[c],x=l[c+1],k=v[An]||null;if(typeof x=="function")k||xy(l);else if(k){var $=null;if(x&&x.hasAttribute("formAction")){if(v=x,k=x[An]||null)$=k.formAction;else if(ym(v)!==null)continue}else $=k.action;typeof $=="function"?l[c+1]=$:(l.splice(c,3),c-=3),xy(l)}}}function wm(n){this._internalRoot=n}pd.prototype.render=wm.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,c=Wr();hy(l,c,n,a,null,null)},pd.prototype.unmount=wm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;hy(n.current,2,null,n,null,null),Xu(),a[xn]=null}};function pd(n){this._internalRoot=n}pd.prototype.unstable_scheduleHydration=function(n){if(n){var a=nn();n={blockedOn:null,target:n,priority:a};for(var l=0;l<ss.length&&a!==0&&a<ss[l].priority;l++);ss.splice(l,0,n),l===0&&by(n)}};var wy=t.version;if(wy!=="19.1.0")throw Error(i(527,wy,"19.1.0"));F.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=h(a),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var V_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{_e=gd.inject(V_),ae=gd}catch{}}return yc.createRoot=function(n,a){if(!s(n))throw Error(i(299));var l=!1,c="",v=zv,x=$v,k=Uv,$=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(k=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&($=a.unstable_transitionCallbacks)),a=dy(n,1,!1,null,null,l,c,v,x,k,$,null),n[xn]=a.current,rm(n),new wm(a)},yc.hydrateRoot=function(n,a,l){if(!s(n))throw Error(i(299));var c=!1,v="",x=zv,k=$v,$=Uv,ie=null,Ne=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(k=l.onCaughtError),l.onRecoverableError!==void 0&&($=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(ie=l.unstable_transitionCallbacks),l.formState!==void 0&&(Ne=l.formState)),a=dy(n,1,!0,a,l??null,c,v,x,k,$,ie,Ne),a.context=fy(null),l=a.current,c=Wr(),c=Ft(c),v=Hi(c),v.callback=null,Fi(l,v,c),l=c,a.current.lanes=l,mt(a,l),Ba(a),n[xn]=a.current,rm(n),new pd(a)},yc.version="19.1.0",yc}var Ay;function K_(){if(Ay)return _m.exports;Ay=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_m.exports=X_(),_m.exports}var Q_=K_(),xc={},Ty;function J_(){if(Ty)return xc;Ty=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.parse=d,xc.serialize=p;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,u=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function d(w,S){const y=new u,j=w.length;if(j<2)return y;const N=(S==null?void 0:S.decode)||g;let E=0;do{const _=w.indexOf("=",E);if(_===-1)break;const M=w.indexOf(";",E),O=M===-1?j:M;if(_>O){E=w.lastIndexOf(";",_-1)+1;continue}const C=m(w,E,_),L=h(w,_,C),B=w.slice(C,L);if(y[B]===void 0){let Z=m(w,_+1,O),R=h(w,O,Z);const X=N(w.slice(Z,R));y[B]=X}E=O+1}while(E<j);return y}function m(w,S,y){do{const j=w.charCodeAt(S);if(j!==32&&j!==9)return S}while(++S<y);return y}function h(w,S,y){for(;S>y;){const j=w.charCodeAt(--S);if(j!==32&&j!==9)return S+1}return y}function p(w,S,y){const j=(y==null?void 0:y.encode)||encodeURIComponent;if(!e.test(w))throw new TypeError(`argument name is invalid: ${w}`);const N=j(S);if(!t.test(N))throw new TypeError(`argument val is invalid: ${S}`);let E=w+"="+N;if(!y)return E;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);E+="; Max-Age="+y.maxAge}if(y.domain){if(!r.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);E+="; Domain="+y.domain}if(y.path){if(!i.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);E+="; Path="+y.path}if(y.expires){if(!b(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);E+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(E+="; HttpOnly"),y.secure&&(E+="; Secure"),y.partitioned&&(E+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return E}function g(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function b(w){return s.call(w)==="[object Date]"}return xc}J_();var Dy="popstate";function eN(e={}){function t(i,s){let{pathname:u,search:d,hash:m}=i.location;return op("",{pathname:u,search:d,hash:m},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){return typeof s=="string"?s:Pc(s)}return nN(t,r,null,e)}function En(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Na(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tN(){return Math.random().toString(36).substring(2,10)}function Ry(e,t){return{usr:e.state,key:e.key,idx:t}}function op(e,t,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?tl(t):t,state:r,key:t&&t.key||i||tN()}}function Pc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function tl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function nN(e,t,r,i={}){let{window:s=document.defaultView,v5Compat:u=!1}=i,d=s.history,m="POP",h=null,p=g();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function g(){return(d.state||{idx:null}).idx}function b(){m="POP";let N=g(),E=N==null?null:N-p;p=N,h&&h({action:m,location:j.location,delta:E})}function w(N,E){m="PUSH";let _=op(j.location,N,E);p=g()+1;let M=Ry(_,p),O=j.createHref(_);try{d.pushState(M,"",O)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(O)}u&&h&&h({action:m,location:j.location,delta:1})}function S(N,E){m="REPLACE";let _=op(j.location,N,E);p=g();let M=Ry(_,p),O=j.createHref(_);d.replaceState(M,"",O),u&&h&&h({action:m,location:j.location,delta:0})}function y(N){return rN(N)}let j={get action(){return m},get location(){return e(s,d)},listen(N){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(Dy,b),h=N,()=>{s.removeEventListener(Dy,b),h=null}},createHref(N){return t(s,N)},createURL:y,encodeLocation(N){let E=y(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:w,replace:S,go(N){return d.go(N)}};return j}function rN(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),En(r,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:Pc(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function Uw(e,t,r="/"){return aN(e,t,r,!1)}function aN(e,t,r,i){let s=typeof t=="string"?tl(t):t,u=Si(s.pathname||"/",r);if(u==null)return null;let d=Iw(e);iN(d);let m=null;for(let h=0;m==null&&h<d.length;++h){let p=gN(u);m=mN(d[h],p,i)}return m}function Iw(e,t=[],r=[],i=""){let s=(u,d,m)=>{let h={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};h.relativePath.startsWith("/")&&(En(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length));let p=xi([i,h.relativePath]),g=r.concat(h);u.children&&u.children.length>0&&(En(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Iw(u.children,t,g,p)),!(u.path==null&&!u.index)&&t.push({path:p,score:fN(p,u.index),routesMeta:g})};return e.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))s(u,d);else for(let h of Vw(u.path))s(u,d,h)}),t}function Vw(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,s=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return s?[u,""]:[u];let d=Vw(i.join("/")),m=[];return m.push(...d.map(h=>h===""?u:[u,h].join("/"))),s&&m.push(...d),m.map(h=>e.startsWith("/")&&h===""?"/":h)}function iN(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hN(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var sN=/^:[\w-]+$/,oN=3,lN=2,cN=1,uN=10,dN=-2,Py=e=>e==="*";function fN(e,t){let r=e.split("/"),i=r.length;return r.some(Py)&&(i+=dN),t&&(i+=lN),r.filter(s=>!Py(s)).reduce((s,u)=>s+(sN.test(u)?oN:u===""?cN:uN),i)}function hN(e,t){return e.length===t.length&&e.slice(0,-1).every((i,s)=>i===t[s])?e[e.length-1]-t[t.length-1]:0}function mN(e,t,r=!1){let{routesMeta:i}=e,s={},u="/",d=[];for(let m=0;m<i.length;++m){let h=i[m],p=m===i.length-1,g=u==="/"?t:t.slice(u.length)||"/",b=Wd({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),w=h.route;if(!b&&p&&r&&!i[i.length-1].route.index&&(b=Wd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!b)return null;Object.assign(s,b.params),d.push({params:s,pathname:xi([u,b.pathname]),pathnameBase:xN(xi([u,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(u=xi([u,b.pathnameBase]))}return d}function Wd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=pN(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let u=s[0],d=u.replace(/(.)\/+$/,"$1"),m=s.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:b},w)=>{if(g==="*"){let y=m[w]||"";d=u.slice(0,u.length-y.length).replace(/(.)\/+$/,"$1")}const S=m[w];return b&&!S?p[g]=void 0:p[g]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:d,pattern:e}}function pN(e,t=!1,r=!0){Na(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,h)=>(i.push({paramName:m,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function gN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Na(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Si(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function vN(e,t="/"){let{pathname:r,search:i="",hash:s=""}=typeof e=="string"?tl(e):e;return{pathname:r?r.startsWith("/")?r:bN(r,t):t,search:wN(i),hash:SN(s)}}function bN(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Mm(e,t,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yN(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Wp(e){let t=yN(e);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function Zp(e,t,r,i=!1){let s;typeof e=="string"?s=tl(e):(s={...e},En(!s.pathname||!s.pathname.includes("?"),Mm("?","pathname","search",s)),En(!s.pathname||!s.pathname.includes("#"),Mm("#","pathname","hash",s)),En(!s.search||!s.search.includes("#"),Mm("#","search","hash",s)));let u=e===""||s.pathname==="",d=u?"/":s.pathname,m;if(d==null)m=r;else{let b=t.length-1;if(!i&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),b-=1;s.pathname=w.join("/")}m=b>=0?t[b]:"/"}let h=vN(s,m),p=d&&d!=="/"&&d.endsWith("/"),g=(u||d===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}var xi=e=>e.join("/").replace(/\/\/+/g,"/"),xN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,SN=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jN(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Bw=["POST","PUT","PATCH","DELETE"];new Set(Bw);var _N=["GET",...Bw];new Set(_N);var nl=f.createContext(null);nl.displayName="DataRouter";var gf=f.createContext(null);gf.displayName="DataRouterState";var Hw=f.createContext({isTransitioning:!1});Hw.displayName="ViewTransition";var NN=f.createContext(new Map);NN.displayName="Fetchers";var CN=f.createContext(null);CN.displayName="Await";var Ca=f.createContext(null);Ca.displayName="Navigation";var qc=f.createContext(null);qc.displayName="Location";var Ea=f.createContext({outlet:null,matches:[],isDataRoute:!1});Ea.displayName="Route";var Xp=f.createContext(null);Xp.displayName="RouteError";function EN(e,{relative:t}={}){En(rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=f.useContext(Ca),{hash:s,pathname:u,search:d}=Gc(e,{relative:t}),m=u;return r!=="/"&&(m=u==="/"?r:xi([r,u])),i.createHref({pathname:m,search:d,hash:s})}function rl(){return f.useContext(qc)!=null}function Qa(){return En(rl(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(qc).location}var Fw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Yw(e){f.useContext(Ca).static||f.useLayoutEffect(e)}function vf(){let{isDataRoute:e}=f.useContext(Ea);return e?IN():MN()}function MN(){En(rl(),"useNavigate() may be used only in the context of a <Router> component.");let e=f.useContext(nl),{basename:t,navigator:r}=f.useContext(Ca),{matches:i}=f.useContext(Ea),{pathname:s}=Qa(),u=JSON.stringify(Wp(i)),d=f.useRef(!1);return Yw(()=>{d.current=!0}),f.useCallback((h,p={})=>{if(Na(d.current,Fw),!d.current)return;if(typeof h=="number"){r.go(h);return}let g=Zp(h,JSON.parse(u),s,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:xi([t,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[t,r,u,s,e])}f.createContext(null);function bf(){let{matches:e}=f.useContext(Ea),t=e[e.length-1];return t?t.params:{}}function Gc(e,{relative:t}={}){let{matches:r}=f.useContext(Ea),{pathname:i}=Qa(),s=JSON.stringify(Wp(r));return f.useMemo(()=>Zp(e,JSON.parse(s),i,t==="path"),[e,s,i,t])}function ON(e,t){return qw(e,t)}function qw(e,t,r,i){var _;En(rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:u}=f.useContext(Ca),{matches:d}=f.useContext(Ea),m=d[d.length-1],h=m?m.params:{},p=m?m.pathname:"/",g=m?m.pathnameBase:"/",b=m&&m.route;{let M=b&&b.path||"";Gw(p,!b||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let w=Qa(),S;if(t){let M=typeof t=="string"?tl(t):t;En(g==="/"||((_=M.pathname)==null?void 0:_.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${M.pathname}" was given in the \`location\` prop.`),S=M}else S=w;let y=S.pathname||"/",j=y;if(g!=="/"){let M=g.replace(/^\//,"").split("/");j="/"+y.replace(/^\//,"").split("/").slice(M.length).join("/")}let N=!u&&r&&r.matches&&r.matches.length>0?r.matches:Uw(e,{pathname:j});Na(b||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Na(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=DN(N&&N.map(M=>Object.assign({},M,{params:Object.assign({},h,M.params),pathname:xi([g,s.encodeLocation?s.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:xi([g,s.encodeLocation?s.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),d,r,i);return t&&E?f.createElement(qc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},E):E}function LN(){let e=UN(),t=jN(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=f.createElement(f.Fragment,null,f.createElement("p",null," Hey developer "),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:u},"ErrorBoundary")," or"," ",f.createElement("code",{style:u},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),r?f.createElement("pre",{style:s},r):null,d)}var kN=f.createElement(LN,null),AN=class extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?f.createElement(Ea.Provider,{value:this.props.routeContext},f.createElement(Xp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function TN({routeContext:e,match:t,children:r}){let i=f.useContext(nl);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),f.createElement(Ea.Provider,{value:e},r)}function DN(e,t=[],r=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,u=r==null?void 0:r.errors;if(u!=null){let h=s.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);En(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let d=!1,m=-1;if(r)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=h),p.route.id){let{loaderData:g,errors:b}=r,w=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||w){d=!0,m>=0?s=s.slice(0,m+1):s=[s[0]];break}}}return s.reduceRight((h,p,g)=>{let b,w=!1,S=null,y=null;r&&(b=u&&p.route.id?u[p.route.id]:void 0,S=p.route.errorElement||kN,d&&(m<0&&g===0?(Gw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,y=null):m===g&&(w=!0,y=p.route.hydrateFallbackElement||null)));let j=t.concat(s.slice(0,g+1)),N=()=>{let E;return b?E=S:w?E=y:p.route.Component?E=f.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=h,f.createElement(TN,{match:p,routeContext:{outlet:h,matches:j,isDataRoute:r!=null},children:E})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?f.createElement(AN,{location:r.location,revalidation:r.revalidation,component:S,error:b,children:N(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):N()},null)}function Kp(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RN(e){let t=f.useContext(nl);return En(t,Kp(e)),t}function PN(e){let t=f.useContext(gf);return En(t,Kp(e)),t}function zN(e){let t=f.useContext(Ea);return En(t,Kp(e)),t}function Qp(e){let t=zN(e),r=t.matches[t.matches.length-1];return En(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function $N(){return Qp("useRouteId")}function UN(){var i;let e=f.useContext(Xp),t=PN("useRouteError"),r=Qp("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[r]}function IN(){let{router:e}=RN("useNavigate"),t=Qp("useNavigate"),r=f.useRef(!1);return Yw(()=>{r.current=!0}),f.useCallback(async(s,u={})=>{Na(r.current,Fw),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...u}))},[e,t])}var zy={};function Gw(e,t,r){!t&&!zy[e]&&(zy[e]=!0,Na(!1,r))}f.memo(VN);function VN({routes:e,future:t,state:r}){return qw(e,void 0,r,t)}function BN({to:e,replace:t,state:r,relative:i}){En(rl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=f.useContext(Ca);Na(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=f.useContext(Ea),{pathname:d}=Qa(),m=vf(),h=Zp(e,Wp(u),d,i==="path"),p=JSON.stringify(h);return f.useEffect(()=>{m(JSON.parse(p),{replace:t,state:r,relative:i})},[m,p,i,t,r]),null}function Lr(e){En(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HN({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:s,static:u=!1}){En(!rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),m=f.useMemo(()=>({basename:d,navigator:s,static:u,future:{}}),[d,s,u]);typeof r=="string"&&(r=tl(r));let{pathname:h="/",search:p="",hash:g="",state:b=null,key:w="default"}=r,S=f.useMemo(()=>{let y=Si(h,d);return y==null?null:{location:{pathname:y,search:p,hash:g,state:b,key:w},navigationType:i}},[d,h,p,g,b,w,i]);return Na(S!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:f.createElement(Ca.Provider,{value:m},f.createElement(qc.Provider,{children:t,value:S}))}function FN({children:e,location:t}){return ON(lp(e),t)}function lp(e,t=[]){let r=[];return f.Children.forEach(e,(i,s)=>{if(!f.isValidElement(i))return;let u=[...t,s];if(i.type===f.Fragment){r.push.apply(r,lp(i.props.children,u));return}En(i.type===Lr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),En(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=lp(i.props.children,u)),r.push(d)}),r}var Dd="get",Rd="application/x-www-form-urlencoded";function yf(e){return e!=null&&typeof e.tagName=="string"}function YN(e){return yf(e)&&e.tagName.toLowerCase()==="button"}function qN(e){return yf(e)&&e.tagName.toLowerCase()==="form"}function GN(e){return yf(e)&&e.tagName.toLowerCase()==="input"}function WN(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ZN(e,t){return e.button===0&&(!t||t==="_self")&&!WN(e)}var vd=null;function XN(){if(vd===null)try{new FormData(document.createElement("form"),0),vd=!1}catch{vd=!0}return vd}var KN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Om(e){return e!=null&&!KN.has(e)?(Na(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rd}"`),null):e}function QN(e,t){let r,i,s,u,d;if(qN(e)){let m=e.getAttribute("action");i=m?Si(m,t):null,r=e.getAttribute("method")||Dd,s=Om(e.getAttribute("enctype"))||Rd,u=new FormData(e)}else if(YN(e)||GN(e)&&(e.type==="submit"||e.type==="image")){let m=e.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||m.getAttribute("action");if(i=h?Si(h,t):null,r=e.getAttribute("formmethod")||m.getAttribute("method")||Dd,s=Om(e.getAttribute("formenctype"))||Om(m.getAttribute("enctype"))||Rd,u=new FormData(m,e),!XN()){let{name:p,type:g,value:b}=e;if(g==="image"){let w=p?`${p}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else p&&u.append(p,b)}}else{if(yf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Dd,i=null,s=Rd,d=e}return u&&s==="text/plain"&&(d=u,u=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:u,body:d}}function Jp(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function JN(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eC(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function tC(e,t,r){let i=await Promise.all(e.map(async s=>{let u=t.routes[s.route.id];if(u){let d=await JN(u,r);return d.links?d.links():[]}return[]}));return iC(i.flat(1).filter(eC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function $y(e,t,r,i,s,u){let d=(h,p)=>r[p]?h.route.id!==r[p].route.id:!0,m=(h,p)=>{var g;return r[p].pathname!==h.pathname||((g=r[p].route.path)==null?void 0:g.endsWith("*"))&&r[p].params["*"]!==h.params["*"]};return u==="assets"?t.filter((h,p)=>d(h,p)||m(h,p)):u==="data"?t.filter((h,p)=>{var b;let g=i.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(d(h,p)||m(h,p))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((b=r[0])==null?void 0:b.params)||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function nC(e,t,{includeHydrateFallback:r}={}){return rC(e.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let u=[s.module];return s.clientActionModule&&(u=u.concat(s.clientActionModule)),s.clientLoaderModule&&(u=u.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(u=u.concat(s.hydrateFallbackModule)),s.imports&&(u=u.concat(s.imports)),u}).flat(1))}function rC(e){return[...new Set(e)]}function aC(e){let t={},r=Object.keys(e).sort();for(let i of r)t[i]=e[i];return t}function iC(e,t){let r=new Set;return new Set(t),e.reduce((i,s)=>{let u=JSON.stringify(aC(s));return r.has(u)||(r.add(u),i.push({key:u,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var sC=new Set([100,101,204,205]);function oC(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&Si(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function Ww(){let e=f.useContext(nl);return Jp(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function lC(){let e=f.useContext(gf);return Jp(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var eg=f.createContext(void 0);eg.displayName="FrameworkContext";function Zw(){let e=f.useContext(eg);return Jp(e,"You must render this element inside a <HydratedRouter> element"),e}function cC(e,t){let r=f.useContext(eg),[i,s]=f.useState(!1),[u,d]=f.useState(!1),{onFocus:m,onBlur:h,onMouseEnter:p,onMouseLeave:g,onTouchStart:b}=t,w=f.useRef(null);f.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let j=E=>{E.forEach(_=>{d(_.isIntersecting)})},N=new IntersectionObserver(j,{threshold:.5});return w.current&&N.observe(w.current),()=>{N.disconnect()}}},[e]),f.useEffect(()=>{if(i){let j=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(j)}}},[i]);let S=()=>{s(!0)},y=()=>{s(!1),d(!1)};return r?e!=="intent"?[u,w,{}]:[u,w,{onFocus:wc(m,S),onBlur:wc(h,y),onMouseEnter:wc(p,S),onMouseLeave:wc(g,y),onTouchStart:wc(b,S)}]:[!1,w,{}]}function wc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function uC({page:e,...t}){let{router:r}=Ww(),i=f.useMemo(()=>Uw(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?f.createElement(fC,{page:e,matches:i,...t}):null}function dC(e){let{manifest:t,routeModules:r}=Zw(),[i,s]=f.useState([]);return f.useEffect(()=>{let u=!1;return tC(e,t,r).then(d=>{u||s(d)}),()=>{u=!0}},[e,t,r]),i}function fC({page:e,matches:t,...r}){let i=Qa(),{manifest:s,routeModules:u}=Zw(),{basename:d}=Ww(),{loaderData:m,matches:h}=lC(),p=f.useMemo(()=>$y(e,t,h,s,i,"data"),[e,t,h,s,i]),g=f.useMemo(()=>$y(e,t,h,s,i,"assets"),[e,t,h,s,i]),b=f.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let y=new Set,j=!1;if(t.forEach(E=>{var M;let _=s.routes[E.route.id];!_||!_.hasLoader||(!p.some(O=>O.route.id===E.route.id)&&E.route.id in m&&((M=u[E.route.id])!=null&&M.shouldRevalidate)||_.hasClientLoader?j=!0:y.add(E.route.id))}),y.size===0)return[];let N=oC(e,d);return j&&y.size>0&&N.searchParams.set("_routes",t.filter(E=>y.has(E.route.id)).map(E=>E.route.id).join(",")),[N.pathname+N.search]},[d,m,i,s,p,t,e,u]),w=f.useMemo(()=>nC(g,s),[g,s]),S=dC(g);return f.createElement(f.Fragment,null,b.map(y=>f.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),w.map(y=>f.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),S.map(({key:y,link:j})=>f.createElement("link",{key:y,...j})))}function hC(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Xw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xw&&(window.__reactRouterVersion="7.6.0")}catch{}function mC({basename:e,children:t,window:r}){let i=f.useRef();i.current==null&&(i.current=eN({window:r,v5Compat:!0}));let s=i.current,[u,d]=f.useState({action:s.action,location:s.location}),m=f.useCallback(h=>{f.startTransition(()=>d(h))},[d]);return f.useLayoutEffect(()=>s.listen(m),[s,m]),f.createElement(HN,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:s})}var Kw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kr=f.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:s,reloadDocument:u,replace:d,state:m,target:h,to:p,preventScrollReset:g,viewTransition:b,...w},S){let{basename:y}=f.useContext(Ca),j=typeof p=="string"&&Kw.test(p),N,E=!1;if(typeof p=="string"&&j&&(N=p,Xw))try{let R=new URL(window.location.href),X=p.startsWith("//")?new URL(R.protocol+p):new URL(p),te=Si(X.pathname,y);X.origin===R.origin&&te!=null?p=te+X.search+X.hash:E=!0}catch{Na(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=EN(p,{relative:s}),[M,O,C]=cC(i,w),L=bC(p,{replace:d,state:m,target:h,preventScrollReset:g,relative:s,viewTransition:b});function B(R){t&&t(R),R.defaultPrevented||L(R)}let Z=f.createElement("a",{...w,...C,href:N||_,onClick:E||u?t:B,ref:hC(S,O),target:h,"data-discover":!j&&r==="render"?"true":void 0});return M&&!j?f.createElement(f.Fragment,null,Z,f.createElement(uC,{page:_})):Z});Kr.displayName="Link";var pC=f.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:s=!1,style:u,to:d,viewTransition:m,children:h,...p},g){let b=Gc(d,{relative:p.relative}),w=Qa(),S=f.useContext(gf),{navigator:y,basename:j}=f.useContext(Ca),N=S!=null&&jC(b)&&m===!0,E=y.encodeLocation?y.encodeLocation(b).pathname:b.pathname,_=w.pathname,M=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(_=_.toLowerCase(),M=M?M.toLowerCase():null,E=E.toLowerCase()),M&&j&&(M=Si(M,j)||M);const O=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let C=_===E||!s&&_.startsWith(E)&&_.charAt(O)==="/",L=M!=null&&(M===E||!s&&M.startsWith(E)&&M.charAt(E.length)==="/"),B={isActive:C,isPending:L,isTransitioning:N},Z=C?t:void 0,R;typeof i=="function"?R=i(B):R=[i,C?"active":null,L?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let X=typeof u=="function"?u(B):u;return f.createElement(Kr,{...p,"aria-current":Z,className:R,ref:g,style:X,to:d,viewTransition:m},typeof h=="function"?h(B):h)});pC.displayName="NavLink";var gC=f.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:s,state:u,method:d=Dd,action:m,onSubmit:h,relative:p,preventScrollReset:g,viewTransition:b,...w},S)=>{let y=wC(),j=SC(m,{relative:p}),N=d.toLowerCase()==="get"?"get":"post",E=typeof m=="string"&&Kw.test(m),_=M=>{if(h&&h(M),M.defaultPrevented)return;M.preventDefault();let O=M.nativeEvent.submitter,C=(O==null?void 0:O.getAttribute("formmethod"))||d;y(O||M.currentTarget,{fetcherKey:t,method:C,navigate:r,replace:s,state:u,relative:p,preventScrollReset:g,viewTransition:b})};return f.createElement("form",{ref:S,method:N,action:j,onSubmit:i?h:_,...w,"data-discover":!E&&e==="render"?"true":void 0})});gC.displayName="Form";function vC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qw(e){let t=f.useContext(nl);return En(t,vC(e)),t}function bC(e,{target:t,replace:r,state:i,preventScrollReset:s,relative:u,viewTransition:d}={}){let m=vf(),h=Qa(),p=Gc(e,{relative:u});return f.useCallback(g=>{if(ZN(g,t)){g.preventDefault();let b=r!==void 0?r:Pc(h)===Pc(p);m(e,{replace:b,state:i,preventScrollReset:s,relative:u,viewTransition:d})}},[h,m,p,r,i,t,e,s,u,d])}var yC=0,xC=()=>`__${String(++yC)}__`;function wC(){let{router:e}=Qw("useSubmit"),{basename:t}=f.useContext(Ca),r=$N();return f.useCallback(async(i,s={})=>{let{action:u,method:d,encType:m,formData:h,body:p}=QN(i,t);if(s.navigate===!1){let g=s.fetcherKey||xC();await e.fetch(g,r,s.action||u,{preventScrollReset:s.preventScrollReset,formData:h,body:p,formMethod:s.method||d,formEncType:s.encType||m,flushSync:s.flushSync})}else await e.navigate(s.action||u,{preventScrollReset:s.preventScrollReset,formData:h,body:p,formMethod:s.method||d,formEncType:s.encType||m,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function SC(e,{relative:t}={}){let{basename:r}=f.useContext(Ca),i=f.useContext(Ea);En(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),u={...Gc(e||".",{relative:t})},d=Qa();if(e==null){u.search=d.search;let m=new URLSearchParams(u.search),h=m.getAll("index");if(h.some(g=>g==="")){m.delete("index"),h.filter(b=>b).forEach(b=>m.append("index",b));let g=m.toString();u.search=g?`?${g}`:""}}return(!e||e===".")&&s.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:xi([r,u.pathname])),Pc(u)}function jC(e,t={}){let r=f.useContext(Hw);En(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Qw("useViewTransitionState"),s=Gc(e,{relative:t.relative});if(!r.isTransitioning)return!1;let u=Si(r.currentLocation.pathname,i)||r.currentLocation.pathname,d=Si(r.nextLocation.pathname,i)||r.nextLocation.pathname;return Wd(s.pathname,d)!=null||Wd(s.pathname,u)!=null}[...sC];var Xs=$w();function Jw(e,t){return function(){return e.apply(t,arguments)}}const{toString:_C}=Object.prototype,{getPrototypeOf:tg}=Object,{iterator:xf,toStringTag:eS}=Symbol,wf=(e=>t=>{const r=_C.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ma=e=>(e=e.toLowerCase(),t=>wf(t)===e),Sf=e=>t=>typeof t===e,{isArray:al}=Array,Qo=Sf("undefined");function Wc(e){return e!==null&&!Qo(e)&&e.constructor!==null&&!Qo(e.constructor)&&Ur(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const tS=Ma("ArrayBuffer");function NC(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&tS(e.buffer),t}const CC=Sf("string"),Ur=Sf("function"),nS=Sf("number"),Zc=e=>e!==null&&typeof e=="object",EC=e=>e===!0||e===!1,Pd=e=>{if(wf(e)!=="object")return!1;const t=tg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(eS in e)&&!(xf in e)},MC=e=>{if(!Zc(e)||Wc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},OC=Ma("Date"),LC=Ma("File"),kC=Ma("Blob"),AC=Ma("FileList"),TC=e=>Zc(e)&&Ur(e.pipe),DC=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ur(e.append)&&((t=wf(e))==="formdata"||t==="object"&&Ur(e.toString)&&e.toString()==="[object FormData]"))},RC=Ma("URLSearchParams"),[PC,zC,$C,UC]=["ReadableStream","Request","Response","Headers"].map(Ma),IC=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xc(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,s;if(typeof e!="object"&&(e=[e]),al(e))for(i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else{if(Wc(e))return;const u=r?Object.getOwnPropertyNames(e):Object.keys(e),d=u.length;let m;for(i=0;i<d;i++)m=u[i],t.call(null,e[m],m,e)}}function rS(e,t){if(Wc(e))return null;t=t.toLowerCase();const r=Object.keys(e);let i=r.length,s;for(;i-- >0;)if(s=r[i],t===s.toLowerCase())return s;return null}const Hs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,aS=e=>!Qo(e)&&e!==Hs;function cp(){const{caseless:e,skipUndefined:t}=aS(this)&&this||{},r={},i=(s,u)=>{const d=e&&rS(r,u)||u;Pd(r[d])&&Pd(s)?r[d]=cp(r[d],s):Pd(s)?r[d]=cp({},s):al(s)?r[d]=s.slice():(!t||!Qo(s))&&(r[d]=s)};for(let s=0,u=arguments.length;s<u;s++)arguments[s]&&Xc(arguments[s],i);return r}const VC=(e,t,r,{allOwnKeys:i}={})=>(Xc(t,(s,u)=>{r&&Ur(s)?e[u]=Jw(s,r):e[u]=s},{allOwnKeys:i}),e),BC=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),HC=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},FC=(e,t,r,i)=>{let s,u,d;const m={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),u=s.length;u-- >0;)d=s[u],(!i||i(d,e,t))&&!m[d]&&(t[d]=e[d],m[d]=!0);e=r!==!1&&tg(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},YC=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},qC=e=>{if(!e)return null;if(al(e))return e;let t=e.length;if(!nS(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},GC=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&tg(Uint8Array)),WC=(e,t)=>{const i=(e&&e[xf]).call(e);let s;for(;(s=i.next())&&!s.done;){const u=s.value;t.call(e,u[0],u[1])}},ZC=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},XC=Ma("HTMLFormElement"),KC=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,s){return i.toUpperCase()+s}),Uy=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),QC=Ma("RegExp"),iS=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};Xc(r,(s,u)=>{let d;(d=t(s,u,e))!==!1&&(i[u]=d||s)}),Object.defineProperties(e,i)},JC=e=>{iS(e,(t,r)=>{if(Ur(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(Ur(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},eE=(e,t)=>{const r={},i=s=>{s.forEach(u=>{r[u]=!0})};return al(e)?i(e):i(String(e).split(t)),r},tE=()=>{},nE=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function rE(e){return!!(e&&Ur(e.append)&&e[eS]==="FormData"&&e[xf])}const aE=e=>{const t=new Array(10),r=(i,s)=>{if(Zc(i)){if(t.indexOf(i)>=0)return;if(Wc(i))return i;if(!("toJSON"in i)){t[s]=i;const u=al(i)?[]:{};return Xc(i,(d,m)=>{const h=r(d,s+1);!Qo(h)&&(u[m]=h)}),t[s]=void 0,u}}return i};return r(e,0)},iE=Ma("AsyncFunction"),sE=e=>e&&(Zc(e)||Ur(e))&&Ur(e.then)&&Ur(e.catch),sS=((e,t)=>e?setImmediate:t?((r,i)=>(Hs.addEventListener("message",({source:s,data:u})=>{s===Hs&&u===r&&i.length&&i.shift()()},!1),s=>{i.push(s),Hs.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ur(Hs.postMessage)),oE=typeof queueMicrotask<"u"?queueMicrotask.bind(Hs):typeof process<"u"&&process.nextTick||sS,lE=e=>e!=null&&Ur(e[xf]),Le={isArray:al,isArrayBuffer:tS,isBuffer:Wc,isFormData:DC,isArrayBufferView:NC,isString:CC,isNumber:nS,isBoolean:EC,isObject:Zc,isPlainObject:Pd,isEmptyObject:MC,isReadableStream:PC,isRequest:zC,isResponse:$C,isHeaders:UC,isUndefined:Qo,isDate:OC,isFile:LC,isBlob:kC,isRegExp:QC,isFunction:Ur,isStream:TC,isURLSearchParams:RC,isTypedArray:GC,isFileList:AC,forEach:Xc,merge:cp,extend:VC,trim:IC,stripBOM:BC,inherits:HC,toFlatObject:FC,kindOf:wf,kindOfTest:Ma,endsWith:YC,toArray:qC,forEachEntry:WC,matchAll:ZC,isHTMLForm:XC,hasOwnProperty:Uy,hasOwnProp:Uy,reduceDescriptors:iS,freezeMethods:JC,toObjectSet:eE,toCamelCase:KC,noop:tE,toFiniteNumber:nE,findKey:rS,global:Hs,isContextDefined:aS,isSpecCompliantForm:rE,toJSONObject:aE,isAsyncFn:iE,isThenable:sE,setImmediate:sS,asap:oE,isIterable:lE};function kt(e,t,r,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}Le.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Le.toJSONObject(this.config),code:this.code,status:this.status}}});const oS=kt.prototype,lS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{lS[e]={value:e}});Object.defineProperties(kt,lS);Object.defineProperty(oS,"isAxiosError",{value:!0});kt.from=(e,t,r,i,s,u)=>{const d=Object.create(oS);Le.toFlatObject(e,d,function(g){return g!==Error.prototype},p=>p!=="isAxiosError");const m=e&&e.message?e.message:"Error",h=t==null&&e?e.code:t;return kt.call(d,m,h,r,i,s),e&&d.cause==null&&Object.defineProperty(d,"cause",{value:e,configurable:!0}),d.name=e&&e.name||"Error",u&&Object.assign(d,u),d};const cE=null;function up(e){return Le.isPlainObject(e)||Le.isArray(e)}function cS(e){return Le.endsWith(e,"[]")?e.slice(0,-2):e}function Iy(e,t,r){return e?e.concat(t).map(function(s,u){return s=cS(s),!r&&u?"["+s+"]":s}).join(r?".":""):t}function uE(e){return Le.isArray(e)&&!e.some(up)}const dE=Le.toFlatObject(Le,{},null,function(t){return/^is[A-Z]/.test(t)});function jf(e,t,r){if(!Le.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Le.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,N){return!Le.isUndefined(N[j])});const i=r.metaTokens,s=r.visitor||g,u=r.dots,d=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&Le.isSpecCompliantForm(t);if(!Le.isFunction(s))throw new TypeError("visitor must be a function");function p(y){if(y===null)return"";if(Le.isDate(y))return y.toISOString();if(Le.isBoolean(y))return y.toString();if(!h&&Le.isBlob(y))throw new kt("Blob is not supported. Use a Buffer instead.");return Le.isArrayBuffer(y)||Le.isTypedArray(y)?h&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function g(y,j,N){let E=y;if(y&&!N&&typeof y=="object"){if(Le.endsWith(j,"{}"))j=i?j:j.slice(0,-2),y=JSON.stringify(y);else if(Le.isArray(y)&&uE(y)||(Le.isFileList(y)||Le.endsWith(j,"[]"))&&(E=Le.toArray(y)))return j=cS(j),E.forEach(function(M,O){!(Le.isUndefined(M)||M===null)&&t.append(d===!0?Iy([j],O,u):d===null?j:j+"[]",p(M))}),!1}return up(y)?!0:(t.append(Iy(N,j,u),p(y)),!1)}const b=[],w=Object.assign(dE,{defaultVisitor:g,convertValue:p,isVisitable:up});function S(y,j){if(!Le.isUndefined(y)){if(b.indexOf(y)!==-1)throw Error("Circular reference detected in "+j.join("."));b.push(y),Le.forEach(y,function(E,_){(!(Le.isUndefined(E)||E===null)&&s.call(t,E,Le.isString(_)?_.trim():_,j,w))===!0&&S(E,j?j.concat(_):[_])}),b.pop()}}if(!Le.isObject(e))throw new TypeError("data must be an object");return S(e),t}function Vy(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function ng(e,t){this._pairs=[],e&&jf(e,this,t)}const uS=ng.prototype;uS.append=function(t,r){this._pairs.push([t,r])};uS.toString=function(t){const r=t?function(i){return t.call(this,i,Vy)}:Vy;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function fE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function dS(e,t,r){if(!t)return e;const i=r&&r.encode||fE;Le.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let u;if(s?u=s(t,r):u=Le.isURLSearchParams(t)?t.toString():new ng(t,r).toString(i),u){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class By{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Le.forEach(this.handlers,function(i){i!==null&&t(i)})}}const fS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hE=typeof URLSearchParams<"u"?URLSearchParams:ng,mE=typeof FormData<"u"?FormData:null,pE=typeof Blob<"u"?Blob:null,gE={isBrowser:!0,classes:{URLSearchParams:hE,FormData:mE,Blob:pE},protocols:["http","https","file","blob","url","data"]},rg=typeof window<"u"&&typeof document<"u",dp=typeof navigator=="object"&&navigator||void 0,vE=rg&&(!dp||["ReactNative","NativeScript","NS"].indexOf(dp.product)<0),bE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yE=rg&&window.location.href||"http://localhost",xE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rg,hasStandardBrowserEnv:vE,hasStandardBrowserWebWorkerEnv:bE,navigator:dp,origin:yE},Symbol.toStringTag,{value:"Module"})),Nr={...xE,...gE};function wE(e,t){return jf(e,new Nr.classes.URLSearchParams,{visitor:function(r,i,s,u){return Nr.isNode&&Le.isBuffer(r)?(this.append(i,r.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...t})}function SE(e){return Le.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function jE(e){const t={},r=Object.keys(e);let i;const s=r.length;let u;for(i=0;i<s;i++)u=r[i],t[u]=e[u];return t}function hS(e){function t(r,i,s,u){let d=r[u++];if(d==="__proto__")return!0;const m=Number.isFinite(+d),h=u>=r.length;return d=!d&&Le.isArray(s)?s.length:d,h?(Le.hasOwnProp(s,d)?s[d]=[s[d],i]:s[d]=i,!m):((!s[d]||!Le.isObject(s[d]))&&(s[d]=[]),t(r,i,s[d],u)&&Le.isArray(s[d])&&(s[d]=jE(s[d])),!m)}if(Le.isFormData(e)&&Le.isFunction(e.entries)){const r={};return Le.forEachEntry(e,(i,s)=>{t(SE(i),s,r,0)}),r}return null}function _E(e,t,r){if(Le.isString(e))try{return(t||JSON.parse)(e),Le.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const Kc={transitional:fS,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const i=r.getContentType()||"",s=i.indexOf("application/json")>-1,u=Le.isObject(t);if(u&&Le.isHTMLForm(t)&&(t=new FormData(t)),Le.isFormData(t))return s?JSON.stringify(hS(t)):t;if(Le.isArrayBuffer(t)||Le.isBuffer(t)||Le.isStream(t)||Le.isFile(t)||Le.isBlob(t)||Le.isReadableStream(t))return t;if(Le.isArrayBufferView(t))return t.buffer;if(Le.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let m;if(u){if(i.indexOf("application/x-www-form-urlencoded")>-1)return wE(t,this.formSerializer).toString();if((m=Le.isFileList(t))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return jf(m?{"files[]":t}:t,h&&new h,this.formSerializer)}}return u||s?(r.setContentType("application/json",!1),_E(t)):t}],transformResponse:[function(t){const r=this.transitional||Kc.transitional,i=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Le.isResponse(t)||Le.isReadableStream(t))return t;if(t&&Le.isString(t)&&(i&&!this.responseType||s)){const d=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(m){if(d)throw m.name==="SyntaxError"?kt.from(m,kt.ERR_BAD_RESPONSE,this,null,this.response):m}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Nr.classes.FormData,Blob:Nr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Le.forEach(["delete","get","head","post","put","patch"],e=>{Kc.headers[e]={}});const NE=Le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),CE=e=>{const t={};let r,i,s;return e&&e.split(`
`).forEach(function(d){s=d.indexOf(":"),r=d.substring(0,s).trim().toLowerCase(),i=d.substring(s+1).trim(),!(!r||t[r]&&NE[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},Hy=Symbol("internals");function Sc(e){return e&&String(e).trim().toLowerCase()}function zd(e){return e===!1||e==null?e:Le.isArray(e)?e.map(zd):String(e)}function EE(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const ME=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lm(e,t,r,i,s){if(Le.isFunction(i))return i.call(this,t,r);if(s&&(t=r),!!Le.isString(t)){if(Le.isString(i))return t.indexOf(i)!==-1;if(Le.isRegExp(i))return i.test(t)}}function OE(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function LE(e,t){const r=Le.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(s,u,d){return this[i].call(this,t,s,u,d)},configurable:!0})})}let Ir=class{constructor(t){t&&this.set(t)}set(t,r,i){const s=this;function u(m,h,p){const g=Sc(h);if(!g)throw new Error("header name must be a non-empty string");const b=Le.findKey(s,g);(!b||s[b]===void 0||p===!0||p===void 0&&s[b]!==!1)&&(s[b||h]=zd(m))}const d=(m,h)=>Le.forEach(m,(p,g)=>u(p,g,h));if(Le.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(Le.isString(t)&&(t=t.trim())&&!ME(t))d(CE(t),r);else if(Le.isObject(t)&&Le.isIterable(t)){let m={},h,p;for(const g of t){if(!Le.isArray(g))throw TypeError("Object iterator must return a key-value pair");m[p=g[0]]=(h=m[p])?Le.isArray(h)?[...h,g[1]]:[h,g[1]]:g[1]}d(m,r)}else t!=null&&u(r,t,i);return this}get(t,r){if(t=Sc(t),t){const i=Le.findKey(this,t);if(i){const s=this[i];if(!r)return s;if(r===!0)return EE(s);if(Le.isFunction(r))return r.call(this,s,i);if(Le.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Sc(t),t){const i=Le.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||Lm(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let s=!1;function u(d){if(d=Sc(d),d){const m=Le.findKey(i,d);m&&(!r||Lm(i,i[m],m,r))&&(delete i[m],s=!0)}}return Le.isArray(t)?t.forEach(u):u(t),s}clear(t){const r=Object.keys(this);let i=r.length,s=!1;for(;i--;){const u=r[i];(!t||Lm(this,this[u],u,t,!0))&&(delete this[u],s=!0)}return s}normalize(t){const r=this,i={};return Le.forEach(this,(s,u)=>{const d=Le.findKey(i,u);if(d){r[d]=zd(s),delete r[u];return}const m=t?OE(u):String(u).trim();m!==u&&delete r[u],r[m]=zd(s),i[m]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Le.forEach(this,(i,s)=>{i!=null&&i!==!1&&(r[s]=t&&Le.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[Hy]=this[Hy]={accessors:{}}).accessors,s=this.prototype;function u(d){const m=Sc(d);i[m]||(LE(s,d),i[m]=!0)}return Le.isArray(t)?t.forEach(u):u(t),this}};Ir.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Le.reduceDescriptors(Ir.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[r]=i}}});Le.freezeMethods(Ir);function km(e,t){const r=this||Kc,i=t||r,s=Ir.from(i.headers);let u=i.data;return Le.forEach(e,function(m){u=m.call(r,u,s.normalize(),t?t.status:void 0)}),s.normalize(),u}function mS(e){return!!(e&&e.__CANCEL__)}function il(e,t,r){kt.call(this,e??"canceled",kt.ERR_CANCELED,t,r),this.name="CanceledError"}Le.inherits(il,kt,{__CANCEL__:!0});function pS(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new kt("Request failed with status code "+r.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function kE(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function AE(e,t){e=e||10;const r=new Array(e),i=new Array(e);let s=0,u=0,d;return t=t!==void 0?t:1e3,function(h){const p=Date.now(),g=i[u];d||(d=p),r[s]=h,i[s]=p;let b=u,w=0;for(;b!==s;)w+=r[b++],b=b%e;if(s=(s+1)%e,s===u&&(u=(u+1)%e),p-d<t)return;const S=g&&p-g;return S?Math.round(w*1e3/S):void 0}}function TE(e,t){let r=0,i=1e3/t,s,u;const d=(p,g=Date.now())=>{r=g,s=null,u&&(clearTimeout(u),u=null),e(...p)};return[(...p)=>{const g=Date.now(),b=g-r;b>=i?d(p,g):(s=p,u||(u=setTimeout(()=>{u=null,d(s)},i-b)))},()=>s&&d(s)]}const Zd=(e,t,r=3)=>{let i=0;const s=AE(50,250);return TE(u=>{const d=u.loaded,m=u.lengthComputable?u.total:void 0,h=d-i,p=s(h),g=d<=m;i=d;const b={loaded:d,total:m,progress:m?d/m:void 0,bytes:h,rate:p||void 0,estimated:p&&m&&g?(m-d)/p:void 0,event:u,lengthComputable:m!=null,[t?"download":"upload"]:!0};e(b)},r)},Fy=(e,t)=>{const r=e!=null;return[i=>t[0]({lengthComputable:r,total:e,loaded:i}),t[1]]},Yy=e=>(...t)=>Le.asap(()=>e(...t)),DE=Nr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Nr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Nr.origin),Nr.navigator&&/(msie|trident)/i.test(Nr.navigator.userAgent)):()=>!0,RE=Nr.hasStandardBrowserEnv?{write(e,t,r,i,s,u){const d=[e+"="+encodeURIComponent(t)];Le.isNumber(r)&&d.push("expires="+new Date(r).toGMTString()),Le.isString(i)&&d.push("path="+i),Le.isString(s)&&d.push("domain="+s),u===!0&&d.push("secure"),document.cookie=d.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function PE(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function zE(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function gS(e,t,r){let i=!PE(t);return e&&(i||r==!1)?zE(e,t):t}const qy=e=>e instanceof Ir?{...e}:e;function Gs(e,t){t=t||{};const r={};function i(p,g,b,w){return Le.isPlainObject(p)&&Le.isPlainObject(g)?Le.merge.call({caseless:w},p,g):Le.isPlainObject(g)?Le.merge({},g):Le.isArray(g)?g.slice():g}function s(p,g,b,w){if(Le.isUndefined(g)){if(!Le.isUndefined(p))return i(void 0,p,b,w)}else return i(p,g,b,w)}function u(p,g){if(!Le.isUndefined(g))return i(void 0,g)}function d(p,g){if(Le.isUndefined(g)){if(!Le.isUndefined(p))return i(void 0,p)}else return i(void 0,g)}function m(p,g,b){if(b in t)return i(p,g);if(b in e)return i(void 0,p)}const h={url:u,method:u,data:u,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:m,headers:(p,g,b)=>s(qy(p),qy(g),b,!0)};return Le.forEach(Object.keys({...e,...t}),function(g){const b=h[g]||s,w=b(e[g],t[g],g);Le.isUndefined(w)&&b!==m||(r[g]=w)}),r}const vS=e=>{const t=Gs({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:u,headers:d,auth:m}=t;if(t.headers=d=Ir.from(d),t.url=dS(gS(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),m&&d.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),Le.isFormData(r)){if(Nr.hasStandardBrowserEnv||Nr.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(Le.isFunction(r.getHeaders)){const h=r.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([g,b])=>{p.includes(g.toLowerCase())&&d.set(g,b)})}}if(Nr.hasStandardBrowserEnv&&(i&&Le.isFunction(i)&&(i=i(t)),i||i!==!1&&DE(t.url))){const h=s&&u&&RE.read(u);h&&d.set(s,h)}return t},$E=typeof XMLHttpRequest<"u",UE=$E&&function(e){return new Promise(function(r,i){const s=vS(e);let u=s.data;const d=Ir.from(s.headers).normalize();let{responseType:m,onUploadProgress:h,onDownloadProgress:p}=s,g,b,w,S,y;function j(){S&&S(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(g),s.signal&&s.signal.removeEventListener("abort",g)}let N=new XMLHttpRequest;N.open(s.method.toUpperCase(),s.url,!0),N.timeout=s.timeout;function E(){if(!N)return;const M=Ir.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),C={data:!m||m==="text"||m==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:M,config:e,request:N};pS(function(B){r(B),j()},function(B){i(B),j()},C),N=null}"onloadend"in N?N.onloadend=E:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(E)},N.onabort=function(){N&&(i(new kt("Request aborted",kt.ECONNABORTED,e,N)),N=null)},N.onerror=function(O){const C=O&&O.message?O.message:"Network Error",L=new kt(C,kt.ERR_NETWORK,e,N);L.event=O||null,i(L),N=null},N.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const C=s.transitional||fS;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),i(new kt(O,C.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,e,N)),N=null},u===void 0&&d.setContentType(null),"setRequestHeader"in N&&Le.forEach(d.toJSON(),function(O,C){N.setRequestHeader(C,O)}),Le.isUndefined(s.withCredentials)||(N.withCredentials=!!s.withCredentials),m&&m!=="json"&&(N.responseType=s.responseType),p&&([w,y]=Zd(p,!0),N.addEventListener("progress",w)),h&&N.upload&&([b,S]=Zd(h),N.upload.addEventListener("progress",b),N.upload.addEventListener("loadend",S)),(s.cancelToken||s.signal)&&(g=M=>{N&&(i(!M||M.type?new il(null,e,N):M),N.abort(),N=null)},s.cancelToken&&s.cancelToken.subscribe(g),s.signal&&(s.signal.aborted?g():s.signal.addEventListener("abort",g)));const _=kE(s.url);if(_&&Nr.protocols.indexOf(_)===-1){i(new kt("Unsupported protocol "+_+":",kt.ERR_BAD_REQUEST,e));return}N.send(u||null)})},IE=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let i=new AbortController,s;const u=function(p){if(!s){s=!0,m();const g=p instanceof Error?p:this.reason;i.abort(g instanceof kt?g:new il(g instanceof Error?g.message:g))}};let d=t&&setTimeout(()=>{d=null,u(new kt(`timeout ${t} of ms exceeded`,kt.ETIMEDOUT))},t);const m=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(u):p.removeEventListener("abort",u)}),e=null)};e.forEach(p=>p.addEventListener("abort",u));const{signal:h}=i;return h.unsubscribe=()=>Le.asap(m),h}},VE=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let i=0,s;for(;i<r;)s=i+t,yield e.slice(i,s),i=s},BE=async function*(e,t){for await(const r of HE(e))yield*VE(r,t)},HE=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:i}=await t.read();if(r)break;yield i}}finally{await t.cancel()}},Gy=(e,t,r,i)=>{const s=BE(e,t);let u=0,d,m=h=>{d||(d=!0,i&&i(h))};return new ReadableStream({async pull(h){try{const{done:p,value:g}=await s.next();if(p){m(),h.close();return}let b=g.byteLength;if(r){let w=u+=b;r(w)}h.enqueue(new Uint8Array(g))}catch(p){throw m(p),p}},cancel(h){return m(h),s.return()}},{highWaterMark:2})},Wy=64*1024,{isFunction:bd}=Le,FE=(({Request:e,Response:t})=>({Request:e,Response:t}))(Le.global),{ReadableStream:Zy,TextEncoder:Xy}=Le.global,Ky=(e,...t)=>{try{return!!e(...t)}catch{return!1}},YE=e=>{e=Le.merge.call({skipUndefined:!0},FE,e);const{fetch:t,Request:r,Response:i}=e,s=t?bd(t):typeof fetch=="function",u=bd(r),d=bd(i);if(!s)return!1;const m=s&&bd(Zy),h=s&&(typeof Xy=="function"?(y=>j=>y.encode(j))(new Xy):async y=>new Uint8Array(await new r(y).arrayBuffer())),p=u&&m&&Ky(()=>{let y=!1;const j=new r(Nr.origin,{body:new Zy,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!j}),g=d&&m&&Ky(()=>Le.isReadableStream(new i("").body)),b={stream:g&&(y=>y.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!b[y]&&(b[y]=(j,N)=>{let E=j&&j[y];if(E)return E.call(j);throw new kt(`Response type '${y}' is not supported`,kt.ERR_NOT_SUPPORT,N)})});const w=async y=>{if(y==null)return 0;if(Le.isBlob(y))return y.size;if(Le.isSpecCompliantForm(y))return(await new r(Nr.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(Le.isArrayBufferView(y)||Le.isArrayBuffer(y))return y.byteLength;if(Le.isURLSearchParams(y)&&(y=y+""),Le.isString(y))return(await h(y)).byteLength},S=async(y,j)=>{const N=Le.toFiniteNumber(y.getContentLength());return N??w(j)};return async y=>{let{url:j,method:N,data:E,signal:_,cancelToken:M,timeout:O,onDownloadProgress:C,onUploadProgress:L,responseType:B,headers:Z,withCredentials:R="same-origin",fetchOptions:X}=vS(y),te=t||fetch;B=B?(B+"").toLowerCase():"text";let xe=IE([_,M&&M.toAbortSignal()],O),Pe=null;const ve=xe&&xe.unsubscribe&&(()=>{xe.unsubscribe()});let se;try{if(L&&p&&N!=="get"&&N!=="head"&&(se=await S(Z,E))!==0){let P=new r(j,{method:"POST",body:E,duplex:"half"}),A;if(Le.isFormData(E)&&(A=P.headers.get("content-type"))&&Z.setContentType(A),P.body){const[H,U]=Fy(se,Zd(Yy(L)));E=Gy(P.body,Wy,H,U)}}Le.isString(R)||(R=R?"include":"omit");const V=u&&"credentials"in r.prototype,F={...X,signal:xe,method:N.toUpperCase(),headers:Z.normalize().toJSON(),body:E,duplex:"half",credentials:V?R:void 0};Pe=u&&new r(j,F);let Y=await(u?te(Pe,X):te(j,F));const z=g&&(B==="stream"||B==="response");if(g&&(C||z&&ve)){const P={};["status","statusText","headers"].forEach(W=>{P[W]=Y[W]});const A=Le.toFiniteNumber(Y.headers.get("content-length")),[H,U]=C&&Fy(A,Zd(Yy(C),!0))||[];Y=new i(Gy(Y.body,Wy,H,()=>{U&&U(),ve&&ve()}),P)}B=B||"text";let T=await b[Le.findKey(b,B)||"text"](Y,y);return!z&&ve&&ve(),await new Promise((P,A)=>{pS(P,A,{data:T,headers:Ir.from(Y.headers),status:Y.status,statusText:Y.statusText,config:y,request:Pe})})}catch(V){throw ve&&ve(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new kt("Network Error",kt.ERR_NETWORK,y,Pe),{cause:V.cause||V}):kt.from(V,V&&V.code,y,Pe)}}},qE=new Map,bS=e=>{let t=e?e.env:{};const{fetch:r,Request:i,Response:s}=t,u=[i,s,r];let d=u.length,m=d,h,p,g=qE;for(;m--;)h=u[m],p=g.get(h),p===void 0&&g.set(h,p=m?new Map:YE(t)),g=p;return p};bS();const fp={http:cE,xhr:UE,fetch:{get:bS}};Le.forEach(fp,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Qy=e=>`- ${e}`,GE=e=>Le.isFunction(e)||e===null||e===!1,yS={getAdapter:(e,t)=>{e=Le.isArray(e)?e:[e];const{length:r}=e;let i,s;const u={};for(let d=0;d<r;d++){i=e[d];let m;if(s=i,!GE(i)&&(s=fp[(m=String(i)).toLowerCase()],s===void 0))throw new kt(`Unknown adapter '${m}'`);if(s&&(Le.isFunction(s)||(s=s.get(t))))break;u[m||"#"+d]=s}if(!s){const d=Object.entries(u).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let m=r?d.length>1?`since :
`+d.map(Qy).join(`
`):" "+Qy(d[0]):"as no adapter specified";throw new kt("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return s},adapters:fp};function Am(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new il(null,e)}function Jy(e){return Am(e),e.headers=Ir.from(e.headers),e.data=km.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),yS.getAdapter(e.adapter||Kc.adapter,e)(e).then(function(i){return Am(e),i.data=km.call(e,e.transformResponse,i),i.headers=Ir.from(i.headers),i},function(i){return mS(i)||(Am(e),i&&i.response&&(i.response.data=km.call(e,e.transformResponse,i.response),i.response.headers=Ir.from(i.response.headers))),Promise.reject(i)})}const xS="1.12.2",_f={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_f[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const ex={};_f.transitional=function(t,r,i){function s(u,d){return"[Axios v"+xS+"] Transitional option '"+u+"'"+d+(i?". "+i:"")}return(u,d,m)=>{if(t===!1)throw new kt(s(d," has been removed"+(r?" in "+r:"")),kt.ERR_DEPRECATED);return r&&!ex[d]&&(ex[d]=!0,console.warn(s(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(u,d,m):!0}};_f.spelling=function(t){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function WE(e,t,r){if(typeof e!="object")throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const u=i[s],d=t[u];if(d){const m=e[u],h=m===void 0||d(m,u,e);if(h!==!0)throw new kt("option "+u+" must be "+h,kt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new kt("Unknown option "+u,kt.ERR_BAD_OPTION)}}const $d={assertOptions:WE,validators:_f},Ha=$d.validators;let Ys=class{constructor(t){this.defaults=t||{},this.interceptors={request:new By,response:new By}}async request(t,r){try{return await this._request(t,r)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const u=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?u&&!String(i.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+u):i.stack=u}catch{}}throw i}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Gs(this.defaults,r);const{transitional:i,paramsSerializer:s,headers:u}=r;i!==void 0&&$d.assertOptions(i,{silentJSONParsing:Ha.transitional(Ha.boolean),forcedJSONParsing:Ha.transitional(Ha.boolean),clarifyTimeoutError:Ha.transitional(Ha.boolean)},!1),s!=null&&(Le.isFunction(s)?r.paramsSerializer={serialize:s}:$d.assertOptions(s,{encode:Ha.function,serialize:Ha.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),$d.assertOptions(r,{baseUrl:Ha.spelling("baseURL"),withXsrfToken:Ha.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=u&&Le.merge(u.common,u[r.method]);u&&Le.forEach(["delete","get","head","post","put","patch","common"],y=>{delete u[y]}),r.headers=Ir.concat(d,u);const m=[];let h=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(h=h&&j.synchronous,m.unshift(j.fulfilled,j.rejected))});const p=[];this.interceptors.response.forEach(function(j){p.push(j.fulfilled,j.rejected)});let g,b=0,w;if(!h){const y=[Jy.bind(this),void 0];for(y.unshift(...m),y.push(...p),w=y.length,g=Promise.resolve(r);b<w;)g=g.then(y[b++],y[b++]);return g}w=m.length;let S=r;for(;b<w;){const y=m[b++],j=m[b++];try{S=y(S)}catch(N){j.call(this,N);break}}try{g=Jy.call(this,S)}catch(y){return Promise.reject(y)}for(b=0,w=p.length;b<w;)g=g.then(p[b++],p[b++]);return g}getUri(t){t=Gs(this.defaults,t);const r=gS(t.baseURL,t.url,t.allowAbsoluteUrls);return dS(r,t.params,t.paramsSerializer)}};Le.forEach(["delete","get","head","options"],function(t){Ys.prototype[t]=function(r,i){return this.request(Gs(i||{},{method:t,url:r,data:(i||{}).data}))}});Le.forEach(["post","put","patch"],function(t){function r(i){return function(u,d,m){return this.request(Gs(m||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}Ys.prototype[t]=r(),Ys.prototype[t+"Form"]=r(!0)});let ZE=class wS{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(u){r=u});const i=this;this.promise.then(s=>{if(!i._listeners)return;let u=i._listeners.length;for(;u-- >0;)i._listeners[u](s);i._listeners=null}),this.promise.then=s=>{let u;const d=new Promise(m=>{i.subscribe(m),u=m}).then(s);return d.cancel=function(){i.unsubscribe(u)},d},t(function(u,d,m){i.reason||(i.reason=new il(u,d,m),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=i=>{t.abort(i)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new wS(function(s){t=s}),cancel:t}}};function XE(e){return function(r){return e.apply(null,r)}}function KE(e){return Le.isObject(e)&&e.isAxiosError===!0}const hp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hp).forEach(([e,t])=>{hp[t]=e});function SS(e){const t=new Ys(e),r=Jw(Ys.prototype.request,t);return Le.extend(r,Ys.prototype,t,{allOwnKeys:!0}),Le.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return SS(Gs(e,s))},r}const vt=SS(Kc);vt.Axios=Ys;vt.CanceledError=il;vt.CancelToken=ZE;vt.isCancel=mS;vt.VERSION=xS;vt.toFormData=jf;vt.AxiosError=kt;vt.Cancel=vt.CanceledError;vt.all=function(t){return Promise.all(t)};vt.spread=XE;vt.isAxiosError=KE;vt.mergeConfig=Gs;vt.AxiosHeaders=Ir;vt.formToJSON=e=>hS(Le.isHTMLForm(e)?new FormData(e):e);vt.getAdapter=yS.getAdapter;vt.HttpStatusCode=hp;vt.default=vt;const{Axios:T4,AxiosError:D4,CanceledError:R4,isCancel:P4,CancelToken:z4,VERSION:$4,all:U4,Cancel:I4,isAxiosError:V4,spread:B4,toFormData:H4,AxiosHeaders:F4,HttpStatusCode:Y4,formToJSON:q4,getAdapter:G4,mergeConfig:W4}=vt;function jS(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=jS(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function sl(){for(var e,t,r=0,i="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=jS(e))&&(i&&(i+=" "),i+=t);return i}var Tm,tx;function QE(){if(tx)return Tm;tx=1;const e=(h,p,g,b)=>{if(g==="length"||g==="prototype"||g==="arguments"||g==="caller")return;const w=Object.getOwnPropertyDescriptor(h,g),S=Object.getOwnPropertyDescriptor(p,g);!t(w,S)&&b||Object.defineProperty(h,g,S)},t=function(h,p){return h===void 0||h.configurable||h.writable===p.writable&&h.enumerable===p.enumerable&&h.configurable===p.configurable&&(h.writable||h.value===p.value)},r=(h,p)=>{const g=Object.getPrototypeOf(p);g!==Object.getPrototypeOf(h)&&Object.setPrototypeOf(h,g)},i=(h,p)=>`/* Wrapped ${h}*/
${p}`,s=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),u=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),d=(h,p,g)=>{const b=g===""?"":`with ${g.trim()}() `,w=i.bind(null,b,p.toString());Object.defineProperty(w,"name",u),Object.defineProperty(h,"toString",{...s,value:w})};return Tm=(h,p,{ignoreNonConfigurable:g=!1}={})=>{const{name:b}=h;for(const w of Reflect.ownKeys(p))e(h,p,w,g);return r(h,p),d(h,p,b),h},Tm}var kc={exports:{}},Dm,nx;function JE(){return nx||(nx=1,Dm=()=>{const e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}),Dm}var yd=kc.exports,rx;function e2(){return rx||(rx=1,function(e,t){var r=yd&&yd.__awaiter||function(d,m,h,p){return new(h||(h=Promise))(function(g,b){function w(j){try{y(p.next(j))}catch(N){b(N)}}function S(j){try{y(p.throw(j))}catch(N){b(N)}}function y(j){j.done?g(j.value):new h(function(N){N(j.value)}).then(w,S)}y((p=p.apply(d,m||[])).next())})},i=yd&&yd.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(JE());function u(d,m="maxAge"){let h,p,g;const b=()=>r(this,void 0,void 0,function*(){if(h!==void 0)return;const y=j=>r(this,void 0,void 0,function*(){g=s.default();const N=j[1][m]-Date.now();if(N<=0){d.delete(j[0]),g.resolve();return}return h=j[0],p=setTimeout(()=>{d.delete(j[0]),g&&g.resolve()},N),typeof p.unref=="function"&&p.unref(),g.promise});try{for(const j of d)yield y(j)}catch{}h=void 0}),w=()=>{h=void 0,p!==void 0&&(clearTimeout(p),p=void 0),g!==void 0&&(g.reject(void 0),g=void 0)},S=d.set.bind(d);return d.set=(y,j)=>{d.has(y)&&d.delete(y);const N=S(y,j);return h&&h===y&&w(),b(),N},b(),d}t.default=u,e.exports=u,e.exports.default=u}(kc,kc.exports)),kc.exports}var Rm,ax;function t2(){if(ax)return Rm;ax=1;const e=QE(),t=e2(),r=new WeakMap,i=new WeakMap,s=(u,{cacheKey:d,cache:m=new Map,maxAge:h}={})=>{typeof h=="number"&&t(m);const p=function(...g){const b=d?d(g):g[0],w=m.get(b);if(w)return w.data;const S=u.apply(this,g);return m.set(b,{data:S,maxAge:h?Date.now()+h:Number.POSITIVE_INFINITY}),S};return e(p,u,{ignoreNonConfigurable:!0}),i.set(p,m),p};return s.decorator=(u={})=>(d,m,h)=>{const p=d[m];if(typeof p!="function")throw new TypeError("The decorated value must be a function");delete h.value,delete h.writable,h.get=function(){if(!r.has(this)){const g=s(p,u);return r.set(this,g),g}return r.get(this)}},s.clear=u=>{const d=i.get(u);if(!d)throw new TypeError("Can't clear a function that was not memoized!");if(typeof d.clear!="function")throw new TypeError("The cache Map can't be cleared!");d.clear()},Rm=s,Rm}var n2=t2();const _S=qp(n2);function r2(e){return typeof e=="string"}function a2(e,t,r){return r.indexOf(e)===t}function i2(e){return e.toLowerCase()===e}function ix(e){return e.indexOf(",")===-1?e:e.split(",")}function mp(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],r=t===void 0?"":t;return mp(r)}if(e.indexOf("@")!==-1){var i=e.split("@")[0],r=i===void 0?"":i;return mp(r)}if(e.indexOf("-")===-1||!i2(e))return e;var s=e.split("-"),u=s[0],d=s[1],m=d===void 0?"":d;return"".concat(u,"-").concat(m.toUpperCase())}function s2(e){var t=e===void 0?{}:e,r=t.useFallbackLocale,i=r===void 0?!0:r,s=t.fallbackLocale,u=s===void 0?"en-US":s,d=[];if(typeof navigator<"u"){for(var m=navigator.languages||[],h=[],p=0,g=m;p<g.length;p++){var b=g[p];h=h.concat(ix(b))}var w=navigator.language,S=w&&ix(w);d=d.concat(h,S)}return i&&d.push(u),d.filter(r2).map(mp).filter(a2)}var o2=_S(s2,{cacheKey:JSON.stringify});function l2(e){return o2(e)[0]||null}var NS=_S(l2,{cacheKey:JSON.stringify});function Ni(e,t,r){return function(s,u){u===void 0&&(u=r);var d=e(s)+u;return t(d)}}function Qc(e){return function(r){return new Date(e(r).getTime()-1)}}function Jc(e,t){return function(i){return[e(i),t(i)]}}function Mn(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function gs(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function Nf(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function ol(e){var t=Mn(e),r=t+(-t+1)%100,i=new Date;return i.setFullYear(r,0,1),i.setHours(0,0,0,0),i}var c2=Ni(Mn,ol,-100),CS=Ni(Mn,ol,100),ag=Qc(CS),u2=Ni(Mn,ag,-100),ES=Jc(ol,ag);function vs(e){var t=Mn(e),r=t+(-t+1)%10,i=new Date;return i.setFullYear(r,0,1),i.setHours(0,0,0,0),i}var MS=Ni(Mn,vs,-10),ig=Ni(Mn,vs,10),Cf=Qc(ig),OS=Ni(Mn,Cf,-10),LS=Jc(vs,Cf);function ll(e){var t=Mn(e),r=new Date;return r.setFullYear(t,0,1),r.setHours(0,0,0,0),r}var kS=Ni(Mn,ll,-1),sg=Ni(Mn,ll,1),Ef=Qc(sg),AS=Ni(Mn,Ef,-1),d2=Jc(ll,Ef);function og(e,t){return function(i,s){s===void 0&&(s=t);var u=Mn(i),d=gs(i)+s,m=new Date;return m.setFullYear(u,d,1),m.setHours(0,0,0,0),e(m)}}function Ks(e){var t=Mn(e),r=gs(e),i=new Date;return i.setFullYear(t,r,1),i.setHours(0,0,0,0),i}var TS=og(Ks,-1),lg=og(Ks,1),eu=Qc(lg),DS=og(eu,-1),f2=Jc(Ks,eu);function h2(e,t){return function(i,s){s===void 0&&(s=t);var u=Mn(i),d=gs(i),m=Nf(i)+s,h=new Date;return h.setFullYear(u,d,m),h.setHours(0,0,0,0),e(h)}}function tu(e){var t=Mn(e),r=gs(e),i=Nf(e),s=new Date;return s.setFullYear(t,r,i),s.setHours(0,0,0,0),s}var m2=h2(tu,1),cg=Qc(m2),p2=Jc(tu,cg);function RS(e){return Nf(eu(e))}var gr={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},g2={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},ug=[0,1,2,3,4,5,6],Pm=new Map;function v2(e){return function(r,i){var s=r||NS();Pm.has(s)||Pm.set(s,new Map);var u=Pm.get(s);return u.has(e)||u.set(e,new Intl.DateTimeFormat(s||void 0,e).format),u.get(e)(i)}}function b2(e){var t=new Date(e);return new Date(t.setHours(12))}function Qs(e){return function(t,r){return v2(e)(t,b2(r))}}var y2={day:"numeric"},x2={day:"numeric",month:"long",year:"numeric"},w2={month:"long"},S2={month:"long",year:"numeric"},j2={weekday:"short"},_2={weekday:"long"},N2={year:"numeric"},C2=Qs(y2),E2=Qs(x2),M2=Qs(w2),PS=Qs(S2),O2=Qs(j2),L2=Qs(_2),Mf=Qs(N2),k2=ug[0],A2=ug[5],sx=ug[6];function zc(e,t){t===void 0&&(t=gr.ISO_8601);var r=e.getDay();switch(t){case gr.ISO_8601:return(r+6)%7;case gr.ISLAMIC:return(r+1)%7;case gr.HEBREW:case gr.GREGORY:return r;default:throw new Error("Unsupported calendar type.")}}function T2(e){var t=ol(e);return Mn(t)}function D2(e){var t=vs(e);return Mn(t)}function pp(e,t){t===void 0&&(t=gr.ISO_8601);var r=Mn(e),i=gs(e),s=e.getDate()-zc(e,t);return new Date(r,i,s)}function R2(e,t){t===void 0&&(t=gr.ISO_8601);var r=t===gr.GREGORY?gr.GREGORY:gr.ISO_8601,i=pp(e,t),s=Mn(e)+1,u,d;do u=new Date(s,0,r===gr.ISO_8601?4:1),d=pp(u,t),s-=1;while(e<d);return Math.round((i.getTime()-d.getTime())/(864e5*7))+1}function qs(e,t){switch(e){case"century":return ol(t);case"decade":return vs(t);case"year":return ll(t);case"month":return Ks(t);case"day":return tu(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function P2(e,t){switch(e){case"century":return c2(t);case"decade":return MS(t);case"year":return kS(t);case"month":return TS(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function zS(e,t){switch(e){case"century":return CS(t);case"decade":return ig(t);case"year":return sg(t);case"month":return lg(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function z2(e,t){switch(e){case"decade":return MS(t,-100);case"year":return kS(t,-10);case"month":return TS(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function $2(e,t){switch(e){case"decade":return ig(t,100);case"year":return sg(t,10);case"month":return lg(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function $S(e,t){switch(e){case"century":return ag(t);case"decade":return Cf(t);case"year":return Ef(t);case"month":return eu(t);case"day":return cg(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function U2(e,t){switch(e){case"century":return u2(t);case"decade":return OS(t);case"year":return AS(t);case"month":return DS(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function I2(e,t){switch(e){case"decade":return OS(t,-100);case"year":return AS(t,-10);case"month":return DS(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function ox(e,t){switch(e){case"century":return ES(t);case"decade":return LS(t);case"year":return d2(t);case"month":return f2(t);case"day":return p2(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function V2(e,t,r){var i=[t,r].sort(function(s,u){return s.getTime()-u.getTime()});return[qs(e,i[0]),$S(e,i[1])]}function US(e,t,r){return r.map(function(i){return(t||Mf)(e,i)}).join("  ")}function B2(e,t,r){return US(e,t,ES(r))}function IS(e,t,r){return US(e,t,LS(r))}function H2(e){return e.getDay()===new Date().getDay()}function VS(e,t){t===void 0&&(t=gr.ISO_8601);var r=e.getDay();switch(t){case gr.ISLAMIC:case gr.HEBREW:return r===A2||r===sx;case gr.ISO_8601:case gr.GREGORY:return r===sx||r===k2;default:throw new Error("Unsupported calendar type.")}}var Fa="react-calendar__navigation";function F2(e){var t=e.activeStartDate,r=e.drillUp,i=e.formatMonthYear,s=i===void 0?PS:i,u=e.formatYear,d=u===void 0?Mf:u,m=e.locale,h=e.maxDate,p=e.minDate,g=e.navigationAriaLabel,b=g===void 0?"":g,w=e.navigationAriaLive,S=e.navigationLabel,y=e.next2AriaLabel,j=y===void 0?"":y,N=e.next2Label,E=N===void 0?"":N,_=e.nextAriaLabel,M=_===void 0?"":_,O=e.nextLabel,C=O===void 0?"":O,L=e.prev2AriaLabel,B=L===void 0?"":L,Z=e.prev2Label,R=Z===void 0?"":Z,X=e.prevAriaLabel,te=X===void 0?"":X,xe=e.prevLabel,Pe=xe===void 0?"":xe,ve=e.setActiveStartDate,se=e.showDoubleView,V=e.view,F=e.views,Y=F.indexOf(V)>0,z=V!=="century",T=P2(V,t),P=z?z2(V,t):void 0,A=zS(V,t),H=z?$2(V,t):void 0,U=function(){if(T.getFullYear()<0)return!0;var le=U2(V,t);return p&&p>=le}(),W=z&&function(){if(P.getFullYear()<0)return!0;var le=I2(V,t);return p&&p>=le}(),ue=h&&h<A,Ee=z&&h&&h<H;function be(){ve(T,"prev")}function Be(){ve(P,"prev2")}function Te(){ve(A,"next")}function Ge(){ve(H,"next2")}function ge(le){var ce=function(){switch(V){case"century":return B2(m,d,le);case"decade":return IS(m,d,le);case"year":return d(m,le);case"month":return s(m,le);default:throw new Error("Invalid view: ".concat(V,"."))}}();return S?S({date:le,label:ce,locale:m||NS()||void 0,view:V}):ce}function Ke(){var le="".concat(Fa,"__label");return o.jsxs("button",{"aria-label":b,"aria-live":w,className:le,disabled:!Y,onClick:r,style:{flexGrow:1},type:"button",children:[o.jsx("span",{className:"".concat(le,"__labelText ").concat(le,"__labelText--from"),children:ge(t)}),se?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"".concat(le,"__divider"),children:"  "}),o.jsx("span",{className:"".concat(le,"__labelText ").concat(le,"__labelText--to"),children:ge(A)})]}):null]})}return o.jsxs("div",{className:Fa,children:[R!==null&&z?o.jsx("button",{"aria-label":B,className:"".concat(Fa,"__arrow ").concat(Fa,"__prev2-button"),disabled:W,onClick:Be,type:"button",children:R}):null,Pe!==null&&o.jsx("button",{"aria-label":te,className:"".concat(Fa,"__arrow ").concat(Fa,"__prev-button"),disabled:U,onClick:be,type:"button",children:Pe}),Ke(),C!==null&&o.jsx("button",{"aria-label":M,className:"".concat(Fa,"__arrow ").concat(Fa,"__next-button"),disabled:ue,onClick:Te,type:"button",children:C}),E!==null&&z?o.jsx("button",{"aria-label":j,className:"".concat(Fa,"__arrow ").concat(Fa,"__next2-button"),disabled:Ee,onClick:Ge,type:"button",children:E}):null]})}var qo=function(){return qo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},qo.apply(this,arguments)},Y2=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};function lx(e){return"".concat(e,"%")}function dg(e){var t=e.children,r=e.className,i=e.count,s=e.direction,u=e.offset,d=e.style,m=e.wrap,h=Y2(e,["children","className","count","direction","offset","style","wrap"]);return o.jsx("div",qo({className:r,style:qo({display:"flex",flexDirection:s,flexWrap:m?"wrap":"nowrap"},d)},h,{children:f.Children.map(t,function(p,g){var b=u&&g===0?lx(100*u/i):null;return f.cloneElement(p,qo(qo({},p.props),{style:{flexBasis:lx(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:b,marginInlineStart:b,marginInlineEnd:0}}))})}))}function q2(e,t,r){return t&&t>e?t:r&&r<e?r:e}function $c(e,t){return t[0]<=e&&t[1]>=e}function G2(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function BS(e,t){return $c(e[0],t)||$c(e[1],t)}function cx(e,t,r){var i=BS(t,e),s=[];if(i){s.push(r);var u=$c(e[0],t),d=$c(e[1],t);u&&s.push("".concat(r,"Start")),d&&s.push("".concat(r,"End")),u&&d&&s.push("".concat(r,"BothEnds"))}return s}function W2(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function Z2(e){if(!e)throw new Error("args is required");var t=e.value,r=e.date,i=e.hover,s="react-calendar__tile",u=[s];if(!r)return u;var d=new Date,m=function(){if(Array.isArray(r))return r;var S=e.dateType;if(!S)throw new Error("dateType is required when date is not an array of two dates");return ox(S,r)}();if($c(d,m)&&u.push("".concat(s,"--now")),!t||!W2(t))return u;var h=function(){if(Array.isArray(t))return t;var S=e.valueType;if(!S)throw new Error("valueType is required when value is not an array of two dates");return ox(S,t)}();G2(h,m)?u.push("".concat(s,"--active")):BS(h,m)&&u.push("".concat(s,"--hasActive"));var p=cx(h,m,"".concat(s,"--range"));u.push.apply(u,p);var g=Array.isArray(t)?t:[t];if(i&&g.length===1){var b=i>h[0]?[h[0],i]:[i,h[0]],w=cx(b,m,"".concat(s,"--hover"));u.push.apply(u,w)}return u}function Of(e){for(var t=e.className,r=e.count,i=r===void 0?3:r,s=e.dateTransform,u=e.dateType,d=e.end,m=e.hover,h=e.offset,p=e.renderTile,g=e.start,b=e.step,w=b===void 0?1:b,S=e.value,y=e.valueType,j=[],N=g;N<=d;N+=w){var E=s(N);j.push(p({classes:Z2({date:E,dateType:u,hover:m,value:S,valueType:y}),date:E}))}return o.jsx(dg,{className:t,count:i,offset:h,wrap:!0,children:j})}function Lf(e){var t=e.activeStartDate,r=e.children,i=e.classes,s=e.date,u=e.formatAbbr,d=e.locale,m=e.maxDate,h=e.maxDateTransform,p=e.minDate,g=e.minDateTransform,b=e.onClick,w=e.onMouseOver,S=e.style,y=e.tileClassName,j=e.tileContent,N=e.tileDisabled,E=e.view,_=f.useMemo(function(){var O={activeStartDate:t,date:s,view:E};return typeof y=="function"?y(O):y},[t,s,y,E]),M=f.useMemo(function(){var O={activeStartDate:t,date:s,view:E};return typeof j=="function"?j(O):j},[t,s,j,E]);return o.jsxs("button",{className:sl(i,_),disabled:p&&g(p)>s||m&&h(m)<s||(N==null?void 0:N({activeStartDate:t,date:s,view:E})),onClick:b?function(O){return b(s,O)}:void 0,onFocus:w?function(){return w(s)}:void 0,onMouseOver:w?function(){return w(s)}:void 0,style:S,type:"button",children:[u?o.jsx("abbr",{"aria-label":u(d,s),children:r}):r,M]})}var gp=function(){return gp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},gp.apply(this,arguments)},X2=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r},ux="react-calendar__century-view__decades__decade";function K2(e){var t=e.classes,r=t===void 0?[]:t,i=e.currentCentury,s=e.formatYear,u=s===void 0?Mf:s,d=X2(e,["classes","currentCentury","formatYear"]),m=d.date,h=d.locale,p=[];return r&&p.push.apply(p,r),p.push(ux),ol(m).getFullYear()!==i&&p.push("".concat(ux,"--neighboringCentury")),o.jsx(Lf,gp({},d,{classes:p,maxDateTransform:Cf,minDateTransform:vs,view:"century",children:IS(h,u,m)}))}var vp=function(){return vp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},vp.apply(this,arguments)},dx=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};function Q2(e){var t=e.activeStartDate,r=e.hover,i=e.showNeighboringCentury,s=e.value,u=e.valueType,d=dx(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),m=T2(t),h=m+(i?119:99);return o.jsx(Of,{className:"react-calendar__century-view__decades",dateTransform:vs,dateType:"decade",end:h,hover:r,renderTile:function(p){var g=p.date,b=dx(p,["date"]);return o.jsx(K2,vp({},d,b,{activeStartDate:t,currentCentury:m,date:g}),g.getTime())},start:m,step:10,value:s,valueType:u})}var bp=function(){return bp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},bp.apply(this,arguments)};function J2(e){function t(){return o.jsx(Q2,bp({},e))}return o.jsx("div",{className:"react-calendar__century-view",children:t()})}var yp=function(){return yp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},yp.apply(this,arguments)},eM=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r},fx="react-calendar__decade-view__years__year";function tM(e){var t=e.classes,r=t===void 0?[]:t,i=e.currentDecade,s=e.formatYear,u=s===void 0?Mf:s,d=eM(e,["classes","currentDecade","formatYear"]),m=d.date,h=d.locale,p=[];return r&&p.push.apply(p,r),p.push(fx),vs(m).getFullYear()!==i&&p.push("".concat(fx,"--neighboringDecade")),o.jsx(Lf,yp({},d,{classes:p,maxDateTransform:Ef,minDateTransform:ll,view:"decade",children:u(h,m)}))}var xp=function(){return xp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},xp.apply(this,arguments)},hx=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};function nM(e){var t=e.activeStartDate,r=e.hover,i=e.showNeighboringDecade,s=e.value,u=e.valueType,d=hx(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),m=D2(t),h=m+(i?11:9);return o.jsx(Of,{className:"react-calendar__decade-view__years",dateTransform:ll,dateType:"year",end:h,hover:r,renderTile:function(p){var g=p.date,b=hx(p,["date"]);return o.jsx(tM,xp({},d,b,{activeStartDate:t,currentDecade:m,date:g}),g.getTime())},start:m,value:s,valueType:u})}var wp=function(){return wp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wp.apply(this,arguments)};function rM(e){function t(){return o.jsx(nM,wp({},e))}return o.jsx("div",{className:"react-calendar__decade-view",children:t()})}var Sp=function(){return Sp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Sp.apply(this,arguments)},aM=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r},mx=function(e,t,r){if(r||arguments.length===2)for(var i=0,s=t.length,u;i<s;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},iM="react-calendar__year-view__months__month";function sM(e){var t=e.classes,r=t===void 0?[]:t,i=e.formatMonth,s=i===void 0?M2:i,u=e.formatMonthYear,d=u===void 0?PS:u,m=aM(e,["classes","formatMonth","formatMonthYear"]),h=m.date,p=m.locale;return o.jsx(Lf,Sp({},m,{classes:mx(mx([],r,!0),[iM],!1),formatAbbr:d,maxDateTransform:eu,minDateTransform:Ks,view:"year",children:s(p,h)}))}var jp=function(){return jp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},jp.apply(this,arguments)},px=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};function oM(e){var t=e.activeStartDate,r=e.hover,i=e.value,s=e.valueType,u=px(e,["activeStartDate","hover","value","valueType"]),d=0,m=11,h=Mn(t);return o.jsx(Of,{className:"react-calendar__year-view__months",dateTransform:function(p){var g=new Date;return g.setFullYear(h,p,1),Ks(g)},dateType:"month",end:m,hover:r,renderTile:function(p){var g=p.date,b=px(p,["date"]);return o.jsx(sM,jp({},u,b,{activeStartDate:t,date:g}),g.getTime())},start:d,value:i,valueType:s})}var _p=function(){return _p=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},_p.apply(this,arguments)};function lM(e){function t(){return o.jsx(oM,_p({},e))}return o.jsx("div",{className:"react-calendar__year-view",children:t()})}var Np=function(){return Np=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Np.apply(this,arguments)},cM=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r},zm="react-calendar__month-view__days__day";function uM(e){var t=e.calendarType,r=e.classes,i=r===void 0?[]:r,s=e.currentMonthIndex,u=e.formatDay,d=u===void 0?C2:u,m=e.formatLongDate,h=m===void 0?E2:m,p=cM(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),g=p.date,b=p.locale,w=[];return i&&w.push.apply(w,i),w.push(zm),VS(g,t)&&w.push("".concat(zm,"--weekend")),g.getMonth()!==s&&w.push("".concat(zm,"--neighboringMonth")),o.jsx(Lf,Np({},p,{classes:w,formatAbbr:h,maxDateTransform:cg,minDateTransform:tu,view:"month",children:d(b,g)}))}var Cp=function(){return Cp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Cp.apply(this,arguments)},gx=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};function dM(e){var t=e.activeStartDate,r=e.calendarType,i=e.hover,s=e.showFixedNumberOfWeeks,u=e.showNeighboringMonth,d=e.value,m=e.valueType,h=gx(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),p=Mn(t),g=gs(t),b=s||u,w=zc(t,r),S=b?0:w,y=(b?-w:0)+1,j=function(){if(s)return y+6*7-1;var N=RS(t);if(u){var E=new Date;E.setFullYear(p,g,N),E.setHours(0,0,0,0);var _=7-zc(E,r)-1;return N+_}return N}();return o.jsx(Of,{className:"react-calendar__month-view__days",count:7,dateTransform:function(N){var E=new Date;return E.setFullYear(p,g,N),tu(E)},dateType:"day",hover:i,end:j,renderTile:function(N){var E=N.date,_=gx(N,["date"]);return o.jsx(uM,Cp({},h,_,{activeStartDate:t,calendarType:r,currentMonthIndex:g,date:E}),E.getTime())},offset:S,start:y,value:d,valueType:m})}var HS="react-calendar__month-view__weekdays",$m="".concat(HS,"__weekday");function fM(e){for(var t=e.calendarType,r=e.formatShortWeekday,i=r===void 0?O2:r,s=e.formatWeekday,u=s===void 0?L2:s,d=e.locale,m=e.onMouseLeave,h=new Date,p=Ks(h),g=Mn(p),b=gs(p),w=[],S=1;S<=7;S+=1){var y=new Date(g,b,S-zc(p,t)),j=u(d,y);w.push(o.jsx("div",{className:sl($m,H2(y)&&"".concat($m,"--current"),VS(y,t)&&"".concat($m,"--weekend")),children:o.jsx("abbr",{"aria-label":j,title:j,children:i(d,y).replace(".","")})},S))}return o.jsx(dg,{className:HS,count:7,onFocus:m,onMouseOver:m,children:w})}var Xd=function(){return Xd=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Xd.apply(this,arguments)},vx=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r},bx="react-calendar__tile";function hM(e){var t=e.onClickWeekNumber,r=e.weekNumber,i=o.jsx("span",{children:r});if(t){var s=e.date,u=e.onClickWeekNumber,d=e.weekNumber,m=vx(e,["date","onClickWeekNumber","weekNumber"]);return o.jsx("button",Xd({},m,{className:bx,onClick:function(h){return u(d,s,h)},type:"button",children:i}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var m=vx(e,["date","onClickWeekNumber","weekNumber"]);return o.jsx("div",Xd({},m,{className:bx,children:i}))}}function mM(e){var t=e.activeStartDate,r=e.calendarType,i=e.onClickWeekNumber,s=e.onMouseLeave,u=e.showFixedNumberOfWeeks,d=function(){if(u)return 6;var p=RS(t),g=zc(t,r),b=p-(7-g);return 1+Math.ceil(b/7)}(),m=function(){for(var p=Mn(t),g=gs(t),b=Nf(t),w=[],S=0;S<d;S+=1)w.push(pp(new Date(p,g,b+S*7),r));return w}(),h=m.map(function(p){return R2(p,r)});return o.jsx(dg,{className:"react-calendar__month-view__weekNumbers",count:d,direction:"column",onFocus:s,onMouseOver:s,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:h.map(function(p,g){var b=m[g];if(!b)throw new Error("date is not defined");return o.jsx(hM,{date:b,onClickWeekNumber:i,weekNumber:p},p)})})}var Ep=function(){return Ep=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ep.apply(this,arguments)},pM=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};function gM(e){if(e)for(var t=0,r=Object.entries(g2);t<r.length;t++){var i=r[t],s=i[0],u=i[1];if(u.includes(e))return s}return gr.ISO_8601}function vM(e){var t=e.activeStartDate,r=e.locale,i=e.onMouseLeave,s=e.showFixedNumberOfWeeks,u=e.calendarType,d=u===void 0?gM(r):u,m=e.formatShortWeekday,h=e.formatWeekday,p=e.onClickWeekNumber,g=e.showWeekNumbers,b=pM(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function w(){return o.jsx(fM,{calendarType:d,formatShortWeekday:m,formatWeekday:h,locale:r,onMouseLeave:i})}function S(){return g?o.jsx(mM,{activeStartDate:t,calendarType:d,onClickWeekNumber:p,onMouseLeave:i,showFixedNumberOfWeeks:s}):null}function y(){return o.jsx(dM,Ep({calendarType:d},b))}var j="react-calendar__month-view";return o.jsx("div",{className:sl(j,g?"".concat(j,"--weekNumbers"):""),children:o.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[S(),o.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[w(),y()]})]})})}var Go=function(){return Go=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Go.apply(this,arguments)},xd="react-calendar",Ud=["century","decade","year","month"],bM=["decade","year","month","day"],fg=new Date;fg.setFullYear(1,0,1);fg.setHours(0,0,0,0);var yM=new Date(864e13);function Ac(e){return e instanceof Date?e:new Date(e)}function FS(e,t){return Ud.slice(Ud.indexOf(e),Ud.indexOf(t)+1)}function xM(e,t,r){var i=FS(t,r);return i.indexOf(e)!==-1}function hg(e,t,r){return e&&xM(e,t,r)?e:r}function YS(e){var t=Ud.indexOf(e);return bM[t]}function wM(e,t){var r=Array.isArray(e)?e[t]:e;if(!r)return null;var i=Ac(r);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(e));return i}function qS(e,t){var r=e.value,i=e.minDate,s=e.maxDate,u=e.maxDetail,d=wM(r,t);if(!d)return null;var m=YS(u),h=function(){switch(t){case 0:return qs(m,d);case 1:return $S(m,d);default:throw new Error("Invalid index value: ".concat(t))}}();return q2(h,i,s)}var mg=function(e){return qS(e,0)},GS=function(e){return qS(e,1)},SM=function(e){return[mg,GS].map(function(t){return t(e)})};function WS(e){var t=e.maxDate,r=e.maxDetail,i=e.minDate,s=e.minDetail,u=e.value,d=e.view,m=hg(d,s,r),h=mg({value:u,minDate:i,maxDate:t,maxDetail:r})||new Date;return qs(m,h)}function jM(e){var t=e.activeStartDate,r=e.defaultActiveStartDate,i=e.defaultValue,s=e.defaultView,u=e.maxDate,d=e.maxDetail,m=e.minDate,h=e.minDetail,p=e.value,g=e.view,b=hg(g,h,d),w=t||r;return w?qs(b,w):WS({maxDate:u,maxDetail:d,minDate:m,minDetail:h,value:p||i,view:g||s})}function Um(e){return e&&(!Array.isArray(e)||e.length===1)}function wd(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var _M=f.forwardRef(function(t,r){var i=t.activeStartDate,s=t.allowPartialRange,u=t.calendarType,d=t.className,m=t.defaultActiveStartDate,h=t.defaultValue,p=t.defaultView,g=t.formatDay,b=t.formatLongDate,w=t.formatMonth,S=t.formatMonthYear,y=t.formatShortWeekday,j=t.formatWeekday,N=t.formatYear,E=t.goToRangeStartOnSelect,_=E===void 0?!0:E,M=t.inputRef,O=t.locale,C=t.maxDate,L=C===void 0?yM:C,B=t.maxDetail,Z=B===void 0?"month":B,R=t.minDate,X=R===void 0?fg:R,te=t.minDetail,xe=te===void 0?"century":te,Pe=t.navigationAriaLabel,ve=t.navigationAriaLive,se=t.navigationLabel,V=t.next2AriaLabel,F=t.next2Label,Y=t.nextAriaLabel,z=t.nextLabel,T=t.onActiveStartDateChange,P=t.onChange,A=t.onClickDay,H=t.onClickDecade,U=t.onClickMonth,W=t.onClickWeekNumber,ue=t.onClickYear,Ee=t.onDrillDown,be=t.onDrillUp,Be=t.onViewChange,Te=t.prev2AriaLabel,Ge=t.prev2Label,ge=t.prevAriaLabel,Ke=t.prevLabel,le=t.returnValue,ce=le===void 0?"start":le,K=t.selectRange,Ae=t.showDoubleView,Se=t.showFixedNumberOfWeeks,De=t.showNavigation,Ze=De===void 0?!0:De,Ve=t.showNeighboringCentury,de=t.showNeighboringDecade,I=t.showNeighboringMonth,oe=I===void 0?!0:I,he=t.showWeekNumbers,_e=t.tileClassName,ae=t.tileContent,fe=t.tileDisabled,ne=t.value,Xe=t.view,Je=f.useState(m),et=Je[0],ot=Je[1],wt=f.useState(null),rt=wt[0],$t=wt[1],Lt=f.useState(Array.isArray(h)?h.map(function(ze){return ze!==null?Ac(ze):null}):h!=null?Ac(h):null),Yn=Lt[0],Un=Lt[1],ea=f.useState(p),bt=ea[0],mt=ea[1],gt=i||et||jM({activeStartDate:i,defaultActiveStartDate:m,defaultValue:h,defaultView:p,maxDate:L,maxDetail:Z,minDate:X,minDetail:xe,value:ne,view:Xe}),Zt=function(){var ze=function(){return K&&Um(Yn)?Yn:ne!==void 0?ne:Yn}();return ze?Array.isArray(ze)?ze.map(function(Fe){return Fe!==null?Ac(Fe):null}):ze!==null?Ac(ze):null:null}(),qn=YS(Z),Ft=hg(Xe||bt,xe,Z),jn=FS(xe,Z),nn=K?rt:null,Qn=jn.indexOf(Ft)<jn.length-1,Yt=jn.indexOf(Ft)>0,lt=f.useCallback(function(ze){var Fe=function(){switch(ce){case"start":return mg;case"end":return GS;case"range":return SM;default:throw new Error("Invalid returnValue.")}}();return Fe({maxDate:L,maxDetail:Z,minDate:X,value:ze})},[L,Z,X,ce]),An=f.useCallback(function(ze,Fe){ot(ze);var Qe={action:Fe,activeStartDate:ze,value:Zt,view:Ft};T&&!wd(gt,ze)&&T(Qe)},[gt,T,Zt,Ft]),xn=f.useCallback(function(ze,Fe){var Qe=function(){switch(Ft){case"century":return H;case"decade":return ue;case"year":return U;case"month":return A;default:throw new Error("Invalid view: ".concat(Ft,"."))}}();Qe&&Qe(ze,Fe)},[A,H,U,ue,Ft]),kr=f.useCallback(function(ze,Fe){if(Qn){xn(ze,Fe);var Qe=jn[jn.indexOf(Ft)+1];if(!Qe)throw new Error("Attempted to drill down from the lowest view.");ot(ze),mt(Qe);var ut={action:"drillDown",activeStartDate:ze,value:Zt,view:Qe};T&&!wd(gt,ze)&&T(ut),Be&&Ft!==Qe&&Be(ut),Ee&&Ee(ut)}},[gt,Qn,T,xn,Ee,Be,Zt,Ft,jn]),Oa=f.useCallback(function(){if(Yt){var ze=jn[jn.indexOf(Ft)-1];if(!ze)throw new Error("Attempted to drill up from the highest view.");var Fe=qs(ze,gt);ot(Fe),mt(ze);var Qe={action:"drillUp",activeStartDate:Fe,value:Zt,view:ze};T&&!wd(gt,Fe)&&T(Qe),Be&&Ft!==ze&&Be(Qe),be&&be(Qe)}},[gt,Yt,T,be,Be,Zt,Ft,jn]),Cr=f.useCallback(function(ze,Fe){var Qe=Zt;xn(ze,Fe);var ut=K&&!Um(Qe),ct;if(K)if(ut)ct=qs(qn,ze);else{if(!Qe)throw new Error("previousValue is required");if(Array.isArray(Qe))throw new Error("previousValue must not be an array");ct=V2(qn,Qe,ze)}else ct=lt(ze);var Xt=!K||ut||_?WS({maxDate:L,maxDetail:Z,minDate:X,minDetail:xe,value:ct,view:Ft}):null;Fe.persist(),ot(Xt),Un(ct);var Nn={action:"onChange",activeStartDate:Xt,value:ct,view:Ft};if(T&&!wd(gt,Xt)&&T(Nn),P)if(K){var wn=Um(ct);if(!wn)P(ct||null,Fe);else if(s){if(Array.isArray(ct))throw new Error("value must not be an array");P([ct||null,null],Fe)}}else P(ct||null,Fe)},[gt,s,lt,_,L,Z,X,xe,T,P,xn,K,Zt,qn,Ft]);function La(ze){$t(ze)}function ke(){$t(null)}f.useImperativeHandle(r,function(){return{activeStartDate:gt,drillDown:kr,drillUp:Oa,onChange:Cr,setActiveStartDate:An,value:Zt,view:Ft}},[gt,kr,Oa,Cr,An,Zt,Ft]);function nt(ze){var Fe=ze?zS(Ft,gt):qs(Ft,gt),Qe=Qn?kr:Cr,ut={activeStartDate:Fe,hover:nn,locale:O,maxDate:L,minDate:X,onClick:Qe,onMouseOver:K?La:void 0,tileClassName:_e,tileContent:ae,tileDisabled:fe,value:Zt,valueType:qn};switch(Ft){case"century":return o.jsx(J2,Go({formatYear:N,showNeighboringCentury:Ve},ut));case"decade":return o.jsx(rM,Go({formatYear:N,showNeighboringDecade:de},ut));case"year":return o.jsx(lM,Go({formatMonth:w,formatMonthYear:S},ut));case"month":return o.jsx(vM,Go({calendarType:u,formatDay:g,formatLongDate:b,formatShortWeekday:y,formatWeekday:j,onClickWeekNumber:W,onMouseLeave:K?ke:void 0,showFixedNumberOfWeeks:typeof Se<"u"?Se:Ae,showNeighboringMonth:oe,showWeekNumbers:he},ut));default:throw new Error("Invalid view: ".concat(Ft,"."))}}function We(){return Ze?o.jsx(F2,{activeStartDate:gt,drillUp:Oa,formatMonthYear:S,formatYear:N,locale:O,maxDate:L,minDate:X,navigationAriaLabel:Pe,navigationAriaLive:ve,navigationLabel:se,next2AriaLabel:V,next2Label:F,nextAriaLabel:Y,nextLabel:z,prev2AriaLabel:Te,prev2Label:Ge,prevAriaLabel:ge,prevLabel:Ke,setActiveStartDate:An,showDoubleView:Ae,view:Ft,views:jn}):null}var st=Array.isArray(Zt)?Zt:[Zt];return o.jsxs("div",{className:sl(xd,K&&st.length===1&&"".concat(xd,"--selectRange"),Ae&&"".concat(xd,"--doubleView"),d),ref:M,children:[We(),o.jsxs("div",{className:"".concat(xd,"__viewContainer"),onBlur:K?ke:void 0,onMouseLeave:K?ke:void 0,children:[nt(),Ae?nt(!0):null]})]})});const ZS=6048e5,NM=864e5,yx=Symbol.for("constructDateFrom");function ji(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&yx in e?e[yx](t):e instanceof Date?new e.constructor(t):new Date(t)}function ma(e,t){return ji(t||e,e)}function CM(e,t,r){const i=ma(e,r==null?void 0:r.in);return isNaN(t)?ji(e,NaN):(t&&i.setDate(i.getDate()+t),i)}let EM={};function kf(){return EM}function Uc(e,t){var m,h,p,g;const r=kf(),i=(t==null?void 0:t.weekStartsOn)??((h=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:h.weekStartsOn)??r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,s=ma(e,t==null?void 0:t.in),u=s.getDay(),d=(u<i?7:0)+u-i;return s.setDate(s.getDate()-d),s.setHours(0,0,0,0),s}function Kd(e,t){return Uc(e,{...t,weekStartsOn:1})}function XS(e,t){const r=ma(e,t==null?void 0:t.in),i=r.getFullYear(),s=ji(r,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const u=Kd(s),d=ji(r,0);d.setFullYear(i,0,4),d.setHours(0,0,0,0);const m=Kd(d);return r.getTime()>=u.getTime()?i+1:r.getTime()>=m.getTime()?i:i-1}function xx(e){const t=ma(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function MM(e,...t){const r=ji.bind(null,t.find(i=>typeof i=="object"));return t.map(r)}function wx(e,t){const r=ma(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function OM(e,t,r){const[i,s]=MM(r==null?void 0:r.in,e,t),u=wx(i),d=wx(s),m=+u-xx(u),h=+d-xx(d);return Math.round((m-h)/NM)}function LM(e,t){const r=XS(e,t),i=ji(e,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),Kd(i)}function kM(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function AM(e){return!(!kM(e)&&typeof e!="number"||isNaN(+ma(e)))}function TM(e,t){const r=ma(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const DM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},RM=(e,t,r)=>{let i;const s=DM[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Zo(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const PM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$M={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},UM={date:Zo({formats:PM,defaultWidth:"full"}),time:Zo({formats:zM,defaultWidth:"full"}),dateTime:Zo({formats:$M,defaultWidth:"full"})},IM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},VM=(e,t,r,i)=>IM[e];function Za(e){return(t,r)=>{const i=r!=null&&r.context?String(r.context):"standalone";let s;if(i==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,m=r!=null&&r.width?String(r.width):d;s=e.formattingValues[m]||e.formattingValues[d]}else{const d=e.defaultWidth,m=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[m]||e.values[d]}const u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}const BM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},HM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},GM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WM=(e,t)=>{const r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ZM={ordinalNumber:WM,era:Za({values:BM,defaultWidth:"wide"}),quarter:Za({values:HM,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Za({values:FM,defaultWidth:"wide"}),day:Za({values:YM,defaultWidth:"wide"}),dayPeriod:Za({values:qM,defaultWidth:"wide",formattingValues:GM,defaultFormattingWidth:"wide"})};function Xa(e){return(t,r={})=>{const i=r.width,s=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],u=t.match(s);if(!u)return null;const d=u[0],m=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(m)?KM(m,b=>b.test(d)):XM(m,b=>b.test(d));let p;p=e.valueCallback?e.valueCallback(h):h,p=r.valueCallback?r.valueCallback(p):p;const g=t.slice(d.length);return{value:p,rest:g}}}function XM(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function KM(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function KS(e){return(t,r={})=>{const i=t.match(e.matchPattern);if(!i)return null;const s=i[0],u=t.match(e.parsePattern);if(!u)return null;let d=e.valueCallback?e.valueCallback(u[0]):u[0];d=r.valueCallback?r.valueCallback(d):d;const m=t.slice(s.length);return{value:d,rest:m}}}const QM=/^(\d+)(th|st|nd|rd)?/i,JM=/\d+/i,eO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tO={any:[/^b/i,/^(a|c)/i]},nO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rO={any:[/1/i,/2/i,/3/i,/4/i]},aO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},oO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uO={ordinalNumber:KS({matchPattern:QM,parsePattern:JM,valueCallback:e=>parseInt(e,10)}),era:Xa({matchPatterns:eO,defaultMatchWidth:"wide",parsePatterns:tO,defaultParseWidth:"any"}),quarter:Xa({matchPatterns:nO,defaultMatchWidth:"wide",parsePatterns:rO,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Xa({matchPatterns:aO,defaultMatchWidth:"wide",parsePatterns:iO,defaultParseWidth:"any"}),day:Xa({matchPatterns:sO,defaultMatchWidth:"wide",parsePatterns:oO,defaultParseWidth:"any"}),dayPeriod:Xa({matchPatterns:lO,defaultMatchWidth:"any",parsePatterns:cO,defaultParseWidth:"any"})},dO={code:"en-US",formatDistance:RM,formatLong:UM,formatRelative:VM,localize:ZM,match:uO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fO(e,t){const r=ma(e,t==null?void 0:t.in);return OM(r,TM(r))+1}function hO(e,t){const r=ma(e,t==null?void 0:t.in),i=+Kd(r)-+LM(r);return Math.round(i/ZS)+1}function QS(e,t){var g,b,w,S;const r=ma(e,t==null?void 0:t.in),i=r.getFullYear(),s=kf(),u=(t==null?void 0:t.firstWeekContainsDate)??((b=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??s.firstWeekContainsDate??((S=(w=s.locale)==null?void 0:w.options)==null?void 0:S.firstWeekContainsDate)??1,d=ji((t==null?void 0:t.in)||e,0);d.setFullYear(i+1,0,u),d.setHours(0,0,0,0);const m=Uc(d,t),h=ji((t==null?void 0:t.in)||e,0);h.setFullYear(i,0,u),h.setHours(0,0,0,0);const p=Uc(h,t);return+r>=+m?i+1:+r>=+p?i:i-1}function mO(e,t){var m,h,p,g;const r=kf(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,s=QS(e,t),u=ji((t==null?void 0:t.in)||e,0);return u.setFullYear(s,0,i),u.setHours(0,0,0,0),Uc(u,t)}function pO(e,t){const r=ma(e,t==null?void 0:t.in),i=+Uc(r,t)-+mO(r,t);return Math.round(i/ZS)+1}function hn(e,t){const r=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return r+i}const ls={y(e,t){const r=e.getFullYear(),i=r>0?r:1-r;return hn(t==="yy"?i%100:i,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):hn(r+1,2)},d(e,t){return hn(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return hn(e.getHours()%12||12,t.length)},H(e,t){return hn(e.getHours(),t.length)},m(e,t){return hn(e.getMinutes(),t.length)},s(e,t){return hn(e.getSeconds(),t.length)},S(e,t){const r=t.length,i=e.getMilliseconds(),s=Math.trunc(i*Math.pow(10,r-3));return hn(s,t.length)}},Bo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Sx={G:function(e,t,r){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const i=e.getFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return ls.y(e,t)},Y:function(e,t,r,i){const s=QS(e,i),u=s>0?s:1-s;if(t==="YY"){const d=u%100;return hn(d,2)}return t==="Yo"?r.ordinalNumber(u,{unit:"year"}):hn(u,t.length)},R:function(e,t){const r=XS(e);return hn(r,t.length)},u:function(e,t){const r=e.getFullYear();return hn(r,t.length)},Q:function(e,t,r){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return hn(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return hn(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){const i=e.getMonth();switch(t){case"M":case"MM":return ls.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return hn(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){const s=pO(e,i);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):hn(s,t.length)},I:function(e,t,r){const i=hO(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):hn(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ls.d(e,t)},D:function(e,t,r){const i=fO(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):hn(i,t.length)},E:function(e,t,r){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){const s=e.getDay(),u=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return hn(u,2);case"eo":return r.ordinalNumber(u,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){const s=e.getDay(),u=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return hn(u,t.length);case"co":return r.ordinalNumber(u,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const i=e.getDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return hn(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const i=e.getHours();let s;switch(i===12?s=Bo.noon:i===0?s=Bo.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const i=e.getHours();let s;switch(i>=17?s=Bo.evening:i>=12?s=Bo.afternoon:i>=4?s=Bo.morning:s=Bo.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return ls.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ls.H(e,t)},K:function(e,t,r){const i=e.getHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):hn(i,t.length)},k:function(e,t,r){let i=e.getHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):hn(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ls.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ls.s(e,t)},S:function(e,t){return ls.S(e,t)},X:function(e,t,r){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return _x(i);case"XXXX":case"XX":return Is(i);case"XXXXX":case"XXX":default:return Is(i,":")}},x:function(e,t,r){const i=e.getTimezoneOffset();switch(t){case"x":return _x(i);case"xxxx":case"xx":return Is(i);case"xxxxx":case"xxx":default:return Is(i,":")}},O:function(e,t,r){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+jx(i,":");case"OOOO":default:return"GMT"+Is(i,":")}},z:function(e,t,r){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+jx(i,":");case"zzzz":default:return"GMT"+Is(i,":")}},t:function(e,t,r){const i=Math.trunc(+e/1e3);return hn(i,t.length)},T:function(e,t,r){return hn(+e,t.length)}};function jx(e,t=""){const r=e>0?"-":"+",i=Math.abs(e),s=Math.trunc(i/60),u=i%60;return u===0?r+String(s):r+String(s)+t+hn(u,2)}function _x(e,t){return e%60===0?(e>0?"-":"+")+hn(Math.abs(e)/60,2):Is(e,t)}function Is(e,t=""){const r=e>0?"-":"+",i=Math.abs(e),s=hn(Math.trunc(i/60),2),u=hn(i%60,2);return r+s+t+u}const Nx=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},JS=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},gO=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return Nx(e,t);let u;switch(i){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",Nx(i,t)).replace("{{time}}",JS(s,t))},vO={p:JS,P:gO},bO=/^D+$/,yO=/^Y+$/,xO=["D","DD","YY","YYYY"];function wO(e){return bO.test(e)}function SO(e){return yO.test(e)}function jO(e,t,r){const i=_O(e,t,r);if(console.warn(i),xO.includes(e))throw new RangeError(i)}function _O(e,t,r){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const NO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EO=/^'([^]*?)'?$/,MO=/''/g,OO=/[a-zA-Z]/;function tn(e,t,r){var g,b,w,S,y,j,N,E;const i=kf(),s=(r==null?void 0:r.locale)??i.locale??dO,u=(r==null?void 0:r.firstWeekContainsDate)??((b=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??i.firstWeekContainsDate??((S=(w=i.locale)==null?void 0:w.options)==null?void 0:S.firstWeekContainsDate)??1,d=(r==null?void 0:r.weekStartsOn)??((j=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:j.weekStartsOn)??i.weekStartsOn??((E=(N=i.locale)==null?void 0:N.options)==null?void 0:E.weekStartsOn)??0,m=ma(e,r==null?void 0:r.in);if(!AM(m))throw new RangeError("Invalid time value");let h=t.match(CO).map(_=>{const M=_[0];if(M==="p"||M==="P"){const O=vO[M];return O(_,s.formatLong)}return _}).join("").match(NO).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const M=_[0];if(M==="'")return{isToken:!1,value:LO(_)};if(Sx[M])return{isToken:!0,value:_};if(M.match(OO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:_}});s.localize.preprocessor&&(h=s.localize.preprocessor(m,h));const p={firstWeekContainsDate:u,weekStartsOn:d,locale:s};return h.map(_=>{if(!_.isToken)return _.value;const M=_.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&SO(M)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&wO(M))&&jO(M,t,String(e));const O=Sx[M[0]];return O(m,M,s.localize,p)}).join("")}function LO(e){const t=e.match(EO);return t?t[1].replace(MO,"'"):e}const kO={lessThanXSeconds:{one:"mai puin de o secund",other:"mai puin de {{count}} secunde"},xSeconds:{one:"1 secund",other:"{{count}} secunde"},halfAMinute:"jumtate de minut",lessThanXMinutes:{one:"mai puin de un minut",other:"mai puin de {{count}} minute"},xMinutes:{one:"1 minut",other:"{{count}} minute"},aboutXHours:{one:"circa 1 or",other:"circa {{count}} ore"},xHours:{one:"1 or",other:"{{count}} ore"},xDays:{one:"1 zi",other:"{{count}} zile"},aboutXWeeks:{one:"circa o sptmn",other:"circa {{count}} sptmni"},xWeeks:{one:"1 sptmn",other:"{{count}} sptmni"},aboutXMonths:{one:"circa 1 lun",other:"circa {{count}} luni"},xMonths:{one:"1 lun",other:"{{count}} luni"},aboutXYears:{one:"circa 1 an",other:"circa {{count}} ani"},xYears:{one:"1 an",other:"{{count}} ani"},overXYears:{one:"peste 1 an",other:"peste {{count}} ani"},almostXYears:{one:"aproape 1 an",other:"aproape {{count}} ani"}},AO=(e,t,r)=>{let i;const s=kO[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"n "+i:i+" n urm":i},TO={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"dd.MM.yyyy"},DO={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},RO={full:"{{date}} 'la' {{time}}",long:"{{date}} 'la' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PO={date:Zo({formats:TO,defaultWidth:"full"}),time:Zo({formats:DO,defaultWidth:"full"}),dateTime:Zo({formats:RO,defaultWidth:"full"})},zO={lastWeek:"eeee 'trecut la' p",yesterday:"'ieri la' p",today:"'astzi la' p",tomorrow:"'mine la' p",nextWeek:"eeee 'viitoare la' p",other:"P"},$O=(e,t,r,i)=>zO[e],UO={narrow:["","D"],abbreviated:[".d.C.","D.C."],wide:["nainte de Cristos","Dup Cristos"]},IO={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["primul trimestru","al doilea trimestru","al treilea trimestru","al patrulea trimestru"]},VO={narrow:["I","F","M","A","M","I","I","A","S","O","N","D"],abbreviated:["ian","feb","mar","apr","mai","iun","iul","aug","sep","oct","noi","dec"],wide:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"]},BO={narrow:["d","l","m","m","j","v","s"],short:["du","lu","ma","mi","jo","vi","s"],abbreviated:["dum","lun","mar","mie","joi","vin","sm"],wide:["duminic","luni","mari","miercuri","joi","vineri","smbt"]},HO={narrow:{am:"a",pm:"p",midnight:"mn",noon:"ami",morning:"dim",afternoon:"da",evening:"s",night:"n"},abbreviated:{am:"AM",pm:"PM",midnight:"miezul nopii",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"},wide:{am:"a.m.",pm:"p.m.",midnight:"miezul nopii",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"}},FO={narrow:{am:"a",pm:"p",midnight:"mn",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"},abbreviated:{am:"AM",pm:"PM",midnight:"miezul nopii",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"},wide:{am:"a.m.",pm:"p.m.",midnight:"miezul nopii",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"}},YO=(e,t)=>String(e),qO={ordinalNumber:YO,era:Za({values:UO,defaultWidth:"wide"}),quarter:Za({values:IO,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Za({values:VO,defaultWidth:"wide"}),day:Za({values:BO,defaultWidth:"wide"}),dayPeriod:Za({values:HO,defaultWidth:"wide",formattingValues:FO,defaultFormattingWidth:"wide"})},GO=/^(\d+)?/i,WO=/\d+/i,ZO={narrow:/^(|D)/i,abbreviated:/^(\.?\s?d\.?\s?C\.?|\.?\s?e\.?\s?n\.?|D\.?\s?C\.?|e\.?\s?n\.?)/i,wide:/^(nainte de Cristos|naintea erei noastre|Dup Cristos|Era noastr)/i},XO={any:[/^C/i,/^DC/i],wide:[/^(nainte de Cristos|naintea erei noastre)/i,/^(Dup Cristos|Era noastr)/i]},KO={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^trimestrul [1234]/i},QO={any:[/1/i,/2/i,/3/i,/4/i]},JO={narrow:/^[ifmaasond]/i,abbreviated:/^(ian|feb|mar|apr|mai|iun|iul|aug|sep|oct|noi|dec)/i,wide:/^(ianuarie|februarie|martie|aprilie|mai|iunie|iulie|august|septembrie|octombrie|noiembrie|decembrie)/i},eL={narrow:[/^i/i,/^f/i,/^m/i,/^a/i,/^m/i,/^i/i,/^i/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ia/i,/^f/i,/^mar/i,/^ap/i,/^mai/i,/^iun/i,/^iul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tL={narrow:/^[dlmjvs]/i,short:/^(d|l|ma|mi|j|v|s)/i,abbreviated:/^(dum|lun|mar|mie|jo|vi|s)/i,wide:/^(duminica|luni|mari|miercuri|joi|vineri|smbt)/i},nL={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^mi/i,/^j/i,/^v/i,/^s/i]},rL={narrow:/^(a|p|mn|a|(dimineaa|dup-amiaza|seara|noaptea))/i,any:/^([ap]\.?\s?m\.?|miezul nopii|amiaza|(dimineaa|dup-amiaza|seara|noaptea))/i},aL={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/amiaza/i,morning:/dimineaa/i,afternoon:/dup-amiaza/i,evening:/seara/i,night:/noaptea/i}},iL={ordinalNumber:KS({matchPattern:GO,parsePattern:WO,valueCallback:e=>parseInt(e,10)}),era:Xa({matchPatterns:ZO,defaultMatchWidth:"wide",parsePatterns:XO,defaultParseWidth:"any"}),quarter:Xa({matchPatterns:KO,defaultMatchWidth:"wide",parsePatterns:QO,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Xa({matchPatterns:JO,defaultMatchWidth:"wide",parsePatterns:eL,defaultParseWidth:"any"}),day:Xa({matchPatterns:tL,defaultMatchWidth:"wide",parsePatterns:nL,defaultParseWidth:"any"}),dayPeriod:Xa({matchPatterns:rL,defaultMatchWidth:"any",parsePatterns:aL,defaultParseWidth:"any"})},ej={code:"ro",formatDistance:AO,formatLong:PO,formatRelative:$O,localize:qO,match:iL,options:{weekStartsOn:1,firstWeekContainsDate:1}};function Ws(e){"@babel/helpers - typeof";return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(e)}function sL(e,t){if(Ws(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(Ws(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tj(e){var t=sL(e,"string");return Ws(t)=="symbol"?t:t+""}function Tc(e,t,r){return(t=tj(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cx(Object(r),!0).forEach(function(i){Tc(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cx(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function oL(e){if(Array.isArray(e))return e}function lL(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,s,u,d,m=[],h=!0,p=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(i=u.call(r)).done)&&(m.push(i.value),m.length!==t);h=!0);}catch(g){p=!0,s=g}finally{try{if(!h&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(p)throw s}}return m}}function Mp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function nj(e,t){if(e){if(typeof e=="string")return Mp(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mp(e,t):void 0}}function cL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wi(e,t){return oL(e)||lL(e,t)||nj(e,t)||cL()}function uL(e,t){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;r[i]=e[i]}return r}function Ci(e,t){if(e==null)return{};var r,i,s=uL(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++)r=u[i],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var dL=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function fL(e){var t=e.defaultInputValue,r=t===void 0?"":t,i=e.defaultMenuIsOpen,s=i===void 0?!1:i,u=e.defaultValue,d=u===void 0?null:u,m=e.inputValue,h=e.menuIsOpen,p=e.onChange,g=e.onInputChange,b=e.onMenuClose,w=e.onMenuOpen,S=e.value,y=Ci(e,dL),j=f.useState(m!==void 0?m:r),N=wi(j,2),E=N[0],_=N[1],M=f.useState(h!==void 0?h:s),O=wi(M,2),C=O[0],L=O[1],B=f.useState(S!==void 0?S:d),Z=wi(B,2),R=Z[0],X=Z[1],te=f.useCallback(function(Y,z){typeof p=="function"&&p(Y,z),X(Y)},[p]),xe=f.useCallback(function(Y,z){var T;typeof g=="function"&&(T=g(Y,z)),_(T!==void 0?T:Y)},[g]),Pe=f.useCallback(function(){typeof w=="function"&&w(),L(!0)},[w]),ve=f.useCallback(function(){typeof b=="function"&&b(),L(!1)},[b]),se=m!==void 0?m:E,V=h!==void 0?h:C,F=S!==void 0?S:R;return jt(jt({},y),{},{inputValue:se,menuIsOpen:V,onChange:te,onInputChange:xe,onMenuClose:ve,onMenuOpen:Pe,value:F})}function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Et.apply(null,arguments)}function hL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ex(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,tj(i.key),i)}}function mL(e,t,r){return t&&Ex(e.prototype,t),r&&Ex(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Op(e,t){return Op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Op(e,t)}function pL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Op(e,t)}function Qd(e){return Qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qd(e)}function rj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rj=function(){return!!e})()}function gL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vL(e,t){if(t&&(Ws(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gL(e)}function bL(e){var t=rj();return function(){var r,i=Qd(e);if(t){var s=Qd(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return vL(this,r)}}function yL(e){if(Array.isArray(e))return Mp(e)}function xL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pg(e){return yL(e)||xL(e)||nj(e)||wL()}function SL(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function jL(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var _L=function(){function e(r){var i=this;this._insertTag=function(s){var u;i.tags.length===0?i.insertionPoint?u=i.insertionPoint.nextSibling:i.prepend?u=i.container.firstChild:u=i.before:u=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,u),i.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(jL(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var u=SL(s);try{u.insertRule(i,u.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){var s;return(s=i.parentNode)==null?void 0:s.removeChild(i)}),this.tags=[],this.ctr=0},e}(),_r="-ms-",Jd="-moz-",rn="-webkit-",aj="comm",gg="rule",vg="decl",NL="@import",ij="@keyframes",CL="@layer",EL=Math.abs,Af=String.fromCharCode,ML=Object.assign;function OL(e,t){return mr(e,0)^45?(((t<<2^mr(e,0))<<2^mr(e,1))<<2^mr(e,2))<<2^mr(e,3):0}function sj(e){return e.trim()}function LL(e,t){return(e=t.exec(e))?e[0]:e}function an(e,t,r){return e.replace(t,r)}function Lp(e,t){return e.indexOf(t)}function mr(e,t){return e.charCodeAt(t)|0}function Ic(e,t,r){return e.slice(t,r)}function Ga(e){return e.length}function bg(e){return e.length}function Sd(e,t){return t.push(e),e}function kL(e,t){return e.map(t).join("")}var Tf=1,Jo=1,oj=0,Vr=0,Fn=0,cl="";function Df(e,t,r,i,s,u,d){return{value:e,root:t,parent:r,type:i,props:s,children:u,line:Tf,column:Jo,length:d,return:""}}function jc(e,t){return ML(Df("",null,null,"",null,null,0),e,{length:-e.length},t)}function AL(){return Fn}function TL(){return Fn=Vr>0?mr(cl,--Vr):0,Jo--,Fn===10&&(Jo=1,Tf--),Fn}function Jr(){return Fn=Vr<oj?mr(cl,Vr++):0,Jo++,Fn===10&&(Jo=1,Tf++),Fn}function Ka(){return mr(cl,Vr)}function Id(){return Vr}function nu(e,t){return Ic(cl,e,t)}function Vc(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lj(e){return Tf=Jo=1,oj=Ga(cl=e),Vr=0,[]}function cj(e){return cl="",e}function Vd(e){return sj(nu(Vr-1,kp(e===91?e+2:e===40?e+1:e)))}function DL(e){for(;(Fn=Ka())&&Fn<33;)Jr();return Vc(e)>2||Vc(Fn)>3?"":" "}function RL(e,t){for(;--t&&Jr()&&!(Fn<48||Fn>102||Fn>57&&Fn<65||Fn>70&&Fn<97););return nu(e,Id()+(t<6&&Ka()==32&&Jr()==32))}function kp(e){for(;Jr();)switch(Fn){case e:return Vr;case 34:case 39:e!==34&&e!==39&&kp(Fn);break;case 40:e===41&&kp(e);break;case 92:Jr();break}return Vr}function PL(e,t){for(;Jr()&&e+Fn!==57;)if(e+Fn===84&&Ka()===47)break;return"/*"+nu(t,Vr-1)+"*"+Af(e===47?e:Jr())}function zL(e){for(;!Vc(Ka());)Jr();return nu(e,Vr)}function $L(e){return cj(Bd("",null,null,null,[""],e=lj(e),0,[0],e))}function Bd(e,t,r,i,s,u,d,m,h){for(var p=0,g=0,b=d,w=0,S=0,y=0,j=1,N=1,E=1,_=0,M="",O=s,C=u,L=i,B=M;N;)switch(y=_,_=Jr()){case 40:if(y!=108&&mr(B,b-1)==58){Lp(B+=an(Vd(_),"&","&\f"),"&\f")!=-1&&(E=-1);break}case 34:case 39:case 91:B+=Vd(_);break;case 9:case 10:case 13:case 32:B+=DL(y);break;case 92:B+=RL(Id()-1,7);continue;case 47:switch(Ka()){case 42:case 47:Sd(UL(PL(Jr(),Id()),t,r),h);break;default:B+="/"}break;case 123*j:m[p++]=Ga(B)*E;case 125*j:case 59:case 0:switch(_){case 0:case 125:N=0;case 59+g:E==-1&&(B=an(B,/\f/g,"")),S>0&&Ga(B)-b&&Sd(S>32?Ox(B+";",i,r,b-1):Ox(an(B," ","")+";",i,r,b-2),h);break;case 59:B+=";";default:if(Sd(L=Mx(B,t,r,p,g,s,m,M,O=[],C=[],b),u),_===123)if(g===0)Bd(B,t,L,L,O,u,b,m,C);else switch(w===99&&mr(B,3)===110?100:w){case 100:case 108:case 109:case 115:Bd(e,L,L,i&&Sd(Mx(e,L,L,0,0,s,m,M,s,O=[],b),C),s,C,b,m,i?O:C);break;default:Bd(B,L,L,L,[""],C,0,m,C)}}p=g=S=0,j=E=1,M=B="",b=d;break;case 58:b=1+Ga(B),S=y;default:if(j<1){if(_==123)--j;else if(_==125&&j++==0&&TL()==125)continue}switch(B+=Af(_),_*j){case 38:E=g>0?1:(B+="\f",-1);break;case 44:m[p++]=(Ga(B)-1)*E,E=1;break;case 64:Ka()===45&&(B+=Vd(Jr())),w=Ka(),g=b=Ga(M=B+=zL(Id())),_++;break;case 45:y===45&&Ga(B)==2&&(j=0)}}return u}function Mx(e,t,r,i,s,u,d,m,h,p,g){for(var b=s-1,w=s===0?u:[""],S=bg(w),y=0,j=0,N=0;y<i;++y)for(var E=0,_=Ic(e,b+1,b=EL(j=d[y])),M=e;E<S;++E)(M=sj(j>0?w[E]+" "+_:an(_,/&\f/g,w[E])))&&(h[N++]=M);return Df(e,t,r,s===0?gg:m,h,p,g)}function UL(e,t,r){return Df(e,t,r,aj,Af(AL()),Ic(e,2,-2),0)}function Ox(e,t,r,i){return Df(e,t,r,vg,Ic(e,0,i),Ic(e,i+1,-1),i)}function Xo(e,t){for(var r="",i=bg(e),s=0;s<i;s++)r+=t(e[s],s,e,t)||"";return r}function IL(e,t,r,i){switch(e.type){case CL:if(e.children.length)break;case NL:case vg:return e.return=e.return||e.value;case aj:return"";case ij:return e.return=e.value+"{"+Xo(e.children,i)+"}";case gg:e.value=e.props.join(",")}return Ga(r=Xo(e.children,i))?e.return=e.value+"{"+r+"}":""}function VL(e){var t=bg(e);return function(r,i,s,u){for(var d="",m=0;m<t;m++)d+=e[m](r,i,s,u)||"";return d}}function BL(e){return function(t){t.root||(t=t.return)&&e(t)}}function HL(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var FL=function(t,r,i){for(var s=0,u=0;s=u,u=Ka(),s===38&&u===12&&(r[i]=1),!Vc(u);)Jr();return nu(t,Vr)},YL=function(t,r){var i=-1,s=44;do switch(Vc(s)){case 0:s===38&&Ka()===12&&(r[i]=1),t[i]+=FL(Vr-1,r,i);break;case 2:t[i]+=Vd(s);break;case 4:if(s===44){t[++i]=Ka()===58?"&\f":"",r[i]=t[i].length;break}default:t[i]+=Af(s)}while(s=Jr());return t},qL=function(t,r){return cj(YL(lj(t),r))},Lx=new WeakMap,GL=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,i=t.parent,s=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Lx.get(i))&&!s){Lx.set(t,!0);for(var u=[],d=qL(r,u),m=i.props,h=0,p=0;h<d.length;h++)for(var g=0;g<m.length;g++,p++)t.props[p]=u[h]?d[h].replace(/&\f/g,m[g]):m[g]+" "+d[h]}}},WL=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function uj(e,t){switch(OL(e,t)){case 5103:return rn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return rn+e+Jd+e+_r+e+e;case 6828:case 4268:return rn+e+_r+e+e;case 6165:return rn+e+_r+"flex-"+e+e;case 5187:return rn+e+an(e,/(\w+).+(:[^]+)/,rn+"box-$1$2"+_r+"flex-$1$2")+e;case 5443:return rn+e+_r+"flex-item-"+an(e,/flex-|-self/,"")+e;case 4675:return rn+e+_r+"flex-line-pack"+an(e,/align-content|flex-|-self/,"")+e;case 5548:return rn+e+_r+an(e,"shrink","negative")+e;case 5292:return rn+e+_r+an(e,"basis","preferred-size")+e;case 6060:return rn+"box-"+an(e,"-grow","")+rn+e+_r+an(e,"grow","positive")+e;case 4554:return rn+an(e,/([^-])(transform)/g,"$1"+rn+"$2")+e;case 6187:return an(an(an(e,/(zoom-|grab)/,rn+"$1"),/(image-set)/,rn+"$1"),e,"")+e;case 5495:case 3959:return an(e,/(image-set\([^]*)/,rn+"$1$`$1");case 4968:return an(an(e,/(.+:)(flex-)?(.*)/,rn+"box-pack:$3"+_r+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rn+e+e;case 4095:case 3583:case 4068:case 2532:return an(e,/(.+)-inline(.+)/,rn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ga(e)-1-t>6)switch(mr(e,t+1)){case 109:if(mr(e,t+4)!==45)break;case 102:return an(e,/(.+:)(.+)-([^]+)/,"$1"+rn+"$2-$3$1"+Jd+(mr(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Lp(e,"stretch")?uj(an(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(mr(e,t+1)!==115)break;case 6444:switch(mr(e,Ga(e)-3-(~Lp(e,"!important")&&10))){case 107:return an(e,":",":"+rn)+e;case 101:return an(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+rn+(mr(e,14)===45?"inline-":"")+"box$3$1"+rn+"$2$3$1"+_r+"$2box$3")+e}break;case 5936:switch(mr(e,t+11)){case 114:return rn+e+_r+an(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return rn+e+_r+an(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return rn+e+_r+an(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return rn+e+_r+e+e}return e}var ZL=function(t,r,i,s){if(t.length>-1&&!t.return)switch(t.type){case vg:t.return=uj(t.value,t.length);break;case ij:return Xo([jc(t,{value:an(t.value,"@","@"+rn)})],s);case gg:if(t.length)return kL(t.props,function(u){switch(LL(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Xo([jc(t,{props:[an(u,/:(read-\w+)/,":"+Jd+"$1")]})],s);case"::placeholder":return Xo([jc(t,{props:[an(u,/:(plac\w+)/,":"+rn+"input-$1")]}),jc(t,{props:[an(u,/:(plac\w+)/,":"+Jd+"$1")]}),jc(t,{props:[an(u,/:(plac\w+)/,_r+"input-$1")]})],s)}return""})}},XL=[ZL],KL=function(t){var r=t.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(j){var N=j.getAttribute("data-emotion");N.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var s=t.stylisPlugins||XL,u={},d,m=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(j){for(var N=j.getAttribute("data-emotion").split(" "),E=1;E<N.length;E++)u[N[E]]=!0;m.push(j)});var h,p=[GL,WL];{var g,b=[IL,BL(function(j){g.insert(j)})],w=VL(p.concat(s,b)),S=function(N){return Xo($L(N),w)};h=function(N,E,_,M){g=_,S(N?N+"{"+E.styles+"}":E.styles),M&&(y.inserted[E.name]=!0)}}var y={key:r,sheet:new _L({key:r,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:h};return y.sheet.hydrate(m),y},Im={exports:{}},un={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx;function QL(){if(kx)return un;kx=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,u=e?Symbol.for("react.profiler"):60114,d=e?Symbol.for("react.provider"):60109,m=e?Symbol.for("react.context"):60110,h=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,g=e?Symbol.for("react.forward_ref"):60112,b=e?Symbol.for("react.suspense"):60113,w=e?Symbol.for("react.suspense_list"):60120,S=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,j=e?Symbol.for("react.block"):60121,N=e?Symbol.for("react.fundamental"):60117,E=e?Symbol.for("react.responder"):60118,_=e?Symbol.for("react.scope"):60119;function M(C){if(typeof C=="object"&&C!==null){var L=C.$$typeof;switch(L){case t:switch(C=C.type,C){case h:case p:case i:case u:case s:case b:return C;default:switch(C=C&&C.$$typeof,C){case m:case g:case y:case S:case d:return C;default:return L}}case r:return L}}}function O(C){return M(C)===p}return un.AsyncMode=h,un.ConcurrentMode=p,un.ContextConsumer=m,un.ContextProvider=d,un.Element=t,un.ForwardRef=g,un.Fragment=i,un.Lazy=y,un.Memo=S,un.Portal=r,un.Profiler=u,un.StrictMode=s,un.Suspense=b,un.isAsyncMode=function(C){return O(C)||M(C)===h},un.isConcurrentMode=O,un.isContextConsumer=function(C){return M(C)===m},un.isContextProvider=function(C){return M(C)===d},un.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===t},un.isForwardRef=function(C){return M(C)===g},un.isFragment=function(C){return M(C)===i},un.isLazy=function(C){return M(C)===y},un.isMemo=function(C){return M(C)===S},un.isPortal=function(C){return M(C)===r},un.isProfiler=function(C){return M(C)===u},un.isStrictMode=function(C){return M(C)===s},un.isSuspense=function(C){return M(C)===b},un.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===i||C===p||C===u||C===s||C===b||C===w||typeof C=="object"&&C!==null&&(C.$$typeof===y||C.$$typeof===S||C.$$typeof===d||C.$$typeof===m||C.$$typeof===g||C.$$typeof===N||C.$$typeof===E||C.$$typeof===_||C.$$typeof===j)},un.typeOf=M,un}var Ax;function JL(){return Ax||(Ax=1,Im.exports=QL()),Im.exports}var Vm,Tx;function ek(){if(Tx)return Vm;Tx=1;var e=JL(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[e.ForwardRef]=i,u[e.Memo]=s;function d(y){return e.isMemo(y)?s:u[y.$$typeof]||t}var m=Object.defineProperty,h=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,b=Object.getPrototypeOf,w=Object.prototype;function S(y,j,N){if(typeof j!="string"){if(w){var E=b(j);E&&E!==w&&S(y,E,N)}var _=h(j);p&&(_=_.concat(p(j)));for(var M=d(y),O=d(j),C=0;C<_.length;++C){var L=_[C];if(!r[L]&&!(N&&N[L])&&!(O&&O[L])&&!(M&&M[L])){var B=g(j,L);try{m(y,L,B)}catch{}}}}return y}return Vm=S,Vm}ek();var tk=!0;function nk(e,t,r){var i="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(i+=s+" ")}),i}var dj=function(t,r,i){var s=t.key+"-"+r.name;(i===!1||tk===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},rk=function(t,r,i){dj(t,r,i);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var u=r;do t.insert(r===u?"."+s:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function ak(e){for(var t=0,r,i=0,s=e.length;s>=4;++i,s-=4)r=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ik={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sk=/[A-Z]|^ms/g,ok=/_EMO_([^_]+?)_([^]*?)_EMO_/g,fj=function(t){return t.charCodeAt(1)===45},Dx=function(t){return t!=null&&typeof t!="boolean"},Bm=HL(function(e){return fj(e)?e:e.replace(sk,"-$&").toLowerCase()}),Rx=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(ok,function(i,s,u){return Wa={name:s,styles:u,next:Wa},s})}return ik[t]!==1&&!fj(t)&&typeof r=="number"&&r!==0?r+"px":r};function Bc(e,t,r){if(r==null)return"";var i=r;if(i.__emotion_styles!==void 0)return i;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return Wa={name:s.name,styles:s.styles,next:Wa},s.name;var u=r;if(u.styles!==void 0){var d=u.next;if(d!==void 0)for(;d!==void 0;)Wa={name:d.name,styles:d.styles,next:Wa},d=d.next;var m=u.styles+";";return m}return lk(e,t,r)}case"function":{if(e!==void 0){var h=Wa,p=r(e);return Wa=h,Bc(e,t,p)}break}}var g=r;return g}function lk(e,t,r){var i="";if(Array.isArray(r))for(var s=0;s<r.length;s++)i+=Bc(e,t,r[s])+";";else for(var u in r){var d=r[u];if(typeof d!="object"){var m=d;Dx(m)&&(i+=Bm(u)+":"+Rx(u,m)+";")}else if(Array.isArray(d)&&typeof d[0]=="string"&&t==null)for(var h=0;h<d.length;h++)Dx(d[h])&&(i+=Bm(u)+":"+Rx(u,d[h])+";");else{var p=Bc(e,t,d);switch(u){case"animation":case"animationName":{i+=Bm(u)+":"+p+";";break}default:i+=u+"{"+p+"}"}}}return i}var Px=/label:\s*([^\s;{]+)\s*(;|$)/g,Wa;function hj(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Wa=void 0;var u=e[0];if(u==null||u.raw===void 0)i=!1,s+=Bc(r,t,u);else{var d=u;s+=d[0]}for(var m=1;m<e.length;m++)if(s+=Bc(r,t,e[m]),i){var h=u;s+=h[m]}Px.lastIndex=0;for(var p="",g;(g=Px.exec(s))!==null;)p+="-"+g[1];var b=ak(s)+p;return{name:b,styles:s,next:Wa}}var ck=function(t){return t()},uk=Cy.useInsertionEffect?Cy.useInsertionEffect:!1,dk=uk||ck,mj=f.createContext(typeof HTMLElement<"u"?KL({key:"css"}):null);mj.Provider;var fk=function(t){return f.forwardRef(function(r,i){var s=f.useContext(mj);return t(r,s,i)})},hk=f.createContext({}),yg={}.hasOwnProperty,Ap="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",mk=function(t,r){var i={};for(var s in r)yg.call(r,s)&&(i[s]=r[s]);return i[Ap]=t,i},pk=function(t){var r=t.cache,i=t.serialized,s=t.isStringTag;return dj(r,i,s),dk(function(){return rk(r,i,s)}),null},gk=fk(function(e,t,r){var i=e.css;typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var s=e[Ap],u=[i],d="";typeof e.className=="string"?d=nk(t.registered,u,e.className):e.className!=null&&(d=e.className+" ");var m=hj(u,void 0,f.useContext(hk));d+=t.key+"-"+m.name;var h={};for(var p in e)yg.call(e,p)&&p!=="css"&&p!==Ap&&(h[p]=e[p]);return h.className=d,r&&(h.ref=r),f.createElement(f.Fragment,null,f.createElement(pk,{cache:t,serialized:m,isStringTag:typeof s=="string"}),f.createElement(s,h))}),vk=gk,St=function(t,r){var i=arguments;if(r==null||!yg.call(r,"css"))return f.createElement.apply(void 0,i);var s=i.length,u=new Array(s);u[0]=vk,u[1]=mk(t,r);for(var d=2;d<s;d++)u[d]=i[d];return f.createElement.apply(null,u)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(St||(St={}));function xg(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return hj(t)}function bk(){var e=xg.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function yk(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const xk=Math.min,wk=Math.max,ef=Math.round,jd=Math.floor,tf=e=>({x:e,y:e});function Sk(e){const{x:t,y:r,width:i,height:s}=e;return{width:i,height:s,top:r,left:t,right:t+i,bottom:r+s,x:t,y:r}}function Rf(){return typeof window<"u"}function pj(e){return vj(e)?(e.nodeName||"").toLowerCase():"#document"}function _i(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gj(e){var t;return(t=(vj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function vj(e){return Rf()?e instanceof Node||e instanceof _i(e).Node:!1}function jk(e){return Rf()?e instanceof Element||e instanceof _i(e).Element:!1}function wg(e){return Rf()?e instanceof HTMLElement||e instanceof _i(e).HTMLElement:!1}function zx(e){return!Rf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof _i(e).ShadowRoot}const _k=new Set(["inline","contents"]);function bj(e){const{overflow:t,overflowX:r,overflowY:i,display:s}=Sg(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!_k.has(s)}function Nk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Ck=new Set(["html","body","#document"]);function Ek(e){return Ck.has(pj(e))}function Sg(e){return _i(e).getComputedStyle(e)}function Mk(e){if(pj(e)==="html")return e;const t=e.assignedSlot||e.parentNode||zx(e)&&e.host||gj(e);return zx(t)?t.host:t}function yj(e){const t=Mk(e);return Ek(t)?e.ownerDocument?e.ownerDocument.body:e.body:wg(t)&&bj(t)?t:yj(t)}function nf(e,t,r){var i;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=yj(e),u=s===((i=e.ownerDocument)==null?void 0:i.body),d=_i(s);if(u){const m=Tp(d);return t.concat(d,d.visualViewport||[],bj(s)?s:[],m&&r?nf(m):[])}return t.concat(s,nf(s,[],r))}function Tp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ok(e){const t=Sg(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const s=wg(e),u=s?e.offsetWidth:r,d=s?e.offsetHeight:i,m=ef(r)!==u||ef(i)!==d;return m&&(r=u,i=d),{width:r,height:i,$:m}}function jg(e){return jk(e)?e:e.contextElement}function $x(e){const t=jg(e);if(!wg(t))return tf(1);const r=t.getBoundingClientRect(),{width:i,height:s,$:u}=Ok(t);let d=(u?ef(r.width):r.width)/i,m=(u?ef(r.height):r.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!m||!Number.isFinite(m))&&(m=1),{x:d,y:m}}const Lk=tf(0);function kk(e){const t=_i(e);return!Nk()||!t.visualViewport?Lk:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ak(e,t,r){return!1}function Ux(e,t,r,i){t===void 0&&(t=!1);const s=e.getBoundingClientRect(),u=jg(e);let d=tf(1);t&&(d=$x(e));const m=Ak()?kk(u):tf(0);let h=(s.left+m.x)/d.x,p=(s.top+m.y)/d.y,g=s.width/d.x,b=s.height/d.y;if(u){const w=_i(u),S=i;let y=w,j=Tp(y);for(;j&&i&&S!==y;){const N=$x(j),E=j.getBoundingClientRect(),_=Sg(j),M=E.left+(j.clientLeft+parseFloat(_.paddingLeft))*N.x,O=E.top+(j.clientTop+parseFloat(_.paddingTop))*N.y;h*=N.x,p*=N.y,g*=N.x,b*=N.y,h+=M,p+=O,y=_i(j),j=Tp(y)}}return Sk({width:g,height:b,x:h,y:p})}function xj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Tk(e,t){let r=null,i;const s=gj(e);function u(){var m;clearTimeout(i),(m=r)==null||m.disconnect(),r=null}function d(m,h){m===void 0&&(m=!1),h===void 0&&(h=1),u();const p=e.getBoundingClientRect(),{left:g,top:b,width:w,height:S}=p;if(m||t(),!w||!S)return;const y=jd(b),j=jd(s.clientWidth-(g+w)),N=jd(s.clientHeight-(b+S)),E=jd(g),M={rootMargin:-y+"px "+-j+"px "+-N+"px "+-E+"px",threshold:wk(0,xk(1,h))||1};let O=!0;function C(L){const B=L[0].intersectionRatio;if(B!==h){if(!O)return d();B?d(!1,B):i=setTimeout(()=>{d(!1,1e-7)},1e3)}B===1&&!xj(p,e.getBoundingClientRect())&&d(),O=!1}try{r=new IntersectionObserver(C,{...M,root:s.ownerDocument})}catch{r=new IntersectionObserver(C,M)}r.observe(e)}return d(!0),u}function Dk(e,t,r,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:u=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:h=!1}=i,p=jg(e),g=s||u?[...p?nf(p):[],...nf(t)]:[];g.forEach(E=>{s&&E.addEventListener("scroll",r,{passive:!0}),u&&E.addEventListener("resize",r)});const b=p&&m?Tk(p,r):null;let w=-1,S=null;d&&(S=new ResizeObserver(E=>{let[_]=E;_&&_.target===p&&S&&(S.unobserve(t),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var M;(M=S)==null||M.observe(t)})),r()}),p&&!h&&S.observe(p),S.observe(t));let y,j=h?Ux(e):null;h&&N();function N(){const E=Ux(e);j&&!xj(j,E)&&r(),j=E,y=requestAnimationFrame(N)}return r(),()=>{var E;g.forEach(_=>{s&&_.removeEventListener("scroll",r),u&&_.removeEventListener("resize",r)}),b==null||b(),(E=S)==null||E.disconnect(),S=null,h&&cancelAnimationFrame(y)}}var Dp=f.useLayoutEffect,Rk=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],rf=function(){};function Pk(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function zk(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];var u=[].concat(i);if(t&&e)for(var d in t)t.hasOwnProperty(d)&&t[d]&&u.push("".concat(Pk(e,d)));return u.filter(function(m){return m}).map(function(m){return String(m).trim()}).join(" ")}var Ix=function(t){return qk(t)?t.filter(Boolean):Ws(t)==="object"&&t!==null?[t]:[]},wj=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=Ci(t,Rk);return jt({},r)},Pn=function(t,r,i){var s=t.cx,u=t.getStyles,d=t.getClassNames,m=t.className;return{css:u(r,t),className:s(i??{},d(r,t),m)}};function Pf(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function $k(e){return Pf(e)?window.innerHeight:e.clientHeight}function Sj(e){return Pf(e)?window.pageYOffset:e.scrollTop}function af(e,t){if(Pf(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Uk(e){var t=getComputedStyle(e),r=t.position==="absolute",i=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var s=e;s=s.parentElement;)if(t=getComputedStyle(s),!(r&&t.position==="static")&&i.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}function Ik(e,t,r,i){return r*((e=e/i-1)*e*e+1)+t}function _d(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:rf,s=Sj(e),u=t-s,d=10,m=0;function h(){m+=d;var p=Ik(m,s,u,r);af(e,p),m<r?window.requestAnimationFrame(h):i(e)}h()}function Vx(e,t){var r=e.getBoundingClientRect(),i=t.getBoundingClientRect(),s=t.offsetHeight/3;i.bottom+s>r.bottom?af(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+s,e.scrollHeight)):i.top-s<r.top&&af(e,Math.max(t.offsetTop-s,0))}function Vk(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function Bx(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Bk(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var jj=!1,Hk={get passive(){return jj=!0}},Nd=typeof window<"u"?window:{};Nd.addEventListener&&Nd.removeEventListener&&(Nd.addEventListener("p",rf,Hk),Nd.removeEventListener("p",rf,!1));var Fk=jj;function Yk(e){return e!=null}function qk(e){return Array.isArray(e)}function Cd(e,t,r){return e?t:r}var Gk=function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var u=Object.entries(t).filter(function(d){var m=wi(d,1),h=m[0];return!i.includes(h)});return u.reduce(function(d,m){var h=wi(m,2),p=h[0],g=h[1];return d[p]=g,d},{})},Wk=["children","innerProps"],Zk=["children","innerProps"];function Xk(e){var t=e.maxHeight,r=e.menuEl,i=e.minHeight,s=e.placement,u=e.shouldScroll,d=e.isFixedPosition,m=e.controlHeight,h=Uk(r),p={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return p;var g=h.getBoundingClientRect(),b=g.height,w=r.getBoundingClientRect(),S=w.bottom,y=w.height,j=w.top,N=r.offsetParent.getBoundingClientRect(),E=N.top,_=d?window.innerHeight:$k(h),M=Sj(h),O=parseInt(getComputedStyle(r).marginBottom,10),C=parseInt(getComputedStyle(r).marginTop,10),L=E-C,B=_-j,Z=L+M,R=b-M-j,X=S-_+M+O,te=M+j-C,xe=160;switch(s){case"auto":case"bottom":if(B>=y)return{placement:"bottom",maxHeight:t};if(R>=y&&!d)return u&&_d(h,X,xe),{placement:"bottom",maxHeight:t};if(!d&&R>=i||d&&B>=i){u&&_d(h,X,xe);var Pe=d?B-O:R-O;return{placement:"bottom",maxHeight:Pe}}if(s==="auto"||d){var ve=t,se=d?L:Z;return se>=i&&(ve=Math.min(se-O-m,t)),{placement:"top",maxHeight:ve}}if(s==="bottom")return u&&af(h,X),{placement:"bottom",maxHeight:t};break;case"top":if(L>=y)return{placement:"top",maxHeight:t};if(Z>=y&&!d)return u&&_d(h,te,xe),{placement:"top",maxHeight:t};if(!d&&Z>=i||d&&L>=i){var V=t;return(!d&&Z>=i||d&&L>=i)&&(V=d?L-C:Z-C),u&&_d(h,te,xe),{placement:"top",maxHeight:V}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return p}function Kk(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var _j=function(t){return t==="auto"?"bottom":t},Qk=function(t,r){var i,s=t.placement,u=t.theme,d=u.borderRadius,m=u.spacing,h=u.colors;return jt((i={label:"menu"},Tc(i,Kk(s),"100%"),Tc(i,"position","absolute"),Tc(i,"width","100%"),Tc(i,"zIndex",1),i),r?{}:{backgroundColor:h.neutral0,borderRadius:d,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:m.menuGutter,marginTop:m.menuGutter})},Nj=f.createContext(null),Jk=function(t){var r=t.children,i=t.minMenuHeight,s=t.maxMenuHeight,u=t.menuPlacement,d=t.menuPosition,m=t.menuShouldScrollIntoView,h=t.theme,p=f.useContext(Nj)||{},g=p.setPortalPlacement,b=f.useRef(null),w=f.useState(s),S=wi(w,2),y=S[0],j=S[1],N=f.useState(null),E=wi(N,2),_=E[0],M=E[1],O=h.spacing.controlHeight;return Dp(function(){var C=b.current;if(C){var L=d==="fixed",B=m&&!L,Z=Xk({maxHeight:s,menuEl:C,minHeight:i,placement:u,shouldScroll:B,isFixedPosition:L,controlHeight:O});j(Z.maxHeight),M(Z.placement),g==null||g(Z.placement)}},[s,u,d,m,i,g,O]),r({ref:b,placerProps:jt(jt({},t),{},{placement:_||_j(u),maxHeight:y})})},eA=function(t){var r=t.children,i=t.innerRef,s=t.innerProps;return St("div",Et({},Pn(t,"menu",{menu:!0}),{ref:i},s),r)},tA=eA,nA=function(t,r){var i=t.maxHeight,s=t.theme.spacing.baseUnit;return jt({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:s,paddingTop:s})},rA=function(t){var r=t.children,i=t.innerProps,s=t.innerRef,u=t.isMulti;return St("div",Et({},Pn(t,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:s},i),r)},Cj=function(t,r){var i=t.theme,s=i.spacing.baseUnit,u=i.colors;return jt({textAlign:"center"},r?{}:{color:u.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},aA=Cj,iA=Cj,sA=function(t){var r=t.children,i=r===void 0?"No options":r,s=t.innerProps,u=Ci(t,Wk);return St("div",Et({},Pn(jt(jt({},u),{},{children:i,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),i)},oA=function(t){var r=t.children,i=r===void 0?"Loading...":r,s=t.innerProps,u=Ci(t,Zk);return St("div",Et({},Pn(jt(jt({},u),{},{children:i,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),i)},lA=function(t){var r=t.rect,i=t.offset,s=t.position;return{left:r.left,position:s,top:i,width:r.width,zIndex:1}},cA=function(t){var r=t.appendTo,i=t.children,s=t.controlElement,u=t.innerProps,d=t.menuPlacement,m=t.menuPosition,h=f.useRef(null),p=f.useRef(null),g=f.useState(_j(d)),b=wi(g,2),w=b[0],S=b[1],y=f.useMemo(function(){return{setPortalPlacement:S}},[]),j=f.useState(null),N=wi(j,2),E=N[0],_=N[1],M=f.useCallback(function(){if(s){var B=Vk(s),Z=m==="fixed"?0:window.pageYOffset,R=B[w]+Z;(R!==(E==null?void 0:E.offset)||B.left!==(E==null?void 0:E.rect.left)||B.width!==(E==null?void 0:E.rect.width))&&_({offset:R,rect:B})}},[s,m,w,E==null?void 0:E.offset,E==null?void 0:E.rect.left,E==null?void 0:E.rect.width]);Dp(function(){M()},[M]);var O=f.useCallback(function(){typeof p.current=="function"&&(p.current(),p.current=null),s&&h.current&&(p.current=Dk(s,h.current,M,{elementResize:"ResizeObserver"in window}))},[s,M]);Dp(function(){O()},[O]);var C=f.useCallback(function(B){h.current=B,O()},[O]);if(!r&&m!=="fixed"||!E)return null;var L=St("div",Et({ref:C},Pn(jt(jt({},t),{},{offset:E.offset,position:m,rect:E.rect}),"menuPortal",{"menu-portal":!0}),u),i);return St(Nj.Provider,{value:y},r?Xs.createPortal(L,r):L)},uA=function(t){var r=t.isDisabled,i=t.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},dA=function(t){var r=t.children,i=t.innerProps,s=t.isDisabled,u=t.isRtl;return St("div",Et({},Pn(t,"container",{"--is-disabled":s,"--is-rtl":u}),i),r)},fA=function(t,r){var i=t.theme.spacing,s=t.isMulti,u=t.hasValue,d=t.selectProps.controlShouldRenderValue;return jt({alignItems:"center",display:s&&u&&d?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},hA=function(t){var r=t.children,i=t.innerProps,s=t.isMulti,u=t.hasValue;return St("div",Et({},Pn(t,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":u}),i),r)},mA=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},pA=function(t){var r=t.children,i=t.innerProps;return St("div",Et({},Pn(t,"indicatorsContainer",{indicators:!0}),i),r)},Hx,gA=["size"],vA=["innerProps","isRtl","size"],bA={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Ej=function(t){var r=t.size,i=Ci(t,gA);return St("svg",Et({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:bA},i))},_g=function(t){return St(Ej,Et({size:20},t),St("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Mj=function(t){return St(Ej,Et({size:20},t),St("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Oj=function(t,r){var i=t.isFocused,s=t.theme,u=s.spacing.baseUnit,d=s.colors;return jt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:i?d.neutral60:d.neutral20,padding:u*2,":hover":{color:i?d.neutral80:d.neutral40}})},yA=Oj,xA=function(t){var r=t.children,i=t.innerProps;return St("div",Et({},Pn(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),r||St(Mj,null))},wA=Oj,SA=function(t){var r=t.children,i=t.innerProps;return St("div",Et({},Pn(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),r||St(_g,null))},jA=function(t,r){var i=t.isDisabled,s=t.theme,u=s.spacing.baseUnit,d=s.colors;return jt({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:i?d.neutral10:d.neutral20,marginBottom:u*2,marginTop:u*2})},_A=function(t){var r=t.innerProps;return St("span",Et({},r,Pn(t,"indicatorSeparator",{"indicator-separator":!0})))},NA=bk(Hx||(Hx=yk([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),CA=function(t,r){var i=t.isFocused,s=t.size,u=t.theme,d=u.colors,m=u.spacing.baseUnit;return jt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},r?{}:{color:i?d.neutral60:d.neutral20,padding:m*2})},Hm=function(t){var r=t.delay,i=t.offset;return St("span",{css:xg({animation:"".concat(NA," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},EA=function(t){var r=t.innerProps,i=t.isRtl,s=t.size,u=s===void 0?4:s,d=Ci(t,vA);return St("div",Et({},Pn(jt(jt({},d),{},{innerProps:r,isRtl:i,size:u}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),St(Hm,{delay:0,offset:i}),St(Hm,{delay:160,offset:!0}),St(Hm,{delay:320,offset:!i}))},MA=function(t,r){var i=t.isDisabled,s=t.isFocused,u=t.theme,d=u.colors,m=u.borderRadius,h=u.spacing;return jt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:h.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:i?d.neutral5:d.neutral0,borderColor:i?d.neutral10:s?d.primary:d.neutral20,borderRadius:m,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(d.primary):void 0,"&:hover":{borderColor:s?d.primary:d.neutral30}})},OA=function(t){var r=t.children,i=t.isDisabled,s=t.isFocused,u=t.innerRef,d=t.innerProps,m=t.menuIsOpen;return St("div",Et({ref:u},Pn(t,"control",{control:!0,"control--is-disabled":i,"control--is-focused":s,"control--menu-is-open":m}),d,{"aria-disabled":i||void 0}),r)},LA=OA,kA=["data"],AA=function(t,r){var i=t.theme.spacing;return r?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},TA=function(t){var r=t.children,i=t.cx,s=t.getStyles,u=t.getClassNames,d=t.Heading,m=t.headingProps,h=t.innerProps,p=t.label,g=t.theme,b=t.selectProps;return St("div",Et({},Pn(t,"group",{group:!0}),h),St(d,Et({},m,{selectProps:b,theme:g,getStyles:s,getClassNames:u,cx:i}),p),St("div",null,r))},DA=function(t,r){var i=t.theme,s=i.colors,u=i.spacing;return jt({label:"group",cursor:"default",display:"block"},r?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},RA=function(t){var r=wj(t);r.data;var i=Ci(r,kA);return St("div",Et({},Pn(t,"groupHeading",{"group-heading":!0}),i))},PA=TA,zA=["innerRef","isDisabled","isHidden","inputClassName"],$A=function(t,r){var i=t.isDisabled,s=t.value,u=t.theme,d=u.spacing,m=u.colors;return jt(jt({visibility:i?"hidden":"visible",transform:s?"translateZ(0)":""},UA),r?{}:{margin:d.baseUnit/2,paddingBottom:d.baseUnit/2,paddingTop:d.baseUnit/2,color:m.neutral80})},Lj={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},UA={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":jt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Lj)},IA=function(t){return jt({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},Lj)},VA=function(t){var r=t.cx,i=t.value,s=wj(t),u=s.innerRef,d=s.isDisabled,m=s.isHidden,h=s.inputClassName,p=Ci(s,zA);return St("div",Et({},Pn(t,"input",{"input-container":!0}),{"data-value":i||""}),St("input",Et({className:r({input:!0},h),ref:u,style:IA(m),disabled:d},p)))},BA=VA,HA=function(t,r){var i=t.theme,s=i.spacing,u=i.borderRadius,d=i.colors;return jt({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:d.neutral10,borderRadius:u/2,margin:s.baseUnit/2})},FA=function(t,r){var i=t.theme,s=i.borderRadius,u=i.colors,d=t.cropWithEllipsis;return jt({overflow:"hidden",textOverflow:d||d===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:s/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},YA=function(t,r){var i=t.theme,s=i.spacing,u=i.borderRadius,d=i.colors,m=t.isFocused;return jt({alignItems:"center",display:"flex"},r?{}:{borderRadius:u/2,backgroundColor:m?d.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:d.dangerLight,color:d.danger}})},kj=function(t){var r=t.children,i=t.innerProps;return St("div",i,r)},qA=kj,GA=kj;function WA(e){var t=e.children,r=e.innerProps;return St("div",Et({role:"button"},r),t||St(_g,{size:14}))}var ZA=function(t){var r=t.children,i=t.components,s=t.data,u=t.innerProps,d=t.isDisabled,m=t.removeProps,h=t.selectProps,p=i.Container,g=i.Label,b=i.Remove;return St(p,{data:s,innerProps:jt(jt({},Pn(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":d})),u),selectProps:h},St(g,{data:s,innerProps:jt({},Pn(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:h},r),St(b,{data:s,innerProps:jt(jt({},Pn(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},m),selectProps:h}))},XA=ZA,KA=function(t,r){var i=t.isDisabled,s=t.isFocused,u=t.isSelected,d=t.theme,m=d.spacing,h=d.colors;return jt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:u?h.primary:s?h.primary25:"transparent",color:i?h.neutral20:u?h.neutral0:"inherit",padding:"".concat(m.baseUnit*2,"px ").concat(m.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:u?h.primary:h.primary50}})},QA=function(t){var r=t.children,i=t.isDisabled,s=t.isFocused,u=t.isSelected,d=t.innerRef,m=t.innerProps;return St("div",Et({},Pn(t,"option",{option:!0,"option--is-disabled":i,"option--is-focused":s,"option--is-selected":u}),{ref:d,"aria-disabled":i},m),r)},JA=QA,eT=function(t,r){var i=t.theme,s=i.spacing,u=i.colors;return jt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:u.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},tT=function(t){var r=t.children,i=t.innerProps;return St("div",Et({},Pn(t,"placeholder",{placeholder:!0}),i),r)},nT=tT,rT=function(t,r){var i=t.isDisabled,s=t.theme,u=s.spacing,d=s.colors;return jt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:i?d.neutral40:d.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},aT=function(t){var r=t.children,i=t.isDisabled,s=t.innerProps;return St("div",Et({},Pn(t,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),s),r)},iT=aT,sT={ClearIndicator:SA,Control:LA,DropdownIndicator:xA,DownChevron:Mj,CrossIcon:_g,Group:PA,GroupHeading:RA,IndicatorsContainer:pA,IndicatorSeparator:_A,Input:BA,LoadingIndicator:EA,Menu:tA,MenuList:rA,MenuPortal:cA,LoadingMessage:oA,NoOptionsMessage:sA,MultiValue:XA,MultiValueContainer:qA,MultiValueLabel:GA,MultiValueRemove:WA,Option:JA,Placeholder:nT,SelectContainer:dA,SingleValue:iT,ValueContainer:hA},oT=function(t){return jt(jt({},sT),t.components)},Fx=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function lT(e,t){return!!(e===t||Fx(e)&&Fx(t))}function cT(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!lT(e[r],t[r]))return!1;return!0}function uT(e,t){t===void 0&&(t=cT);var r=null;function i(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var d=e.apply(this,s);return r={lastResult:d,lastArgs:s,lastThis:this},d}return i.clear=function(){r=null},i}var dT={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},fT=function(t){return St("span",Et({css:dT},t))},Yx=fT,hT={guidance:function(t){var r=t.isSearchable,i=t.isMulti,s=t.tabSelectsValue,u=t.context,d=t.isInitialFocus;switch(u){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return d?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,i=t.label,s=i===void 0?"":i,u=t.labels,d=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return d?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(t){var r=t.context,i=t.focused,s=t.options,u=t.label,d=u===void 0?"":u,m=t.selectValue,h=t.isDisabled,p=t.isSelected,g=t.isAppleDevice,b=function(j,N){return j&&j.length?"".concat(j.indexOf(N)+1," of ").concat(j.length):""};if(r==="value"&&m)return"value ".concat(d," focused, ").concat(b(m,i),".");if(r==="menu"&&g){var w=h?" disabled":"",S="".concat(p?" selected":"").concat(w);return"".concat(d).concat(S,", ").concat(b(s,i),".")}return""},onFilter:function(t){var r=t.inputValue,i=t.resultsMessage;return"".concat(i).concat(r?" for search term "+r:"",".")}},mT=function(t){var r=t.ariaSelection,i=t.focusedOption,s=t.focusedValue,u=t.focusableOptions,d=t.isFocused,m=t.selectValue,h=t.selectProps,p=t.id,g=t.isAppleDevice,b=h.ariaLiveMessages,w=h.getOptionLabel,S=h.inputValue,y=h.isMulti,j=h.isOptionDisabled,N=h.isSearchable,E=h.menuIsOpen,_=h.options,M=h.screenReaderStatus,O=h.tabSelectsValue,C=h.isLoading,L=h["aria-label"],B=h["aria-live"],Z=f.useMemo(function(){return jt(jt({},hT),b||{})},[b]),R=f.useMemo(function(){var se="";if(r&&Z.onChange){var V=r.option,F=r.options,Y=r.removedValue,z=r.removedValues,T=r.value,P=function(be){return Array.isArray(be)?null:be},A=Y||V||P(T),H=A?w(A):"",U=F||z||void 0,W=U?U.map(w):[],ue=jt({isDisabled:A&&j(A,m),label:H,labels:W},r);se=Z.onChange(ue)}return se},[r,Z,j,m,w]),X=f.useMemo(function(){var se="",V=i||s,F=!!(i&&m&&m.includes(i));if(V&&Z.onFocus){var Y={focused:V,label:w(V),isDisabled:j(V,m),isSelected:F,options:u,context:V===i?"menu":"value",selectValue:m,isAppleDevice:g};se=Z.onFocus(Y)}return se},[i,s,w,j,Z,u,m,g]),te=f.useMemo(function(){var se="";if(E&&_.length&&!C&&Z.onFilter){var V=M({count:u.length});se=Z.onFilter({inputValue:S,resultsMessage:V})}return se},[u,S,E,Z,_,M,C]),xe=(r==null?void 0:r.action)==="initial-input-focus",Pe=f.useMemo(function(){var se="";if(Z.guidance){var V=s?"value":E?"menu":"input";se=Z.guidance({"aria-label":L,context:V,isDisabled:i&&j(i,m),isMulti:y,isSearchable:N,tabSelectsValue:O,isInitialFocus:xe})}return se},[L,i,s,y,j,N,E,Z,m,O,xe]),ve=St(f.Fragment,null,St("span",{id:"aria-selection"},R),St("span",{id:"aria-focused"},X),St("span",{id:"aria-results"},te),St("span",{id:"aria-guidance"},Pe));return St(f.Fragment,null,St(Yx,{id:p},xe&&ve),St(Yx,{"aria-live":B,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},d&&!xe&&ve))},pT=mT,Rp=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],gT=new RegExp("["+Rp.map(function(e){return e.letters}).join("")+"]","g"),Aj={};for(var Fm=0;Fm<Rp.length;Fm++)for(var Ym=Rp[Fm],qm=0;qm<Ym.letters.length;qm++)Aj[Ym.letters[qm]]=Ym.base;var Tj=function(t){return t.replace(gT,function(r){return Aj[r]})},vT=uT(Tj),qx=function(t){return t.replace(/^\s+|\s+$/g,"")},bT=function(t){return"".concat(t.label," ").concat(t.value)},yT=function(t){return function(r,i){if(r.data.__isNew__)return!0;var s=jt({ignoreCase:!0,ignoreAccents:!0,stringify:bT,trim:!0,matchFrom:"any"},t),u=s.ignoreCase,d=s.ignoreAccents,m=s.stringify,h=s.trim,p=s.matchFrom,g=h?qx(i):i,b=h?qx(m(r)):m(r);return u&&(g=g.toLowerCase(),b=b.toLowerCase()),d&&(g=vT(g),b=Tj(b)),p==="start"?b.substr(0,g.length)===g:b.indexOf(g)>-1}},xT=["innerRef"];function wT(e){var t=e.innerRef,r=Ci(e,xT),i=Gk(r,"onExited","in","enter","exit","appear");return St("input",Et({ref:t},i,{css:xg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var ST=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function jT(e){var t=e.isEnabled,r=e.onBottomArrive,i=e.onBottomLeave,s=e.onTopArrive,u=e.onTopLeave,d=f.useRef(!1),m=f.useRef(!1),h=f.useRef(0),p=f.useRef(null),g=f.useCallback(function(N,E){if(p.current!==null){var _=p.current,M=_.scrollTop,O=_.scrollHeight,C=_.clientHeight,L=p.current,B=E>0,Z=O-C-M,R=!1;Z>E&&d.current&&(i&&i(N),d.current=!1),B&&m.current&&(u&&u(N),m.current=!1),B&&E>Z?(r&&!d.current&&r(N),L.scrollTop=O,R=!0,d.current=!0):!B&&-E>M&&(s&&!m.current&&s(N),L.scrollTop=0,R=!0,m.current=!0),R&&ST(N)}},[r,i,s,u]),b=f.useCallback(function(N){g(N,N.deltaY)},[g]),w=f.useCallback(function(N){h.current=N.changedTouches[0].clientY},[]),S=f.useCallback(function(N){var E=h.current-N.changedTouches[0].clientY;g(N,E)},[g]),y=f.useCallback(function(N){if(N){var E=Fk?{passive:!1}:!1;N.addEventListener("wheel",b,E),N.addEventListener("touchstart",w,E),N.addEventListener("touchmove",S,E)}},[S,w,b]),j=f.useCallback(function(N){N&&(N.removeEventListener("wheel",b,!1),N.removeEventListener("touchstart",w,!1),N.removeEventListener("touchmove",S,!1))},[S,w,b]);return f.useEffect(function(){if(t){var N=p.current;return y(N),function(){j(N)}}},[t,y,j]),function(N){p.current=N}}var Gx=["boxSizing","height","overflow","paddingRight","position"],Wx={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Zx(e){e.cancelable&&e.preventDefault()}function Xx(e){e.stopPropagation()}function Kx(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function Qx(){return"ontouchstart"in window||navigator.maxTouchPoints}var Jx=!!(typeof window<"u"&&window.document&&window.document.createElement),_c=0,Ho={capture:!1,passive:!1};function _T(e){var t=e.isEnabled,r=e.accountForScrollbars,i=r===void 0?!0:r,s=f.useRef({}),u=f.useRef(null),d=f.useCallback(function(h){if(Jx){var p=document.body,g=p&&p.style;if(i&&Gx.forEach(function(y){var j=g&&g[y];s.current[y]=j}),i&&_c<1){var b=parseInt(s.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,S=window.innerWidth-w+b||0;Object.keys(Wx).forEach(function(y){var j=Wx[y];g&&(g[y]=j)}),g&&(g.paddingRight="".concat(S,"px"))}p&&Qx()&&(p.addEventListener("touchmove",Zx,Ho),h&&(h.addEventListener("touchstart",Kx,Ho),h.addEventListener("touchmove",Xx,Ho))),_c+=1}},[i]),m=f.useCallback(function(h){if(Jx){var p=document.body,g=p&&p.style;_c=Math.max(_c-1,0),i&&_c<1&&Gx.forEach(function(b){var w=s.current[b];g&&(g[b]=w)}),p&&Qx()&&(p.removeEventListener("touchmove",Zx,Ho),h&&(h.removeEventListener("touchstart",Kx,Ho),h.removeEventListener("touchmove",Xx,Ho)))}},[i]);return f.useEffect(function(){if(t){var h=u.current;return d(h),function(){m(h)}}},[t,d,m]),function(h){u.current=h}}var NT=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},CT={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ET(e){var t=e.children,r=e.lockEnabled,i=e.captureEnabled,s=i===void 0?!0:i,u=e.onBottomArrive,d=e.onBottomLeave,m=e.onTopArrive,h=e.onTopLeave,p=jT({isEnabled:s,onBottomArrive:u,onBottomLeave:d,onTopArrive:m,onTopLeave:h}),g=_T({isEnabled:r}),b=function(S){p(S),g(S)};return St(f.Fragment,null,r&&St("div",{onClick:NT,css:CT}),t(b))}var MT={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},OT=function(t){var r=t.name,i=t.onFocus;return St("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:MT,value:"",onChange:function(){}})},LT=OT;function Ng(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function kT(){return Ng(/^iPhone/i)}function Dj(){return Ng(/^Mac/i)}function AT(){return Ng(/^iPad/i)||Dj()&&navigator.maxTouchPoints>1}function TT(){return kT()||AT()}function DT(){return Dj()||TT()}var RT=function(t){return t.label},PT=function(t){return t.label},zT=function(t){return t.value},$T=function(t){return!!t.isDisabled},UT={clearIndicator:wA,container:uA,control:MA,dropdownIndicator:yA,group:AA,groupHeading:DA,indicatorsContainer:mA,indicatorSeparator:jA,input:$A,loadingIndicator:CA,loadingMessage:iA,menu:Qk,menuList:nA,menuPortal:lA,multiValue:HA,multiValueLabel:FA,multiValueRemove:YA,noOptionsMessage:aA,option:KA,placeholder:eT,singleValue:rT,valueContainer:fA},IT={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},VT=4,Rj=4,BT=38,HT=Rj*2,FT={baseUnit:Rj,controlHeight:BT,menuGutter:HT},Gm={borderRadius:VT,colors:IT,spacing:FT},YT={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Bx(),captureMenuScroll:!Bx(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:yT(),formatGroupLabel:RT,getOptionLabel:PT,getOptionValue:zT,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:$T,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Bk(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function e0(e,t,r,i){var s=$j(e,t,r),u=Uj(e,t,r),d=zj(e,t),m=sf(e,t);return{type:"option",data:t,isDisabled:s,isSelected:u,label:d,value:m,index:i}}function Hd(e,t){return e.options.map(function(r,i){if("options"in r){var s=r.options.map(function(d,m){return e0(e,d,t,m)}).filter(function(d){return n0(e,d)});return s.length>0?{type:"group",data:r,options:s,index:i}:void 0}var u=e0(e,r,t,i);return n0(e,u)?u:void 0}).filter(Yk)}function Pj(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,pg(r.options.map(function(i){return i.data}))):t.push(r.data),t},[])}function t0(e,t){return e.reduce(function(r,i){return i.type==="group"?r.push.apply(r,pg(i.options.map(function(s){return{data:s.data,id:"".concat(t,"-").concat(i.index,"-").concat(s.index)}}))):r.push({data:i.data,id:"".concat(t,"-").concat(i.index)}),r},[])}function qT(e,t){return Pj(Hd(e,t))}function n0(e,t){var r=e.inputValue,i=r===void 0?"":r,s=t.data,u=t.isSelected,d=t.label,m=t.value;return(!Vj(e)||!u)&&Ij(e,{label:d,value:m,data:s},i)}function GT(e,t){var r=e.focusedValue,i=e.selectValue,s=i.indexOf(r);if(s>-1){var u=t.indexOf(r);if(u>-1)return r;if(s<t.length)return t[s]}return null}function WT(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var Wm=function(t,r){var i,s=(i=t.find(function(u){return u.data===r}))===null||i===void 0?void 0:i.id;return s||null},zj=function(t,r){return t.getOptionLabel(r)},sf=function(t,r){return t.getOptionValue(r)};function $j(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function Uj(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var i=sf(e,t);return r.some(function(s){return sf(e,s)===i})}function Ij(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var Vj=function(t){var r=t.hideSelectedOptions,i=t.isMulti;return r===void 0?i:r},ZT=1,Bj=function(e){pL(r,e);var t=bL(r);function r(i){var s;if(hL(this,r),s=t.call(this,i),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.isAppleDevice=DT(),s.controlRef=null,s.getControlRef=function(h){s.controlRef=h},s.focusedOptionRef=null,s.getFocusedOptionRef=function(h){s.focusedOptionRef=h},s.menuListRef=null,s.getMenuListRef=function(h){s.menuListRef=h},s.inputRef=null,s.getInputRef=function(h){s.inputRef=h},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(h,p){var g=s.props,b=g.onChange,w=g.name;p.name=w,s.ariaOnChange(h,p),b(h,p)},s.setValue=function(h,p,g){var b=s.props,w=b.closeMenuOnSelect,S=b.isMulti,y=b.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:y}),w&&(s.setState({inputIsHiddenAfterUpdate:!S}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(h,{action:p,option:g})},s.selectOption=function(h){var p=s.props,g=p.blurInputOnSelect,b=p.isMulti,w=p.name,S=s.state.selectValue,y=b&&s.isOptionSelected(h,S),j=s.isOptionDisabled(h,S);if(y){var N=s.getOptionValue(h);s.setValue(S.filter(function(E){return s.getOptionValue(E)!==N}),"deselect-option",h)}else if(!j)b?s.setValue([].concat(pg(S),[h]),"select-option",h):s.setValue(h,"select-option");else{s.ariaOnChange(h,{action:"select-option",option:h,name:w});return}g&&s.blurInput()},s.removeValue=function(h){var p=s.props.isMulti,g=s.state.selectValue,b=s.getOptionValue(h),w=g.filter(function(y){return s.getOptionValue(y)!==b}),S=Cd(p,w,w[0]||null);s.onChange(S,{action:"remove-value",removedValue:h}),s.focusInput()},s.clearValue=function(){var h=s.state.selectValue;s.onChange(Cd(s.props.isMulti,[],null),{action:"clear",removedValues:h})},s.popValue=function(){var h=s.props.isMulti,p=s.state.selectValue,g=p[p.length-1],b=p.slice(0,p.length-1),w=Cd(h,b,b[0]||null);g&&s.onChange(w,{action:"pop-value",removedValue:g})},s.getFocusedOptionId=function(h){return Wm(s.state.focusableOptionsWithIds,h)},s.getFocusableOptionsWithIds=function(){return t0(Hd(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return zk.apply(void 0,[s.props.classNamePrefix].concat(p))},s.getOptionLabel=function(h){return zj(s.props,h)},s.getOptionValue=function(h){return sf(s.props,h)},s.getStyles=function(h,p){var g=s.props.unstyled,b=UT[h](p,g);b.boxSizing="border-box";var w=s.props.styles[h];return w?w(b,p):b},s.getClassNames=function(h,p){var g,b;return(g=(b=s.props.classNames)[h])===null||g===void 0?void 0:g.call(b,p)},s.getElementId=function(h){return"".concat(s.state.instancePrefix,"-").concat(h)},s.getComponents=function(){return oT(s.props)},s.buildCategorizedOptions=function(){return Hd(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return Pj(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(h,p){s.setState({ariaSelection:jt({value:h},p)})},s.onMenuMouseDown=function(h){h.button===0&&(h.stopPropagation(),h.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(h){s.blockOptionHover=!1},s.onControlMouseDown=function(h){if(!h.defaultPrevented){var p=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&s.onMenuClose():p&&s.openMenu("first"):(p&&(s.openAfterFocus=!0),s.focusInput()),h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&h.preventDefault()}},s.onDropdownIndicatorMouseDown=function(h){if(!(h&&h.type==="mousedown"&&h.button!==0)&&!s.props.isDisabled){var p=s.props,g=p.isMulti,b=p.menuIsOpen;s.focusInput(),b?(s.setState({inputIsHiddenAfterUpdate:!g}),s.onMenuClose()):s.openMenu("first"),h.preventDefault()}},s.onClearIndicatorMouseDown=function(h){h&&h.type==="mousedown"&&h.button!==0||(s.clearValue(),h.preventDefault(),s.openAfterFocus=!1,h.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(h){typeof s.props.closeMenuOnScroll=="boolean"?h.target instanceof HTMLElement&&Pf(h.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(h)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(h){var p=h.touches,g=p&&p.item(0);g&&(s.initialTouchX=g.clientX,s.initialTouchY=g.clientY,s.userIsDragging=!1)},s.onTouchMove=function(h){var p=h.touches,g=p&&p.item(0);if(g){var b=Math.abs(g.clientX-s.initialTouchX),w=Math.abs(g.clientY-s.initialTouchY),S=5;s.userIsDragging=b>S||w>S}},s.onTouchEnd=function(h){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(h.target)&&s.menuListRef&&!s.menuListRef.contains(h.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(h){s.userIsDragging||s.onControlMouseDown(h)},s.onClearIndicatorTouchEnd=function(h){s.userIsDragging||s.onClearIndicatorMouseDown(h)},s.onDropdownIndicatorTouchEnd=function(h){s.userIsDragging||s.onDropdownIndicatorMouseDown(h)},s.handleInputChange=function(h){var p=s.props.inputValue,g=h.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(g,{action:"input-change",prevInputValue:p}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(h){s.props.onFocus&&s.props.onFocus(h),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(h){var p=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(h),s.onInputChange("",{action:"input-blur",prevInputValue:p}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(h){if(!(s.blockOptionHover||s.state.focusedOption===h)){var p=s.getFocusableOptions(),g=p.indexOf(h);s.setState({focusedOption:h,focusedOptionId:g>-1?s.getFocusedOptionId(h):null})}},s.shouldHideSelectedOptions=function(){return Vj(s.props)},s.onValueInputFocus=function(h){h.preventDefault(),h.stopPropagation(),s.focus()},s.onKeyDown=function(h){var p=s.props,g=p.isMulti,b=p.backspaceRemovesValue,w=p.escapeClearsValue,S=p.inputValue,y=p.isClearable,j=p.isDisabled,N=p.menuIsOpen,E=p.onKeyDown,_=p.tabSelectsValue,M=p.openMenuOnFocus,O=s.state,C=O.focusedOption,L=O.focusedValue,B=O.selectValue;if(!j&&!(typeof E=="function"&&(E(h),h.defaultPrevented))){switch(s.blockOptionHover=!0,h.key){case"ArrowLeft":if(!g||S)return;s.focusValue("previous");break;case"ArrowRight":if(!g||S)return;s.focusValue("next");break;case"Delete":case"Backspace":if(S)return;if(L)s.removeValue(L);else{if(!b)return;g?s.popValue():y&&s.clearValue()}break;case"Tab":if(s.isComposing||h.shiftKey||!N||!_||!C||M&&s.isOptionSelected(C,B))return;s.selectOption(C);break;case"Enter":if(h.keyCode===229)break;if(N){if(!C||s.isComposing)return;s.selectOption(C);break}return;case"Escape":N?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:S}),s.onMenuClose()):y&&w&&s.clearValue();break;case" ":if(S)return;if(!N){s.openMenu("first");break}if(!C)return;s.selectOption(C);break;case"ArrowUp":N?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":N?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!N)return;s.focusOption("pageup");break;case"PageDown":if(!N)return;s.focusOption("pagedown");break;case"Home":if(!N)return;s.focusOption("first");break;case"End":if(!N)return;s.focusOption("last");break;default:return}h.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++ZT),s.state.selectValue=Ix(i.value),i.menuIsOpen&&s.state.selectValue.length){var u=s.getFocusableOptionsWithIds(),d=s.buildFocusableOptions(),m=d.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=u,s.state.focusedOption=d[m],s.state.focusedOptionId=Wm(u,d[m])}return s}return mL(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Vx(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(s){var u=this.props,d=u.isDisabled,m=u.menuIsOpen,h=this.state.isFocused;(h&&!d&&s.isDisabled||h&&m&&!s.menuIsOpen)&&this.focusInput(),h&&d&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!h&&!d&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Vx(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,u){this.props.onInputChange(s,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var u=this,d=this.state,m=d.selectValue,h=d.isFocused,p=this.buildFocusableOptions(),g=s==="first"?0:p.length-1;if(!this.props.isMulti){var b=p.indexOf(m[0]);b>-1&&(g=b)}this.scrollToFocusedOptionOnUpdate=!(h&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:p[g],focusedOptionId:this.getFocusedOptionId(p[g])},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(s){var u=this.state,d=u.selectValue,m=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var h=d.indexOf(m);m||(h=-1);var p=d.length-1,g=-1;if(d.length){switch(s){case"previous":h===0?g=0:h===-1?g=p:g=h-1;break;case"next":h>-1&&h<p&&(g=h+1);break}this.setState({inputIsHidden:g!==-1,focusedValue:d[g]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,d=this.state.focusedOption,m=this.getFocusableOptions();if(m.length){var h=0,p=m.indexOf(d);d||(p=-1),s==="up"?h=p>0?p-1:m.length-1:s==="down"?h=(p+1)%m.length:s==="pageup"?(h=p-u,h<0&&(h=0)):s==="pagedown"?(h=p+u,h>m.length-1&&(h=m.length-1)):s==="last"&&(h=m.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:m[h],focusedValue:null,focusedOptionId:this.getFocusedOptionId(m[h])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Gm):jt(jt({},Gm),this.props.theme):Gm}},{key:"getCommonProps",value:function(){var s=this.clearValue,u=this.cx,d=this.getStyles,m=this.getClassNames,h=this.getValue,p=this.selectOption,g=this.setValue,b=this.props,w=b.isMulti,S=b.isRtl,y=b.options,j=this.hasValue();return{clearValue:s,cx:u,getStyles:d,getClassNames:m,getValue:h,hasValue:j,isMulti:w,isRtl:S,options:y,selectOption:p,selectProps:b,setValue:g,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,u=s.isClearable,d=s.isMulti;return u===void 0?d:u}},{key:"isOptionDisabled",value:function(s,u){return $j(this.props,s,u)}},{key:"isOptionSelected",value:function(s,u){return Uj(this.props,s,u)}},{key:"filterOption",value:function(s,u){return Ij(this.props,s,u)}},{key:"formatOptionLabel",value:function(s,u){if(typeof this.props.formatOptionLabel=="function"){var d=this.props.inputValue,m=this.state.selectValue;return this.props.formatOptionLabel(s,{context:u,inputValue:d,selectValue:m})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,u=s.isDisabled,d=s.isSearchable,m=s.inputId,h=s.inputValue,p=s.tabIndex,g=s.form,b=s.menuIsOpen,w=s.required,S=this.getComponents(),y=S.Input,j=this.state,N=j.inputIsHidden,E=j.ariaSelection,_=this.commonProps,M=m||this.getElementId("input"),O=jt(jt(jt({"aria-autocomplete":"list","aria-expanded":b,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":w,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},b&&{"aria-controls":this.getElementId("listbox")}),!d&&{"aria-readonly":!0}),this.hasValue()?(E==null?void 0:E.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return d?f.createElement(y,Et({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:M,innerRef:this.getInputRef,isDisabled:u,isHidden:N,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:p,form:g,type:"text",value:h},O)):f.createElement(wT,Et({id:M,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:rf,onFocus:this.onInputFocus,disabled:u,tabIndex:p,inputMode:"none",form:g,value:""},O))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,u=this.getComponents(),d=u.MultiValue,m=u.MultiValueContainer,h=u.MultiValueLabel,p=u.MultiValueRemove,g=u.SingleValue,b=u.Placeholder,w=this.commonProps,S=this.props,y=S.controlShouldRenderValue,j=S.isDisabled,N=S.isMulti,E=S.inputValue,_=S.placeholder,M=this.state,O=M.selectValue,C=M.focusedValue,L=M.isFocused;if(!this.hasValue()||!y)return E?null:f.createElement(b,Et({},w,{key:"placeholder",isDisabled:j,isFocused:L,innerProps:{id:this.getElementId("placeholder")}}),_);if(N)return O.map(function(Z,R){var X=Z===C,te="".concat(s.getOptionLabel(Z),"-").concat(s.getOptionValue(Z));return f.createElement(d,Et({},w,{components:{Container:m,Label:h,Remove:p},isFocused:X,isDisabled:j,key:te,index:R,removeProps:{onClick:function(){return s.removeValue(Z)},onTouchEnd:function(){return s.removeValue(Z)},onMouseDown:function(Pe){Pe.preventDefault()}},data:Z}),s.formatOptionLabel(Z,"value"))});if(E)return null;var B=O[0];return f.createElement(g,Et({},w,{data:B,isDisabled:j}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),u=s.ClearIndicator,d=this.commonProps,m=this.props,h=m.isDisabled,p=m.isLoading,g=this.state.isFocused;if(!this.isClearable()||!u||h||!this.hasValue()||p)return null;var b={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(u,Et({},d,{innerProps:b,isFocused:g}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),u=s.LoadingIndicator,d=this.commonProps,m=this.props,h=m.isDisabled,p=m.isLoading,g=this.state.isFocused;if(!u||!p)return null;var b={"aria-hidden":"true"};return f.createElement(u,Et({},d,{innerProps:b,isDisabled:h,isFocused:g}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),u=s.DropdownIndicator,d=s.IndicatorSeparator;if(!u||!d)return null;var m=this.commonProps,h=this.props.isDisabled,p=this.state.isFocused;return f.createElement(d,Et({},m,{isDisabled:h,isFocused:p}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),u=s.DropdownIndicator;if(!u)return null;var d=this.commonProps,m=this.props.isDisabled,h=this.state.isFocused,p={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(u,Et({},d,{innerProps:p,isDisabled:m,isFocused:h}))}},{key:"renderMenu",value:function(){var s=this,u=this.getComponents(),d=u.Group,m=u.GroupHeading,h=u.Menu,p=u.MenuList,g=u.MenuPortal,b=u.LoadingMessage,w=u.NoOptionsMessage,S=u.Option,y=this.commonProps,j=this.state.focusedOption,N=this.props,E=N.captureMenuScroll,_=N.inputValue,M=N.isLoading,O=N.loadingMessage,C=N.minMenuHeight,L=N.maxMenuHeight,B=N.menuIsOpen,Z=N.menuPlacement,R=N.menuPosition,X=N.menuPortalTarget,te=N.menuShouldBlockScroll,xe=N.menuShouldScrollIntoView,Pe=N.noOptionsMessage,ve=N.onMenuScrollToTop,se=N.onMenuScrollToBottom;if(!B)return null;var V=function(H,U){var W=H.type,ue=H.data,Ee=H.isDisabled,be=H.isSelected,Be=H.label,Te=H.value,Ge=j===ue,ge=Ee?void 0:function(){return s.onOptionHover(ue)},Ke=Ee?void 0:function(){return s.selectOption(ue)},le="".concat(s.getElementId("option"),"-").concat(U),ce={id:le,onClick:Ke,onMouseMove:ge,onMouseOver:ge,tabIndex:-1,role:"option","aria-selected":s.isAppleDevice?void 0:be};return f.createElement(S,Et({},y,{innerProps:ce,data:ue,isDisabled:Ee,isSelected:be,key:le,label:Be,type:W,value:Te,isFocused:Ge,innerRef:Ge?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(H.data,"menu"))},F;if(this.hasOptions())F=this.getCategorizedOptions().map(function(A){if(A.type==="group"){var H=A.data,U=A.options,W=A.index,ue="".concat(s.getElementId("group"),"-").concat(W),Ee="".concat(ue,"-heading");return f.createElement(d,Et({},y,{key:ue,data:H,options:U,Heading:m,headingProps:{id:Ee,data:A.data},label:s.formatGroupLabel(A.data)}),A.options.map(function(be){return V(be,"".concat(W,"-").concat(be.index))}))}else if(A.type==="option")return V(A,"".concat(A.index))});else if(M){var Y=O({inputValue:_});if(Y===null)return null;F=f.createElement(b,y,Y)}else{var z=Pe({inputValue:_});if(z===null)return null;F=f.createElement(w,y,z)}var T={minMenuHeight:C,maxMenuHeight:L,menuPlacement:Z,menuPosition:R,menuShouldScrollIntoView:xe},P=f.createElement(Jk,Et({},y,T),function(A){var H=A.ref,U=A.placerProps,W=U.placement,ue=U.maxHeight;return f.createElement(h,Et({},y,T,{innerRef:H,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:M,placement:W}),f.createElement(ET,{captureEnabled:E,onTopArrive:ve,onBottomArrive:se,lockEnabled:te},function(Ee){return f.createElement(p,Et({},y,{innerRef:function(Be){s.getMenuListRef(Be),Ee(Be)},innerProps:{role:"listbox","aria-multiselectable":y.isMulti,id:s.getElementId("listbox")},isLoading:M,maxHeight:ue,focusedOption:j}),F)}))});return X||R==="fixed"?f.createElement(g,Et({},y,{appendTo:X,controlElement:this.controlRef,menuPlacement:Z,menuPosition:R}),P):P}},{key:"renderFormField",value:function(){var s=this,u=this.props,d=u.delimiter,m=u.isDisabled,h=u.isMulti,p=u.name,g=u.required,b=this.state.selectValue;if(g&&!this.hasValue()&&!m)return f.createElement(LT,{name:p,onFocus:this.onValueInputFocus});if(!(!p||m))if(h)if(d){var w=b.map(function(j){return s.getOptionValue(j)}).join(d);return f.createElement("input",{name:p,type:"hidden",value:w})}else{var S=b.length>0?b.map(function(j,N){return f.createElement("input",{key:"i-".concat(N),name:p,type:"hidden",value:s.getOptionValue(j)})}):f.createElement("input",{name:p,type:"hidden",value:""});return f.createElement("div",null,S)}else{var y=b[0]?this.getOptionValue(b[0]):"";return f.createElement("input",{name:p,type:"hidden",value:y})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,u=this.state,d=u.ariaSelection,m=u.focusedOption,h=u.focusedValue,p=u.isFocused,g=u.selectValue,b=this.getFocusableOptions();return f.createElement(pT,Et({},s,{id:this.getElementId("live-region"),ariaSelection:d,focusedOption:m,focusedValue:h,isFocused:p,selectValue:g,focusableOptions:b,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),u=s.Control,d=s.IndicatorsContainer,m=s.SelectContainer,h=s.ValueContainer,p=this.props,g=p.className,b=p.id,w=p.isDisabled,S=p.menuIsOpen,y=this.state.isFocused,j=this.commonProps=this.getCommonProps();return f.createElement(m,Et({},j,{className:g,innerProps:{id:b,onKeyDown:this.onKeyDown},isDisabled:w,isFocused:y}),this.renderLiveRegion(),f.createElement(u,Et({},j,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:w,isFocused:y,menuIsOpen:S}),f.createElement(h,Et({},j,{isDisabled:w}),this.renderPlaceholderOrValue(),this.renderInput()),f.createElement(d,Et({},j,{isDisabled:w}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,u){var d=u.prevProps,m=u.clearFocusValueOnUpdate,h=u.inputIsHiddenAfterUpdate,p=u.ariaSelection,g=u.isFocused,b=u.prevWasFocused,w=u.instancePrefix,S=s.options,y=s.value,j=s.menuIsOpen,N=s.inputValue,E=s.isMulti,_=Ix(y),M={};if(d&&(y!==d.value||S!==d.options||j!==d.menuIsOpen||N!==d.inputValue)){var O=j?qT(s,_):[],C=j?t0(Hd(s,_),"".concat(w,"-option")):[],L=m?GT(u,_):null,B=WT(u,O),Z=Wm(C,B);M={selectValue:_,focusedOption:B,focusedOptionId:Z,focusableOptionsWithIds:C,focusedValue:L,clearFocusValueOnUpdate:!1}}var R=h!=null&&s!==d?{inputIsHidden:h,inputIsHiddenAfterUpdate:void 0}:{},X=p,te=g&&b;return g&&!te&&(X={value:Cd(E,_,_[0]||null),options:_,action:"initial-input-focus"},te=!b),(p==null?void 0:p.action)==="initial-input-focus"&&(X=null),jt(jt(jt({},M),R),{},{prevProps:s,ariaSelection:X,prevWasFocused:te})}}]),r}(f.Component);Bj.defaultProps=YT;var XT=f.forwardRef(function(e,t){var r=fL(e);return f.createElement(Bj,Et({ref:t},r))}),Fd=XT;const r0={success:"bg-green-100 text-green-800 border-green-300",error:"bg-red-100 text-red-800 border-red-300",info:"bg-blue-100 text-blue-800 border-blue-300"},KT=e=>{const[t,r]=f.useState(e.message||""),[i,s]=f.useState(e.type||"info"),[u,d]=f.useState(!!e.message);return f.useEffect(()=>{e.message&&(r(e.message),s(e.type||"info"),d(!0),setTimeout(()=>d(!1),6e3))},[e.message,e.type]),f.useEffect(()=>{const m=h=>{r(h.detail.message),s(h.detail.type||"info"),d(!0),setTimeout(()=>d(!1),6e3)};return window.addEventListener("toast",m),()=>window.removeEventListener("toast",m)},[]),u?o.jsx("div",{className:`fixed top-4 right-4 z-50 border px-4 py-2 rounded shadow ${r0[i]||r0.info}`,style:{minWidth:"220px",maxWidth:"420px"},children:t}):null};function Fs({show:e,title:t,message:r,onConfirm:i,onCancel:s,confirmText:u,cancelText:d,extraButtons:m=[],children:h}){return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-auto max-w-[90%]",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:t}),r&&o.jsx("div",{className:"mb-4 text-sm",children:r}),h&&o.jsx("div",{className:"mb-4",children:h}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[m.map((p,g)=>o.jsx("button",{onClick:p.onClick,className:`${p.className||"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600"}`,children:p.text},g)),o.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",onClick:s,children:d||"Anuleaz"}),o.jsx("button",{className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",onClick:i,children:u||"terge"})]})]})}):null}function QT({x:e,y:t,passenger:r,seat:i,onDelete:s,onMove:u,onEdit:d,onMoveToOtherTrip:m,onPayCash:h,onPayCard:p,selectedDate:g,selectedHour:b,originalRouteId:w,onClose:S,tripId:y,showToast:j}){const N=()=>{r.person_id&&(window.open(`${window.location.origin}/raport/${r.person_id}`,"_blank","noopener,noreferrer"),S())};vf();const E=f.useRef(null),[_,M]=f.useState({top:t,left:e}),[O,C]=f.useState(!1),[L,B]=f.useState(!1),[Z,R]=f.useState("Are multe neprezentari"),[X,te]=f.useState(new Set),[xe,Pe]=f.useState(!0);f.useEffect(()=>{Pe(!0),fetch(`/api/no-shows/${y}`).then(K=>K.json()).then(K=>te(new Set(K))).catch(console.error).finally(()=>Pe(!1))},[y]);const ve=!xe&&X.has(r.reservation_id),[se,V]=f.useState(new Set);f.useEffect(()=>{fetch("/api/blacklist").then(K=>K.json()).then(K=>{const Ae=new Set(K.filter(Se=>Se.source==="blacklist"||Se.blacklist_id!==null).map(Se=>Se.person_id));V(Ae)}).catch(console.error)},[]);const F=se.has(r.person_id||r.id),[Y,z]=f.useState(null),[T,P]=f.useState(!1),[A,H]=f.useState(null),U=!!Y&&Y.status==="paid";f.useEffect(()=>{const K=r==null?void 0:r.reservation_id;if(!K){z(null),H(null);return}let Ae=!1;return(async()=>{try{P(!0),H(null);const De=await fetch(`/api/reservations/${K}/payments/status`,{credentials:"include"}),Ze=await De.json().catch(()=>({}));if(!De.ok){console.error("[PassengerPopup] /payments/status error:",Ze),Ae||(z(null),H((Ze==null?void 0:Ze.error)||"Eroare la citirea plii"));return}Ae||z((Ze==null?void 0:Ze.payment)||null)}catch(De){console.error("[PassengerPopup] /payments/status exception:",De),Ae||(z(null),H(De.message||"Eroare la citirea plii"))}finally{Ae||P(!1)}})(),()=>{Ae=!0}},[r==null?void 0:r.reservation_id]);const[W,ue]=f.useState(!1),[Ee,be]=f.useState(null),[Be,Te]=f.useState(null),[Ge,ge]=f.useState([]);f.useEffect(()=>{const K=r==null?void 0:r.reservation_id;if(!K){Te(null),ge([]),be(null);return}let Ae=!1;return(async()=>{try{ue(!0),be(null);const De=await fetch(`/api/reservations/${K}/details`,{credentials:"include"}),Ze=await De.json().catch(()=>({}));if(!De.ok){Ae||(Te(null),ge([]),be((Ze==null?void 0:Ze.error)||"Eroare la citirea detaliilor"));return}Ae||(Te((Ze==null?void 0:Ze.pricing)||null),ge(Array.isArray(Ze==null?void 0:Ze.discounts)?Ze.discounts:[]))}catch(De){Ae||(Te(null),ge([]),be(De.message||"Eroare la citirea detaliilor"))}finally{Ae||ue(!1)}})(),()=>{Ae=!0}},[r==null?void 0:r.reservation_id]);const Ke=!!Y&&Y.receipt_status==="error_needs_retry"&&((Y.payment_method||"").toLowerCase()==="card"&&(Y.status==="pos_ok_waiting_receipt"||Y.status==="paid")||(Y.payment_method||"").toLowerCase()==="cash");f.useLayoutEffect(()=>{if(E.current){const K=E.current.getBoundingClientRect(),Ae=window.innerWidth,Se=window.innerHeight;let De=e,Ze=t;e+K.width>Ae-8&&(De=Ae-K.width-8),De<8&&(De=8),t+K.height>Se-8&&(Ze=t-K.height,Ze<8&&(Ze=Se-K.height-8)),Ze<8&&(Ze=8),M({top:Ze,left:De})}},[e,t,r]);const le=()=>{if(!m)return console.error("");m({passenger:r,reservation_id:r.reservation_id,fromSeat:i,boardAt:r.board_at,exitAt:r.exit_at,originalTime:b,originalRouteId:w,originalDate:g.toISOString().split("T")[0]}),S()},ce=async()=>{if(!(!Y||!(r!=null&&r.reservation_id)))try{const K=r.reservation_id,Ae=Y.payment_id,Se=await fetch(`/api/reservations/${K}/payments/${Ae}/retry-receipt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})}),De=await Se.json().catch(()=>({}));if(!Se.ok||!(De!=null&&De.ok)){const Ze=(De==null?void 0:De.error)||(De==null?void 0:De.message)||`Eroare la iniierea reemiterii bonului (HTTP ${Se.status})`;j(Ze,"error",8e3);return}z(Ze=>Ze&&{...Ze,receipt_status:"none",error_message:null}),j("Retry bon fiscal trimis ctre agent","info",0)}catch(K){console.error("[PassengerPopup] handleRetryReceipt error:",K),j(K.message||"Eroare la reemiterea bonului.","error",8e3)}};return o.jsxs("div",{ref:E,className:"popup-container fixed bg-white shadow-xl border border-gray-300 rounded-lg z-50 text-sm",style:{top:_.top,left:_.left,minWidth:"220px",maxWidth:"260px"},onClick:K=>K.stopPropagation(),children:[o.jsxs("button",{onClick:N,className:"w-full text-left px-4 pt-3 pb-2 hover:bg-gray-50",children:[o.jsxs("div",{className:"text-gray-800 font-semibold flex items-center gap-2",children:[" ",r.name||"Pasager"]}),o.jsxs("div",{className:"text-gray-700 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[" ",o.jsx("span",{children:r.phone})]}),o.jsxs("div",{className:"flex items-center gap-2 italic text-gray-600",children:[" ",o.jsxs("span",{children:[r.board_at,"  ",r.exit_at]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-700 mt-1",children:[""," ",o.jsx("span",{children:W?"...":(Be==null?void 0:Be.price_value)!=null?`${Number(Be.price_value).toFixed(2)} lei`:""})]}),Array.isArray(Ge)&&Ge.length>0&&o.jsxs("div",{className:"flex items-start gap-2 text-gray-600 mt-1",children:["",o.jsx("div",{className:"leading-4",children:Ge.map(K=>{const Ae=K.discount_label||K.promo_label||K.promo_code||K.discount_code||"Reducere",Se=Number(K.discount_amount||0);return o.jsxs("div",{children:[Ae," ",Se>0?`(-${Se.toFixed(2)} lei)`:""]},K.reservation_discount_id)})})]}),Ee&&o.jsx("div",{className:"text-xs text-red-500 mt-1",children:Ee}),r.observations&&o.jsxs("div",{className:"flex items-start gap-2 text-gray-500 mt-1",children:[" ",o.jsx("span",{className:"whitespace-pre-line",children:r.observations})]})]})]}),o.jsxs("div",{className:"border-t divide-y",children:[o.jsxs("button",{onClick:d,className:"flex items-center gap-2 w-full text-left px-3 py-2 hover:bg-gray-100",children:[" ",o.jsx("span",{children:"Editare"})]}),o.jsx("button",{onClick:u,className:"block w-full text-left px-4 py-2 hover:bg-gray-100",children:" Mut"}),o.jsx("button",{className:"block w-full text-left px-4 py-2 hover:bg-gray-100",onClick:le,children:" Mut pe alt curs"}),h&&o.jsx("button",{onClick:()=>{U||h()},disabled:U,title:U?"Rezervarea este deja achitat.":"",className:"block w-full text-left px-4 py-2 "+(U?"text-gray-400 bg-gray-50 cursor-not-allowed":"hover:bg-gray-100 text-emerald-700"),children:" Achit cash"}),p&&o.jsx("button",{onClick:()=>{U||p()},disabled:U,title:U?"Rezervarea este deja achitat.":"",className:"block w-full text-left px-4 py-2 "+(U?"text-gray-400 bg-gray-50 cursor-not-allowed":"hover:bg-gray-100 text-emerald-700"),children:" Achit cu cardul"}),Ke&&o.jsx("button",{onClick:ce,className:"block w-full text-left px-4 py-2 hover:bg-gray-100 text-amber-700",children:" Re-emite bon fiscal"}),o.jsx("button",{onClick:s,className:"block w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600",children:" terge"}),o.jsxs("button",{onClick:()=>!ve&&C(!0),disabled:ve||xe,className:`flex items-center gap-2 w-full text-left px-3 py-2 hover:bg-gray-100 ${ve?"opacity-50 cursor-not-allowed":"text-orange-600"}`,children:[" ",o.jsx("span",{children:ve?"nregistrat deja!":"nregistreaz neprezentare"})]}),o.jsxs("button",{onClick:()=>!F&&B(!0),disabled:F,className:`flex items-center gap-2 w-full text-left px-3 py-2 hover:bg-gray-100 ${F?"opacity-50 cursor-not-allowed":"text-orange-600"}`,children:[" ",o.jsx("span",{children:F?"Deja n blacklist":"Adaug n blacklist"})]})]}),o.jsx("button",{className:"text-xs text-gray-400 hover:text-gray-600 hover:underline w-full text-center py-2 border-t",onClick:S,children:" nchide"}),o.jsx(Fs,{show:O,title:"Confirmare neprezentare",message:"Eti sigur c vrei s marchezi ca neprezentat?",cancelText:"Renun",confirmText:"Confirm",onCancel:()=>C(!1),onConfirm:async()=>{try{const Ae=await(await fetch("/api/no-shows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reservation_id:r.reservation_id,trip_id:y})})).json();if(Ae.error)throw new Error(Ae.error);j("Neprezentare nregistrat cu succes","success",3e3)}catch(K){j(K.message||"Eroare la nregistrare neprezentare","error",6e3)}finally{C(!1),S()}}}),o.jsxs(Fs,{show:L,title:"Confirmare blacklist",cancelText:"Renun",confirmText:"Adaug",onCancel:()=>B(!1),onConfirm:async()=>{try{const K={person_id:r.person_id||r.id,reason:Z},Ae=await fetch("/api/blacklist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)}),Se=await Ae.json();Se.already?j("Persoana era deja n blacklist","info",3e3):Ae.ok?j("Adugat n blacklist cu succes","success",3e3):j(Se.error||"Eroare la adugare n blacklist","error",6e3)}catch(K){j(K.message||"Eroare la adugare n blacklist","error",6e3)}finally{B(!1),S()}},children:[o.jsx("div",{className:"text-sm mb-2",children:"Eti sigur c vrei s adaugi n blacklist?"}),o.jsx("textarea",{className:"w-full border p-2 rounded text-sm",rows:3,value:Z,onChange:K=>R(K.target.value)})]})]})}function a0({x:e,y:t,seat:r,onSelect:i,onClose:s}){return o.jsxs("div",{className:"popup-container fixed bg-white shadow-xl border border-gray-300 rounded-lg z-50",style:{top:t,left:e,minWidth:"220px",maxWidth:"260px"},onClick:u=>u.stopPropagation(),children:[o.jsx("div",{className:"px-4 py-3 text-gray-800 font-semibold flex items-center gap-2",children:" Selecteaz un pasager:"}),o.jsx("div",{className:"p-2 space-y-2 text-sm text-gray-700",children:r.passengers.map((u,d)=>o.jsxs("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-blue-50 transition flex flex-col gap-1",onClick:()=>i(u),children:[o.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[" ",u.name]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[" ",u.phone]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs italic text-gray-600",children:[" ",u.board_at,"  ",u.exit_at]}),u.observations&&o.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-500",children:[" ",o.jsx("span",{className:"whitespace-pre-line",children:u.observations})]})]},d))}),o.jsx("button",{className:"text-xs text-gray-400 hover:text-gray-600 hover:underline w-full text-center py-2 border-t",onClick:s,children:" nchide"})]})}function JT({routes:e,selectedRoute:t,onSelectRoute:r}){const[i,s]=f.useState(null);f.useEffect(()=>{let d=!0;return(async()=>{try{const h=await(await fetch("/api/user/route-order",{credentials:"include"})).json().catch(()=>[]);if(!d)return;const p={};(Array.isArray(h)?h:[]).forEach(g=>{p[g.route_id]=g.position_idx}),s(p)}catch{s(null)}})(),()=>{d=!1}},[]);const u=f.useMemo(()=>{const d=Array.isArray(e)?[...e]:[];return i&&Object.keys(i).length?(d.sort((m,h)=>{const p=i[m.id]??1/0,g=i[h.id]??1/0;return p!==g?p-g:m.name.localeCompare(h.name)}),d):d.sort((m,h)=>m.name.localeCompare(h.name))},[e,i]);return o.jsxs("div",{className:"space-y-2 w-full",children:[o.jsx("h2",{className:"font-bold text-lg mb-0",children:"Rute"}),o.jsxs("div",{className:"flex flex-nowrap gap-2 w-full overflow-x-auto py-1",children:[u.map(d=>{const m=(t==null?void 0:t.id)===d.id;return o.jsx("button",{className:`px-3 py-1 rounded border ${m?"bg-blue-500 text-white":"bg-white"}`,onClick:()=>r==null?void 0:r(d),children:d.name},d.id)}),u.length===0&&o.jsx("span",{className:"text-sm text-gray-500",children:"Nicio rut disponibil"})]})]})}const Ed=e=>e==="retur"?"retur":"tur";function eD({selectedRoute:e,selectedSchedule:t,onSelectSchedule:r}){const{tur:i,retur:s}=f.useMemo(()=>{const d=Array.isArray(e==null?void 0:e.schedules)?e.schedules:[],m=d.filter(p=>Ed(p.direction)==="tur"),h=d.filter(p=>Ed(p.direction)==="retur");return{tur:m,retur:h}},[e]),u=(d,m)=>{if(!m.length)return null;const h=new Set,p=[];for(const g of m){const b=Ed(g==null?void 0:g.direction),w=(g==null?void 0:g.departure)||"",S=(g==null?void 0:g.operatorId)??"x",y=(g==null?void 0:g.scheduleId)??(g==null?void 0:g.id)??"noid",j=`${S}|${b}|${w}|${y}`;w&&!h.has(j)&&(h.add(j),p.push(g))}return o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-sm font-semibold mb-1",children:d}),o.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(g=>{const{scheduleId:b,id:w,operatorId:S,direction:y,departure:j,themeColor:N,disabledRun:E,disabledOnline:_,tripDisabled:M}=g,O=b??w??`${S??"x"}-${Ed(y)}-${j}`,C=(t==null?void 0:t.scheduleId)??(t==null?void 0:t.id)??null,L=C!=null&&C===(b??w),B=!!(Number(M)||Number(E)||Number(_));return o.jsx("button",{onClick:()=>!B&&(r==null?void 0:r(g)),disabled:B,"aria-pressed":L,className:`
                  px-2 py-0 rounded-lg border-1 focus:outline-none
                  ${L?"ring-2 ring-offset-2 ring-opacity-50":"hover:ring-1 hover:ring-offset-1"}
                  ${B?"line-through text-gray-400 cursor-not-allowed":""}
                `,style:{backgroundColor:(N||"#2563eb")+"20",borderColor:N||"#2563eb"},children:j},String(O))})})]})};return!i.length&&!s.length?o.jsx("div",{className:"text-gray-500",children:"Nicio or disponibil pentru aceast rut."}):o.jsxs("div",{className:"mt-2 space-y-2",children:[u("Tur",i),u("Retur",s)]})}function tD({availableVehicles:e=[],vehicleInfo:t,setVehicleInfo:r,showPopup:i,setShowPopup:s,setSelectedSeats:u,setSeats:d,setSelectedRoute:m,tripId:h,setToastMessage:p,setToastType:g}){const b=async w=>{try{const S=await fetch("/api/trips/"+h+"/vehicle",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({vehicle_id:w.id})}),y=await S.json();if(S.ok)p("Vehicul atribuit cu succes!"),g("success"),setTimeout(()=>p(""),3e3),s(!1),u([]),d([]),m(j=>({...j,vehicle_id:w.id})),r(w);else{let j=y.message||"Eroare la schimbarea vehiculului!";y.unmatched&&y.unmatched.length>0&&(j+=`
Locuri fr corespondent: `+y.unmatched.map(N=>N.label).join(", ")),typeof window<"u"&&window.dispatchEvent&&window.dispatchEvent(new CustomEvent("toast",{detail:{message:j,type:"error"}}))}}catch(S){typeof window<"u"&&window.dispatchEvent&&window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Eroare de reea la atribuire vehicul.",type:"error"}})),console.error(S)}};return o.jsx(o.Fragment,{children:i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 max-w-md w-full",children:[o.jsx("h2",{className:"text-lg font-bold mb-4",children:"Alege un vehicul"}),o.jsx("ul",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.map(w=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>b(w),className:"w-full text-left px-4 py-2 rounded border hover:bg-gray-100",children:[w.name," (",w.plate_number||"fr numr",")"]})},w.id))}),o.jsx("button",{onClick:()=>s(!1),className:"mt-4 px-4 py-2 bg-gray-300 rounded",children:"Anuleaz"})]})})})}const Hj=f.forwardRef(function({seats:t,stops:r,selectedSeats:i,setSelectedSeats:s,moveSourceSeat:u,setMoveSourceSeat:d,popupPassenger:m,setPopupPassenger:h,popupSeat:p,setPopupSeat:g,popupPosition:b,setPopupPosition:w,handleMovePassenger:S,handleSeatClick:y,toggleSeat:j,isSeatFullyOccupiedViaSegments:N,checkSegmentOverlap:E,selectedRoute:_,setToastMessage:M,setToastType:O,driverName:C="",intentHolds:L={},isWideView:B=!1,wideSeatSize:Z={width:260,height:150},showObservations:R=!1,seatTextSize:X=11,seatTextColor:te="#ffffff"},xe){if(!Array.isArray(r)||r.length===0)return console.log("[SeatMap] NU exist stops pe selectedRoute, opresc render-ul SeatMap"),o.jsx("div",{className:"text-red-500 font-bold p-4",children:"Nu exist rute sau staii!"});const Pe=B?(Z==null?void 0:Z.width)||260:105,ve=B?(Z==null?void 0:Z.height)||150:100,se=t.length>0?Math.max(...t.map(P=>P.seat_col||1)):1,V=t.length>0?Math.max(...t.map(P=>P.row||1)):1,F=Number(X)||11,Y={fontSize:`${F+1}px`,color:te},z={fontSize:`${F}px`,color:te},T={fontSize:`${Math.max(F-1,8)}px`,color:te};return o.jsx("div",{ref:xe,className:"relative mx-auto",style:{display:"grid",gridTemplateColumns:`repeat(${se}, ${Pe}px)`,gridTemplateRows:`repeat(${V+1}, ${ve}px)`,gap:"5px",background:"#f3f4f6",padding:16,borderRadius:16,width:"fit-content",margin:"0 auto",minWidth:0,boxSizing:"border-box"},children:t.map(P=>{var ce;const A=String(P.label||"").toLowerCase(),H=i.find(K=>K.id===P.id),U=A.includes("ofer")||A.includes("sofer")||P.seat_type==="driver",W=A.includes("ghid")||P.seat_type==="guide",ue=U||W,Ee=P.status,be=L==null?void 0:L[P.id],Be=(be==null?void 0:be.isMine)===!1,Te=(be==null?void 0:be.isMine)===!0;U&&C||P.label;let Ge;ue?Ge="bg-gray-600 cursor-not-allowed":Ee==="full"?Ge="bg-red-600 cursor-not-allowed":Be?Ge="bg-orange-500 cursor-not-allowed":Ee==="partial"?Ge="bg-yellow-500 hover:bg-yellow-600":H||Te?Ge="bg-blue-500 hover:bg-blue-600":Ge="bg-green-500 hover:bg-green-600";const ge=(P.passengers||[]).filter(K=>!K.status||K.status==="active"),Ke=K=>(K==null?void 0:K.payment_status)==="paid"?(K==null?void 0:K.payment_method)==="cash"?"":(K==null?void 0:K.payment_method)==="card"&&(K==null?void 0:K.booking_channel)==="online"?"":((K==null?void 0:K.payment_method)==="card",""):"",le=K=>{if(typeof K!="number"||Number.isNaN(K))return null;const Ae=Math.round(K*100)/100;return`${Number.isInteger(Ae)?Ae.toFixed(0):Ae.toFixed(2)} lei`};return o.jsxs("div",{"data-seat-id":P.id,onClick:K=>{var Ae,Se;if(!U){if(Be){M("Locul e n curs de rezervare de alt agent"),O("error"),setTimeout(()=>M(""),3e3);return}if(u&&P.id!==u.id){const De=(Ae=u.passengers)==null?void 0:Ae[0];if(!De)return;((Se=P.passengers)==null?void 0:Se.some(Ve=>E(Ve,De.board_at,De.exit_at,r)))?(M(`Segmentul se suprapune cu rezervrile existente pe locul ${P.label}`),O("error"),setTimeout(()=>M(""),3e3)):S(u,P),d(null)}else ge.length>0?y(K,P):j(P)}},className:`relative text-white text-xs md:text-sm text-left rounded cursor-pointer flex flex-col justify-start pl-3 pr-2 pt-2 pb-2 transition-all duration-150 hover:shadow-xl hover:scale-[1.02] overflow-hidden ${Ge}

${H?"animate-pulse ring-2 ring-white [animation-duration:2s]":""}




  ${(u==null?void 0:u.id)===P.id?"ring-4 ring-yellow-400":""}
`,style:{gridRowStart:P.row+1,gridColumnStart:P.seat_col,width:`${Pe}px`,height:`${ve}px`},children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{fontSize:"64px",fontWeight:800,color:"rgba(255,255,255,0.18)",lineHeight:1,zIndex:0},children:P.label}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex justify-between items-start font-semibold text-[13px] leading-tight mb-1",children:[o.jsx("span",{className:"flex items-center gap-1",children:ge.length>0&&o.jsx("span",{className:"text-base leading-none",children:Ke(ge[0])})}),ge.length>0&&o.jsx("span",{className:"text-right truncate max-w-[85%]",style:Y,children:((ce=ge[0])==null?void 0:ce.name)||"(fr nume)"})]}),U&&o.jsx(o.Fragment,{children:C&&o.jsx("div",{className:"text-[14px] font-semibold leading-tight",children:C})}),ge.length>0&&o.jsx("div",{className:"flex flex-col items-end text-right gap-1 text-[11px] leading-tight",children:ge.map((K,Ae)=>o.jsxs("div",{className:"w-full",children:[Ae>0&&o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"text-base leading-none text-left",children:Ke(K)}),o.jsx("div",{className:"font-semibold text-[12px] leading-tight truncate text-right flex-1",style:Y,children:K.name||"(fr nume)"})]}),o.jsx("div",{style:z,children:K.phone}),o.jsxs("div",{className:"flex items-center justify-between gap-2 italic",style:z,children:[o.jsx("div",{className:"flex items-center gap-1 text-left not-italic",children:(()=>{const Se=typeof K.amount=="number"?K.amount:typeof K.price=="number"?K.price:typeof K.price_value=="number"?K.price_value:typeof K.total_price=="number"?K.total_price:Number(K.amount??K.price??K.price_value??K.total_price),De=le(Se);return o.jsx(o.Fragment,{children:o.jsx("span",{children:De||"-"})})})()}),o.jsxs("span",{className:"truncate text-right italic",children:[K.board_at,"  ",K.exit_at]})]}),R&&K.observations&&o.jsxs("div",{className:"mt-0.5 text-[10px] text-white/90 italic text-right whitespace-pre-line",style:T,children:[" ",K.observations]})]},Ae))})]}),Be&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-45 text-[11px] font-semibold uppercase",children:"Rezervare n curs"})]},P.id)})})}),Yd=e=>(e??"").toString().trim().toLowerCase(),nD=(e="")=>{const t=Yd(e);return t.includes("ofer")||t.includes("sofer")||t.includes("ghid")},i0=e=>{const t=String((e==null?void 0:e.label)??""),r=t.match(/\d+/),i=r?Number(r[0]):null,s=Number.isFinite(Number(e==null?void 0:e.row))?Number(e.row):Number.POSITIVE_INFINITY,u=Number.isFinite(Number(e==null?void 0:e.seat_col))?Number(e.seat_col):Number.POSITIVE_INFINITY;return{isService:nD(t),numericLabel:Number.isFinite(i)?i:Number.POSITIVE_INFINITY,row:s,col:u,label:t}},rD=(e=[],t=[])=>{if(!Array.isArray(t)||t.length<2)return[];const r=t.map((i,s)=>({normalized:Yd(i),index:s}));return e.map(i=>{var d,m;const s=((d=r.find(h=>Yd(i.board_at)===h.normalized))==null?void 0:d.index)??-1,u=((m=r.find(h=>Yd(i.exit_at)===h.normalized))==null?void 0:m.index)??-1;return s===-1||u===-1||u<=s?null:{passenger:i,startIndex:s,endIndex:u}}).filter(Boolean)},aD=({activePassengers:e,heldByOther:t,heldByMe:r,seat:i})=>{const s=String((i==null?void 0:i.label)??"").toLowerCase();if(s.includes("ofer")||s.includes("sofer")||s.includes("ghid"))return"Loc de serviciu";if(t)return"Rezervare n curs";if(r)return"Rezervare iniiat de tine";if(e.length===0)return"Liber";if(e.length===1){const u=e[0];return`${u.name||"(fr nume)"} (${u.board_at}  ${u.exit_at})`}return`${e.length} pasageri activi`},iD=({segmentCount:e,passengerCount:t})=>32+Math.max(e,t,1)*28;function sD({seats:e=[],stops:t=[],intentHolds:r={}}){const i=f.useMemo(()=>Array.isArray(e)?[...e].filter(u=>u&&u.label).sort((u,d)=>{const m=i0(u),h=i0(d);return m.isService!==h.isService?m.isService?1:-1:m.numericLabel!==h.numericLabel?m.numericLabel-h.numericLabel:m.row!==h.row?m.row-h.row:m.col!==h.col?m.col-h.col:m.label.localeCompare(h.label,"ro")}):[],[e]),s=f.useMemo(()=>{if(!Array.isArray(t)||t.length===0)return[];const u=Math.max(t.length-1,1);return t.map((d,m)=>({index:m,position:u===0?0:m/u*100}))},[t]);return!Array.isArray(t)||t.length===0?o.jsx("div",{className:"text-red-500 font-semibold p-4",children:"Nu exist staii configurate pentru aceast rut."}):o.jsxs("div",{className:"w-full border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[o.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50",children:[o.jsx("div",{className:"w-44 px-4 py-3 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Loc / Status"}),o.jsx("div",{className:"flex-1 px-6 py-3",children:o.jsx("div",{className:"relative h-16",children:s.map(({position:u,index:d})=>o.jsxs("div",{className:"absolute inset-y-0 flex flex-col items-center",style:{left:`${u}%`,transform:d===0?"translateX(0%)":d===s.length-1?"translateX(-100%)":"translateX(-50%)"},children:[o.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-gray-700 bg-white border border-gray-200 rounded shadow-sm",children:t[d]}),o.jsx("div",{className:"mt-2 flex-1 border-l border-gray-300"})]},`stop-header-${d}`))})})]}),o.jsx("div",{className:"divide-y divide-gray-200",children:i.map(u=>{const d=r==null?void 0:r[u.id],m=(d==null?void 0:d.isMine)===!1,h=(d==null?void 0:d.isMine)===!0,p=(u.passengers||[]).filter(S=>!S.status||S.status==="active"),g=rD(p,t),b=iD({segmentCount:g.length,passengerCount:p.length}),w=aD({activePassengers:p,heldByOther:m,heldByMe:h,seat:u});return o.jsxs("div",{className:"flex",children:[o.jsxs("div",{className:"w-44 px-4 py-3 bg-gray-50 border-r border-gray-200",children:[o.jsx("div",{className:"text-sm font-semibold text-gray-800",children:u.label}),o.jsx("div",{className:"mt-1 text-xs text-gray-600 leading-5",children:w})]}),o.jsx("div",{className:"flex-1 px-6 py-3",children:o.jsxs("div",{className:"relative",style:{minHeight:b},children:[s.map(({position:S,index:y})=>o.jsx("div",{className:"absolute inset-y-0 border-l border-dashed border-gray-200",style:{left:`${S}%`}},`stop-line-${u.id}-${y}`)),g.length>0?g.map(({passenger:S,startIndex:y,endIndex:j},N)=>{var O,C;const E=((O=s[y])==null?void 0:O.position)??0,_=((C=s[j])==null?void 0:C.position)??100,M=Math.max(_-E,2);return o.jsxs("div",{className:"absolute flex flex-col gap-1 rounded-md bg-blue-500/90 text-white text-xs px-3 py-2 shadow-sm",style:{left:`${E}%`,width:`calc(${M}% - 12px)`,top:8+N*28},children:[o.jsx("span",{className:"font-semibold truncate",children:S.name||"(fr nume)"}),o.jsxs("span",{className:"text-[11px] whitespace-nowrap opacity-80",children:[S.board_at,"  ",S.exit_at]})]},`${u.id}-${S.id||N}-${y}-${j}`)}):o.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-gray-400",children:m?"Rezervare n curs":"Liber pe tot traseul"})]})})]},u.id)})})]})}function Pp(e){const{name:t,phone:r}=e,i=(t==null?void 0:t.trim().length)>0,s=(r==null?void 0:r.trim().length)>0,u=!t||/^[a-zA-Z0-9 \-]+$/.test(t.trim()),d=(r==null?void 0:r.replace(/\s+/g,""))||"",m=!r||/^(\+)?\d{10,}$/.test(d),h=i||s;return{valid:h&&u&&m,errors:{name:i&&!u?"Numele poate conine doar litere, cifre, spaii i -":"",phone:s&&!m?"Telefonul trebuie s aib minim 10 cifre i poate ncepe cu +":"",general:h?"":"Completeaz cel puin numele sau telefonul"}}}const zp=(...e)=>{},s0=e=>(e??"").toString().trim().toLowerCase();function oD(e){const t=String((e==null?void 0:e.label)||""),r=String((e==null?void 0:e.seat_type)||"");return/ghid/i.test(t)||/ghid|guide/i.test(r)}function lD(e){const t=String((e==null?void 0:e.label)||"");return/ofer|sofer/i.test(t)||String((e==null?void 0:e.seat_type)||"")==="driver"}function cD(e){const t=String(e??"").match(/\d+/);if(!t)return Number.POSITIVE_INFINITY;const r=parseInt(t[0],10);return Number.isNaN(r)?Number.POSITIVE_INFINITY:r}function Vs(e){const t=Number.isFinite(e==null?void 0:e.seat_col)?e.seat_col:Number.POSITIVE_INFINITY;return`${String((e==null?void 0:e.row)??9999).padStart(3,"0")}:${String(t).padStart(3,"0")}:${String(cD(e==null?void 0:e.label)).padStart(6,"0")}`}function el(e,t){return e.findIndex(r=>s0(r)===s0(t))}function uD(e,t,r,i){const s=Array.isArray(e==null?void 0:e.passengers)?e.passengers:[];for(const u of s){if(((u==null?void 0:u.status)||"active")!=="active")continue;const d=el(i,u.board_at),m=el(i,u.exit_at);if(d===-1||m===-1||d>=m)continue;if(!(r<=d||t>=m))return!1}return!0}function dD(e,t,r,i){const s=el(i,t),u=el(i,r);if(s===-1||u===-1||s>=u)return{b:-1,e:-1,rows:new Map,guides:[]};const d=[],m=[];for(const g of e||[])g&&(lD(g)||uD(g,s,u,i)&&(oD(g)?m.push(g):d.push(g)));const h=new Map;for(const g of d){const b=Number.isFinite(g==null?void 0:g.row)?g.row:9999;h.has(b)||h.set(b,[]),h.get(b).push(g)}const p=[...h.keys()].sort((g,b)=>g-b);for(const g of p)h.get(g).sort((b,w)=>Vs(b).localeCompare(Vs(w)));return{b:s,e:u,rows:h,guides:m}}function fD(e){const t=[];for(const r of e.values())t.push(...r);return t}function hD(e,t,r,i){let s=5;const u=Array.isArray(e==null?void 0:e.passengers)?e.passengers:[];if(!u.length)return s;for(const d of u){const m=el(i,d.board_at),h=el(i,d.exit_at);m===-1||h===-1||m>=h||(h===t&&(s+=160),m===r&&(s+=160),h<t&&(s+=40),m>r&&(s+=40))}return s}function mD(e){const t=Number.isFinite(e==null?void 0:e.row)?e.row:999;return Math.max(0,200-t*10)}function pD(e){if(!(e!=null&&e.length))return[];const t=[...e].sort((u,d)=>u.col-d.col),r=[];let i=[],s=null;for(const u of t){const d=Number.isFinite(u.col)?u.col:9999;s!=null&&d-s>1&&i.length&&(r.push(i),i=[]),i.push(u),s=d}return i.length&&r.push(i),r}function Zm(e,t){return!Number.isFinite(e.col)||!Number.isFinite(t.col)||!Number.isFinite(e.row)||!Number.isFinite(t.row)?3:e.row===t.row?Math.abs(e.col-t.col)===1?0:1:e.col===t.col?2:3}function gD(e,t){const r=e.reduce((m,h)=>m+h.segmentScore,0),i=e.reduce((m,h)=>m+h.frontScore,0),s=e.slice().sort((m,h)=>m.key.localeCompare(h.key)).map(m=>m.key).join("|");let u=3,d=0;if(t===1)u=0,d=i;else if(t===2){const[m,h]=e,p=Number.isFinite(m.row)&&m.row===h.row,g=Number.isFinite(m.col)&&m.col===h.col,b=p?Math.abs(m.col-h.col):null,w=Math.abs(m.row-h.row);p&&b===1?(u=0,d=400-Math.min(m.row,h.row)*10):p?(u=1,d=250-(b||0)*5):g&&w>0?(u=2,d=180-w*10):(u=3,d=100-w-(b??0))}else if(t===3){if(new Set(e.map(p=>p.row)).size===1){const p=e.slice().sort((S,y)=>S.col-y.col),g=pD(p),b=p.some((S,y)=>y<p.length-1&&p[y+1].col-S.col===1),w=g.length>=2;if(b&&w)return u=0,d=500-p[0].row*10,{segmentScoreSum:r,arrangementRank:u,arrangementScore:d,frontScore:i,orderKey:s}}let h=-1/0;for(let p=0;p<e.length;p+=1)for(let g=p+1;g<e.length;g+=1){const b=e[p],w=e[g];if(b.row!==w.row)continue;const S=Zm(b,w);if(S>1)continue;const y=[0,1,2].find(_=>_!==p&&_!==g);if(y==null)continue;const j=e[y];if(!Number.isFinite(j.col)||!Number.isFinite(j.row))continue;const N=j.col===b.col||j.col===w.col,E=Math.min(Math.abs(j.row-b.row),Math.abs(j.row-w.row));if(N&&E>=1){const _=320-E*15-S*30;_>h&&(h=_)}}h>-1/0?(u=1,d=h):(u=2,d=-e.reduce((p,g)=>p+g.row,0))}else if(t===4){const m=[[[0,1],[2,3]],[[0,2],[1,3]],[[0,3],[1,2]]];let h=3,p=-1/0;for(const g of m){let b=!0,w=0,S=0,y=0,j=0;for(const[_,M]of g){const O=e[_],C=e[M],L=Zm(O,C);if(L===3){b=!1;break}L===0?w+=1:L===1?S+=1:L===2&&(y+=1),j+=O.segmentScore+C.segmentScore+(L===0?200:L===1?120:80)}if(!b)continue;let N;w===2?N=0:w>=1?N=1:N=2;const E=j+w*50-S*10-y*20;(N<h||N===h&&E>p)&&(h=N,p=E)}h!==3?(u=h,d=p):(u=3,d=-e.reduce((g,b)=>g+b.row,0))}else{const m=[],h=[],p=[];for(let j=0;j<e.length;j+=1)for(let N=j+1;N<e.length;N+=1){const E=e[j],_=e[N],M=Zm(E,_),O=E.segmentScore+_.segmentScore;M===0?m.push({i:j,j:N,score:O}):M===1?h.push({i:j,j:N,score:O}):M===2&&p.push({i:j,j:N,score:O})}const g=new Set;let b=0,w=0,S=0;m.sort((j,N)=>N.score-j.score);for(const j of m)g.has(j.i)||g.has(j.j)||(g.add(j.i),g.add(j.j),b+=1);h.sort((j,N)=>N.score-j.score);for(const j of h)g.has(j.i)||g.has(j.j)||(g.add(j.i),g.add(j.j),w+=1);p.sort((j,N)=>N.score-j.score);for(const j of p)g.has(j.i)||g.has(j.j)||(g.add(j.i),g.add(j.j),S+=1);const y=e.length-g.size;u=-b,d=b*200+w*80+S*40-y*50}return{segmentScoreSum:r,arrangementRank:u,arrangementScore:d,frontScore:i,orderKey:s}}function vD(e,t){return t?e.segmentScoreSum!==t.segmentScoreSum?e.segmentScoreSum>t.segmentScoreSum:e.arrangementRank!==t.arrangementRank?e.arrangementRank<t.arrangementRank:e.arrangementScore!==t.arrangementScore?e.arrangementScore>t.arrangementScore:e.frontScore!==t.frontScore?e.frontScore>t.frontScore:e.orderKey<t.orderKey:!0}function bD(e,t){if(!Array.isArray(e)||e.length<t)return null;const r=Math.min(e.length,Math.max(12,t*4)),i=e.slice(0,r),s=[];let u=null,d=null;function m(h){if(s.length===t){const g=gD(s,t);vD(g,d)&&(u=s.slice(),d=g);return}const p=t-s.length;for(let g=h;g<=i.length-p;g+=1)s.push(i[g]),m(g+1),s.pop()}return m(0),u?u.map(h=>h.seat):null}function Yo(e,t,r,i,s){const{rows:u,guides:d,b:m,e:h}=dD(e,t,r,i);if(m===-1||h===-1)return[];const p=Math.max(1,Number(s)||1),g=fD(u);if(g.length<p)return g.length===0&&d.length>0?d.slice(0,Math.min(p,d.length)):[];const b=g.map(y=>({seat:y,row:Number.isFinite(y==null?void 0:y.row)?y.row:9999,col:Number.isFinite(y==null?void 0:y.seat_col)?y.seat_col:9999,segmentScore:hD(y,m,h,i),frontScore:mD(y),key:Vs(y)})).sort((y,j)=>j.segmentScore!==y.segmentScore?j.segmentScore-y.segmentScore:j.frontScore!==y.frontScore?j.frontScore-y.frontScore:y.key.localeCompare(j.key)),w=bD(b,p);if(w&&w.length===p){const y=w.slice().sort((j,N)=>Vs(j).localeCompare(Vs(N)));return zp("selectSeats RESULT",y.map(j=>j.label)),y}const S=b.slice(0,p).map(y=>y.seat);if(S.length===p){const y=S.slice().sort((j,N)=>Vs(j).localeCompare(Vs(N)));return zp("selectSeats FALLBACK",y.map(j=>j.label)),y}return g.length===0&&d.length>0?d.slice(0,Math.min(p,d.length)):[]}function Fj(e,t,r,i,s=[]){const u=(e||[]).filter(h=>{var p;return!((p=s==null?void 0:s.includes)!=null&&p.call(s,h==null?void 0:h.id))}),m=Yo(u,t,r,i,1)[0]||null;return zp("getBestAvailableSeat ",(m==null?void 0:m.label)??null),m}const yD=({seat:e,selectedRoute:t,passengersData:r,setPassengersData:i,selectedSeats:s,setSelectedSeats:u,autoSelectEnabled:d,fetchPrice:m,setToastMessage:h,setToastType:p,incomingCall:g,onApplyIncomingCall:b,toggleSeat:w,seats:S,selectedDate:y,selectedHour:j,selectedScheduleId:N,selectedDirection:E,onConflictInfo:_,onBlacklistInfo:M,stops:O=[],getStationIdByName:C,getStationNameById:L,stopDetailsByName:B=new Map})=>{var xn,kr,Oa,Cr,La;const Z=ke=>{if(!ke)return"";const nt=String(ke).trim();if(/^\d{2}\.\d{2}\.\d{4}$/.test(nt))return nt;const We=nt.split("T")[0];if(/^\d{4}-\d{2}-\d{2}$/.test(We)){const[ze,Fe,Qe]=We.split("-");return`${Qe}.${Fe}.${ze}`}const st=new Date(nt);if(!isNaN(st)){const ze=String(st.getDate()).padStart(2,"0"),Fe=String(st.getMonth()+1).padStart(2,"0"),Qe=st.getFullYear();return`${ze}.${Fe}.${Qe}`}return nt},R=(ke,nt,We)=>{if(nt)return nt;if(ke==null||!L)return"";const st=Number(ke);return L(isNaN(st)?ke:st)||L(String(ke))||""},X=(ke={})=>{const nt=ke.date||ke.created_at||ke.reservation_time||ke.backup_time||"",We=nt?Z(String(nt).trim()):"";let st="";ke.time?st=String(ke.time).slice(0,5):ke.hour&&(st=String(ke.hour).slice(0,5));const ze=ke.seat_label?`  Loc: ${ke.seat_label}`:"",Fe=ke.board_name||R(ke.board_station_id,ke.board_at),Qe=ke.exit_name||R(ke.exit_station_id,ke.exit_at),ut=Fe||(ke.board_station_id!=null?`#${ke.board_station_id}`:""),ct=Qe||(ke.exit_station_id!=null?`#${ke.exit_station_id}`:"");return o.jsxs(o.Fragment,{children:[We?` ${We}  `:" ",ke.route_name||"",st?`  ${st}`:"",ze,"  (",o.jsx("b",{children:ut}),"  ",o.jsx("b",{children:ct}),")"]})},te=r[e.id]||{},{errors:xe}=Pp(te),Pe=g!=null&&g.phone?String(g.phone).trim():"",ve=g!=null&&g.digits?String(g.digits).replace(/\D/g,""):"",se=typeof te.phone=="string"?te.phone:"",V=se.trim().length>0,F=se.replace(/\D/g,""),Y=!!b&&!!(Pe||ve)&&(!V||F!==ve),[z,T]=f.useState(null),[P,A]=f.useState(!1),[H,U]=f.useState(null),[W,ue]=f.useState(!1),[Ee,be]=f.useState(null),[Be,Te]=f.useState(null),[Ge,ge]=f.useState(!1),[Ke,le]=f.useState({}),[ce,K]=f.useState(!1),[Ae,Se]=f.useState(""),De=Array.isArray(O)?O:[],Ze=B instanceof Map?B:new Map,Ve=De[0]||null,de=De.length>0?De[De.length-1]:null,I=te.board_at||Ve,oe=te.exit_at||de,he=I&&Ze.get(I)||null,_e=oe&&Ze.get(oe)||null,ae=[];he!=null&&he.time&&ae.push(`Ora: ${he.time}`),he!=null&&he.note&&ae.push(he.note);const fe=[];_e!=null&&_e.time&&fe.push(`Ora: ${_e.time}`),_e!=null&&_e.note&&fe.push(_e.note);const ne=ae.length>0||fe.length>0,Xe=(ke,nt,We,st={})=>{const{skipOrderCheck:ze=!1}=st;if(!De.length)return ke;const Fe=ke[e.id]||{},Qe=!!Fe.reservation_id;let ut=De.includes(nt)?nt:Ve,ct=De.includes(We)?We:de;ut||(ut=Ve),ct||(ct=de);const Xt=De.indexOf(ut),Nn=De.indexOf(ct);if(Xt===-1||Nn===-1)return ke;if(!ze&&Xt>=Nn)return alert("Staia de coborre trebuie s fie dup cea de urcare!"),ke;const wn={...Fe,board_at:ut,exit_at:ct};if(Qe||!d)return Fe.board_at===ut&&Fe.exit_at===ct?ke:(m(e.id,ut,ct),{...ke,[e.id]:wn});const In=Object.keys(ke).map(Jn=>Number(Jn)).filter(Jn=>Jn!==e.id),pa=S.filter(Jn=>!In.includes(Jn.id)),vr=Fj(pa,ut,ct,De,In);if(!vr)return h("Nu exist loc disponibil pentru segmentul selectat."),p("error"),setTimeout(()=>h(""),3e3),ke;if(vr.id===e.id)return Fe.board_at===ut&&Fe.exit_at===ct?ke:(m(vr.id,ut,ct),{...ke,[vr.id]:wn});m(vr.id,ut,ct),u(Jn=>Jn.map(sr=>sr.id===e.id?vr:sr));const On={...ke};return delete On[e.id],On[vr.id]=wn,On};async function Je(){try{const nt=String(te.phone||"").replace(/\D/g,"");if(nt.length<10)return alert("Telefon invalid");let We=te.person_id;if(!We){const Fe=await fetch("/api/people",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:te.name||"",phone:nt})}),Qe=await Fe.json();if(!Fe.ok||!(Qe!=null&&Qe.id))return alert((Qe==null?void 0:Qe.error)||"Eroare la crearea persoanei");We=Qe.id,i(ut=>({...ut,[e.id]:{...ut[e.id],person_id:We}}))}if(!window.confirm("Confirmi schimbarea deintorului pentru acest numr?"))return;const st=await fetch("/api/people/owner/set-active",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({person_id:We,phone:nt,agent_id:1})}),ze=await st.json();if(!st.ok||!(ze!=null&&ze.success))return alert((ze==null?void 0:ze.error)||"Eroare la schimbarea deintorului");try{const Fe=await fetch(`/api/blacklist/check?phone=${nt}`).then(Qe=>Qe.json());T(Fe)}catch{}try{const Fe=await fetch(`/api/people/owner/status?phone=${nt}`).then(Qe=>Qe.json());Te(Fe)}catch{}A(!1),rt(!1),alert("Deintor actualizat.")}catch{alert("Eroare la schimbarea deintorului")}}const[et,ot]=f.useState([]),[wt,rt]=f.useState(!1),[$t,Lt]=f.useState(!1);f.useEffect(()=>{const ke=te.board_at,nt=te.exit_at;if(!y||!ke||!nt||!te.person_id){Lt(!1),ot([]),_([]);return}const We=(()=>{try{return typeof y=="string"?y.split("T")[0]:new Date(y).toISOString().slice(0,10)}catch{return null}})();if(!We){Lt(!1),ot([]),_([]);return}const st=C?C(ke):null,ze=C?C(nt):null;if(st===null||ze===null){Lt(!1),ot([]),_([]);return}const Fe=new URLSearchParams({date:We,board_station_id:String(st),exit_station_id:String(ze),person_id:String(te.person_id)});e!=null&&e.trip_id&&Fe.set("exclude_trip_id",String(e.trip_id)),fetch(`/api/reservations/double-check-segment?${Fe.toString()}`).then(Qe=>Qe.json()).then(Qe=>{if(Qe!=null&&Qe.hasDouble){Lt(!0);const ut=(Qe.infos||[]).map(ct=>({...ct,board_at:L?L(ct.board_station_id):"",exit_at:L?L(ct.exit_station_id):""}));ot(ut),_(Qe.infos||[])}else Lt(!1),ot([]),_([])}).catch(()=>{Lt(!1),ot([]),_([])})},[te.person_id,te.board_at,te.exit_at,y,C,L,e==null?void 0:e.trip_id]),f.useEffect(()=>{const nt=(te.phone||"").replace(/\D/g,"");if(U(null),ue(!1),!nt){const We=r[e.id]||{},st=!!We.reservation_id,ze=(We.name||"").trim().length>0;!st&&!ze&&i(Fe=>({...Fe,[e.id]:{...Fe[e.id],name:""}}));return}nt.length<10||fetch(`/api/people/history?phone=${encodeURIComponent(nt)}`).then(We=>We.json()).then(We=>{if(We.exists){const st=Array.isArray(We.history)?We.history.map(ze=>({...ze,board_at:ze.board_name||R(ze.board_station_id,ze.board_at),exit_at:ze.exit_name||R(ze.exit_station_id,ze.exit_at)})):[];U({...We,history:st}),!W&&We.name&&(te.name||i(ze=>({...ze,[e.id]:{...ze[e.id],name:We.name}})),ue(!0))}else U(null),ue(!1)}).catch(()=>{U(null),ue(!1)})},[te.phone,L]),f.useEffect(()=>{const nt=(te.phone||"").replace(/\D/g,"");if(!(De!=null&&De.length)||!Ve||!de||!(t!=null&&t.id)){be(null);return}if(nt.length===0){be(null);return}if(nt.length<10)return;const We=te;if(We.board_at&&We.exit_at&&We.segmentAutoAppliedPhone===nt)return;if(We.segmentAutoAppliedPhone&&We.segmentAutoAppliedPhone!==nt&&i(Fe=>({...Fe,[e.id]:{...Fe[e.id]||{},segmentAutoAppliedPhone:null}})),!!We.reservation_id){be(null);return}let ze=!1;return fetch(`/api/traveler-defaults?phone=${encodeURIComponent(nt)}&route_id=${t.id}&direction=${E}`).then(Fe=>{if(!Fe.ok)throw new Error("HTTP "+Fe.status);return Fe.json()}).then(Fe=>{if(ze)return;if(!(Fe!=null&&Fe.found)){be(null),i(wn=>{const In=Xe(wn,Ve,de);return In[e.id]={...In[e.id]||{},segmentAutoAppliedPhone:nt},In});return}const Qe=Fe.board_name??(Fe.board_station_id!=null?L==null?void 0:L(Fe.board_station_id):null),ut=Fe.exit_name??(Fe.exit_station_id!=null?L==null?void 0:L(Fe.exit_station_id):null);if(!Qe||!ut||!De.includes(Qe)||!De.includes(ut)){be(null);return}const ct=We.board_at||Ve,Xt=We.exit_at||de;Qe!==ct||ut!==Xt?be({type:"history",board:Qe,exit:ut,phone:nt}):(Ee==null?void 0:Ee.type)==="history"&&Ee.phone!==nt&&be(null),i(wn=>{const In=Xe(wn,Qe,ut,{skipOrderCheck:!0});return In[e.id]={...In[e.id]||{},segmentAutoAppliedPhone:nt},In})}).catch(()=>{ze||be(null)}),()=>{ze=!0}},[te.phone,t==null?void 0:t.id,e.id,De,Ve,de,L,i,Xe,Ee,te.board_at,te.exit_at,te.segmentAutoAppliedPhone]),f.useEffect(()=>{const nt=(te.phone||"").replace(/\D/g,"");Te(null),!(nt.length<10)&&(ge(!0),fetch(`/api/people/owner/status?phone=${encodeURIComponent(nt)}`).then(We=>We.json()).then(We=>{const st=Array.isArray(We==null?void 0:We.pending)?We.pending.map(ze=>({...ze,no_shows:Array.isArray(ze.no_shows)?ze.no_shows.map(Fe=>{const Qe=Array.isArray(S)?S.find(ut=>ut.id===Fe.seat_id):null;return{...Fe,hour:Fe.hour,seat_label:Fe.seat_label||(Qe==null?void 0:Qe.label)||null,board_at:R(Fe.board_station_id,Fe.board_at),exit_at:R(Fe.exit_station_id,Fe.exit_at)}}):ze.no_shows})):[];Te({...We,pending:st})}).catch(()=>Te(null)).finally(()=>ge(!1)))},[te.phone]),f.useEffect(()=>{const ke=Array.isArray(Be==null?void 0:Be.pending)?Be.pending:[];if(ke.length===0)return;let nt=!1;return(async()=>{var st;const We={};for(const ze of ke){const Fe=Number(ze.id);if(!Fe)continue;const Qe=Ke[Fe],ut=Array.isArray(ze.no_shows);if(ut&&!Qe){const ct=ze.no_shows.slice(0,5).map(Xt=>{const Nn=Array.isArray(S)?S.find(wn=>wn.id===Xt.seat_id):null;return{...Xt,hour:Xt.hour,seat_label:Xt.seat_label||(Nn==null?void 0:Nn.label)||null,board_at:L?L(Number(Xt.board_station_id)):"",exit_at:L?L(Number(Xt.exit_station_id)):""}});We[Fe]={no_shows:ct,count:Number(ze.no_shows_count||((st=ze.noShows)==null?void 0:st.length)||0)};continue}if(!(Qe||ut))try{const ct=await fetch(`/api/people/${Fe}/report`).then(wn=>wn.json()),Xt=Array.isArray(ct==null?void 0:ct.no_shows)?ct.no_shows:Array.isArray(ct==null?void 0:ct.noShows)?ct.noShows:[],Nn=Xt.slice(0,5).map(wn=>{const In=Array.isArray(S)?S.find(pa=>pa.id===wn.seat_id):null;return{...wn,hour:wn.hour,seat_label:wn.seat_label||(In==null?void 0:In.label)||null,board_at:L?L(Number(wn.board_station_id)):"",exit_at:L?L(Number(wn.exit_station_id)):""}});We[Fe]={no_shows:Nn,count:Xt.length}}catch{}}!nt&&Object.keys(We).length>0&&le(ze=>({...ze,...We}))})(),()=>{nt=!0}},[Be==null?void 0:Be.pending]),f.useEffect(()=>{const ke=te.phone||"",nt=ke.replace(/\D/g,"");if(nt.length<10){T({phone:ke,blacklisted:!1,reason:null,no_shows:[],created_at:null}),i(We=>({...We,[e.id]:{...We[e.id],person_id:null}}));return}fetch(`/api/blacklist/check?phone=${encodeURIComponent(nt)}`).then(We=>We.json()).then(We=>{const st=Array.isArray(We.no_shows)?We.no_shows.map(ut=>{const ct=Array.isArray(S)?S.find(Xt=>Xt.id===ut.seat_id):null;return{...ut,hour:ut.hour,seat_label:ut.seat_label||(ct==null?void 0:ct.label)||null,board_at:ut.board_name||R(ut.board_station_id,ut.board_at),exit_at:ut.exit_name||R(ut.exit_station_id,ut.exit_at)}}):[],ze=Array.isArray(We.blacklist_history)?We.blacklist_history:[],Fe=ze[ze.length-1]||{},Qe={phone:ke,blacklisted:We.blacklisted,reason:We.reason,no_shows:st,created_at:Fe.created_at||null};T(Qe),We&&We.person_id&&i(ut=>({...ut,[e.id]:{...ut[e.id]||{},person_id:We.person_id}})),M==null||M(Qe)}).catch(()=>{T(null),M==null||M(null)})},[te.phone,L]);const Yn=!!((z==null?void 0:z.blacklisted)??(z==null?void 0:z.is_blacklisted)),Un=Array.isArray(z==null?void 0:z.no_shows)?z.no_shows.length:Array.isArray(z==null?void 0:z.noShows)?z.noShows.length:0,ea=Number((z==null?void 0:z.no_shows_count)??(z==null?void 0:z.noShowsCount)??0),bt=Math.max(Un,ea),mt=Array.isArray(Be==null?void 0:Be.pending)?Be.pending:[],gt=!!((z==null?void 0:z.pendingHasBlacklist)??(z==null?void 0:z.pending_has_blacklist)??!1),Zt=Number((z==null?void 0:z.pendingNoShowsCount)??(z==null?void 0:z.pending_no_shows_count)??0),qn=mt,Ft=qn.length>0?qn.some(ke=>Number(ke.blacklist)===1):gt,jn=qn.length>0?qn.reduce((ke,nt)=>{var ze;const We=Number(nt.id),st=((ze=Ke[We])==null?void 0:ze.count)||0;return ke+Number(nt.no_shows_count||st||0)},0):Zt,nn=Yn||Ft,Qn=bt+jn>0,lt=String(te.phone||"").replace(/\D/g,"").length>=10&&(Yn||Ft||bt>0||jn>0),An=!!((xn=Be==null?void 0:Be.active)!=null&&xn.id&&(te!=null&&te.person_id))&&Be.active.id===te.person_id;return o.jsxs("div",{className:"relative border p-2 rounded bg-white shadow space-y-2",children:[o.jsx("button",{onClick:()=>w(e),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 font-bold text-lg",title:"Deselecteaz locul",children:""}),o.jsxs("div",{className:"font-medium flex items-center gap-2",children:["Loc:",o.jsx(Fd,{className:"min-w-[100px] w-auto",value:{value:e.id,label:e.label},options:(()=>{var Qe,ut;const ke=Array.isArray(O)?O:[],nt=(Qe=r[e.id])==null?void 0:Qe.board_at,We=(ut=r[e.id])==null?void 0:ut.exit_at,st=ke.findIndex(ct=>ct===nt),ze=ke.findIndex(ct=>ct===We);return S.filter(ct=>{var Nn;return ct.label.toLowerCase().includes("ofer")||ct.id===e.id||ct.status==="full"?!1:!((Nn=ct.passengers)==null?void 0:Nn.some(wn=>{const In=ke.findIndex(vr=>vr===wn.board_at),pa=ke.findIndex(vr=>vr===wn.exit_at);return!(ze<=In||st>=pa)}))}).sort((ct,Xt)=>parseInt(ct.label)-parseInt(Xt.label)).map(ct=>({value:ct.id,label:ct.label}))})(),onChange:ke=>{const nt=ke.value,We=e.id;if(nt===We)return;const st=S.find(Fe=>Fe.id===nt),ze=r[We];u(Fe=>Fe.map(Qe=>Qe.id===We?st:Qe)),i(Fe=>{const Qe={...Fe};return delete Qe[We],Qe[nt]={...ze},Qe})}})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"w-full relative",children:[o.jsx("input",{type:"text",className:`w-full p-2 border rounded ${xe.name?"border-red-500":"border-gray-300"}`,placeholder:"Nume pasager",value:te.name||"",onChange:ke=>{ue(!1),i(nt=>({...nt,[e.id]:{...nt[e.id],name:ke.target.value}}))}}),W&&(H==null?void 0:H.name)&&te.name!==H.name&&o.jsx("button",{type:"button",onClick:()=>{i(ke=>({...ke,[e.id]:{...ke[e.id],name:H.name}})),ue(!1)},className:"absolute right-2 top-2 text-gray-500 hover:text-gray-700",title:"Preia numele din baza de date",children:""}),xe.name&&o.jsx("div",{className:"text-red-600 text-xs mt-1",children:xe.name})]}),o.jsxs("div",{className:"w-full relative",children:[o.jsx("input",{inputMode:"tel",pattern:"^\\+?\\d*$",type:"text",className:`w-full p-2 border rounded ${xe.phone?"border-red-500":"border-gray-300"}`,placeholder:"Telefon",value:te.phone||"",onChange:ke=>{const nt=ke.target.value;i(We=>({...We,[e.id]:{...We[e.id],phone:nt,person_id:null}})),Lt(!1),ot([]),_([]),rt(!1)}}),xe.phone&&o.jsx("div",{className:"text-red-600 text-xs mt-1",children:xe.phone}),o.jsxs("div",{className:"absolute top-2 right-3 flex space-x-1",children:[Y&&o.jsx("button",{type:"button",onClick:()=>b==null?void 0:b(e.id),className:"text-blue-600 text-lg hover:opacity-75",title:"Copiaz n acest cmp numrul ultimului apel primit",children:""}),(H==null?void 0:H.exists)&&!nn&&!Qn&&o.jsx("button",{type:"button",onClick:()=>{A(ke=>!ke),rt(!1)},className:"text-blue-600 text-lg hover:opacity-75",title:"Vezi ultimele 5 rezervri",children:""}),!nn&&Qn&&o.jsx("button",{type:"button",onClick:()=>A(ke=>!ke),className:"text-orange-600 text-lg hover:opacity-75",title:"Are neprezentri",children:""}),nn&&o.jsx("button",{type:"button",onClick:()=>{A(ke=>!ke),rt(!1)},className:"text-red-600 text-lg hover:opacity-75",title:"Persoan n blacklist",children:""}),$t&&o.jsx("button",{onClick:()=>{rt(ke=>!ke),A(!1)},className:"inline-block text-yellow-500 text-lg hover:opacity-75 animate-pulse",title:"Exist rezervare n aceeai zi pe acelai sens",children:""})]}),$t&&wt&&et.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>rt(!1)}),o.jsxs("div",{className:`absolute right-0 bottom-full mb-1 min-w-max 
         bg-white p-3 border border-gray-200 rounded-lg 
         shadow-lg z-50 text-sm whitespace-normal`,children:[o.jsx("div",{className:"font-semibold mb-1",children:"Rezervri conflictuale:"}),o.jsx("ul",{className:"space-y-1",children:et.map((ke,nt)=>o.jsxs("li",{className:"text-sm whitespace-nowrap",children:[ke.route,"  ",ke.time.slice(0,5),"  Loc: ",ke.seatLabel,"  ",ke.board_at,"",ke.exit_at]},nt))})]})]}),P&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>A(!1)}),o.jsxs("div",{className:`absolute right-0 bottom-full mb-1 min-w-max 
                    bg-white p-3 border border-gray-200 rounded-lg 
                    shadow-lg z-50 text-sm whitespace-normal`,children:[o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"font-semibold text-gray-800",children:["Deintor curent: ",((kr=Be==null?void 0:Be.active)==null?void 0:kr.name)||o.jsx("i",{children:"necunoscut"}),Yn?" (BLACKLIST)":""]}),bt>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"font-semibold mt-1 text-gray-700",children:"Neprezentri"}),o.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:(Array.isArray(z==null?void 0:z.no_shows)?z.no_shows:(z==null?void 0:z.noShows)||[]).map((ke,nt)=>o.jsx("li",{className:"text-sm",children:X({...ke})},nt))})]}),((Oa=H==null?void 0:H.history)==null?void 0:Oa.length)>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"font-semibold mt-1",children:"Istoric rezervri"}),o.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:H.history.map((ke,nt)=>o.jsx("li",{className:"text-sm",children:X({...ke})},nt))})]})]}),Array.isArray(Be==null?void 0:Be.pending)&&Be.pending.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("ul",{className:"space-y-2 whitespace-normal text-left",children:Be.pending.map(ke=>{const nt=Number(ke.id),We=Ke[nt],st=Array.isArray(ke.no_shows)?ke.no_shows:We?We.no_shows:[];return Number(ke.no_shows_count||(We==null?void 0:We.count)||0),o.jsxs("li",{className:"text-sm whitespace-normal",children:[o.jsxs("div",{className:"font-semibold",children:["Fost deintor: ",ke.name]}),Number(ke.blacklist)===1&&o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"font-semibold text-gray-700",children:"Blacklist"}),o.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:o.jsx("li",{className:"text-sm",children:" Marcaj activ n blacklist"})})]}),Array.isArray(st)&&st.length>0&&o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"font-semibold text-gray-700",children:"Neprezentri"}),o.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:st.slice(0,5).map((ze,Fe)=>o.jsx("li",{className:"text-sm",children:X({...ze})},Fe))})]}),Array.isArray(ke.history)&&ke.history.length>0&&o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"font-semibold text-gray-700",children:"Istoric rezervri"}),o.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:ke.history.slice(0,5).map((ze,Fe)=>o.jsx("li",{className:"text-sm",children:X({...ze})},Fe))})]})]},ke.id)})}),o.jsx("div",{className:"mt-3 pt-2 border-t flex justify-end",children:o.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{try{const ke=(te.phone||"").replace(/\D/g,""),nt=await fetch("/api/people/owner/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:ke,agent_id:1})}),We=await nt.json();if(!nt.ok||!(We!=null&&We.success))throw new Error((We==null?void 0:We.error)||"Eroare");const st=await fetch(`/api/people/owner/status?phone=${ke}`).then(Fe=>Fe.json());Te(st);const ze=await fetch(`/api/blacklist/check?phone=${ke}`).then(Fe=>Fe.json());T(ze),alert("Confirmare salvat.")}catch(ke){alert(ke.message||"Eroare la confirmare.")}},children:"Confirm definitiv"})})]}),lt&&!An&&o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",onClick:()=>{Se((te==null?void 0:te.name)||""),K(!0)},className:"px-2 py-1 text-xs rounded bg-blue-600 text-white hover:bg-blue-700",title:"Seteaz pasagerul curent ca deintor al numrului",children:"Schimb deintorul"})})]})]}),ce&&o.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>K(!1)}),o.jsxs("div",{className:"relative z-[61] w-full max-w-md bg-white rounded-xl shadow-xl border border-gray-200 p-4",children:[o.jsx("div",{className:"text-lg font-semibold mb-2",children:"Schimb deintorul"}),o.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Nume nou"}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded border-gray-300",placeholder:"Introdu numele deintorului",value:Ae,onChange:ke=>Se(ke.target.value)}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-gray-300",onClick:()=>K(!1),children:"Anuleaz"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:async()=>{try{i(ke=>({...ke,[e.id]:{...ke[e.id]||{},name:Ae}})),await Je(),K(!1)}catch{}},children:"Salveaz"})]})]})]}),Ge&&o.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Verific numrul"})]})]}),(Ee==null?void 0:Ee.type)==="history"&&o.jsxs("div",{className:"text-xs text-red-700 bg-red-50 border border-red-200 rounded px-3 py-2 mb-2",children:["Segment actualizat automat (istoric client): ",o.jsx("strong",{children:Ee.board})," "," ",o.jsx("strong",{children:Ee.exit})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(Fd,{className:"w-full",options:(()=>{const ke=O||[],nt=ke.findIndex(st=>{var ze;return st===((ze=r[e.id])==null?void 0:ze.exit_at)});return(nt>0?ke.slice(0,nt):ke).map(st=>({value:st,label:st}))})(),placeholder:"Urc din",value:(Cr=r[e.id])!=null&&Cr.board_at?{value:r[e.id].board_at,label:r[e.id].board_at}:null,onChange:ke=>{const nt=ke.value;be(null),i(We=>{const ze=(We[e.id]||{}).exit_at||de;return Xe(We,nt,ze)})}}),o.jsx(Fd,{className:"w-full",options:(()=>{const ke=O||[],nt=ke.findIndex(st=>{var ze;return st===((ze=r[e.id])==null?void 0:ze.board_at)});return(nt>=0?ke.slice(nt+1):ke).map(st=>({value:st,label:st}))})(),placeholder:"Coboar la",value:(La=r[e.id])!=null&&La.exit_at?{value:r[e.id].exit_at,label:r[e.id].exit_at}:null,onChange:ke=>{const nt=ke.value;be(null),i(We=>{const ze=(We[e.id]||{}).board_at||Ve;return Xe(We,ze,nt)})}})]}),ne&&o.jsxs("div",{className:"text-[11px] text-gray-700 bg-gray-50 border border-gray-200 rounded px-3 py-2 mt-2 space-y-1",children:[ae.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Urcare:"})," ",ae.join(", ")]}),fe.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Coborre:"})," ",fe.join(", ")]})]})]})};function Yj({selectedDate:e,setSelectedDate:t}){const r=i=>{t(i),console.log("[CalendarWrapper] Selectat:",i.toISOString().split("T")[0])};return o.jsx("div",{className:"bg-white border rounded-lg p-3 w-full shadow-sm",children:o.jsx(_M,{onChange:r,value:e,locale:"ro-RO",tileClassName:({date:i})=>i.getDate()===e.getDate()&&i.getMonth()===e.getMonth()&&i.getFullYear()===e.getFullYear()?"bg-blue-500 text-white font-bold rounded":null})})}const xD=["Botoani  Iai","Botoani  Bucureti","Dorohoi  Botoani  Iai","Botoani  Braov","Iai  Rdui"],wD=["Iai  Botoani","Bucureti  Botoani","Iai  Dorohoi  Botoani","Braov  Botoani","Rdui  Iai"],cs=e=>e==="retur"?"retur":"tur",o0=(e,t)=>[...e].sort((r,i)=>{const s=t.indexOf(r.route.name),u=t.indexOf(i.route.name);return s===-1&&u===-1?r.route.name.localeCompare(i.route.name):s===-1?1:u===-1?-1:s-u});function SD({onClose:e,moveToOtherTripData:t,onMoveSuccess:r,stops:i=[]}){const{passenger:s,reservation_id:u,boardAt:d,exitAt:m,originalTime:h,originalRouteId:p,originalDate:g,originalScheduleId:b,originalDirection:w,originalSchedule:S}=t||{},y=w?cs(w):null,[j,N]=f.useState(()=>{const ae=g?new Date(g):new Date;return isNaN(ae)?new Date:ae}),[E,_]=f.useState([]),[M,O]=f.useState(null),[C,L]=f.useState(y),[B,Z]=f.useState([]),[R,X]=f.useState([]),[te,xe]=f.useState(S||null),[Pe,ve]=f.useState([]),[se,V]=f.useState(null),[F,Y]=f.useState(""),[z,T]=f.useState(!1),[P,A]=f.useState(!1),[H,U]=f.useState({done:0,total:0}),[W,ue]=f.useState([]),[Ee,be]=f.useState(null),Be=f.useRef(new Map),Te=(te==null?void 0:te.scheduleId)??(te==null?void 0:te.id)??null,Ge=(te==null?void 0:te.departure)??(typeof(te==null?void 0:te.time)=="string"?te.time:null),ge=te!=null&&te.direction?cs(te.direction):C||y||null,Ke=f.useCallback(ae=>{V(fe=>fe&&fe.id===ae.id?null:ae)},[]),le=f.useCallback(ae=>{if(!ae)return null;const fe=B.find(ne=>ne.name===ae);return fe?fe.station_id:null},[B]),ce=f.useCallback(ae=>{if(ae==null)return"";const fe=B.find(ne=>ne.station_id===ae);return fe?fe.name:""},[B]),K=f.useCallback(ae=>Array.isArray(ae)?ae.map(fe=>{if(Array.isArray(fe==null?void 0:fe.seats))return{...fe,seats:K(fe.seats)};if(!fe||typeof fe!="object")return fe;const ne=Array.isArray(fe.passengers)?fe.passengers.map(Xe=>({...Xe,board_at:Xe.board_at??ce(Xe.board_station_id),exit_at:Xe.exit_at??ce(Xe.exit_station_id)})):[];return{...fe,passengers:ne}}):ae,[ce]),Ae=f.useCallback(async(ae,fe)=>{if(!ae)return[];const ne=cs(fe),Xe=`${ae}:${ne}`;if(Be.current.has(Xe))return Be.current.get(Xe);const Je=new URLSearchParams({direction:ne}),et=await fetch(`/api/routes/${ae}/stations?${Je.toString()}`);if(!et.ok)throw new Error("Eroare la citirea staiilor");const ot=await et.json(),wt=Array.isArray(ot)?[...ot].sort((rt,$t)=>(rt.sequence??0)-($t.sequence??0)):[];return Be.current.set(Xe,wt),wt},[]),Se=f.useCallback((ae,fe,ne)=>{if(!ae)return;const{route:Xe,direction:Je,stops:et}=ae;O(Xe),L(Je),Z(et),X(et.map(wt=>wt.name)),Y(""),ue([]),be(null),ve([]),V(null);const ot=Array.isArray(Xe.schedules)?Xe.schedules.filter(wt=>cs(wt.direction)===Je):[];xe(wt=>{const rt=(wt==null?void 0:wt.scheduleId)??(wt==null?void 0:wt.id)??null,$t=typeof(wt==null?void 0:wt.departure)=="string"?wt.departure:typeof(wt==null?void 0:wt.time)=="string"?wt.time:null;return ot.find(Lt=>fe&&(Lt.scheduleId??Lt.id)===fe)||ot.find(Lt=>ne&&Lt.departure===ne)||ot.find(Lt=>rt&&(Lt.scheduleId??Lt.id)===rt)||ot.find(Lt=>$t&&Lt.departure===$t)||ot[0]||null})},[]),De=f.useCallback(ae=>{Y(""),xe(ae)},[]);f.useEffect(()=>{let ae=!1;return(async()=>{try{A(!0),U({done:0,total:0});const ne=await(await fetch("/api/routes")).json();if(!Array.isArray(ne))throw new Error("Invalid response");const Xe=ne.reduce((et,ot)=>{const wt=["tur","retur"].filter(rt=>Array.isArray(ot.schedules)&&ot.schedules.some($t=>cs($t.direction)===rt));return et+wt.length},0);ae||U({done:0,total:Xe});const Je=[];for(const et of ne)for(const ot of["tur","retur"]){if(!(Array.isArray(et.schedules)&&et.schedules.some(rt=>cs(rt.direction)===ot))){ae||U(rt=>({done:rt.done+1,total:Xe||rt.total}));continue}try{const rt=await Ae(et.id,ot),$t=rt.map(Un=>Un.name),Lt=d?$t.indexOf(d):-1,Yn=m?$t.indexOf(m):-1;Lt!==-1&&Yn!==-1&&Lt<Yn&&Je.push({route:et,direction:ot,stops:rt})}catch{}finally{ae||U(rt=>({done:rt.done+1,total:Xe||rt.total}))}}ae||(_(Je),Je.length||Y("Nu exist trasee compatibile pentru staiile selectate."))}catch(fe){ae||(console.error("[MoveToOtherTripPanel] route fetch failed",fe),Y("Eroare la ncrcarea rutelor!"),_([]))}finally{ae||A(!1)}})(),()=>{ae=!0}},[d,m,Ae]),f.useEffect(()=>{if(!E.length)return;const ae=y;let fe=null;p&&(fe=E.find(ne=>ne.route.id===p&&(!ae||ne.direction===ae)),!fe&&ae&&(fe=E.find(ne=>ne.route.id===p))),fe||(fe=E[0]),fe&&Se(fe,b,h)},[E,Se,p,b,h,y]),f.useEffect(()=>{let ae=!1;return(async()=>{if(!(M!=null&&M.id)||!C){Z([]),X([]);return}try{const fe=await Ae(M.id,C);if(ae)return;Z(fe),X(fe.map(ne=>ne.name))}catch(fe){ae||(console.error("[MoveToOtherTripPanel] failed to refresh stops",fe),Z([]),X([]))}})(),()=>{ae=!0}},[M,C,Ae]),f.useEffect(()=>{let ae=!1;if(!Ee||!M||!Te||!j){ve([]),V(null);return}const fe=le(d),ne=le(m);if(fe===null||ne===null){ve([]),V(null);return}const Xe=new URLSearchParams({route_id:String(M.id),route_schedule_id:String(Te),date:tn(j,"yyyy-MM-dd"),board_station_id:String(fe),exit_station_id:String(ne)});return Ge&&Xe.set("time",Ge),ge&&Xe.set("direction",ge),fetch(`/api/seats/${Ee.vehicle_id}?${Xe.toString()}`).then(Je=>Je.json()).then(Je=>{if(ae)return;const et=K(Je);ve(Array.isArray(et)?et:[]);const ot=Fj(Array.isArray(et)?et:Ee.seats||[],d,m,R);V(ot||null)}).catch(()=>{ae||(Y("Eroare la ncrcarea locurilor!"),ve([]),V(null))}),()=>{ae=!0}},[Ee,M,Te,j,d,m,Ge,ge,K,le,R]),f.useEffect(()=>{let ae=!1;if(!M||!Te||!j){ve([]),V(null),ue([]),be(null);return}const fe=le(d),ne=le(m);if(fe===null||ne===null){ve([]),V(null),ue([]),be(null);return}const Xe=tn(j,"yyyy-MM-dd"),Je=new URLSearchParams({schedule_id:String(Te),route_id:String(M.id),date:Xe});return Ge&&Je.set("time",Ge),fetch(`/api/trips/find?${Je.toString()}`).then(et=>et.json()).then(et=>{if(ae)return;if(!(et!=null&&et.id)){ue([]),be(null),Y("Nu exist curs programat!");return}const ot=new URLSearchParams({route_id:String(M.id),route_schedule_id:String(Te),date:Xe,board_station_id:String(fe),exit_station_id:String(ne)});Ge&&ot.set("time",Ge),ge&&ot.set("direction",ge),fetch(`/api/seats?${ot.toString()}`).then(wt=>wt.json()).then(wt=>{if(ae)return;const rt=K(wt);ue(Array.isArray(rt)?rt:[]),Array.isArray(rt)&&rt.length>0?be(rt[0]):be(null)}).catch(()=>{ae||(ue([]),be(null),Y("Eroare la ncrcarea vehiculelor!"))})}).catch(()=>{ae||(Y("Eroare la identificarea cursei!"),ue([]),be(null))}),()=>{ae=!0}},[M,Te,j,d,m,Ge,ge,K,le]);const Ze=f.useMemo(()=>{if(!(M!=null&&M.schedules))return[];if(!C&&!ge)return M.schedules;const ae=cs(C||ge);return M.schedules.filter(fe=>cs(fe.direction)===ae)},[M,C,ge]),Ve=f.useMemo(()=>o0(E.filter(ae=>ae.direction==="tur"),xD),[E]),de=f.useMemo(()=>o0(E.filter(ae=>ae.direction==="retur"),wD),[E]),I=async()=>{if(!se||!M||!Te||!j){Y("Selecteaz dat, rut, or i loc!");return}const ae=le(d),fe=le(m);if(ae===null||fe===null){Y("Staiile selectate nu sunt disponibile pe aceast rut.");return}const ne=tn(j,"yyyy-MM-dd"),Xe=new URLSearchParams({schedule_id:String(Te),route_id:String(M.id),date:ne});Ge&&Xe.set("time",Ge);const Je=await fetch(`/api/trips/find?${Xe.toString()}`),et=await Je.json().catch(()=>({}));if(!Je.ok||!(et!=null&&et.id)){Y("Nu exist aceast curs!");return}const ot={old_reservation_id:u,new_trip_id:et.id,new_seat_id:se.id,board_station_id:ae,exit_station_id:fe,phone:s==null?void 0:s.phone,name:s==null?void 0:s.name};try{const wt=await fetch("/api/reservations/moveToOtherTrip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)}),rt=await wt.json().catch(()=>({}));if(!wt.ok){Y(rt.error||"Eroare la mutare!");return}window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Rezervare mutat cu succes!",type:"success"}})),e(),r==null||r({tripId:et.id,vehicleId:et.vehicle_id,routeId:M.id,date:j,hour:Ge,schedule:te?{...te,direction:ge}:null})}catch(wt){window.dispatchEvent(new CustomEvent("toast",{detail:{message:wt.message||"Eroare la mutare!",type:"error"}}))}},oe=(ae,fe)=>o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:ae}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[P&&fe.length===0&&o.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[o.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent animate-spin"}),o.jsxs("span",{children:["Se ncarc rutele compatibile ",H.done,"/",H.total||""]})]}),fe.map(ne=>{const Xe=(M==null?void 0:M.id)===ne.route.id&&C===ne.direction;return o.jsx("button",{onClick:()=>Se(ne),className:`px-3 py-1 rounded border text-sm ${Xe?"bg-blue-500 text-white border-blue-600":"bg-gray-100 hover:bg-gray-200 border-gray-300 text-gray-800"}`,children:ne.route.name},`${ne.route.id}-${ne.direction}`)}),!P&&fe.length===0&&o.jsx("span",{className:"text-sm text-gray-500",children:"Nicio rut disponibil"})]})]}),he=()=>{if(!M||!Ze.length)return null;const ae=g?new Date(g):null;return o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Ore disponibile"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Ze.filter(fe=>{if(!ae)return!0;const ne=M.id===p,Xe=j.getFullYear()===ae.getFullYear()&&j.getMonth()===ae.getMonth()&&j.getDate()===ae.getDate(),Je=b&&fe.scheduleId===b||!b&&h&&fe.departure===h;return!(ne&&Xe&&Je)}).map(fe=>{const ne=fe.themeColor||"#2563eb",Xe=Te===fe.scheduleId,Je=fe.disabledRun||fe.disabledOnline||fe.tripDisabled;return o.jsx("button",{onClick:()=>!Je&&De(fe),disabled:Je,className:`px-2 py-0 rounded border text-sm ${Xe?"bg-blue-500 text-white border-blue-600":"bg-gray-100 hover:bg-gray-200 border-gray-300 text-gray-800"} ${Je?"line-through text-gray-400 cursor-not-allowed":""}`,style:{backgroundColor:`${ne}20`,borderColor:ne},children:fe.departure},fe.scheduleId)})})]})},_e=f.useMemo(()=>Array.isArray(Pe)&&Pe.length?Pe:Ee!=null&&Ee.seats?Ee.seats:[],[Pe,Ee]);return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl p-0 overflow-y-auto max-h-[90vh] relative",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" Mut pe alt curs"}),o.jsx("button",{className:"text-gray-600 hover:text-black text-2xl",onClick:e,children:""})]}),o.jsxs("div",{className:"p-6 text-gray-700 space-y-4",children:[o.jsx(Yj,{selectedDate:j,setSelectedDate:N}),oe("Tururi",Ve),oe("Retururi",de),he(),W.length>1&&o.jsx("div",{className:"flex flex-wrap gap-2 items-center",children:W.map((ae,fe)=>o.jsxs("button",{className:`px-3 py-1 rounded border text-sm ${ae.vehicle_id===(Ee==null?void 0:Ee.vehicle_id)?"bg-blue-500 text-white border-blue-600":"bg-gray-100 hover:bg-gray-200 border-gray-300 text-gray-800"}`,onClick:()=>be(ae),children:[ae.vehicle_name||ae.name||`Vehicul ${fe+1}`," ",ae.is_primary?"(Principal)":"(Dublur)"]},ae.vehicle_id||fe))}),Te&&_e.length>0&&o.jsxs("div",{className:"mt-6 flex flex-col items-center",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-2",children:"Alege locul:"}),o.jsx(Hj,{seats:_e,stops:R,selectedSeat:se,selectedSeats:se?[se]:[],setSelectedSeats:ae=>V(ae[0]||null),toggleSeat:Ke,selectedRoute:M,boardAt:d,exitAt:m,readOnly:!1}),se&&o.jsxs("div",{className:"mt-2 text-green-600 text-base",children:["Loc selectat: ",se.label]})]}),o.jsx("div",{className:"flex justify-end mt-8",children:o.jsx("button",{className:"bg-green-600 text-white px-8 py-2 rounded-lg hover:bg-green-700 text-lg font-semibold shadow",onClick:()=>T(!0),disabled:!se||!Te||!M,children:"Mut rezervarea"})}),F&&o.jsx("div",{className:"mt-4 text-center text-red-600 font-semibold",children:F})]})]}),o.jsx(Fs,{show:z,title:"Confirm mutarea",message:"Eti sigur c vrei s mui aceast rezervare pe noua curs i loc?",confirmText:"Mut",cancelText:"Renun",onConfirm:async()=>{T(!1),await I()},onCancel:()=>T(!1)})]})}function jD({tripId:e,show:t,onClose:r,onAdded:i,onUpdated:s,existingVehicleIds:u,editTvId:d}){const[m,h]=f.useState([]);f.useEffect(()=>{t&&fetch(`/api/vehicles/${e}/available`).then(g=>g.json()).then(g=>{h(g.filter(b=>!u.includes(b.id)))}).catch(console.error)},[t,u,d]);const p=async g=>{let b,w;d==="main"?(b=`/api/trips/${e}/vehicle`,w={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({newVehicleId:g})}):d?(b=`/api/trips/${e}/vehicles/${d}`,w={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({newVehicleId:g})}):(b=`/api/trips/${e}/vehicles`,w={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vehicle_id:g})});const S=await fetch(b,w);if(!S.ok){const y=await S.json().catch(()=>({}));alert(y.error||"Eroare la salvare");return}if(d==="main")s(g);else{const y=await S.json();s(y)}r()};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-xl",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:d?"Modific main":"Adaug dublur"}),o.jsxs("ul",{className:"space-y-2 max-h-56 overflow-auto",children:[m.map(g=>o.jsxs("li",{className:"flex justify-between",children:[o.jsxs("span",{children:[g.name," (",g.plate_number||g.plate,")"]}),o.jsx("button",{onClick:()=>p(g.id),className:"px-2 py-1 bg-blue-600 text-white rounded",children:d?"Modific":"Adaug"})]},g.id)),m.length===0&&o.jsx("li",{children:"Nu mai sunt vehicule disponibile"})]}),o.jsx("button",{onClick:r,className:"mt-4 px-3 py-1 bg-gray-300 rounded",children:"Anuleaz"})]})}):null}const _D={blockPastReservations:!0,publicMinNoticeMinutes:0,publicMaxAdvanceMinutes:0};function ND({userRole:e,user:t}){var Al,Tl;const[r,i]=f.useState(""),[s,u]=f.useState(null),d=typeof e=="string"?e.toLowerCase():"",m=["admin","operator_admin","agent"].includes(d)?"agent":"online",[h,p]=f.useState(null),[g,b]=f.useState(!1),[w,S]=f.useState(null),[y,j]=f.useState(!1),N=f.useRef(new Set),E=f.useRef(null),[_,M]=f.useState(new Date),[O,C]=f.useState([]),[L,B]=f.useState([]),[Z,R]=f.useState("grid"),[X,te]=f.useState(!1),[xe,Pe]=f.useState(!1),[ve,se]=f.useState(!1),[V,F]=f.useState(!1),Y=f.useRef([]),z=f.useRef(null),T=f.useRef(null);f.useEffect(()=>{let D=!1;return(async()=>{try{const Q=await fetch("/api/online-settings",{credentials:"include"});if(!Q.ok)throw new Error(`HTTP ${Q.status}`);const J=await Q.json();if(D)return;const q=Number((J==null?void 0:J.publicMaxAdvanceMinutes)!=null?J.publicMaxAdvanceMinutes:(J==null?void 0:J.publicMaxDaysAhead)!=null?Number(J.publicMaxDaysAhead)*24*60:0),ee=Number.isFinite(q)?Math.max(0,Math.floor(q)):0;p({blockPastReservations:!!(J!=null&&J.blockPastReservations),publicMinNoticeMinutes:Number(J==null?void 0:J.publicMinNoticeMinutes)||0,publicMaxAdvanceMinutes:ee})}catch(Q){D||(console.warn("Nu am putut ncrca setrile online:",Q),p({..._D}))}finally{D||b(!0)}})(),()=>{D=!0}},[]);const[P,A]=f.useState({}),[H,U]=f.useState({}),[W,ue]=f.useState({}),[Ee,be]=f.useState(!1),Be=f.useRef(null),Te=f.useRef(null),Ge=f.useRef({}),[ge,Ke]=f.useState(null),le=f.useRef(null),ce=f.useRef(null),[K,Ae]=f.useState(null),[Se,De]=f.useState([]),[Ze,Ve]=f.useState(""),[de,I]=f.useState("info"),oe=f.useRef(null),he=f.useCallback((D,G="info",Q=3e3)=>{Ve(D),I(G),oe.current&&(clearTimeout(oe.current),oe.current=null),Q>0&&(oe.current=setTimeout(()=>{Ve(""),oe.current=null},Q))},[]);f.useEffect(()=>()=>{oe.current&&(clearTimeout(oe.current),oe.current=null)},[]);const _e=f.useMemo(()=>{var Q,J;if(!Array.isArray(O)||O.length<2)return null;const D=((Q=O[0])==null?void 0:Q.station_id)??null,G=((J=O[O.length-1])==null?void 0:J.station_id)??null;return D!=null&&G!=null?`${D}|${G}`:null},[O]);f.useEffect(()=>{_e&&(B([]),A({}),U({}),sa(!1))},[_e]),f.useEffect(()=>{Y.current=L},[L]),f.useEffect(()=>{!X&&xe&&Pe(!1)},[X,xe]),f.useEffect(()=>{let D,G=!1;const Q=ee=>{if(!ee||G)return;const re=ee.phone!=null?String(ee.phone).trim():"",we=ee.digits!=null?String(ee.digits).replace(/\D/g,"").slice(0,20):"";if(!(re||we))return;const pe=ee.id!=null?String(ee.id):String(ee.received_at||Date.now());le.current!==pe&&(le.current=pe,Ke({id:pe,phone:re||we,digits:we,extension:ee.extension!=null?String(ee.extension):null,source:ee.source!=null?String(ee.source):null,received_at:ee.received_at||new Date().toISOString()}))},J=async()=>{try{const ee=await fetch("/api/incoming-calls/last",{credentials:"include"});if(!ee.ok){(ee.status===401||ee.status===403)&&ce.current&&(clearInterval(ce.current),ce.current=null);return}const re=await ee.json();!G&&(re!=null&&re.call)&&Q(re.call)}catch{}},q=()=>{ce.current||(ce.current=setInterval(J,1e4))};if(J(),q(),typeof window<"u"&&"EventSource"in window){const ee="https://api.pris-com.ro";D=new EventSource(`${ee}/api/incoming-calls/stream`,{withCredentials:!0}),D.addEventListener("call",re=>{try{const we=JSON.parse(re.data);Q(we)}catch(we){console.warn("[incoming-call] Nu am putut parsa payload-ul din SSE",we)}}),D.onerror=()=>{q()}}return()=>{G=!0,D&&D.close(),ce.current&&(clearInterval(ce.current),ce.current=null)}},[]),f.useEffect(()=>{if(!ge)return;const D=String(ge.digits||ge.phone||"").replace(/\D/g,""),G=ge.phone||D;if(!G)return;let Q=!1;return(async()=>{let q="",ee=null,re=0;try{const Ie=await fetch(`/api/people/history?phone=${encodeURIComponent(D)}`,{credentials:"include"});if(Ie.ok){const pe=await Ie.json();if(pe!=null&&pe.exists){q=pe.name||"";const Ce=Array.isArray(pe.history)?pe.history[0]:null,$e=(Ce==null?void 0:Ce.board_name)||(Ce==null?void 0:Ce.board_at)||"",pt=(Ce==null?void 0:Ce.exit_name)||(Ce==null?void 0:Ce.exit_at)||"";$e&&pt&&(ee={board:$e,exit:pt})}}}catch{}try{const Ie=await fetch(`/api/blacklist/check?phone=${encodeURIComponent(D)}`,{credentials:"include"});if(Ie.ok){const pe=await Ie.json(),Ce=Array.isArray(pe==null?void 0:pe.no_shows)?pe.no_shows.length:Array.isArray(pe==null?void 0:pe.noShows)?pe.noShows.length:0,$e=Number((pe==null?void 0:pe.no_shows_count)??(pe==null?void 0:pe.noShowsCount)??Ce);Number.isFinite($e)&&(re=$e)}}catch{}if(Q)return;let we=`Ultimul apel: ${G}.`;if(q){const Ie=ee?` Ultimul segment rezervat a fost intre ${ee.board} si ${ee.exit}.`:"",pe=re>0?` Atentie, are ${re} neprezentari!`:"";we=`Ultimul apel: ${q} - ${G}.${Ie}${pe}`}he(we,"info",2500)})(),()=>{Q=!0}},[ge,Ve,I]);const ae=f.useCallback(D=>{if(!ge)return!1;const G=String(ge.digits||ge.phone||"").replace(/\D/g,""),Q=ge.phone||G;if(!Q)return!1;const J=L.find(re=>re.id===D)||null,q=(J==null?void 0:J.label)||"";let ee=!1;if(A(re=>{const we=re[D]||{};if(we.phone===Q)return re;const Ie={...re,[D]:{...we,phone:Q,person_id:null,segmentAutoAppliedPhone:null}};return ee=!0,Ie}),ee){const re=q?` (loc ${q})`:"";he(`Numr preluat din ultimul apel${re}: ${Q}`,"info",2500)}return ee},[ge,L,A,Ve,I]);f.useEffect(()=>{if(!V)return;const D=G=>{G.key==="Escape"&&(F(!1),R("grid"))};return window.addEventListener("keydown",D),()=>{window.removeEventListener("keydown",D)}},[V]);const fe=f.useCallback(()=>{if(!K)return;const D=new Set;(Array.isArray(Y.current)?Y.current:[]).forEach(Q=>{const J=Number(Q==null?void 0:Q.id);Number.isFinite(J)&&D.add(J)}),Object.entries(Ge.current||{}).forEach(([Q,J])=>{if(J!=null&&J.isMine){const q=Number(Q);Number.isFinite(q)&&D.add(q)}}),D.forEach(Q=>{fetch(`/api/intents/${K}/${Q}`,{method:"DELETE",credentials:"include"}).catch(()=>{})})},[K]),[ne,Xe]=f.useState(null),Je=f.useCallback((D,G)=>{if(!D||!Number.isFinite(G))return null;const Q=String(D).trim().match(/^(\d{1,2}):(\d{2})/);if(!Q)return null;const J=Number(Q[1])*60+Number(Q[2]);if(!Number.isFinite(J))return null;const q=(J+G+24*60)%(24*60),ee=String(Math.floor(q/60)).padStart(2,"0"),re=String(q%60).padStart(2,"0");return`${ee}:${re}`},[]),et=f.useMemo(()=>O.map(D=>D.name),[O]),ot=(ge==null?void 0:ge.received_at)||null,wt=f.useMemo(()=>{if(!ot)return"";try{return tn(new Date(ot),"HH:mm:ss")}catch{return""}},[ot]),[rt,$t]=f.useState(null),[Lt,Yn]=f.useState(null),[Un,ea]=f.useState(0),bt=(rt==null?void 0:rt.departure)??null,mt=(rt==null?void 0:rt.scheduleId)??(rt==null?void 0:rt.id)??null,gt=(rt==null?void 0:rt.direction)??Lt??null,Zt=mt!=null,qn=f.useMemo(()=>{const D=new Map;if(!Array.isArray(O)||!O.length)return D;let G=0;return O.forEach((Q,J)=>{const q=J===0?0:G,ee=Number(Q.duration_min);Number.isFinite(ee)&&ee>0&&(G+=ee);const re=typeof Q.public_note=="string"?Q.public_note.trim():"",we=Q.public_latitude!=null?Number(Q.public_latitude):null,Ie=Q.public_longitude!=null?Number(Q.public_longitude):null;D.set(Q.name,{stationId:Number(Q.station_id),note:re||null,offsetMinutes:q,time:bt?Je(bt,q):null,latitude:Number.isFinite(we)?we:null,longitude:Number.isFinite(Ie)?Ie:null})}),D},[O,bt,Je]),Ft=f.useMemo(()=>{const D=new Map;for(const G of O)D.set(G.name,G.station_id);return D},[O]),jn=f.useMemo(()=>{const D=new Map;for(const G of O)D.set(String(G.station_id),G.name);return D},[O]),nn=f.useCallback(D=>D?Ft.get(D)??null:null,[Ft]),Qn=f.useCallback(D=>D==null?"":jn.get(String(D))??"",[jn]),Yt=f.useCallback(async()=>{if(!K)return ue({}),be(!1),{};try{const D=await fetch(`/api/intents?trip_id=${K}`,{credentials:"include"});if(!D.ok){if(D.status===404||D.status===400)return ue({}),be(!0),{};throw new Error("Eroare la ncrcarea intentelor")}const G=await D.json();if(!Array.isArray(G))return ue({}),be(!0),{};const Q=G.reduce((ee,re)=>{const we=Number(re==null?void 0:re.seat_id);return Number.isFinite(we)&&(ee[we]={expires_at:re.expires_at||null,isMine:re.is_mine===1}),ee},{});ue(Q),Ge.current=Q,be(!0);const J=Object.keys(Q).filter(ee=>{var re;return(re=Q==null?void 0:Q[ee])==null?void 0:re.isMine}).map(ee=>Number(ee)).filter(Number.isFinite),q=Array.isArray(Y.current)?Y.current:[];if(J.length>0&&q.length===0){const ee=Array.isArray(Se)?Se.filter(re=>J.includes(Number(re.id))):[];if(ee.length>0){B(ee);const re=Array.isArray(O)?O.map(pe=>pe.name):[],we=re[0]||"",Ie=re[re.length-1]||"";A(pe=>{const Ce={...pe||{}};return ee.forEach($e=>{const pt=$e==null?void 0:$e.id;pt&&(Ce[pt]||(Ce[pt]={name:"",phone:"",board_at:we,exit_at:Ie,observations:"",payment_method:"none",origin:"manual"}))}),Ce})}}return Q}catch(D){return console.error("Eroare la refresh intent",D),ue({}),Ge.current={},be(!0),{}}},[K,Se,O,B,A]);f.useEffect(()=>{if(Be.current&&(clearInterval(Be.current),Be.current=null),be(!1),!K){ue({}),Ge.current={};return}Yt();const D=setInterval(()=>{Yt()},2500);return Be.current=D,()=>{clearInterval(D),Be.current=null}},[K,Yt]),f.useEffect(()=>{const D=K,G=()=>{if(!D)return;const Q=Object.entries(Ge.current||{}).filter(([,J])=>J==null?void 0:J.isMine);Q.length&&Q.forEach(([J])=>{fetch(`/api/intents/${D}/${J}`,{method:"DELETE",credentials:"include",keepalive:!0}).catch(()=>{})})};return window.addEventListener("pagehide",G),()=>{window.removeEventListener("pagehide",G),G()}},[K]);const lt=f.useCallback(async()=>{if(!K||L.length===0)return!0;const D=await Yt(),G=D&&typeof D=="object"?D:Ge.current||{},Q=new Set;return Object.entries(G).forEach(([J,q])=>{const ee=Number(J);Number.isFinite(ee)&&(q==null?void 0:q.isMine)===!1&&L.some(re=>re.id===ee)&&Q.add(ee)}),Q.size===0?!0:(B(J=>J.filter(q=>!Q.has(q.id))),A(J=>{const q={...J};return Q.forEach(ee=>{delete q[ee]}),q}),he("Unele locuri sunt n curs de rezervare de alt agent i au fost scoase din selecie.","error",4e3),!1)},[K,L,Yt]),An=()=>{var D;return typeof window<"u"&&((D=window.crypto)!=null&&D.randomUUID)?window.crypto.randomUUID():`res-${Date.now()}-${Math.random().toString(36).slice(2,10)}`},xn=f.useCallback(D=>Array.isArray(D)?D.map(G=>{if(G&&Array.isArray(G.seats))return{...G,seats:xn(G.seats)};if(!G||typeof G!="object")return G;const Q=Array.isArray(G.passengers)?G.passengers.map(J=>{const q=Number.isFinite(Number(J==null?void 0:J.version))?Number(J.version):null;return{...J,version:q,board_at:J.board_at??Qn(J.board_station_id),exit_at:J.exit_at??Qn(J.exit_station_id)}}):[];return{...G,passengers:Q}}):D,[Qn]),kr=f.useCallback(D=>{const G=Array.isArray(D)?D.map(Q=>({...Q,board_at:Qn(Q.board_station_id),exit_at:Qn(Q.exit_station_id)})):[];fu(G)},[Qn]),Oa=!1,Cr=Z==="grid",La=!Cr||Se.length===0||ve,[ke,nt]=f.useState([]),[We,st]=f.useState(!1),ze=f.useRef(null),Fe=f.useRef(null),Qe=f.useRef(null);f.useRef(tn(new Date,"yyyy-MM-dd"));const[ut,ct]=f.useState(!1),[Xt,Nn]=f.useState(!1),[wn,In]=f.useState(""),[pa,vr]=f.useState({}),[On,Jn]=f.useState({width:260,height:150}),[sr,hl]=f.useState(!1),[Mi,Ja]=f.useState(11),[ei,Js]=f.useState("#ffffff"),[bs,ml]=f.useState(11),[er,pl]=f.useState("#ffffff"),[eo,Oi]=f.useState(!1);f.useEffect(()=>{let D=!1;return(async()=>{try{const Q=await fetch("/api/user/preferences",{credentials:"include"});if(!Q.ok){console.warn("Nu pot ncrca /api/user/preferences:",Q.status),j(!0);return}const J=await Q.json();if(D||!J||typeof J!="object"){j(!0);return}S(J);const q=J.seatmap&&typeof J.seatmap=="object"?J.seatmap:{},ee=q.narrow&&typeof q.narrow=="object"?q.narrow:{},re=q.wide&&typeof q.wide=="object"?q.wide:{};typeof ee.textSize=="number"&&Ja(ee.textSize),typeof ee.textColor=="string"&&Js(ee.textColor),typeof re.textSize=="number"&&ml(re.textSize),typeof re.textColor=="string"&&pl(re.textColor),(typeof re.width=="number"||typeof re.height=="number")&&Jn(we=>({width:typeof re.width=="number"?re.width:we.width,height:typeof re.height=="number"?re.height:we.height})),j(!0)}catch(Q){console.error("Eroare la ncrcarea preferinelor utilizatorului:",Q),j(!0)}})(),()=>{D=!0}},[]);const ys=f.useCallback(D=>{S(G=>{const Q=G&&typeof G=="object"?G:{},J=Q.seatmap&&typeof Q.seatmap=="object"?Q.seatmap:{},q={...J};D.narrow&&(q.narrow={...J.narrow||{},...D.narrow}),D.wide&&(q.wide={...J.wide||{},...D.wide});const ee={...Q,seatmap:q};return fetch("/api/user/preferences",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ee)}).catch(re=>{console.error("Eroare la salvarea /api/user/preferences:",re)}),ee})},[]);f.useEffect(()=>{y&&ys({narrow:{textSize:Mi,textColor:ei}})},[Mi,ei,y,ys]),f.useEffect(()=>{y&&ys({wide:{textSize:bs,textColor:er,width:On.width,height:On.height}})},[bs,er,On.width,On.height,y,ys]);const Li=X?bs:Mi,iu=X?er:ei,Ar=D=>{X?ml(D):Ja(D)},gl=D=>{X?pl(D):Js(D)},[su,vl]=f.useState(!1),[ti,bl]=f.useState([]),[ta,Er]=f.useState(null),[Rt,ki]=f.useState(null),yl=f.useMemo(()=>{if(!(Rt!=null&&Rt.date)||!(Rt!=null&&Rt.time))return null;const[D,G,Q]=String(Rt.date).split("-").map(Number),J=String(Rt.time).split(":"),q=Number(J[0]),ee=Number(J[1]);return[D,G,Q,q,ee].every(re=>Number.isFinite(re))?new Date(D,G-1,Q,q,ee,0,0):null},[Rt==null?void 0:Rt.date,Rt==null?void 0:Rt.time]),[ni,to]=f.useState(null),[Tg,na]=f.useState(!1),ga=f.useRef([]);f.useEffect(()=>{Ge.current=W},[W]),f.useEffect(()=>{Z!=="grid"&&X&&te(!1)},[Z,X]),f.useEffect(()=>{Z!=="grid"&&eo&&Oi(!1)},[Z,eo]),f.useCallback((D,G)=>{Jn(Q=>{const J=D==="width"?{min:130,max:360}:{min:100,max:260},q=Math.min(J.max,Math.max(J.min,Q[D]+G));return q===Q[D]?Q:{...Q,[D]:q}})},[]);const[_t,br]=f.useState(null),[or,ra]=f.useState(null),[Ai,va]=f.useState(null),[Tn,tr]=f.useState(null),[ou,no]=f.useState(null),[aa,xl]=f.useState([]),[ro,wl]=f.useState(!1),[ao,xs]=f.useState(null),Sl=f.useCallback((D="")=>{var Os;if(!Array.isArray(Se)||Se.length===0)return null;const G=X?On.width:150,Q=X?On.height:130,J=Number(X?bs:Mi)||11,q=(X?er:ei)||"#ffffff",ee=`600 ${J+1}px "Inter", sans-serif`,re=`600 ${J+1}px "Inter", sans-serif`,we=`${J}px "Inter", sans-serif`,Ie=`${Math.max(J-1,8)}px "Inter", sans-serif`,pe=`italic ${J}px "Inter", sans-serif`,Ce=5,$e=16,pt=10,yt=Math.max(...Se.map(it=>it.seat_col||1)),vn=Math.max(...Se.map(it=>it.row||0)),on=G*yt+Ce*(yt-1)+$e*2,Ot=$e+28,tt=Ot+Q*(vn+1)+Ce*vn+$e,at=document.createElement("canvas");at.width=on,at.height=tt;const Ye=at.getContext("2d");if(!Ye)return null;Ye.fillStyle="#f3f4f6",Ye.fillRect(0,0,on,tt),Ye.fillStyle="#111827",Ye.font='600 16px "Inter", sans-serif',Ye.textAlign="left";const ln=12;let nr=ln;const Pa=`${tn(_,"dd.MM.yyyy")}, ${(ne==null?void 0:ne.name)||""}, ${((Os=rt==null?void 0:rt.direction)==null?void 0:Os.toUpperCase())||""} ${(rt==null?void 0:rt.departure)||""}`;Ye.fillText(Pa,ln,nr),nr+=20,Ye.textBaseline="top",Ye.textAlign="left";const ur=new Set(L.map(it=>it.id)),Dr=G-pt*2,oi=(it,Gt)=>{if(!it)return"";const bn="";if(Ye.font=Gt,Ye.measureText(it).width<=Dr)return it;let cn=it;for(;cn.length>1&&Ye.measureText(cn+bn).width>Dr;)cn=cn.slice(0,-1);return`${cn}${bn}`},Dl=(it,Gt,bn,cn,Ln,Hr=12)=>{const Or=Math.min(Hr,cn/2,Ln/2);it.beginPath(),it.moveTo(Gt+Or,bn),it.lineTo(Gt+cn-Or,bn),it.quadraticCurveTo(Gt+cn,bn,Gt+cn,bn+Or),it.lineTo(Gt+cn,bn+Ln-Or),it.quadraticCurveTo(Gt+cn,bn+Ln,Gt+cn-Or,bn+Ln),it.lineTo(Gt+Or,bn+Ln),it.quadraticCurveTo(Gt,bn+Ln,Gt,bn+Ln-Or),it.lineTo(Gt,bn+Or),it.quadraticCurveTo(Gt,bn,Gt+Or,bn),it.closePath()},Br={driver:"#4b5563",full:"#dc2626",held:"#f97316",partial:"#eab308",selected:"#3b82f6",available:"#22c55e"},li=it=>(it==null?void 0:it.payment_status)==="paid"?(it==null?void 0:it.payment_method)==="cash"?"":(it==null?void 0:it.payment_method)==="card"&&(it==null?void 0:it.booking_channel)==="online"?"":((it==null?void 0:it.payment_method)==="card",""):"",vo=it=>{if(typeof it!="number"||Number.isNaN(it))return null;const Gt=Math.round(it*100)/100;return`${Number.isInteger(Gt)?Gt.toFixed(0):Gt.toFixed(2)} lei`};return Se.forEach(it=>{const Gt=(it.seat_col||1)-1,bn=it.row||0,cn=$e+Gt*(G+Ce),Ln=Ot+bn*(Q+Ce),Hr=(it.label||"").toLowerCase(),Or=Hr.includes("ofer")||Hr.includes("sofer")||it.label==="ofer"||it.seat_type==="driver",Rl=Or||Hr.includes("ghid")||it.label==="Ghid"||it.seat_type==="guide",bo=it.status,Dn=W==null?void 0:W[it.id],_n=(Dn==null?void 0:Dn.isMine)===!1,Kt=(Dn==null?void 0:Dn.isMine)===!0,za=ur.has(it.id),Fr=(ni==null?void 0:ni.id)===it.id;let $a=Br.available;Rl?$a=Br.driver:bo==="full"?$a=Br.full:_n?$a=Br.held:bo==="partial"?$a=Br.partial:(za||Kt)&&($a=Br.selected),Dl(Ye,cn,Ln,G,Q,18),Ye.fillStyle=$a,Ye.fill(),(za||Fr)&&(Ye.lineWidth=4,Ye.strokeStyle=Fr?"#facc15":"#fef3c7",Ye.stroke()),Ye.save(),Ye.fillStyle="rgba(255,255,255,0.18)",Ye.font='800 64px "Inter", sans-serif',Ye.textAlign="center",Ye.textBaseline="middle",Ye.fillText(it.label||"",cn+G/2,Ln+Q/2),Ye.restore(),Ye.textAlign="left",Ye.textBaseline="top";const xa=(it.passengers||[]).filter(Dt=>!Dt.status||Dt.status==="active"),Vi=xa[0],yo=cn+pt,wa=cn+G-pt;let Vn=Ln+pt;const Pl=(Dt,wr=we)=>{if(!Dt)return;const Rr=oi(String(Dt),wr);Ye.font=wr,Ye.fillStyle=q,Ye.textAlign="right",Ye.fillText(Rr,wa,Vn),Ye.textAlign="left",Vn+=J+4},Ls=Dt=>{if(!sr||!Dt)return;const wr=String(Dt).split(/\r?\n/);Ye.fillStyle=q,Ye.font=Ie,Ye.textAlign="right",wr.forEach((Rr,Sa)=>{const zl=oi(`${Sa===0?" ":"   "}${Rr}`,Ie);Ye.fillText(zl,wa,Vn),Vn+=J+2}),Ye.textAlign="left"};Vi&&(Ye.font=we,Ye.fillStyle=q,Ye.fillText(li(Vi),yo,Vn),Ye.textAlign="right",Ye.font=ee,Ye.fillText(oi(Vi.name||"(fr nume)",ee),wa,Vn),Ye.textAlign="left",Vn+=J+4),Or&&D&&Pl(D,ee);const xo=Dt=>{Dt!=null&&Dt.phone&&Pl(Dt.phone,we);const wr=typeof Dt.amount=="number"?Dt.amount:typeof Dt.price=="number"?Dt.price:typeof Dt.price_value=="number"?Dt.price_value:typeof Dt.total_price=="number"?Dt.total_price:Number(Dt.amount??Dt.price??Dt.price_value??Dt.total_price),Rr=vo(wr)||"-";Ye.font=we,Ye.fillStyle=q,Ye.fillText(oi(Rr,we),yo,Vn),Ye.font=pe,Ye.textAlign="right",Ye.fillText(`${Dt.board_at}  ${Dt.exit_at}`,wa,Vn),Ye.textAlign="left",Vn+=J+4,Ls(Dt.observations)};Vi&&xo(Vi),xa.length>1&&(Vn+=4,xa.slice(1).forEach(Dt=>{Ye.font=we,Ye.fillStyle=q,Ye.fillText(li(Dt),yo,Vn),Ye.textAlign="right",Ye.font=re,Ye.fillText(oi(Dt.name||"(fr nume)",re),wa,Vn),Ye.textAlign="left",Vn+=J+4,xo(Dt)})),_n&&(Ye.fillStyle="rgba(0,0,0,0.45)",Ye.fillRect(cn,Ln,G,Q),Ye.fillStyle="#ffffff",Ye.font='600 12px "Inter", sans-serif',Ye.textAlign="center",Ye.fillText("Rezervare n curs",cn+G/2,Ln+Q/2-6),Ye.textAlign="left")}),at},[W,X,ni,Se,L,sr,On,Mi,bs,ei,er]),yr=f.useCallback(async(D="")=>{if(Z!=="grid"){he("Exportul este disponibil doar n diagrama clasic.","warning",2500);return}if(!T.current||!Array.isArray(Se)||Se.length===0){he("Nu exist o diagram disponibil pentru export.","error",2500);return}try{se(!0);const G=Sl(D);if(!G)throw new Error("Canvas indisponibil");const Q=ta!=null&&ta.name?`diagrama-${ta.name}`:"diagrama",J=new Date().toISOString().replace(/[:.]/g,"-"),q=`${Q}-${J}.png`,ee=G.toDataURL("image/png"),re=document.createElement("a");re.href=ee,re.download=q,document.body.appendChild(re),re.click(),document.body.removeChild(re)}catch(G){console.error("Export SeatMap error",G),he("Exportul a euat. ncearc din nou.","error",2500)}finally{se(!1)}},[Sl,T,Z,Se,Ve,I,ta]),[Qt,ia]=f.useState([]),[sn,Mr]=f.useState(null),[jl,ka]=f.useState(!1),[Ti,Di]=f.useState(null),[_l,Nl]=f.useState([]),$f=f.useMemo(()=>{const D=new Map;return _l.forEach(G=>{const Q=Number(G==null?void 0:G.trip_vehicle_id);Number.isFinite(Q)&&D.set(Q,(G==null?void 0:G.employee_name)||"")}),D},[_l]),lu=f.useMemo(()=>{var Q;if(!Array.isArray(Qt)||Qt.length===0)return null;if(sn==="main")return((Q=Qt.find(J=>J.is_primary))==null?void 0:Q.trip_vehicle_id)??null;if(sn==null)return null;const D=Number(sn);if(!Number.isFinite(D))return null;const G=Qt.find(J=>J.trip_vehicle_id===D);return(G==null?void 0:G.trip_vehicle_id)??null},[sn,Qt]),io=lu&&$f.get(lu)||"",so=f.useMemo(()=>{if(!Array.isArray(Qt)||Qt.length===0)return null;if(sn==="main")return Qt.find(G=>G.is_primary)??null;const D=Number(sn);return Number.isFinite(D)?Qt.find(G=>G.trip_vehicle_id===D)??null:null},[sn,Qt]),ws=f.useMemo(()=>{if(so&&so.boarding_started!=null)return!!so.boarding_started;const D=Array.isArray(Qt)?Qt.find(G=>G.is_primary):null;return D&&D.boarding_started!=null?!!D.boarding_started:!!(Rt!=null&&Rt.boarding_started)},[so,Qt,Rt]),ri=!!g&&!!(h!=null&&h.blockPastReservations)&&yl instanceof Date&&yl.getTime()<Date.now(),cu=f.useMemo(()=>ri?"Rezervrile noi nu sunt disponibile pentru curse care au plecat deja.":ws?"mbarcarea a nceput pentru aceast curs. Nu se mai pot face rezervri noi din aplicaia intern.":null,[ri,ws]);f.useEffect(()=>{if(!K||!_||!mt){Nl([]);return}const D=new AbortController,G=tn(_,"yyyy-MM-dd"),Q=new URLSearchParams({date:G}),J=(rt==null?void 0:rt.operatorId)??null;return J&&Q.set("operator_id",J),fetch(`/api/trip_assignments?${Q}`,{signal:D.signal}).then(q=>{if(!q.ok)throw new Error(`HTTP ${q.status}`);return q.json()}).then(q=>{D.signal.aborted||Nl(Array.isArray(q)?q:[])}).catch(q=>{(q==null?void 0:q.name)!=="AbortError"&&(console.error("Eroare la ncrcarea asignrilor de oferi",q),Nl([]))}),()=>D.abort()},[_,mt,rt==null?void 0:rt.operatorId,K]);const[oo,uu]=f.useState(""),[Uf,sa]=f.useState(!1),Ri=f.useRef(1),[lr,Ss]=f.useState(null);f.useEffect(()=>{let D=!1;return(async()=>{try{const Q=await fetch("/api/fiscal-settings");if(!Q.ok)return;const J=await Q.json().catch(()=>({}));D||uu(typeof(J==null?void 0:J.receipt_note)=="string"?J.receipt_note:"")}catch(Q){console.error("Eroare la citirea setrilor fiscale",Q)}})(),()=>{D=!0}},[]),f.useEffect(()=>{sa(!1)},[ne==null?void 0:ne.id,mt,_,_e]),f.useEffect(()=>{Ri.current=1},[ne==null?void 0:ne.id,mt,_,_e]),f.useEffect(()=>{const D=L.reduce((G,Q)=>{const J=P==null?void 0:P[Q.id];return J!=null&&J.reservation_id?G:G+1},0);D>0&&(Ri.current=D)},[L,P]);const[If,du]=f.useState(!1),[Vf,Bf]=f.useState(""),[Dg,Hf]=f.useState(null),oa=f.useRef(null),Aa=f.useCallback(D=>{if(!D)return;oa.current&&(clearInterval(oa.current),oa.current=null);const G=async()=>{try{const Q=await fetch(`/api/reservations/${D}/payments/status`,{credentials:"include"}),J=await Q.json().catch(()=>({}));if(!Q.ok){console.error("[payments/status] eroare:",J);return}const q=(J==null?void 0:J.payment)||null;if(Hf(q),!q)return;const ee=q.status,re=q.receipt_status,we=q.payment_method==="card"?"cu cardul":q.payment_method==="cash"?"cash":"necunoscut",Ie=typeof q.amount=="number"?`${q.amount.toFixed(2)} RON`:"",pe=q.error_message||"";if(ee==="paid"||ee==="failed"||ee==="refunded"||ee==="voided"||re==="ok"||re==="error_needs_retry"){if(oa.current&&(clearInterval(oa.current),oa.current=null),ee==="paid"&&re==="ok")he(`Plat ${we} ${Ie}  finalizat  (bon OK)`,"success",1e4);else if(ee==="failed"){const $e=[`Plata ${we} ${Ie} a euat.`,pe?`Eroare: ${pe}`:""].filter(Boolean).join(`
`);he($e,"error",1e4)}else if(re==="error_needs_retry"){const $e=[`POS OK ${Ie}, dar bonul fiscal are eroare.`,"Este necesar reemiterea bonului (retry fiscal)."].join(`
`);he($e,"warning",1e4)}}}catch(Q){console.error("[payments/status] eroare la polling",Q)}};G(),oa.current=setInterval(G,500)},[he]);f.useEffect(()=>()=>{oa.current&&(clearInterval(oa.current),oa.current=null)},[]);const[js,fu]=f.useState([]),[Ff,_s]=f.useState(!1),hu=(js==null?void 0:js.length)??0,Cl=hu===1?"rezervare conflictual":"rezervri conflictuale",Ta=Qt,Yf=()=>{if(L.length<2)return;const D=L[0].id,G=P[D];G&&(A(Q=>{const J={...Q},q=JSON.parse(JSON.stringify(G)),{discount:ee,discount_type_id:re,price:we,price_list_id:Ie,pricing_category_id:pe,...Ce}=q;return L.slice(1).forEach($e=>{J[$e.id]={...Ce,discount_type_id:null,price:null,price_list_id:null}}),J}),U(Q=>{const J={...Q};return L.slice(1).forEach(q=>{J[q.id]=null}),J}))},mu=async()=>{var Q;const D=Ll();if(!r||D<=0){u(null);return}const G={code:r,route_id:(ne==null?void 0:ne.id)||null,route_schedule_id:mt,date:tn(_,"yyyy-MM-dd"),time:bt,channel:m,price_value:D,phone:(((Q=aa==null?void 0:aa[0])==null?void 0:Q.phone)||"").trim()||null};try{const q=await(await fetch("/api/promo-codes/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})).json();q.valid?(u({promo_code_id:q.promo_code_id,code:r.toUpperCase(),discount_amount:q.discount_amount,combinable:!!q.combinable}),he(`Cod aplicat: -${q.discount_amount} lei`,"success",2500)):(u(null),he("Cod invalid","error",3e3))}catch{u(null),he("Eroare la validare cod","error",3e3)}},[cr,pu]=f.useState(null),[gu,lo]=f.useState(!1),[Pi,zi]=f.useState(!1),[El,co]=f.useState([]),[Ml,Ol]=f.useState([]),[Da,ba]=f.useState(null),la=f.useMemo(()=>Array.isArray(Da)&&Da.length>0?Da:Ml,[Da,Ml]),$i=((Al=la[0])==null?void 0:Al.id)??null;f.useEffect(()=>{if(!(ne!=null&&ne.id)){co([]);return}const D=new URLSearchParams;if(mt?D.set("route_schedule_id",mt):(bt&&D.set("time",bt),gt&&D.set("direction",gt)),!D.has("route_schedule_id")&&!D.has("time")){co([]);return}fetch(`/api/routes/${ne.id}/discounts?${D.toString()}`).then(G=>G.ok?G.json():[]).then(co).catch(()=>co([]))},[ne,mt,bt,gt]),f.useEffect(()=>{if(!(ne!=null&&ne.id)){ba(null);return}const D=new URLSearchParams;if(mt?D.set("route_schedule_id",String(mt)):(bt&&D.set("time",bt),gt&&D.set("direction",gt)),!D.toString()){ba(null);return}const G=new AbortController;return fetch(`/api/routes/${ne.id}/pricing-categories?${D.toString()}`,{signal:G.signal}).then(Q=>Q.ok?Q.json():[]).then(Q=>{G.signal.aborted||(Array.isArray(Q)&&Q.length>0?ba(Q):ba(null))}).catch(Q=>{G.signal.aborted||(console.error("Eroare la fetch categorii pe programare",Q),ba(null))}),()=>G.abort()},[ne,mt,bt,gt]),f.useEffect(()=>{if(!(ne!=null&&ne.id)){C([]);return}const D=new URLSearchParams;mt?D.set("route_schedule_id",mt):gt&&D.set("direction",gt),D.toString()&&(async()=>{try{const G=await fetch(`/api/routes/${ne.id}/stations?${D.toString()}`);if(!G.ok){console.error(" Eroare la fetch /stations:",G.status);return}const Q=await G.json();Array.isArray(Q)&&Q.length>0?(Q.sort((J,q)=>(J.sequence??0)-(q.sequence??0)),C(Q)):console.warn(" Rspuns gol pentru /stations, pstrm lista veche")}catch(G){console.error(" Eroare la /api/routes/:id/stations",G)}})()},[ne==null?void 0:ne.id,mt,gt]),f.useEffect(()=>{fetch("/api/pricing-categories").then(D=>D.ok?D.json():[]).then(D=>Ol(Array.isArray(D)?D:[])).catch(()=>Ol([]))},[]),f.useEffect(()=>{if(!Array.isArray(la)||la.length===0)return;const D=new Set(la.map(Q=>Q.id)),G=[];A(Q=>{let J=!1;const q={...Q};return L.forEach(ee=>{var Ce,$e;const re=ee==null?void 0:ee.id;if(!re)return;const we=((Ce=q[re])==null?void 0:Ce.category_id)??null,Ie=(($e=la[0])==null?void 0:$e.id)??null,pe=we!=null&&D.has(we)?we:Ie;pe!=null&&pe!==we&&(q[re]={...q[re],category_id:pe},G.push(re),J=!0)}),J?q:Q}),G.length&&U(Q=>{const J={...Q};return G.forEach(q=>{J[q]=null}),J})},[la,L,A]);const Ll=()=>{let D=0;L.forEach(Q=>{var re;const J=H[Q.id];if(typeof J!="number")return;const q=(re=P[Q.id])==null?void 0:re.discount_type_id,ee=El.find(we=>we.id===q);if(!ee)D+=J;else{const we=parseFloat(ee.discount_value);let Ie=ee.discount_type==="percent"?J*(1-we/100):J-we;D+=Math.max(Ie,0)}});let G=Number(Math.max(D,0).toFixed(2));return s!=null&&s.discount_amount&&(G=Math.max(0,+(G-Number(s.discount_amount)).toFixed(2))),G},vu=(D,G=null)=>{var q;st(!0);try{(q=ze.current)==null||q.abort()}catch{}ze.current=null,$t(null),De([]),Er(null),Ae(null),ki(null),ia([]),Mr(null),B([]),A({}),U({}),Xe(D);const Q=Array.isArray(D==null?void 0:D.schedules)?[...new Set(D.schedules.map(ee=>ee.direction||"tur"))]:[],J=G||(Q.includes("tur")?"tur":Q[0]||null);Yn(J||null),queueMicrotask(()=>st(!1))},uo=f.useCallback(D=>{var J;const G=(q=!1)=>{var ee;fe(),ga.current=[],Y.current=[];try{(ee=ze.current)==null||ee.abort()}catch{}ze.current=null,B([]),A({}),U({}),ue({}),Ge.current={},xl([]),u(null),ki(null),Ae(null),Cs(null),sa(!1),Ri.current=0,De([]),Er(null),ia([]),Mr(null),zi(q),to(null),br(null),ra(null),va(null),tr(null),vr({}),z.current=null,Fe.current=null,Qe.current=null,q&&ea(re=>re+1)};if(!D){G(!1),$t(null);return}let Q=D;if(typeof D=="string"&&(Q=((J=ne==null?void 0:ne.schedules)==null?void 0:J.find(q=>q.departure===D))||null),!Q){G(!1),$t(null);return}G(!0),$t(Q)},[fe,ne]),ya=async(D,G,Q)=>{var ee;const J=[D,G,Q,(ne==null?void 0:ne.id)??"r",mt??"sid",bt??"h",(Rt==null?void 0:Rt.id)??"t"].join("|");if(N.current.has(J)||!mt||!Rt||la.length===0)return;let q=((ee=P[D])==null?void 0:ee.category_id)??null;if(q!=null&&!la.some(re=>re.id===q)&&(q=null),q==null&&(q=$i),!(!G||!Q||!(ne!=null&&ne.id)||q==null))try{N.current.add(J);const re=nn(G),we=nn(Q);if(re===null||we===null){U(yt=>({...yt,[D]:"N/A"})),N.current.delete(J);return}const Ie=new URLSearchParams({route_id:String(ne.id),from_station_id:String(re),to_station_id:String(we),category:String(q),date:tn(_,"yyyy-MM-dd")});mt&&Ie.set("route_schedule_id",String(mt));const pe=await fetch(`/api/routes/price?${Ie.toString()}`);if(!pe.ok){console.error("fetchPrice HTTP error",pe.status),U(yt=>({...yt,[D]:"N/A"})),N.current.delete(J);return}const{price:Ce,price_list_id:$e,pricing_category_id:pt}=await pe.json();Cs(yt=>yt??$e),A(yt=>({...yt,[D]:{...yt[D],price:parseFloat(Ce),price_list_id:$e,category_id:pt}})),U(yt=>({...yt,[D]:parseFloat(Ce)}))}catch(re){console.error("Eroare la fetchPrice:",re),U(we=>({...we,[D]:"N/A"}))}finally{N.current.delete(J)}},bu=D=>{const G=O.map(q=>q.name);if(!D.passengers||G.length<2)return!1;const Q=Array(G.length-1).fill(!1),J=q=>q.trim().toLowerCase();for(const q of D.passengers){const ee=G.findIndex(we=>J(we)===J(q.board_at)),re=G.findIndex(we=>J(we)===J(q.exit_at));if(ee!==-1&&re!==-1&&ee<re)for(let we=ee;we<re;we++)Q[we]=!0}return Q.every(Boolean)},fo=f.useCallback(()=>{},[Uf,Ee,L.length,mt,ne,_,Se,O,W,Yo,B,A,ya]),yu=async(D,G)=>{var pe;const Q=(pe=D.passengers)==null?void 0:pe[0];if(!Q||!K||!mt)return;const J=Ce=>Ce.trim().toLowerCase(),q=O.map(Ce=>Ce.name),ee=q.findIndex(Ce=>J(Ce)===J(Q.board_at)),re=q.findIndex(Ce=>J(Ce)===J(Q.exit_at));if(!(ee===-1||re===-1||ee>=re||(G.passengers||[]).some(Ce=>{const $e=q.findIndex(yt=>J(yt)===J(Ce.board_at)),pt=q.findIndex(yt=>J(yt)===J(Ce.exit_at));return!(re<=$e||ee>=pt)})))try{await fetch("/api/reservations/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reservation_id:Q.reservation_id,trip_id:K,to_seat_id:G.id,board_station_id:Q.board_station_id??null,exit_station_id:Q.exit_station_id??null})});const Ce=Qt.find(qt=>qt.trip_vehicle_id===sn),$e=Ce?Ce.vehicle_id:Rt.vehicle_id,pt=nn(q[0]),yt=nn(q.slice(-1)[0]),on=await(await fetch(`/api/seats/${$e}?route_id=${ne.id}&route_schedule_id=${mt}&date=${tn(_,"yyyy-MM-dd")}`+(bt?`&time=${encodeURIComponent(bt)}`:"")+`&board_station_id=${pt}&exit_station_id=${yt}`)).json();De(xn(on)),fo()}catch(Ce){console.error("Eroare la mutare:",Ce)}finally{to(null)}},Ra=f.useCallback(D=>(D??"").toString().trim().toLowerCase(),[]),ho=f.useCallback(()=>{var Ot;if(!Array.isArray(et)||et.length<2)return{status:"no-route"};const D=et.filter(Boolean);if(D.length<2)return{status:"no-route"};const G=new Map;D.forEach((tt,at)=>{const Ye=Ra(tt);G.has(Ye)||G.set(Ye,at)});const Q=L.filter(tt=>{const at=P==null?void 0:P[tt.id];return!at||at.reservation_id?!1:(at.origin||"manual")==="auto"});if(!Q.length)return{status:"no-candidates"};const J=[];for(const tt of Q){const at=P==null?void 0:P[tt.id];if(!(at!=null&&at.board_at)||!(at!=null&&at.exit_at))return{status:"missing-segment"};const Ye=Ra(at.board_at),ln=Ra(at.exit_at),nr=G.get(Ye),Pa=G.get(ln);if(nr==null||Pa==null)return{status:"segment-not-on-route"};if(nr>=Pa)return{status:"invalid-segment"};J.push({seat:tt,entry:at,board:at.board_at,exit:at.exit_at,boardNorm:Ye,exitNorm:ln,boardIndex:nr,exitIndex:Pa})}const q=new Set(J.map(({seat:tt})=>tt.id)),ee=(Se||[]).filter(tt=>{if(!(tt!=null&&tt.id))return!1;if(q.has(tt.id))return!0;const at=W==null?void 0:W[tt.id];return!at||at.isMine===!0});if(!ee.length)return{status:"no-availability"};let re=[...ee];const we=[],Ie=new Map;for(const tt of J){const at=`${tt.boardNorm}|${tt.exitNorm}`;Ie.has(at)||Ie.set(at,{board:tt.board,exit:tt.exit,boardNorm:tt.boardNorm,exitNorm:tt.exitNorm,boardIndex:tt.boardIndex,exitIndex:tt.exitIndex,entries:[]}),Ie.get(at).entries.push(tt)}const pe=[...Ie.values()].sort((tt,at)=>tt.boardIndex!==at.boardIndex?tt.boardIndex-at.boardIndex:tt.exitIndex!==at.exitIndex?tt.exitIndex-at.exitIndex:at.entries.length-tt.entries.length),Ce=tt=>({row:Number.isFinite(tt==null?void 0:tt.row)?tt.row:9999,col:Number.isFinite(tt==null?void 0:tt.seat_col)?tt.seat_col:9999,label:String((tt==null?void 0:tt.label)??"")}),$e=(tt,at)=>{const Ye=Ce(tt),ln=Ce(at);return Ye.row!==ln.row?Ye.row-ln.row:Ye.col!==ln.col?Ye.col-ln.col:Ye.label.localeCompare(ln.label)};for(const tt of pe){const at=tt.entries.length,Ye=Yo(re,tt.board,tt.exit,D,at);if(!Ye.length||Ye.length<at)return{status:"no-availability"};const ln=Ye.slice().sort($e),nr=tt.entries.slice().sort((ur,Dr)=>$e(ur.seat,Dr.seat));for(let ur=0;ur<at;ur+=1){const Dr=((Ot=nr[ur])==null?void 0:Ot.seat)||null;we.push({fromSeat:Dr,toSeat:ln[ur]||null,board:tt.board,exit:tt.exit})}const Pa=new Set(Ye.map(ur=>ur.id));re=re.filter(ur=>!Pa.has(ur.id))}if(!we.some(({fromSeat:tt,toSeat:at})=>((tt==null?void 0:tt.id)??null)!==((at==null?void 0:at.id)??null)))return{status:"already-optimal"};const yt=we.filter(({fromSeat:tt,toSeat:at})=>((tt==null?void 0:tt.id)??null)!==((at==null?void 0:at.id)??null)).map(({fromSeat:tt,toSeat:at,board:Ye,exit:ln})=>({fromLabel:(tt==null?void 0:tt.label)??((tt==null?void 0:tt.id)!=null?`#${tt.id}`:null),toLabel:(at==null?void 0:at.label)??((at==null?void 0:at.id)!=null?`#${at.id}`:null),board:Ye,exit:ln})),vn=we.map(({fromSeat:tt,toSeat:at,board:Ye,exit:ln})=>`${(tt==null?void 0:tt.id)??"x"}:${Ra(Ye)}>${Ra(ln)}->${(at==null?void 0:at.id)??"x"}`).sort().join(";"),on=[],qt=new Set;return we.forEach(({board:tt,exit:at})=>{const Ye=`${Ra(tt)}|${Ra(at)}`;qt.has(Ye)||(qt.add(Ye),on.push({board:tt,exit:at}))}),{status:"needs-reopt",assignments:we,moves:yt,segments:on,signature:vn}},[L,P,Se,W,et,Yo,Ra]);f.useEffect(()=>{const D=ho();(D==null?void 0:D.status)==="needs-reopt"?Ss(G=>(G==null?void 0:G.signature)===D.signature?G:D):lr!=null&&Ss(null)},[ho,lr]);const qf=f.useCallback((D=1)=>{if(!Array.isArray(et)||et.length<2){Ve("Selecteaz o rut pentru a atribui automat locuri."),I("error"),setTimeout(()=>Ve(""),3e3);return}if(!Se.length){Ve("Nu exist locuri ncrcate pentru cursa curent."),I("error"),setTimeout(()=>Ve(""),3e3);return}let G=et[0],Q=et[et.length-1];const J=L.filter(Ce=>{const $e=P[Ce.id];return $e&&!$e.reservation_id});if(J.length){const Ce=P[J[0].id]||{};et.includes(Ce.board_at)&&(G=Ce.board_at),et.includes(Ce.exit_at)&&(Q=Ce.exit_at)}const q=Math.max(1,Number(D)||1),ee=J.length+q,re=(Se||[]).filter(Ce=>{const $e=W==null?void 0:W[Ce.id];return!$e||$e.isMine===!0}),we=Yo(re,G,Q,et,ee);if(!we.length){Ve("Nu exist loc disponibil pentru segmentul selectat."),I("error"),setTimeout(()=>Ve(""),3e3);return}if(we.length<ee){Ve("Nu exist suficiente locuri libere pentru numrul selectat."),I("error"),setTimeout(()=>Ve(""),3e3);return}const Ie=new Set(we.map(Ce=>Ce.id)),pe=L.filter(Ce=>!Ie.has(Ce.id)).map(Ce=>Ce.id);pe.length&&(K&&pe.forEach(Ce=>{fetch(`/api/intents/${K}/${Ce}`,{method:"DELETE",credentials:"include"}).catch(()=>{})}),ue(Ce=>{if(!Ce)return Ce;let $e=!1;const pt={...Ce};return pe.forEach(yt=>{var vn;(vn=pt[yt])!=null&&vn.isMine&&(delete pt[yt],$e=!0)}),$e?pt:Ce})),sa(!1),B(we),A(()=>{const Ce={};for(const $e of we)Ce[$e.id]={name:"",phone:"",board_at:G,exit_at:Q,observations:"",payment_method:"none",origin:"auto"};return Ce}),Ri.current=we.length,we.forEach(Ce=>{ya(Ce.id,G,Q)})},[et,Se,L,P,ya,B,A,Ve,I,W,Yo,K,ue]),Gf=f.useCallback(()=>{const D=ho(),G=(ee,re="error",we=3e3)=>{Ve(ee),I(re),setTimeout(()=>Ve(""),we)};if(!D||D.status==="no-route"){G("Selecteaz o rut pentru a rearanja automat locurile.");return}switch(D.status){case"no-candidates":G("Nu exist locuri adugate automat pentru reoptimizare.");return;case"missing-segment":G("Completeaz segmentul pentru locurile adugate automat nainte de reoptimizare.");return;case"segment-not-on-route":G("Segmentul selectat nu aparine rutei curente.");return;case"invalid-segment":G("Segmentul selectat este invalid. Verific ordinea staiilor.");return;case"no-availability":G("Nu am gsit o configuraie disponibil pentru segmentele selectate.");return;case"already-optimal":G("Locurile adugate automat sunt deja optimizate.","info");return;case"needs-reopt":break;default:G("Reoptimizarea nu este disponibil n acest moment.");return}const Q=Array.isArray(D.assignments)?D.assignments:[];if(!Q.length){G("Nu am gsit o propunere de reoptimizare n acest moment.");return}const J=new Map,q=[];Q.forEach(({fromSeat:ee,toSeat:re})=>{(ee==null?void 0:ee.id)!=null&&q.push(ee.id),(ee==null?void 0:ee.id)!=null&&re&&J.set(ee.id,re)}),B(ee=>Array.isArray(ee)?ee.map(re=>J.get(re.id)||re):ee),A(ee=>{const re={...ee};return q.forEach(we=>{we!=null&&Object.prototype.hasOwnProperty.call(re,we)&&delete re[we]}),Q.forEach(({fromSeat:we,toSeat:Ie,board:pe,exit:Ce})=>{const $e=Ie==null?void 0:Ie.id;if($e==null)return;const pt=ee[we==null?void 0:we.id]||{},{price:yt,...vn}=pt;re[$e]={...vn,board_at:pe,exit_at:Ce,origin:"auto"}}),re}),U(ee=>{const re={...ee};return q.forEach(we=>{we!=null&&Object.prototype.hasOwnProperty.call(re,we)&&delete re[we]}),Q.forEach(({fromSeat:we,toSeat:Ie})=>{const pe=Ie==null?void 0:Ie.id;if(pe==null)return;const Ce=ee[we==null?void 0:we.id];Ce!=null&&(re[pe]=Ce)}),re}),Q.forEach(({toSeat:ee,board:re,exit:we})=>{(ee==null?void 0:ee.id)!=null&&ya(ee.id,re,we)}),Ss(null),sa(!1),Ve("Locurile au fost rearanjate automat."),I("success"),setTimeout(()=>Ve(""),3e3)},[ho,ya,B,A,U,sa,Ve,I]),Wf=(D,G,Q,J)=>{const q=pe=>pe==null?void 0:pe.trim().toLowerCase(),ee=J.findIndex(pe=>q(pe)===q(G)),re=J.findIndex(pe=>q(pe)===q(Q)),we=J.findIndex(pe=>q(pe)===q(D.board_at)),Ie=J.findIndex(pe=>q(pe)===q(D.exit_at));return!(re<=we||ee>=Ie)};f.useEffect(()=>{const D=G=>{if(_t||Tn){const Q=G.target.closest(".popup-container"),J=G.target.closest("[data-seat-id]");!Q&&!J&&(br(null),ra(null),tr(null))}};return window.addEventListener("click",D),()=>window.removeEventListener("click",D)},[_t,Tn]),f.useEffect(()=>{const D=tn(_,"yyyy-MM-dd");fetch(`/api/routes?fe=1&date=${D}`).then(G=>{if(!G.ok)throw new Error("HTTP "+G.status);return G.json()}).then(G=>{var Q;if(nt(G),ne){const J=G.find(q=>q.id===ne.id);if(J){if(Xe(J),mt){const q=(Q=J.schedules)==null?void 0:Q.find(ee=>(ee.scheduleId??ee.id)===mt);$t(q||null)}}else $t(null),Yn(null)}}).catch(G=>console.error("Eroare la ncrcarea rutelor pentru",D,G))},[_,ne==null?void 0:ne.id,mt]);const xr=async D=>{if(!D||!D.id)return;if(!K){Ve("Selecteaz nti cursa nainte de a alege locuri."),I("error"),setTimeout(()=>Ve(""),3e3);return}const G=Number(D.id),Q=(W==null?void 0:W[G])??null;if(Q&&Q.isMine===!1){Ve("Locul e n curs de rezervare de alt agent"),I("error"),setTimeout(()=>Ve(""),3e3);return}if(L.some(q=>q.id===G)){const q=L.length===1;try{await fetch(`/api/intents/${K}/${G}`,{method:"DELETE",credentials:"include"})}catch(ee){console.error("Eroare la tergerea intentului",ee)}ue(ee=>{if(!ee||!Object.prototype.hasOwnProperty.call(ee,G))return ee;const re={...ee};return delete re[G],re}),B(ee=>ee.filter(re=>re.id!==G)),q&&sa(!0),A(ee=>{if(!ee||!ee[G])return ee;const re={...ee};return delete re[G],re}),await Yt();return}try{const q=await fetch("/api/intents",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({trip_id:K,seat_id:G})});if(q.status===409){Ve("Locul e n curs de rezervare de alt agent"),I("error"),setTimeout(()=>Ve(""),3e3),await Yt();return}if(!q.ok){const re=await q.json().catch(()=>({})),we=(re==null?void 0:re.error)||"Eroare la crearea intentului";throw new Error(we)}const ee=await q.json();ue(re=>({...re,[G]:{expires_at:(ee==null?void 0:ee.expires_at)||null,isMine:!0}}))}catch(q){console.error("toggleSeat intent error",q),Ve(q.message||"Eroare la rezervarea locului"),I("error"),setTimeout(()=>Ve(""),3e3),await Yt();return}B(q=>q.some(ee=>ee.id===G)?q:[...q,D]),A(q=>{var $e,pt;if(q!=null&&q[G])return q;const ee=O.map(yt=>yt.name).filter(Boolean),re=ee[0]||(($e=D.passenger)==null?void 0:$e.board_at)||"",we=ee[ee.length-1]||((pt=D.passenger)==null?void 0:pt.exit_at)||"";let Ie=re,pe=we;const Ce=D.passenger?{board:D.passenger.board_at,exit:D.passenger.exit_at}:null;if(Ce&&D.status==="partial"&&ee.length>1){const yt=ee.indexOf(Ce.board),vn=ee.indexOf(Ce.exit);for(let on=0;on<ee.length-1;on+=1){const qt=on,Ot=on+1;if(Ot<=yt||qt>=vn){Ie=ee[qt],pe=ee[Ot];break}}}return{...q,[G]:{name:"",phone:"",board_at:Ie,exit_at:pe,observations:"",payment_method:"none",origin:"manual"}}}),await Yt()};f.useEffect(()=>{L.forEach(D=>{const G=P[D.id];G&&G.board_at&&G.exit_at&&(H[D.id]===void 0||H[D.id]===null)&&!N.current.has([D.id,G.board_at,G.exit_at,(ne==null?void 0:ne.id)??"r",mt??"sid",bt??"h",(Rt==null?void 0:Rt.id)??"t"].join("|"))&&ya(D.id,G.board_at,G.exit_at)})},[L,P,H]),f.useEffect(()=>{const D=Array.isArray(ga.current)?ga.current:[],G=L.map(q=>q.id),Q=D.filter(q=>!G.includes(q)),J=G.filter(q=>!D.includes(q));Q.length>0&&K&&(Q.forEach(q=>{var ee,re;(re=(ee=Ge.current)==null?void 0:ee[q])!=null&&re.isMine&&fetch(`/api/intents/${K}/${q}`,{method:"DELETE",credentials:"include"}).catch(()=>{})}),ue(q=>{if(!q)return q;let ee=!1;const re={...q};return Q.forEach(we=>{Object.prototype.hasOwnProperty.call(re,we)&&(delete re[we],ee=!0)}),ee?re:q})),J.length>0&&K&&J.forEach(q=>{var we,Ie;if((Ie=(we=Ge.current)==null?void 0:we[q])!=null&&Ie.isMine||!L.find(pe=>pe.id===q))return;const re=P==null?void 0:P[q];re!=null&&re.reservation_id||(async()=>{try{const pe=await fetch("/api/intents",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({trip_id:K,seat_id:q})});if(pe.status===409){Ve("Locul e n curs de rezervare de alt agent"),I("error"),setTimeout(()=>Ve(""),3e3),B($e=>$e.filter(pt=>pt.id!==q)),A($e=>{if(!$e||!$e[q])return $e;const pt={...$e};return delete pt[q],pt}),await Yt();return}if(!pe.ok){const $e=await pe.json().catch(()=>({})),pt=($e==null?void 0:$e.error)||"Eroare la crearea intentului";throw new Error(pt)}const Ce=await pe.json().catch(()=>({}));ue($e=>({...$e,[q]:{expires_at:(Ce==null?void 0:Ce.expires_at)||null,isMine:!0}}))}catch(pe){console.error("Eroare la alocarea intentului pentru loc",q,pe),Ve(pe.message||"Eroare la rezervarea locului"),I("error"),setTimeout(()=>Ve(""),3e3),B(Ce=>Ce.filter($e=>$e.id!==q)),A(Ce=>{if(!Ce||!Ce[q])return Ce;const $e={...Ce};return delete $e[q],$e}),await Yt()}})()}),ga.current=G},[L,K,Yt,P]),f.useEffect(()=>{const D=Array.isArray(ga.current)?ga.current:[],G=L.map(q=>q.id),Q=D.filter(q=>!G.includes(q)),J=G.filter(q=>!D.includes(q));Q.length>0&&K&&(Q.forEach(q=>{var ee,re;(re=(ee=Ge.current)==null?void 0:ee[q])!=null&&re.isMine&&fetch(`/api/intents/${K}/${q}`,{method:"DELETE",credentials:"include"}).catch(()=>{})}),ue(q=>{if(!q)return q;let ee=!1;const re={...q};return Q.forEach(we=>{Object.prototype.hasOwnProperty.call(re,we)&&(delete re[we],ee=!0)}),ee?re:q})),J.length>0&&K&&J.forEach(q=>{var we,Ie;if((Ie=(we=Ge.current)==null?void 0:we[q])!=null&&Ie.isMine||!L.find(pe=>pe.id===q))return;const re=P==null?void 0:P[q];re!=null&&re.reservation_id||(async()=>{try{const pe=await fetch("/api/intents",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({trip_id:K,seat_id:q})});if(pe.status===409){Ve("Locul e n curs de rezervare de alt agent"),I("error"),setTimeout(()=>Ve(""),3e3),B($e=>$e.filter(pt=>pt.id!==q)),A($e=>{if(!$e||!$e[q])return $e;const pt={...$e};return delete pt[q],pt}),await Yt();return}if(!pe.ok){const $e=await pe.json().catch(()=>({})),pt=($e==null?void 0:$e.error)||"Eroare la crearea intentului";throw new Error(pt)}const Ce=await pe.json().catch(()=>({}));ue($e=>({...$e,[q]:{expires_at:(Ce==null?void 0:Ce.expires_at)||null,isMine:!0}}))}catch(pe){console.error("Eroare la alocarea intentului pentru loc",q,pe),Ve(pe.message||"Eroare la rezervarea locului"),I("error"),setTimeout(()=>Ve(""),3e3),B(Ce=>Ce.filter($e=>$e.id!==q)),A(Ce=>{if(!Ce||!Ce[q])return Ce;const $e={...Ce};return delete $e[q],$e}),await Yt()}})()}),ga.current=G},[L,K,Yt,P]);const[Ns,Zf]=f.useState(),[xu,Cs]=f.useState(),mo=f.useCallback(async({reservationId:D,description:G,employeeId:Q})=>{if(!D)throw new Error("ID rezervare invalid pentru plata cash");let J=null;try{const we=await fetch(`/api/reservations/${D}/payments/status`,{credentials:"include"}),Ie=await we.json().catch(()=>({}));we.ok?J=(Ie==null?void 0:Ie.payment)||null:console.warn("[performCashReceipt] /payments/status nu e OK:",Ie)}catch(we){console.warn("[performCashReceipt] /payments/status exception:",we)}if(J&&Number(J.id||0)>0&&(J.payment_method||"").toLowerCase()==="cash"&&J.receipt_status==="error_needs_retry"){console.log("[performCashReceipt] Retry bon CASH pe payment existent (fresh):",J);const we=await fetch(`/api/reservations/${D}/payments/${J.id}/retry-receipt`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),Ie=await we.json().catch(()=>({}));if(!we.ok||!(Ie!=null&&Ie.ok)){const pe=(Ie==null?void 0:Ie.error)||(Ie==null?void 0:Ie.message)||`Eroare la retry bon fiscal (HTTP ${we.status})`;throw he(pe,"error",8e3),new Error(pe)}return Aa(D),he("Retry bon fiscal (CASH) trimis ctre agent","info",0),{amount:J.amount,paymentId:J.id,jobId:Ie.job_id}}const q={employeeId:Q??(t==null?void 0:t.id)};G&&G.trim()&&(q.description=G.trim());const ee=await fetch(`/api/reservations/${D}/payments/cash-agent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q),credentials:"include"}),re=await ee.json().catch(()=>({}));if(!ee.ok||!(re!=null&&re.ok)){const we=(re==null?void 0:re.error)||(re==null?void 0:re.message)||`Eroare la iniierea plii cash (HTTP ${ee.status})`,Ie=new Error(we);throw Ie.payload=re,Ie}return{amount:re.amount,paymentId:re.payment_id,jobId:re.job_id}},[t==null?void 0:t.id,Aa,he]),Es=f.useCallback(async({reservationId:D,employeeId:G})=>{if(!D)throw new Error("ID rezervare invalid pentru plata cu card");const Q=await fetch(`/api/reservations/${D}/payments/card-agent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:G??(t==null?void 0:t.id)})});if(!Q.ok){const q=await Q.json().catch(()=>({})),ee=(q==null?void 0:q.error)||(q==null?void 0:q.message)||`Eroare iniiere plat card (agent) (${Q.status})`,re=new Error(ee);throw re.payload=q,re}const J=await Q.json().catch(()=>({}));if(!(J!=null&&J.ok)){const q=(J==null?void 0:J.error)||(J==null?void 0:J.message)||"Rspuns invalid de la /payments/card-agent",ee=new Error(q);throw ee.payload=J,ee}return{amount:J.amount,paymentId:J.payment_id,jobId:J.job_id}},[t==null?void 0:t.id]),wu=async()=>{var G,Q,J,q;ct(!0);const D=async()=>{var ee;try{if(!Array.isArray(et)||et.length===0)return;const re=sn==="main"?Rt==null?void 0:Rt.vehicle_id:(ee=Qt.find(pt=>pt.trip_vehicle_id===sn))==null?void 0:ee.vehicle_id;if(!re)return;const we=nn(et[0]),Ie=nn(et.slice(-1)[0]);if(we===null||Ie===null)return;const pe=`/api/seats/${re}?route_id=${ne.id}&route_schedule_id=${mt}&date=${tn(_,"yyyy-MM-dd")}`+(bt?`&time=${encodeURIComponent(bt)}`:"")+`&board_station_id=${we}&exit_station_id=${Ie}`+(gt?`&direction=${gt}`:""),Ce=await fetch(pe,{credentials:"include"});if(!Ce.ok)return;const $e=await Ce.json();De(xn($e))}catch(re){console.error("Eroare la rencrcarea locurilor:",re)}};try{if(!(ne!=null&&ne.id)||!Zt){he("Selecteaz ruta i ora nainte de a salva.","error",3e3);return}if(!await lt())return;he("Se salveaz rezervarea...","info",0);const re=xu||(((Q=P[(G=L[0])==null?void 0:G.id])==null?void 0:Q.price_list_id)??null);let we;try{we=L.map(qt=>{const Ot=P[qt.id],tt=nn(Ot.board_at),at=nn(Ot.exit_at);if(tt===null||at===null)throw new Error("Staiile selectate nu sunt valide pentru aceast rut.");const Ye={seat_id:qt.id,reservation_id:Ot.reservation_id||null,person_id:Ot.person_id||null,name:Ot.name,phone:Ot.phone,board_station_id:tt,exit_station_id:at,price_list_id:Ot.price_list_id||re,category_id:Ot.category_id??$i??null,observations:Ot.observations||"",discount_type_id:Ot.discount_type_id||null,price:H[qt.id],payment_method:Ot.payment_method||"none",provider_transaction_id:Ot.provider_transaction_id||null};if(Ot!=null&&Ot.reservation_id){const ln=Number(Ot.version);if(!Number.isInteger(ln))throw new Error("Nu am putut ncrca versiunea rezervrii. Rencarc pagina i ncearc din nou.");Ye.version=ln}return Ye})}catch(qt){he(qt.message,"error",3e3);return}const Ie={date:tn(_,"yyyy-MM-dd"),time:bt,route_schedule_id:mt,direction:gt,route_id:ne.id,vehicle_id:Rt.vehicle_id,pricing_category_id:Ns,price_list_id:re,passengers:we,promo_apply:s?{promo_code_id:s.promo_code_id,code:s.code,discount_amount:s.discount_amount}:null},pe=An(),Ce=await fetch("/api/reservations",{method:"POST",headers:{"Content-Type":"application/json","Idempotency-Key":pe},credentials:"include",body:JSON.stringify(Ie)}),$e=await Ce.json().catch(()=>({}));if(Ce.status===409){he($e.error||"Loc ocupat pe segment","error",4e3),await Yt(),await D();return}if(!Ce.ok)throw new Error($e.error||"Eroare la salvare");const pt=($e==null?void 0:$e.idempotent)===!0,yt=Array.isArray($e==null?void 0:$e.createdReservationIds)?$e.createdReservationIds:$e!=null&&$e.id?[$e.id]:[];B([]),A({}),ue({}),sa(!0),await Yt();const vn=!pt&&Array.isArray(Ie==null?void 0:Ie.passengers)&&Ie.passengers.some(qt=>qt.payment_method==="cash"),on=!pt&&Array.isArray(Ie==null?void 0:Ie.passengers)&&Ie.passengers.some(qt=>qt.payment_method==="card");if(pt?he("Rezervarea era deja salvat (cerere repetat).","info",2500):vn&&!on?he("Rezervare salvat. Se tiprete bonul...","info",0):on&&!vn?he("Rezervare salvat. Se iniiaz plata cu cardul...","info",0):vn&&on?he("Rezervare salvat. Se proceseaz plile (cash + card)...","info",0):he("Rezervare salvat ","success",2500),!pt&&vn){for(const qt of yt)try{await mo({reservationId:qt,description:`Rezervare #${qt}`,employeeId:t==null?void 0:t.id})}catch(Ot){console.error("[handleSaveReservation] eroare iniiere plat cash pentru",qt,Ot);const tt=(Ot==null?void 0:Ot.message)||((J=Ot==null?void 0:Ot.payload)==null?void 0:J.error)||`Eroare la iniierea plii cash pentru #${qt}`;he(tt,"error",6e3)}yt.length>0&&Aa(yt[yt.length-1]),he("Rezervare salvat. Plat cash iniiat (agent)","info",0)}if(!pt&&on){for(const qt of yt)try{await Es({reservationId:qt,employeeId:t==null?void 0:t.id})}catch(Ot){console.error("[handleSaveReservation] eroare iniiere plat card (agent) pentru",qt,Ot);const tt=(Ot==null?void 0:Ot.message)||((q=Ot==null?void 0:Ot.payload)==null?void 0:q.error)||`Eroare la iniierea plii cu cardul pentru #${qt}`;he(tt,"error",6e3)}yt.length>0&&Aa(yt[yt.length-1]),he("Rezervare salvat. Plat cu cardul iniiat (agent)","info",0)}await D()}catch(ee){console.error("Eroare la salvarea rezervrii:",ee),he(ee.message||"A aprut o eroare.","error",4e3)}finally{ct(!1)}},Ui=()=>{if(ri){Ve("Nu poi salva rezervri pentru curse care au plecat deja."),I("error"),setTimeout(()=>Ve(""),3e3);return}const D=L.filter(G=>{const Q=P[G.id],J=Pp(Q);return!(J!=null&&J.valid)}).map(G=>G.id);if(D.length>0){Nn(!0),setTimeout(()=>Nn(!1),600),D.forEach(G=>{const Q=document.querySelector(`.passenger-form[data-seat="${G}"]`);if(!Q)return;Q.classList.add("animate-shake","border-red-500"),setTimeout(()=>Q.classList.remove("border-red-500"),800),Q.querySelectorAll("input, select, textarea").forEach(q=>{q.classList.add("border-red-500"),setTimeout(()=>q.classList.remove("border-red-500"),800)})}),Ve("Completeaz toate cmpurile obligatorii nainte de salvare"),I("error"),setTimeout(()=>Ve(""),2e3);return}if(cr!=null&&cr.blacklisted){lo(!0);return}po()},po=async()=>{var Ie;if(ri){Ve("Nu poi salva rezervri pentru curse care au plecat deja."),I("error"),setTimeout(()=>Ve(""),3e3);return}const D=tn(_,"yyyy-MM-dd"),G=(Ie=L[0])==null?void 0:Ie.id,Q=P[G]||{},J=nn(Q.board_at),q=nn(Q.exit_at);if(J===null||q===null){Ve("Staiile selectate nu sunt valide pentru aceast rut."),I("error"),setTimeout(()=>Ve(""),3e3);return}let ee=!1,re=[];if(!Q.person_id)console.log("Conflict skipped: no person_id");else{const pe=new URLSearchParams({person_id:String(Q.person_id),date:D,board_station_id:String(J),exit_station_id:String(q),time:bt});ne!=null&&ne.id&&pe.set("route_id",String(ne.id)),mt&&pe.set("route_schedule_id",String(mt)),gt&&pe.set("direction",gt);const $e=await(await fetch(`/api/reservations/conflict?${pe.toString()}`)).json();if(ee=$e.conflict,re=$e.infos,ee){kr(re),_s(!0);return}}if(ee){kr(re),_s(!0);return}const we=Object.values(P).map(pe=>Pp(pe)).filter(pe=>!pe.valid);if(we.length>0){const pe=we[0].errors;Ve(pe.general||pe.name||pe.phone),I("error"),setTimeout(()=>Ve(""),3e3);return}if(!Rt){Ve("Tripul nu este ncrcat. ncearc din nou."),I("error");return}wu()};f.useEffect(()=>{const D=(ne==null?void 0:ne.id)??null;D!=null&&E.current!==D&&(E.current=D,$t(null),Yn(null),De([]),Er(null),Ae(null))},[ne==null?void 0:ne.id]);const ai=f.useRef(null);f.useEffect(()=>{const D=ai.current;if(D===sn){ai.current=sn;return}(D!==null||sn!==null)&&(fe(),B([]),A({}),U({}),ue({}),Cs(null),sa(!1),Ri.current=0),ai.current=sn},[sn,fe]),f.useEffect(()=>{const D=_?tn(_,"yyyy-MM-dd"):"nodate",G=`${(ne==null?void 0:ne.id)??"noroute"}|${mt??"noschedule"}|${bt??"nohour"}|${D}|${Un}`,Q=z.current;if(Q===G){z.current=G;return}Q!==null&&(fe(),B([]),A({}),U({}),ue({}),Cs(null),sa(!1),Ri.current=0),z.current=G},[ne==null?void 0:ne.id,mt,bt,_,Un,fe]),f.useEffect(()=>{var q;if(!ne||!Zt||!_||!_e||!O.length||((q=O[0])==null?void 0:q.direction)!==gt||We)return;const D=O[0].station_id,G=O[O.length-1].station_id,Q=`${ne.id}|${tn(_,"yyyy-MM-dd")}|${mt??"sid"}|${bt}|${D}|${G}|main|${Un}`;return Fe.current===Q?void 0:(Fe.current=Q,Mr("main"),De([]),Er(null),Ae(null),zi(!0),(async()=>{try{const ee=new AbortController;ze.current=ee;const re=await fetch(`/api/trips/find?route_id=${ne.id}&schedule_id=${mt}&date=${tn(_,"yyyy-MM-dd")}`+(bt?`&time=${encodeURIComponent(bt)}`:"")+(gt?`&direction=${gt}`:""),{signal:ee.signal});if(!re.ok){if(re.status===404){Fe.current=null,Ae(null),ki(null),ia([]),Er(null),De([]),Mr(null),B([]),A({}),U({}),Ve(`Nu exist curs la ${bt||"ora selectat"} pe ruta aleas.`),I("info"),setTimeout(()=>Ve(""),2500),zi(!1);return}throw new Error(`HTTP ${re.status}`)}const we=await re.json(),Ie=we==null?void 0:we.id;if(!Ie){Fe.current=null,zi(!1);return}if(Ae(Ie),ki(we),await ii(we.id),!(we!=null&&we.vehicle_id)){Fe.current=null,zi(!1);return}const Ce=await(await fetch(`/api/seats/${we.vehicle_id}?route_id=${ne.id}&route_schedule_id=${mt}&date=${tn(_,"yyyy-MM-dd")}`+(bt?`&time=${encodeURIComponent(bt)}`:"")+`&board_station_id=${D}&exit_station_id=${G}`+(gt?`&direction=${gt}`:""),{signal:ee.signal})).json();De(xn(Ce)),Ce.length>0&&Er({name:Ce[0].vehicle_name,plate:Ce[0].plate_number})}catch(ee){(ee==null?void 0:ee.name)==="AbortError"?Fe.current=null:console.error("Eroare la ncrcarea datelor:",ee)}finally{zi(!1)}})(),()=>{var ee;try{(ee=ze.current)==null||ee.abort()}catch{}})},[ne==null?void 0:ne.id,mt,bt,_,_e,gt,Un]);const ii=async D=>{const G=await fetch(`/api/trips/${D}/vehicles`);if(!G.ok)return ia([]),[];const Q=await G.json();if(!Array.isArray(Q))return ia([]),[];const J=Q.map(q=>{const ee=ti.find(re=>re.id===q.vehicle_id);return{...q,plate_number:q.plate_number||(ee==null?void 0:ee.plate_number)||(ee==null?void 0:ee.plate)||""}});return ia(J),J};f.useEffect(()=>{if(!Qt||Qt.length===0)return;const D=Qt.find(G=>G.is_primary);Mr(D?"main":Qt[0].trip_vehicle_id)},[Qt,mt,_,ne]),f.useEffect(()=>{!K||!Zt||(ii(K),fetch(`/api/vehicles/${K}/available`).then(D=>D.ok?D.json():[]).then(bl).catch(()=>bl([])))},[K,mt]);const Ms=f.useCallback(async(D={})=>{var we,Ie,pe;const{force:G=!1,signal:Q}=D;if(!sn||!K||!ne||!Zt||!_e||!O.length||((we=O[0])==null?void 0:we.direction)!==gt)return null;const J=sn==="main"?{vehicle_id:Rt==null?void 0:Rt.vehicle_id}:Qt.find(Ce=>Ce.trip_vehicle_id===sn);if(!J||!J.vehicle_id)return null;const q=((Ie=O[0])==null?void 0:Ie.station_id)??null,ee=((pe=O[O.length-1])==null?void 0:pe.station_id)??null;if(q==null||ee==null)return null;const re=`${J.vehicle_id}|${ne.id}|${tn(_,"yyyy-MM-dd")}|${mt??"sid"}|${bt}|${_e}|${Un}`;if(!G&&Qe.current===re)return null;Qe.current=re;try{const Ce=`/api/seats/${J.vehicle_id}?route_id=${ne.id}&route_schedule_id=${mt}&date=${tn(_,"yyyy-MM-dd")}`+(bt?`&time=${encodeURIComponent(bt)}`:"")+`&board_station_id=${q}&exit_station_id=${ee}`+(gt?`&direction=${gt}`:""),pt=await fetch(Ce,Q?{signal:Q}:void 0);if(!pt.ok)return G||(Qe.current=null),null;const yt=await pt.json();return De(xn(yt)),Array.isArray(yt)&&yt.length>0&&Er({name:yt[0].vehicle_name,plate:yt[0].plate_number}),yt}catch(Ce){return(Ce==null?void 0:Ce.name)!=="AbortError"&&console.error("Eroare la actualizarea seat map",Ce),G||(Qe.current=null),null}},[sn,K,ne,Zt,_e,O,gt,Rt,Qt,_,mt,bt,Un,xn]);f.useEffect(()=>{const D=new AbortController;return Ms({signal:D.signal}),()=>D.abort()},[Ms]),f.useEffect(()=>{if(Te.current&&(clearInterval(Te.current),Te.current=null),!K||!Zt)return;const D=()=>{Ms({force:!0})};D();const G=setInterval(D,3e3);return Te.current=G,()=>{clearInterval(G),Te.current=null}},[K,Zt,Ms]),f.useEffect(()=>{Qe.current=null},[_e]),f.useEffect(()=>{Fe.current=null},[gt]),f.useEffect(()=>{!ne||!Zt||!_||!Se.length||fo()},[ne,mt,_,Se,Zt,fo]);const Tr=()=>{br(null),ra(null),va(null),tr(null)},Ii=f.useCallback(async()=>{var D;try{if(!(_t!=null&&_t.reservation_id))return;na(!0);const Q=await(await fetch(`/api/reservations/${_t.reservation_id}/summary`)).json();if(Q!=null&&Q.paid){he("Rezervarea este deja achitat.","info",3e3),na(!1);return}const J=[];oo&&oo.trim()&&J.push(oo.trim());const q=`${(_t==null?void 0:_t.board_at)||""}  ${(_t==null?void 0:_t.exit_at)||""}`.trim();q&&q!==""&&J.push(`Bilet ${q}`);const ee=J.join(" | ");try{await mo({reservationId:_t.reservation_id,description:ee,employeeId:t==null?void 0:t.id})}catch(re){console.error("[handlePayReservation] performCashReceipt error:",re);const we=(re==null?void 0:re.message)||((D=re==null?void 0:re.payload)==null?void 0:D.error)||"Eroare la iniierea plii cash";he(we,"error",6e3);return}Aa(_t.reservation_id),he("Plat cash iniiat. Ateptm confirmarea agentului","info",0);try{Fe.current=null}catch{}}catch(G){console.error("[handlePayReservation] eroare general:",G),he(G.message||"Eroare la plat","error",6e3)}finally{na(!1),br(null),ra(null),va(null)}},[_t==null?void 0:_t.reservation_id,_t==null?void 0:_t.board_at,_t==null?void 0:_t.exit_at,oo,t==null?void 0:t.id,mo,Aa]),kl=f.useCallback(async()=>{var D,G;try{if(!(_t!=null&&_t.reservation_id))return;na(!0);const J=await(await fetch(`/api/reservations/${_t.reservation_id}/summary`)).json();if(J!=null&&J.paid){he("Rezervarea este deja achitat.","info",4e3),na(!1);return}try{await Es({reservationId:_t.reservation_id,employeeId:t==null?void 0:t.id})}catch(q){console.error("[handlePayReservationCard] performCardPayment error:",q);const ee=String((q==null?void 0:q.message)||"Eroare la plata cu cardul (agent)"),re=((D=q==null?void 0:q.payload)==null?void 0:D.error)||((G=q==null?void 0:q.payload)==null?void 0:G.message)||"",we=re?`${ee}
${re}`:ee;he(we,"error",8e3),na(!1);return}Aa(_t.reservation_id),he("Plat cu cardul iniiat (agent)","info",0);try{Fe.current=null}catch{}}catch(Q){console.error("[handlePayReservationCard] eroare general:",Q),he(Q.message||"Eroare general la plata cu cardul","error",8e3)}finally{na(!1),br(null),ra(null),va(null)}},[_t==null?void 0:_t.reservation_id,t==null?void 0:t.id,Es,Aa]),Su=async D=>{try{if(!window.confirm(`Sigur vrei s tergi pasagerul ${D.name}?`))return;const Q=await fetch("/api/reservations/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:D.phone,board_station_id:D.board_station_id,exit_station_id:D.exit_station_id,trip_id:K,seat_id:or==null?void 0:or.id})}),J=await Q.json();if(!Q.ok)throw new Error(J.error||"Eroare la tergere");if(Ve("Pasager ters cu succes "),I("success"),setTimeout(()=>Ve(""),3e3),Tr(),!mt)return;const q=nn(et[0]),ee=nn(et[et.length-1]),we=await(await fetch(`/api/seats/${Rt.vehicle_id}?route_id=${ne.id}&route_schedule_id=${mt}&date=${tn(_,"yyyy-MM-dd")}`+(bt?`&time=${encodeURIComponent(bt)}`:"")+`&board_station_id=${q}&exit_station_id=${ee}`+(gt?`&direction=${gt}`:""))).json();De(xn(we))}catch(G){console.error("Eroare la tergere pasager:",G),Ve("Eroare la tergere"),I("error"),setTimeout(()=>Ve(""),3e3)}},si=(D,G)=>{if(!G||!G.passengers||G.passengers.length===0)return;const{clientX:Q,clientY:J}=D;Tr(),G.passengers.length===1?(br({...G.passengers[0],route_id:ne==null?void 0:ne.id}),ra(G),va({x:Q,y:J})):tr({x:Q,y:J,seat:G})},go=(lr==null?void 0:lr.status)==="needs-reopt";return o.jsxs("div",{className:"min-h-screen bg-gray-300 flex justify-center items-start py-10 px-6 w-full",children:[o.jsx(KT,{message:Ze,type:de}),o.jsx(Fs,{show:If,title:"Eroare emitere bon",message:o.jsx("div",{className:"whitespace-pre-line",children:Vf||"Nu s-a emis bonul fiscal."}),confirmText:"OK",cancelText:"nchide",onConfirm:()=>du(!1),onCancel:()=>du(!1)}),o.jsxs("div",{className:"inline-block space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:inline-flex md:flex-row gap-6 items-start",children:[o.jsxs("div",{className:"bg-white rounded shadow p-4 w-fit",children:[o.jsx("label",{className:"block font-semibold mb-2",children:"Selecteaz data:"}),o.jsx(Yj,{selectedDate:_,setSelectedDate:M})]}),o.jsxs("div",{className:"bg-white rounded shadow p-4 space-y-4 w-fit",children:[o.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[o.jsx("div",{className:"flex gap-2",children:["Azi","Mine","Poimine"].map((D,G)=>{const Q=CM(new Date,G),J=tn(_,"yyyy-MM-dd")===tn(Q,"yyyy-MM-dd");return o.jsx("button",{onClick:()=>{M(Q),B([]),A({}),De([])},className:`px-3 py-1 rounded text-sm font-medium transition ${J?"bg-blue-600 text-white":"bg-blue-100 text-black hover:bg-blue-200"}`,children:D},D)})}),o.jsx("div",{className:"text-base font-semibold text-gray-800",children:tn(_,"EEEE, dd MMMM yyyy",{locale:ej})})]}),o.jsx("div",{children:o.jsx(JT,{routes:ke,selectedRoute:ne,onSelectRoute:vu})}),ne&&o.jsxs("div",{children:[o.jsx("div",{className:"flex flex-wrap gap-3 mb-6",children:o.jsx(eD,{selectedRoute:ne,selectedSchedule:rt,onSelectSchedule:uo})}),bt&&o.jsx("div",{className:"flex justify-between items-center mb-4",children:o.jsx("div",{className:"flex gap-4",children:o.jsx(tD,{availableVehicles:ti,vehicleInfo:ta,setVehicleInfo:Er,showPopup:su,setShowPopup:vl,setSelectedSeats:B,setSeats:De,tripId:K,setToastMessage:Ve,setToastType:I,stops:O.map(D=>D.name)})})}),cu&&o.jsx("div",{className:"mb-4 rounded-md border border-amber-300 bg-amber-50 px-4 py-3 text-sm text-amber-900",children:cu}),bt&&o.jsxs("div",{className:"mb-4 flex items-center border-b space-x-4",children:[Ta.map((D,G)=>o.jsxs("div",{className:"flex items-center -mb-px space-x-1",children:[o.jsx("button",{onClick:()=>Mr(D.is_primary?"main":D.trip_vehicle_id),className:`px-4 py-2 rounded-t-lg text-sm font-medium mr-1 transition-all duration-300
  ${Ta.length===1||sn===(D.is_primary?"main":D.trip_vehicle_id)?"bg-white text-gray-900 border border-b-transparent shadow-md":"bg-gray-100 text-gray-500 hover:bg-gray-200 border border-transparent"}
`,children:D.is_primary?"Principal":`Dublur ${G}`}),o.jsx("button",{onClick:()=>{Mr(D.is_primary?"main":D.trip_vehicle_id),ka(!0)},className:"p-1 hover:bg-gray-200 rounded",title:"Modific main",children:""}),!D.is_primary&&o.jsx("button",{onClick:()=>Di(D.trip_vehicle_id),className:"p-1 hover:bg-gray-200 rounded",title:"terge main",children:""}),o.jsx(Fs,{show:Ti===D.trip_vehicle_id,title:"Confirmare tergere",message:"Eti sigur c vrei s tergi aceast main?",onCancel:()=>Di(null),onConfirm:async()=>{const Q=Ti;Di(null);const J=await fetch(`/api/trips/${Q}`,{method:"DELETE"}),q=await J.json();if(!J.ok){console.error("DELETE trip vehicle error",J.status,q),Ve(q.error),I("error"),setTimeout(()=>Ve(""),3e3);return}Ve("Maina a fost tears cu succes"),I("success"),setTimeout(()=>Ve(""),3e3),await ii(K),Mr(ee=>ee===Q?"main":ee)}})]},D.trip_vehicle_id)),o.jsx("button",{onClick:()=>{Mr(null),ka(!0)},className:`
    ml-4 
    flex-shrink-0 
    w-10 h-10 
    bg-green-500 hover:bg-green-600 
    text-white 
    rounded-full 
    flex items-center justify-center 
    shadow-md 
    transition-transform duration-150 
    hover:scale-110
  `,title:"Adaug main",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7",viewBox:"0 0 36 36",fill:"none",stroke:"currentColor",strokeWidth:1.8,children:[o.jsx("path",{d:"M6 6v6m-3-3h6",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M12 12.5h18a3 3 0 0 1 3 3v8.5a2 2 0 0 1-2 2h-1v1.5a1.5 1.5 0 0 1-1.5 1.5H27",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M12 24.5h-1.5A2.5 2.5 0 0 1 8 22v-9a3 3 0 0 1 3-3h1",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M15 14h6M23 14h4",strokeLinecap:"round"}),o.jsx("circle",{cx:"16",cy:"27",r:"2",fill:"currentColor",stroke:"none"}),o.jsx("circle",{cx:"26",cy:"27",r:"2",fill:"currentColor",stroke:"none"})]})})]})]})]})]}),bt&&(Pi?o.jsx("div",{style:{padding:40,textAlign:"center",fontSize:22},children:"Se ncarc harta locurilor..."}):Se.length>0&&o.jsxs("div",{className:"bg-white rounded shadow p-4 flex gap-6 items-start w-fit mx-auto relative",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 flex-wrap",children:[o.jsx("button",{type:"button",onClick:()=>{R(D=>{const G=D==="grid"?"timeline":"grid";return F(G==="timeline"),G})},className:"px-3 py-1 rounded-full text-xs font-semibold border transition-colors bg-blue-600 text-white border-blue-600",title:Z==="timeline"?"Vezi rezervrile pe axa staiilor":"Vezi diagrama clasic a locurilor",children:Z==="timeline"?"Timeline":"Diagram"}),o.jsx("button",{type:"button",onClick:()=>{Cr&&te(D=>!D)},disabled:!Cr,className:`px-3 py-1 rounded-full text-xs font-semibold border transition-colors ${X?"bg-blue-600 text-white border-blue-600":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"} ${Cr?"":"opacity-60 cursor-not-allowed"}`,title:"Mrete limea locurilor din diagram pentru a vedea toate detaliile",children:X?"Larg":"ngust"}),o.jsx("button",{type:"button",onClick:()=>{Cr&&Oi(D=>!D)},className:`px-3 py-1 rounded-full text-xs font-semibold border transition-colors ${eo?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"} ${Cr?"":"opacity-60 cursor-not-allowed"}`,title:"Regleaz dimensiunea i culoarea textelor din diagram",children:"Text"}),X&&o.jsx("button",{type:"button",onClick:()=>Pe(D=>!D),className:`px-3 py-1 rounded-full text-xs font-semibold border transition-colors ${xe?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"}`,title:"Afieaz sau ascunde controalele pentru dimensiunea locurilor",children:xe?"Ascunde dimensiuni":"Dimensiune locuri"})]}),o.jsxs("div",{className:"inline-flex items-center gap-2 flex-wrap ml-auto",children:[o.jsxs("label",{className:"inline-flex items-center gap-2 text-xs font-semibold text-gray-700",children:[o.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:sr,onChange:D=>hl(D.target.checked)}),"Obs."]}),o.jsx("button",{type:"button",onClick:()=>yr(io),disabled:La,className:`px-3 py-1 rounded-full text-xs font-semibold border transition-colors ${La?"bg-gray-100 text-gray-500 border-gray-200 cursor-not-allowed opacity-70":"bg-white text-gray-700 border-gray-300 hover:bg-gray-100"}`,title:"Descarc diagrama n format imagine PNG","aria-busy":ve,children:ve?"Se pregtete PNG":"Export PNG"})]})]}),ta&&o.jsxs("div",{className:"text-sm text-gray-700 mb-2 font-semibold text-center",children:["Vehicul: ",ta.name," (",ta.plate,")"]}),Se.length>0&&Z==="grid"&&o.jsxs("div",{className:"relative inline-block w-full",children:[X&&xe&&o.jsxs("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 z-20 bg-white border border-gray-200 shadow-lg rounded-lg px-4 py-3 flex flex-col gap-3 w-64 text-xs",children:[o.jsx("div",{className:"text-[11px] font-semibold text-gray-700 uppercase tracking-wide text-center",children:"Dimensiune locuri"}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-1 text-[11px] text-gray-700",children:["Lime loc (",On.width,"px)"]}),o.jsx("input",{type:"range",min:"130",max:"360",step:"5",value:On.width,onChange:D=>Jn(G=>({...G,width:Number(D.target.value)})),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block mb-1 text-[11px] text-gray-700",children:["nlime loc (",On.height,"px)"]}),o.jsx("input",{type:"range",min:"100",max:"260",step:"5",value:On.height,onChange:D=>Jn(G=>({...G,height:Number(D.target.value)})),className:"w-full"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Curent: ",On.width,"",On.height]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>Jn({width:260,height:150}),className:"px-2 py-1 text-[11px] rounded border border-gray-300 text-gray-700 hover:bg-gray-100",children:"Reset"}),o.jsx("button",{type:"button",onClick:()=>Pe(!1),className:"px-2 py-1 text-[11px] rounded border border-gray-300 text-gray-700 hover:bg-gray-100",children:"nchide"})]})]})]}),o.jsxs("div",{className:`overflow-auto ${X?xe?"pt-20":"pt-12":""}`,children:[o.jsx(Hj,{ref:T,seats:Se,stops:et,selectedSeats:L,setSelectedSeats:B,moveSourceSeat:ni,setMoveSourceSeat:to,popupPassenger:_t,setPopupPassenger:br,popupSeat:or,setPopupSeat:ra,popupPosition:Ai,setPopupPosition:va,handleMovePassenger:yu,handleSeatClick:si,toggleSeat:xr,isSeatFullyOccupiedViaSegments:bu,checkSegmentOverlap:Wf,selectedRoute:ne,setToastMessage:Ve,setToastType:I,driverName:io,intentHolds:W,vehicleId:(Tl=Ta.find(D=>D.trip_vehicle_id===sn))==null?void 0:Tl.vehicle_id,isWideView:X,wideSeatSize:On,showObservations:sr,seatTextSize:Li,seatTextColor:iu}),eo&&o.jsxs("div",{className:"absolute top-2 right-2 z-30 w-64 bg-white border border-gray-200 rounded-lg shadow-lg p-3 text-xs",children:[o.jsx("div",{className:"font-semibold text-gray-800 mb-2",children:"Setri text diagram"}),o.jsxs("div",{className:"mb-1 text-[10px] text-gray-500",children:["Mod curent: ",o.jsx("span",{className:"font-semibold",children:X?"Vedere larg":"Vedere ngust"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("label",{className:"block mb-1 text-[11px] text-gray-700",children:["Dimensiune text (",Li,"px)"]}),o.jsx("input",{type:"range",min:"8",max:"26",value:Li,onChange:D=>Ar(Number(D.target.value)),className:"w-full"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block mb-1 text-[11px] text-gray-700",children:"Culoare text"}),o.jsx("input",{type:"color",value:iu,onChange:D=>gl(D.target.value),className:"w-16 h-8 p-0 border border-gray-300 rounded cursor-pointer"})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",onClick:()=>Oi(!1),className:"px-2 py-1 text-[11px] rounded border border-gray-300 text-gray-700 hover:bg-gray-100",children:"nchide"})})]})]})]})]}),o.jsxs("div",{className:"space-y-4 max-w-md w-[450px]",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-semibold",children:"Completeaz datele pasagerilor:"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>qf(1),className:"w-10 h-10 flex items-center justify-center rounded-full text-white transition-colors bg-green-500 hover:bg-green-600",title:"Adaug automat un loc","aria-label":"Adaug automat un loc",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",viewBox:"0 0 32 32",fill:"none",stroke:"currentColor",strokeWidth:1.8,children:[o.jsx("path",{d:"M6 6v6m-3-3h6",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M14 7h8a2 2 0 0 1 2 2v8h2.5a1.5 1.5 0 0 1 1.5 1.5v6.5h-2.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M14 7a4 4 0 0 0-4 4v5h-1.5A1.5 1.5 0 0 0 7 17.5V25h3",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M12 16h10v7.5a2.5 2.5 0 0 1-2.5 2.5H13a2 2 0 0 1-2-2v-8",strokeLinecap:"round"})]})}),o.jsx("button",{type:"button",onClick:Gf,className:`px-3 py-1 rounded-full text-xs font-semibold border transition-colors ${go?"bg-purple-600 text-white border-purple-600 hover:bg-purple-700":"bg-gray-200 text-gray-600 border-gray-300 cursor-not-allowed"}`,title:go?"Rearanjeaz locurile selectate folosind logica de autoselecie":"Reoptimizarea devine disponibil dup ce locurile adugate automat au segmente valide i exist o propunere mai bun.",disabled:!go,children:"Rearanjeaz locurile"})]})]}),(lr==null?void 0:lr.status)==="needs-reopt"&&o.jsxs("div",{className:"mt-2 text-xs text-purple-700 bg-purple-50 border border-purple-200 rounded px-3 py-2 space-y-1",children:[o.jsxs("div",{className:"font-medium",children:["Reoptimizare disponibil pentru locurile adugate automat.",Array.isArray(lr.segments)&&lr.segments.length>0&&o.jsxs("span",{children:[" ","Segmente vizate:"," ",lr.segments.map((D,G)=>o.jsxs("span",{children:[o.jsx("span",{className:"font-semibold",children:D.board})," "," ",o.jsx("span",{className:"font-semibold",children:D.exit}),G<lr.segments.length-1?", ":"."]},`${D.board||"board"}-${D.exit||"exit"}-${G}`))]})]}),Array.isArray(lr.moves)&&lr.moves.length>0&&o.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:lr.moves.map((D,G)=>{const Q=(D==null?void 0:D.fromLabel)||null,J=(D==null?void 0:D.toLabel)||null,q=(D==null?void 0:D.board)||null,ee=(D==null?void 0:D.exit)||null,re=q&&ee?` (${q}  ${ee})`:"";let we="";return Q&&J?we=`Loc ${Q}  ${J}${re}`:Q&&!J?we=`Locul ${Q} va fi eliberat${re}`:!Q&&J?we=`Se ocup locul ${J}${re}`:we=re?`Locurile vor fi reasociate automat${re}`:"Locurile vor fi reasociate automat",o.jsx("li",{children:we},`${Q||"from"}-${J||"to"}-${q||"board"}-${ee||"exit"}-${G}`)})}),o.jsx("div",{children:"Apas Rearanjeaz locurile pentru a aplica propunerea fr a pierde datele introduse."})]}),ge&&o.jsx("div",{className:"p-2 border border-blue-200 bg-blue-50 text-sm text-blue-800 rounded",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:"font-semibold",children:" Ultimul apel:"}),o.jsx("span",{className:"font-mono text-base",children:ge.phone}),ge.extension&&o.jsxs("span",{className:"text-xs text-blue-700",children:["int: ",ge.extension]}),wt&&o.jsxs("span",{className:"text-xs text-blue-600",children:["ora ",wt]})]})}),L.map((D,G)=>{var Q,J,q,ee,re,we,Ie;return o.jsxs("div",{"data-seat":D.id,className:`passenger-form border p-4 bg-gray-50 rounded space-y-2 ${Xt?"animate-shake":""}`,children:[o.jsx("div",{className:"flex gap-4",children:o.jsx(yD,{seat:D,stops:et,stopDetailsByName:qn,passengersData:P,setPassengersData:A,selectedRoute:ne,selectedSeats:L,setSelectedSeats:B,autoSelectEnabled:Oa,fetchPrice:ya,setToastMessage:Ve,setToastType:I,incomingCall:ge,onApplyIncomingCall:ae,toggleSeat:xr,seats:Se,selectedDate:tn(_,"yyyy-MM-dd"),selectedHour:bt,selectedScheduleId:mt,selectedDirection:gt,onConflictInfo:kr,onBlacklistInfo:pu,getStationIdByName:nn,getStationNameById:Qn})}),o.jsx("div",{className:"h-1 flex justify-end items-center",children:o.jsx("button",{type:"button",className:"text-blue-600 text-xl font-bold hover:text-blue-800",onClick:()=>vr(pe=>({...pe,[D.id]:!pe[D.id]})),title:"Adaug observaii",children:pa[D.id]?"":"+"})}),pa[D.id]&&o.jsx("textarea",{className:"w-full border p-2 rounded",placeholder:"Observaii",value:((Q=P[D.id])==null?void 0:Q.observations)||"",onChange:pe=>A(Ce=>({...Ce,[D.id]:{...Ce[D.id],observations:pe.target.value}}))}),o.jsxs("div",{className:"flex items-center mb-2 gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"font-medium whitespace-nowrap",children:"Categorie:"}),o.jsx("select",{className:"border rounded px-2 py-1 text-sm",value:((J=P[D.id])==null?void 0:J.category_id)??$i??"",onChange:pe=>{const Ce=pe.target.value?Number(pe.target.value):null;A($e=>({...$e,[D.id]:{...$e[D.id],category_id:Ce}})),U($e=>({...$e,[D.id]:null}))},disabled:la.length===0,children:la.map(pe=>o.jsx("option",{value:pe.id,children:pe.name},pe.id))})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"font-medium whitespace-nowrap",children:"Tip:"}),o.jsxs("select",{className:"border rounded px-2 py-1 text-sm",style:{minWidth:140,maxWidth:180},value:((q=P[D.id])==null?void 0:q.discount_type_id)||"",onChange:pe=>A(Ce=>({...Ce,[D.id]:{...Ce[D.id],discount_type_id:pe.target.value?Number(pe.target.value):null}})),children:[o.jsx("option",{value:"",children:"Fr reducere"}),El.map(pe=>{const Ce=parseFloat(pe.discount_value),$e=pe.discount_type==="percent"?"%":" lei";return o.jsxs("option",{value:pe.id,children:[pe.label," (",Ce,$e,")"]},pe.id)})]})]})]}),o.jsxs("div",{className:"mb-2 flex flex-wrap items-end gap-3",children:[o.jsxs("span",{className:"font-medium",children:["Pre:",(()=>{var on;const pe=H[D.id];if(typeof pe!="number")return" N/A";const Ce=(on=P[D.id])==null?void 0:on.discount_type_id,$e=El.find(qt=>qt.id===Ce);if(!$e)return` ${pe.toFixed(2)} lei`;const pt=parseFloat($e.discount_value);let yt=0;$e.discount_type==="percent"?yt=pe*(1-pt/100):yt=pe-pt;const vn=Math.max(yt,0);return o.jsxs(o.Fragment,{children:[" ",o.jsxs("s",{children:[pe.toFixed(2)," lei"]}),o.jsxs("span",{className:"ml-2 text-green-700 font-bold",children:[vn.toFixed(2)," lei"]}),yt<0&&o.jsx("span",{className:"ml-2 text-red-600 font-semibold",children:"Reducere prea mare, pre setat la 0"})]})})()]}),G===0&&o.jsxs("div",{className:"ml-auto flex flex-col items-end gap-1 text-right",children:[o.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Cod reducere"}),o.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[o.jsx("input",{className:"w-40 border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",value:r,onChange:pe=>i(pe.target.value),placeholder:"FALL25"}),o.jsx("button",{type:"button",onClick:mu,disabled:!r.trim(),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Aplic"})]}),s&&o.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-green-50 px-3 py-1 text-xs font-semibold text-green-700",children:["",s.discount_amount," lei (",s.code,")",o.jsx("button",{type:"button",onClick:()=>{u(null),i("")},className:"text-[11px] font-normal text-green-600 underline-offset-2 hover:underline",children:"Reset"})]})]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Modalitate de plat:"}),o.jsxs("div",{className:"flex gap-4 mt-1",children:[o.jsxs("label",{children:[o.jsx("input",{type:"radio",name:`payment_${D.id}`,value:"none",checked:((ee=P[D.id])==null?void 0:ee.payment_method)==="none",onChange:()=>A(pe=>({...pe,[D.id]:{...pe[D.id],payment_method:"none"}}))}),o.jsx("span",{className:"ml-1",children:"Doar rezervare"})]}),o.jsxs("label",{children:[o.jsx("input",{type:"radio",name:`payment_${D.id}`,value:"cash",checked:((re=P[D.id])==null?void 0:re.payment_method)==="cash",onChange:()=>A(pe=>({...pe,[D.id]:{...pe[D.id],payment_method:"cash"}}))}),o.jsx("span",{className:"ml-1",children:"Cash"})]}),o.jsxs("label",{children:[o.jsx("input",{type:"radio",name:`payment_${D.id}`,value:"card",checked:((we=P[D.id])==null?void 0:we.payment_method)==="card",onChange:()=>A(pe=>({...pe,[D.id]:{...pe[D.id],payment_method:"card"}}))}),o.jsx("span",{className:"ml-1",children:"Card"})]})]})]}),((Ie=P[D.id])==null?void 0:Ie.reservation_id)&&o.jsx("div",{className:"flex justify-end pt-2",children:o.jsx("button",{onClick:()=>{A(pe=>{const Ce={...pe};return delete Ce[D.id],Ce}),B(pe=>pe.filter(Ce=>Ce.id!==D.id))},className:"text-sm text-red-600 hover:underline",children:"Renun la editare"})})]},D.id+"-"+G)}),L.length>0&&o.jsxs("div",{className:"py-3 text-lg font-semibold text-green-700 text-right",children:["Total de plat: ",Ll()," lei"]}),L.length>0&&o.jsxs("div",{className:"flex w-full pt-4",style:{justifyContent:L.length>1?"space-between":"flex-end"},children:[L.length>1&&o.jsx("button",{onClick:Yf,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Copie datele"}),o.jsx("button",{onClick:Ui,disabled:ut||ws||ri,title:ri?"Nu poi salva rezervri pentru curse care au plecat deja.":ws?"mbarcarea a nceput  nu se mai pot salva rezervri noi.":void 0,className:`px-6 py-2 rounded text-white transition ${ut||ws||ri?"bg-gray-300 cursor-not-allowed text-gray-600":"bg-green-600 hover:bg-green-700"}`,children:ut?"Se salveaz":"Salveaz rezervarea"})]})]}),o.jsx(Fs,{show:Ff,title:"Rezervri conflictuale",message:`Mai exist ${hu} ${Cl} (n aceeai zi):`,cancelText:"Renun",confirmText:"Continu",onCancel:()=>_s(!1),onConfirm:()=>{_s(!1),wu()},children:o.jsx("ul",{className:"space-y-2",children:(js??[]).map(D=>o.jsxs("li",{className:"flex justify-between items-center text-sm whitespace-nowrap",children:[o.jsxs("span",{className:"whitespace-nowrap",children:["+         ",D.route,"  ",D.time.slice(0,5),"  ",D.board_at,"",D.exit_at]}),o.jsx("button",{onClick:async()=>{if(window.confirm("Eti sigur c vrei s tergi aceast rezervare conflictual?"))try{const G=await fetch(`/api/reservations/${D.id}`,{method:"DELETE"}),Q=await G.json();if(!G.ok)throw new Error(Q.error||"Eroare la tergere");fu(J=>J.filter(q=>q.id!==D.id)),js.length===1&&_s(!1),Ve("Rezervare conflictual tears"),I("success")}catch(G){Ve(G.message),I("error")}finally{setTimeout(()=>Ve(""),3e3)}},className:"px-2 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 ml-4",children:"terge"})]},D.id))})}),o.jsx(Fs,{show:gu&&cr!==null,title:"Avertisment: Blacklist",cancelText:"Renun",confirmText:"Continu",onCancel:()=>lo(!1),onConfirm:()=>{lo(!1),po()},children:o.jsxs("div",{className:"text-sm space-y-2",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Telefon:"})," ",(cr==null?void 0:cr.phone)||"-"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Motiv:"})," ",(cr==null?void 0:cr.reason)||"-"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Adugat la:"})," ",cr!=null&&cr.created_at?new Date(cr.created_at).toLocaleDateString():"-"]}),o.jsx("p",{children:"Chiar vrei s continui?"})]})})]}))]}),Tn&&o.jsx(a0,{x:Tn.x,y:Tn.y,seat:Tn.seat,selectedRoute:ne,onSelect:D=>{br({...selectedPassenger,route_id:ne==null?void 0:ne.id}),ra(Tn.seat),va({x:Tn.x,y:Tn.y}),tr(null)},onClose:()=>tr(null)}),_t&&Ai&&o.jsx(QT,{x:Ai.x,y:Ai.y,passenger:_t,seat:or,selectedDate:_,selectedHour:bt,originalRouteId:ne==null?void 0:ne.id,tripId:K,showToast:he,stops:O.map(D=>D.name),onDelete:()=>Su(_t),onMove:()=>{to(or),Tr(),Ve("Selecteaz un loc pentru mutare"),I("info")},onPayCash:Ii,onPayCard:kl,onEdit:()=>{console.log("PassengerPopup onEdit  popupSeat:",or.label);const D=or.id;B([or]),A({[D]:{name:_t.name,phone:_t.phone,board_at:_t.board_at,exit_at:_t.exit_at,observations:_t.observations||"",reservation_id:_t.reservation_id||null,version:_t.version??null}}),Tr()},onMoveToOtherTrip:()=>{Tr(),xs({passenger:_t,reservation_id:_t.reservation_id,fromSeat:or,boardAt:_t.board_at,exitAt:_t.exit_at,originalTime:bt,originalRouteId:ne==null?void 0:ne.id,originalDate:_,originalScheduleId:mt,originalDirection:gt,originalSchedule:rt}),wl(!0)},onClose:Tr}),Tn&&o.jsx(a0,{x:Tn.x,y:Tn.y,seat:Tn.seat,onSelect:D=>{br({...D,route_id:ne==null?void 0:ne.id}),ra(Tn.seat),va({x:Tn.x,y:Tn.y}),tr(null)},onClose:()=>tr(null)}),ro&&o.jsx(SD,{moveToOtherTripData:ao,stops:et,onClose:async()=>{if(wl(!1),xs(null),!Zt)return;const D=Qt.find(q=>q.trip_vehicle_id===sn),G=D?D.vehicle_id:Rt.vehicle_id,Q=nn(et[0]),J=nn(et.slice(-1)[0]);try{const ee=await(await fetch(`/api/seats/${G}?route_id=${ne.id}&route_schedule_id=${mt}&date=${tn(_,"yyyy-MM-dd")}`+(bt?`&time=${encodeURIComponent(bt)}`:"")+`&board_station_id=${Q}&exit_station_id=${J}`+(gt?`&direction=${gt}`:""))).json();De(xn(ee))}catch(q){console.error("Eroare la rencrcare seat-map:",q)}},onMoveSuccess:async({tripId:D,vehicleId:G,routeId:Q,date:J,hour:q,schedule:ee})=>{var re,we,Ie;try{let pe=ee;if(!pe&&typeof q=="string"){const Ye=ke.find(ln=>ln.id===Q);pe=((re=Ye==null?void 0:Ye.schedules)==null?void 0:re.find(ln=>ln.departure===q))||null}const Ce=new URLSearchParams;pe!=null&&pe.scheduleId?Ce.set("route_schedule_id",pe.scheduleId):pe!=null&&pe.direction&&Ce.set("direction",pe.direction);const $e=Ce.toString(),yt=await(await fetch(`/api/routes/${Q}/stations${$e?`?${$e}`:""}`)).json(),vn=Array.isArray(yt)?[...yt].sort((Ye,ln)=>(Ye.sequence??0)-(ln.sequence??0)):[],on=((we=vn[0])==null?void 0:we.station_id)??null,qt=((Ie=vn[vn.length-1])==null?void 0:Ie.station_id)??null;if(on===null||qt===null){console.error("Staiile rutei mutate lipsesc.");return}const tt=await(await fetch(`/api/seats/${G}?route_id=${Q}`+(pe!=null&&pe.scheduleId?`&route_schedule_id=${pe.scheduleId}`:"")+`&date=${tn(J,"yyyy-MM-dd")}`+(q?`&time=${q}`:"")+`&board_station_id=${on}&exit_station_id=${qt}`+(pe!=null&&pe.direction?`&direction=${pe.direction}`:""))).json(),at=ke.find(Ye=>Ye.id===Q)||null;Xe(at),M(J),uo(pe||q),De(xn(tt))}catch(pe){console.error("Eroare la fetch curs nou:",pe)}}}),V&&o.jsx("div",{className:"fixed inset-0 z-[2000] flex flex-col bg-slate-900/80 backdrop-blur-sm",onClick:()=>{F(!1),R("grid")},role:"dialog","aria-modal":"true",children:o.jsxs("div",{className:"flex h-full flex-col",onClick:D=>D.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between gap-4 px-6 pt-6",children:[o.jsxs("div",{className:"text-white text-lg font-semibold tracking-wide",children:["Timeline rezervri (",et[0]||"","  ",et[et.length-1]||"",")"]}),o.jsxs("button",{type:"button",onClick:()=>{F(!1),R("grid")},className:"inline-flex items-center gap-2 rounded-full border border-white/40 bg-white/10 px-4 py-2 text-sm font-semibold text-white transition hover:bg-white/20",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"nchide"]})]}),o.jsx("div",{className:"flex-1 overflow-auto px-6 pb-8 pt-4",children:o.jsx("div",{className:"mx-auto min-h-full w-full",children:o.jsx("div",{className:"rounded-3xl bg-white p-6 shadow-2xl",children:o.jsx(sD,{seats:Se,stops:et,intentHolds:W})})})})]})}),o.jsx(jD,{tripId:K,show:jl,onClose:()=>ka(!1),existingVehicleIds:Ta.map(D=>D.vehicle_id),editTvId:sn,onAdded:D=>{ia(G=>[...G,D]),Mr(D.trip_vehicle_id),ka(!1)},onUpdated:async D=>{if(sn==="main"){ki(pe=>({...pe,vehicle_id:D})),await ii(K);const re=nn(et[0]),we=nn(et[et.length-1]),Ie=await fetch(`/api/seats/${D}?route_id=${ne.id}&route_schedule_id=${mt}&date=${tn(_,"yyyy-MM-dd")}`+(bt?`&time=${encodeURIComponent(bt)}`:"")+`&board_station_id=${re}&exit_station_id=${we}`+(gt?`&direction=${gt}`:""));De(xn(await Ie.json())),Mr("main"),ka(!1);return}const G=D;await ii(K),Mr(G.trip_vehicle_id);const Q=nn(et[0]),J=nn(et[et.length-1]),ee=await(await fetch(`/api/seats/${G.vehicle_id}?route_id=${ne.id}&route_schedule_id=${mt}&date=${tn(_,"yyyy-MM-dd")}`+(bt?`&time=${bt}`:"")+`&board_station_id=${Q}&exit_station_id=${J}`+(gt?`&direction=${gt}`:""))).json();De(xn(ee)),ka(!1)}})]})}function CD(){const[e,t]=f.useState([]),[r,i]=f.useState([]),[s,u]=f.useState(null);f.useEffect(()=>{fetch("/api/reservations/backup").then(p=>p.json()).then(p=>t(p)).catch(p=>console.error("Eroare la backup:",p))},[]),f.useEffect(()=>{fetch("/api/trips/summary").then(p=>p.json()).then(p=>i(p)).catch(p=>console.error("Eroare la trips summary:",p))},[]);const m=r.filter(p=>e.some(g=>g.trip_id===p.trip_id)).map(p=>({value:p.trip_id,label:`${tn(new Date(p.date),"dd MMMM yyyy",{locale:ej})}  ${p.route_name}  ora ${p.time}  [${p.plate_number||"fr nr."}]`})),h=s?e.filter(p=>p.trip_id===s):e;return o.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Backupuri rezervri"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-semibold mb-1 block",children:"Filtreaz backupuri dup curs:"}),o.jsx(Fd,{options:m,onChange:p=>u((p==null?void 0:p.value)||null),isClearable:!0,placeholder:"Selecteaz o curs..."})]}),o.jsx("div",{className:"overflow-x-auto bg-white rounded shadow p-4",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-100 text-left",children:[o.jsx("th",{className:"p-2",children:"Data"}),o.jsx("th",{className:"p-2",children:"Ora"}),o.jsx("th",{className:"p-2",children:"Traseu"}),o.jsx("th",{className:"p-2",children:"Nr. loc"}),o.jsx("th",{className:"p-2",children:"Nume"}),o.jsx("th",{className:"p-2",children:"Telefon"}),o.jsx("th",{className:"p-2",children:"Backup time"})]})}),o.jsx("tbody",{children:h.map(p=>{const g=r.find(b=>b.trip_id===p.trip_id);return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:g?tn(new Date(g.date),"dd.MM.yyyy"):"-"}),o.jsx("td",{className:"p-2",children:(g==null?void 0:g.time)||"-"}),o.jsx("td",{className:"p-2",children:(g==null?void 0:g.route_name)||"-"}),o.jsx("td",{className:"p-2",children:p.label}),o.jsx("td",{className:"p-2",children:p.passenger_name||"-"}),o.jsx("td",{className:"p-2",children:p.phone||"-"}),o.jsx("td",{className:"p-2",children:tn(new Date(p.backup_time),"dd.MM.yyyy HH:mm")})]},p.backup_id)})})]})})]})}function ED(){const[e,t]=f.useState([]),[r,i]=f.useState(""),[s,u]=f.useState(!1),[d,m]=f.useState(!1),[h,p]=f.useState([]),[g,b]=f.useState(""),w=async()=>{u(!0);try{const O=await vt.get("/api/blacklist");t(O.data)}catch(O){console.error("Eroare la ncrcare blacklist:",O)}finally{u(!1)}};f.useEffect(()=>{w()},[]);const S=async O=>{if(window.confirm("Adaugi acest pasager n blacklist?"))try{await vt.post("/api/blacklist",{person_id:O}),await w()}catch(C){console.error(C),alert("Nu am putut aduga n blacklist.")}},y=async O=>{if(window.confirm("tergi acest pasager din blacklist?"))try{await vt.delete(`/api/blacklist/${O}`),await w()}catch(C){console.error(C),alert("Nu am putut terge din blacklist.")}},j=async O=>{if(window.confirm("tergi toate neprezentrile pentru acest pasager?"))try{await vt.delete(`/api/no-shows/${O}`),await w()}catch(C){console.error(C),alert("Nu am putut terge neprezentrile.")}},N=async(O,C)=>{try{const L=await vt.get(`/api/people/${O}/report`);p(L.data.noShows||[]),b(C),m(!0)}catch(L){console.error(L),alert("Nu am putut ncrca istoricul.")}},E=r.toLowerCase(),_=r.replace(/\s+/g,""),M=e.filter(O=>{const C=(O.person_name||"").toLowerCase(),L=String(O.phone||"").replace(/\s+/g,"");return C.includes(E)||L.includes(_)});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 max-w-4xl",children:[o.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Administrare Blacklist"}),o.jsx("input",{type:"text",placeholder:"Caut dup nume sau telefon",value:r,onChange:O=>i(O.target.value),className:"mb-4 p-2 border rounded w-full text-sm max-w-full"}),s?o.jsx("div",{children:"Loading"}):o.jsxs("table",{className:"w-full text-sm table-auto border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-100",children:[o.jsx("th",{className:"px-2 py-1 border text-left",children:"Nume"}),o.jsx("th",{className:"px-2 py-1 border text-left",children:"Telefon"}),o.jsx("th",{className:"px-2 py-1 border text-left",children:"Angajat"}),o.jsx("th",{className:"px-2 py-1 border text-left",children:"Motiv"}),o.jsx("th",{className:"px-2 py-1 border text-left",children:"Adugat la"}),o.jsx("th",{className:"px-2 py-1 border text-left",children:"Aciuni"})]})}),o.jsxs("tbody",{children:[M.map((O,C)=>o.jsxs("tr",{className:C%2===0?"bg-white":"bg-gray-50",children:[o.jsx("td",{className:"px-2 py-1 border",children:O.person_name||""}),o.jsx("td",{className:"px-2 py-1 border",children:O.phone}),o.jsx("td",{className:"px-2 py-1 border",children:O.added_by_employee||""}),o.jsx("td",{className:"px-2 py-1 border",children:O.reason||""}),o.jsx("td",{className:"px-2 py-1 border",children:O.added_at||""}),o.jsxs("td",{className:"px-2 py-1 border",children:[O.source==="blacklist"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>N(O.person_id,O.person_name||O.phone),className:"px-2 py-1 bg-gray-600 text-white rounded text-xs",children:"Istoric"}),o.jsx("button",{onClick:()=>y(O.blacklist_id),className:"px-2 py-1 bg-red-600 text-white rounded text-xs",children:"Scoate"})]}),O.source==="no_show"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>N(O.person_id,O.person_name||O.phone),className:"px-2 py-1 bg-gray-600 text-white rounded text-xs",children:"Istoric"}),o.jsx("button",{onClick:()=>j(O.person_id),className:"px-2 py-1 bg-orange-600 text-white rounded text-xs",children:"terge"}),o.jsx("button",{onClick:()=>S(O.person_id),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Adaug"})]})]})]},`${O.person_id}-${O.source}`)),M.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center py-4 text-gray-500",children:"Nu exist persoane n blacklist sau cu neprezentri."})})]})]})]}),d&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-120 max-h-[70vh] overflow-auto text-sm",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Istoric neprezentri: ",g]}),h.length===0?o.jsx("div",{children:"Nu exist nregistrri."}):o.jsx("div",{className:"space-y-1",children:h.map((O,C)=>{const L=O.date||O.created_at||O.created_at_date||"-",B=O.time||O.hour||O.trip_time||"",Z=O.route_name||O.route||O.routeName||"-",R=O.board_name||O.board_at||"",X=O.exit_name||O.exit_at||"",te=R||X?`${R||"?"}  ${X||"?"}`:"",xe=O.seat_label||(Array.isArray(O.seats)?O.seats.join(", "):"")||O.seats||O.seat_numbers||O.seat||O.seat_ids||"";return o.jsxs("div",{className:"text-sm whitespace-nowrap",children:[L," ",B,"  ",Z,te&&o.jsxs("span",{className:"ml-1",children:[" ",te]}),o.jsxs("span",{className:"font-semibold",children:[" ","| Loc: ",xe||"n/a"]})]},C)})}),o.jsx("div",{className:"text-right mt-4",children:o.jsx("button",{onClick:()=>m(!1),className:"px-3 py-1 bg-gray-300 text-sm rounded",children:"nchide"})})]})})]})}function MD({reservationId:e,fallbackEvent:t}){const[r,i]=f.useState([]),[s,u]=f.useState(!1),[d,m]=f.useState(!1),[h,p]=f.useState(""),g=y=>{if(!y)return 0;const[j="",N=""]=y.split(" "),[E,_,M]=j.split(".").map(Number),[O=0,C=0]=N.split(":").map(Number);return!M||!_||!E?0:new Date(M,_-1,E,O,C).getTime()},b=Rc.useMemo(()=>{const y=Array.isArray(r)?[...r]:[];return t&&y.length===0&&y.push({event_id:t.event_id||`fallback-${e}`,...t}),y.sort((j,N)=>g(j.at)-g(N.at))},[r,t,e]),w=y=>y?(y.channel||"").toLowerCase()==="online"||(y.actor_name||"").toLowerCase()==="online"?"Online":y.actor_name||y.actor_id||"":"",S=()=>{s||(m(!0),fetch(`/api/audit-logs?reservation_id=${e}`).then(y=>y.ok?y.json():y.json().then(j=>Promise.reject((j==null?void 0:j.error)||"Eroare"))).then(y=>{i(Array.isArray(y)?y:[]),p("")}).catch(y=>p(String(y))).finally(()=>m(!1))),u(!s)};return o.jsxs("div",{children:[o.jsx("button",{className:"text-blue-600 underline",onClick:S,children:s?"Ascunde":"Vezi"}),s&&o.jsx("div",{className:"mt-2 border rounded p-2 bg-gray-50",children:d?"Se ncarc":h?o.jsx("span",{className:"text-red-600",children:h}):b.length===0?"":o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs mb-2",children:(()=>{const y=b.find(M=>(M.action_label||M.action)==="reservation.moveToOtherTrip"||(M.action||"").startsWith("reservation.move")),j=b.filter(M=>(M.action||"")==="payment.capture").sort((M,O)=>g(O.at)-g(M.at))[0],N=w(y)||w(j)||"",E=y?o.jsxs("span",{children:[o.jsx("b",{children:"Mutat"})," pe ",y.at," de ",o.jsx("b",{children:N}),y.from_trip_date?o.jsxs(o.Fragment,{children:["  de la ",o.jsxs("b",{children:[y.from_trip_date," ",y.from_hour||""]})," (",y.from_route_name||"","  ",y.from_segment||"","  loc ",y.from_seat||"",")"]}):null,y.trip_date?o.jsxs(o.Fragment,{children:["  la ",o.jsxs("b",{children:[y.trip_date," ",y.hour||""]})," (",y.route_name||"","  ",y.segment||"","  loc ",y.seat||"",")"]}):null]}):null,_=j?o.jsxs("span",{children:[y?"  ":"",o.jsx("b",{children:"Plat"}),": ",j.amount??""," ",j.payment_method?`(${j.payment_method})`:"",j.provider_transaction_id?`, txn ${j.provider_transaction_id}`:"",j.at?`, la ${j.at}`:""]}):null;return E||_?o.jsxs("div",{children:[E,_]}):null})()}),o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-1",children:"Dat"}),o.jsx("th",{className:"border p-1",children:"Aciune"}),o.jsx("th",{className:"border p-1",children:"Agent"})]})}),o.jsx("tbody",{children:b.map(y=>o.jsxs("tr",{children:[o.jsx("td",{className:"border p-1",children:y.at}),o.jsx("td",{className:"border p-1",children:y.action_label||y.action}),o.jsx("td",{className:"border p-1",children:w(y)})]},y.event_id))})]})]})})]})}function OD(){const{personId:e}=bf(),[t,r]=f.useState(null),[i,s]=f.useState(!0),[u,d]=f.useState(""),[m,h]=f.useState(""),[p,g]=f.useState(""),[b,w]=f.useState(!1);if(f.useEffect(()=>{fetch(`/api/people/${e}/report`).then(M=>M.json()).then(M=>{r(M),s(!1),d(M.personName||""),h(M.personPhone||""),g(M.personNotes||"")}).catch(M=>{console.error("Eroare la fetch raport:",M),s(!1)})},[e]),i)return o.jsx("div",{className:"p-4",children:"Se ncarc..."});if(!t)return o.jsx("div",{className:"p-4 text-red-500",children:"Eroare la ncrcare"});const{personName:S="",reservations:y=[],noShows:j=[],blacklist:N}=t,E=M=>{if(!M)return"";const O=new Date(M);return Number.isNaN(O.getTime())?"":O.toLocaleDateString("ro-RO",{timeZone:"Europe/Bucharest"})},_=M=>{if(!M)return"";const O=new Date(M);return Number.isNaN(O.getTime())?"":O.toLocaleString("ro-RO",{timeZone:"Europe/Bucharest",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).replace(",","").replace(/\s+/g," ").trim()};return o.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[o.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Raport pasager ID #",e,S&&` - ${S}`]}),N&&o.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 p-4 rounded mb-6",children:[" n blacklist: ",N.reason," ",o.jsx("br",{}),o.jsxs("span",{className:"text-sm italic",children:["Adugat de: ",N.added_by_name||""," la: ",new Date(N.created_at).toLocaleString()]})]}),o.jsxs("section",{className:"mb-6 bg-white border rounded p-4",children:[o.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Nume"}),o.jsx("input",{value:u,onChange:M=>d(M.target.value),className:"w-full border rounded px-3 py-2"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Telefon"}),o.jsx("input",{value:m,onChange:M=>h(M.target.value),className:"w-full border rounded px-3 py-2"})]}),o.jsxs("div",{className:"md:col-span-3",children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Observaii / note"}),o.jsx("textarea",{value:p,onChange:M=>g(M.target.value),rows:3,className:"w-full border rounded px-3 py-2"})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{disabled:b,onClick:async()=>{try{w(!0);const M=await fetch(`/api/people/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u,phone:m,notes:p})}),O=await M.json();if(!M.ok||!(O!=null&&O.success))throw new Error((O==null?void 0:O.error)||"Eroare la salvare");const C=await fetch(`/api/people/${e}/report`).then(L=>L.json());r(C),d(C.personName||""),h(C.personPhone||""),g(C.personNotes||""),alert("Salvat.")}catch(M){alert(M.message||"Eroare la salvare")}finally{w(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:b?"Se salveaz":"Salveaz"})})]}),o.jsxs("section",{className:"mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-2",children:" Rezervri"}),y.length===0?o.jsx("div",{className:"text-gray-500",children:"Nicio rezervare gsit."}):o.jsxs("table",{className:"w-full text-sm border-collapse border",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-100",children:[o.jsx("th",{className:"p-2 border",children:"Data cltoriei"}),o.jsx("th",{className:"p-2 border",children:"Traseu"}),o.jsx("th",{className:"p-2 border",children:"Ora curs"}),o.jsx("th",{className:"p-2 border",children:"Segment"}),o.jsx("th",{className:"p-2 border",children:"Loc"}),o.jsx("th",{className:"p-2 border",children:"Status"}),o.jsx("th",{className:"p-2 border",children:"Creat de"}),o.jsx("th",{className:"p-2 border",children:"Creat la"}),o.jsx("th",{className:"p-2 border",children:"Plat"}),o.jsx("th",{className:"p-2 border",children:"Pre"}),o.jsx("th",{className:"p-2 border",children:"Reduceri"}),o.jsx("th",{className:"p-2 border",children:"Pre final"}),o.jsx("th",{className:"p-2 border",children:"Istoric"})]})}),o.jsx("tbody",{children:y.map((M,O)=>{const C=j.some(Y=>Y.date===M.date&&Y.time===M.time&&!0),L=E(M.date)||"",B=M.booking_channel==="online"?"Online":M.reserved_by||"",Z=_(M.reservation_time),R=Z||"",X=Z?{event_id:`fallback-${M.id||O}`,at:Z,action_label:"Rezervare creat",action:"reservation.create",actor_name:M.booking_channel==="online"?"Online":M.reserved_by||"",channel:M.booking_channel||null}:null,te=(M.payment_method||"").toLowerCase(),xe=te==="card"?"Card":te==="cash"?"Cash":te==="online"?"Online":M.payment_method||"",Pe=parseFloat(M.paid_amount??""),ve=!Number.isNaN(Pe)&&Pe>0,se=M.payment_status==="paid",V=se?`Pltit${xe?` (${xe})`:""}${ve?`  ${Pe.toFixed(2)} lei`:""}`:"Nepltit",F=se?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600";return o.jsxs("tr",{style:{backgroundColor:C?"#ffe6e6":"white"},children:[o.jsx("td",{className:"p-2 border",children:L}),o.jsx("td",{className:"p-2 border",children:M.route_name}),o.jsx("td",{className:"p-2 border",children:M.time.substring(0,5)}),o.jsxs("td",{className:"p-2 border",children:[M.board_name||"","  ",M.exit_name||""]}),o.jsx("td",{className:"p-2 border",children:M.seat_label}),o.jsx("td",{className:"p-2 border",children:typeof M.status=="string"?o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status.toLowerCase()==="cancelled"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:M.status.toLowerCase()==="cancelled"?"Anulat":"Activ"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-600",children:""})}),o.jsx("td",{className:"p-2 border",children:B}),o.jsx("td",{className:"p-2 border",children:R}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs ${F}`,children:V})}),o.jsx("td",{className:"p-2 border",children:M.price_base??""}),o.jsx("td",{className:"p-2 border",children:M.discount_summary||""}),o.jsx("td",{className:"p-2 border",children:M.price_final??""}),o.jsx("td",{className:"p-2 border",children:M.id?o.jsx(MD,{reservationId:M.id,fallbackEvent:X}):""})]},M.id||O)})})]})]}),o.jsxs("section",{className:"mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-2",children:" Neprezentri"}),j.length===0?o.jsx("div",{className:"text-gray-500",children:"Nu exist neprezentri."}):o.jsxs("table",{className:"w-full text-sm border-collapse border",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-100",children:[o.jsx("th",{className:"p-2 border",children:"Data"}),o.jsx("th",{className:"p-2 border",children:"Traseu"}),o.jsx("th",{className:"p-2 border",children:"Ora"}),o.jsx("th",{className:"p-2 border",children:"Segment"}),o.jsx("th",{className:"p-2 border",children:"Loc"}),o.jsx("th",{className:"p-2 border",children:"Marcat de"}),o.jsx("th",{className:"p-2 border",children:"La"})]})}),o.jsx("tbody",{children:j.map(M=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border",children:M.date}),o.jsx("td",{className:"p-2 border",children:M.route_name}),o.jsx("td",{className:"p-2 border",children:M.time}),o.jsxs("td",{className:"p-2 border",children:[M.board_name||"","  ",M.exit_name||""]}),o.jsx("td",{className:"p-2 border",children:M.seat_label}),o.jsx("td",{className:"p-2 border",children:M.marked_by||""}),o.jsx("td",{className:"p-2 border",children:M.marked_at||""})]},M.id))})]})]}),o.jsx("div",{className:"mt-6",children:o.jsx(Kr,{to:"/",className:"text-blue-600 hover:underline",children:" napoi la rezervri"})})]})}function LD(){const[e,t]=f.useState(()=>new Date().toISOString().slice(0,10)),[r,i]=f.useState(null),[s,u]=f.useState([]),[d,m]=f.useState([]),[h,p]=f.useState([]),[g,b]=f.useState([]),[w,S]=f.useState([]);f.useEffect(()=>{fetch("/api/operators").then(_=>_.json()).then(_=>{u(_),_.length&&!r&&i(_[0].id)})},[]),f.useEffect(()=>{if(!r)return;const _=`date=${e}&operator_id=${r}`;fetch(`/api/trip_assignments?${_}`).then(M=>M.json()).then(m),fetch(`/api/employees?operator_id=${r}&role=driver`).then(M=>M.json()).then(M=>{const C=(Array.isArray(M)?M:[]).filter(L=>(L.role||"").toLowerCase()==="driver");p(C)}).catch(()=>p([])),fetch(`/api/routes_order?operator_id=${r}`).then(M=>M.json()).then(M=>{b(M.tur),S(M.retur)})},[e,r]),f.useEffect(()=>{fetch("/api/trips/autogenerate",{method:"POST"})},[]);const y=()=>o.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.map(_=>o.jsx("button",{onClick:()=>i(_.id),className:`px-3 py-2 rounded transition-colors ${r===_.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:_.name},_.id))}),j=({slot:_})=>{var L;const M=_.disabled,O=M?"line-through text-gray-400 opacity-60 cursor-not-allowed":"",C=B=>{if(M)return;const Z=B.target.value||null;fetch("/api/trip_assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trip_vehicle_id:_.trip_vehicle_id,employee_id:Z})}).then(R=>{if(!R.ok)return R.text().then(X=>Promise.reject(X||R.statusText))}).then(()=>fetch(`/api/trip_assignments?date=${e}&operator_id=${r}`).then(R=>R.json()).then(m)).catch(R=>{console.error("Eroare la salvare ofer:",R),alert("Nu s-a putut salva oferul: "+R)})};return o.jsxs("div",{className:`flex items-center gap-2 pl-4 py-1 ${O}`,title:M?"Cursa anulat":void 0,children:[o.jsx("span",{className:"w-16",children:(L=_.trip_time)==null?void 0:L.slice(0,5)}),o.jsxs("span",{className:"w-40",children:[_.vehicle_name," (",_.plate_number,")"]}),o.jsxs("select",{disabled:M,value:_.employee_id||"",onChange:C,className:`border px-2 py-1 rounded ${M?"bg-gray-100":""}`,children:[o.jsx("option",{value:"",children:" Alege ofer "}),h.map(B=>o.jsx("option",{value:B.id,children:B.name},B.id))]}),!_.is_primary&&o.jsx("span",{className:"text-xs bg-blue-100 rounded px-1 ml-2",children:"Dublur"})]},_.trip_vehicle_id)},N=g.map(_=>({routeName:_,slots:d.filter(M=>M.route_name===_&&M.direction==="tur")})),E=w.map(_=>({routeName:_,slots:d.filter(M=>M.route_name===_&&M.direction==="retur")}));return o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[o.jsxs("label",{className:"font-medium flex items-center gap-2",children:["Data:",o.jsx("input",{type:"date",value:e,onChange:_=>t(_.target.value),className:"border px-2 py-1 rounded"})]}),o.jsx(y,{})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-lg mb-2",children:"Tur"}),N.map(_=>o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"font-semibold bg-gray-100 px-2 py-1 rounded",children:_.routeName}),_.slots.length===0&&o.jsx("div",{className:"text-xs text-gray-400 italic pl-2",children:"Fr curse"}),_.slots.map(M=>o.jsx(j,{slot:M},M.trip_vehicle_id))]},_.routeName))]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-lg mb-2",children:"Retur"}),E.map(_=>o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"font-semibold bg-gray-100 px-2 py-1 rounded",children:_.routeName}),_.slots.length===0&&o.jsx("div",{className:"text-xs text-gray-400 italic pl-2",children:"Fr curse"}),_.slots.map(M=>o.jsx(j,{slot:M},M.trip_vehicle_id))]},_.routeName))]})]})]})}function kD({routeId:e}){const[t,r]=f.useState([]),[i,s]=f.useState([]),[u,d]=f.useState("00:00"),[m,h]=f.useState("tur"),[p,g]=f.useState(""),[b,w]=f.useState(!0),[S,y]=f.useState(null),[j,N]=f.useState(""),[E,_]=f.useState("tur"),[M,O]=f.useState(""),[C,L]=f.useState("time"),[B,Z]=f.useState("asc"),[R,X]=f.useState(""),[te,xe]=f.useState(""),Pe=async()=>{w(!0);try{console.log("DEBUG loading schedules for route",e);const[A,H]=await Promise.all([fetch("/api/operators").then(W=>W.json()),fetch(`/api/routes/${e}/schedules?include_defaults=1`).then(W=>W.json())]),U=(Array.isArray(A)?A:[]).map(W=>({id:Number(W.id??W.operator_id),name:W.name}));console.log("DEBUG operators:",A),s(U),r(Array.isArray(H)?H:[]),g(U.length&&U[0].id?String(U[0].id):"")}catch(A){console.error(A),r([]),s([])}finally{w(!1)}};f.useEffect(()=>{Pe()},[e]);const ve=!b&&!!p;console.log("DEBUG canAdd:",{loading:b,hour:u,operatorId:p,canAdd:ve});const se=Rc.useMemo(()=>{let A=[...t];if(R){const H=Number(R);A=A.filter(U=>Number(U.operator_id)===H)}if(te){const H=te.toLowerCase();A=A.filter(U=>(U.direction||"").toLowerCase()===H)}return A},[t,R,te]),V=Rc.useMemo(()=>{const A=[...se],H=B==="desc"?-1:1;return A.sort((U,W)=>{if(C==="time"){const[ge,Ke]=String(U.departure||"00:00").split(":").map(Se=>parseInt(Se,10)||0),[le,ce]=String(W.departure||"00:00").split(":").map(Se=>parseInt(Se,10)||0),K=ge*60+Ke,Ae=le*60+ce;if(K!==Ae)return(K-Ae)*H}if(C==="direction"){const ge={tur:0,retur:1},Ke=ge[(U.direction||"").toLowerCase()]??9,le=ge[(W.direction||"").toLowerCase()]??9;if(Ke!==le)return(Ke-le)*H}if(C==="operator"){const ge=(U.operator_name||"").toLowerCase(),Ke=(W.operator_name||"").toLowerCase();if(ge!==Ke)return ge.localeCompare(Ke)*H}const[ue,Ee]=String(U.departure||"00:00").split(":").map(ge=>parseInt(ge,10)||0),[be,Be]=String(W.departure||"00:00").split(":").map(ge=>parseInt(ge,10)||0),Te=ue*60+Ee,Ge=be*60+Be;return Te!==Ge?(Te-Ge)*(C==="time"?H:1):U.id-W.id}),A},[se,C,B]),F=async()=>{if(!p){alert("Alege operatorul");return}if(!u){alert("Completeaz ora");return}try{const A=await fetch(`/api/routes/${e}/schedules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({departure:u,direction:m,operator_id:Number(p)})});if(!A.ok){let H="Eroare la adugare";try{const U=await A.json();U!=null&&U.error&&(H=U.error)}catch{}alert(H);return}d("00:00"),await Pe()}catch(A){console.error(A),alert("Eroare la adugare")}},Y=async A=>{window.confirm("tergi ora?")&&(await fetch(`/api/routes/${e}/schedules/${A}`,{method:"DELETE"}),await Pe())},z=A=>{y(A.id),N(A.departure),_(A.direction||"tur"),O(String(A.operator_id||""))},T=()=>{y(null),N(""),_("tur"),O("")},P=async()=>{if(S){if(!/^\d{2}:\d{2}$/.test(j)){alert("Completeaz ora (HH:MM)");return}try{await fetch(`/api/routes/${e}/schedules/${S}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({departure:j,direction:E,operator_id:M?Number(M):null})}),T(),await Pe()}catch(A){console.error(A),alert("Eroare la salvare")}}};return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[o.jsxs("label",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-gray-600",children:"Filtru operator"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:R,onChange:A=>X(A.target.value),children:[o.jsx("option",{value:"",children:"Toi"}),i.map(A=>o.jsx("option",{value:A.id,children:A.name},A.id))]})]}),o.jsxs("label",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-gray-600",children:"Filtru sens"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:te,onChange:A=>xe(A.target.value),children:[o.jsx("option",{value:"",children:"Ambele"}),o.jsx("option",{value:"tur",children:"Tur"}),o.jsx("option",{value:"retur",children:"Retur"})]})]}),o.jsxs("label",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-gray-600",children:"Sorteaz dup"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:C,onChange:A=>L(A.target.value),children:[o.jsx("option",{value:"time",children:"Or"}),o.jsx("option",{value:"direction",children:"Sens"}),o.jsx("option",{value:"operator",children:"Operator"})]})]}),o.jsxs("label",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-gray-600",children:"Ordine"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:B,onChange:A=>Z(A.target.value),children:[o.jsx("option",{value:"asc",children:"Asc"}),o.jsx("option",{value:"desc",children:"Desc"})]})]}),(R||te)&&o.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{X(""),xe("")},title:"Reseteaz filtrele",children:"Reset"})]}),S===null&&o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("input",{type:"time",step:"60",className:"border rounded px-2 py-1",value:u,onChange:A=>d(A.target.value)}),o.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:A=>h(A.target.value),children:[o.jsx("option",{value:"tur",children:"Tur"}),o.jsx("option",{value:"retur",children:"Retur"})]}),o.jsxs("select",{className:"border rounded px-2 py-1",value:p,onChange:A=>g(A.target.value),title:"Operator",children:[o.jsx("option",{value:"",children:" alege operator "}),i.map(A=>o.jsx("option",{value:A.id,children:A.name},A.id))]}),o.jsx("button",{className:"px-3 py-1 bg-green-600 text-white rounded disabled:opacity-50",onClick:F,disabled:!ve,title:p?u?"Adaug":"Completeaz ora":"Alege operatorul",children:"Adaug"}),!ve&&o.jsx("span",{className:"text-xs text-gray-500 ml-2",children:u?p?b?"Se ncarc":"":"Lipsete operatorul":"Lipsete ora"})]}),b&&o.jsx("div",{className:"text-sm text-gray-500",children:"Se ncarc orele"}),!b&&t.length===0&&o.jsx("div",{className:"text-sm text-gray-500",children:"Nicio or pentru rut."}),!b&&V.length>0&&o.jsx("ul",{className:"space-y-1",children:V.map(A=>o.jsx("li",{className:"flex items-center justify-between border rounded px-2 py-1 bg-white",children:S===A.id?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("input",{type:"time",step:"60",className:"border rounded px-2 py-1",value:j,onChange:H=>N(H.target.value)}),o.jsxs("select",{className:"border rounded px-2 py-1",value:E,onChange:H=>_(H.target.value),children:[o.jsx("option",{value:"tur",children:"Tur"}),o.jsx("option",{value:"retur",children:"Retur"})]}),o.jsxs("select",{className:"border rounded px-2 py-1",value:M,onChange:H=>O(H.target.value),title:"Operator",children:[o.jsx("option",{value:"",children:" alege operator "}),i.map(H=>o.jsx("option",{value:H.id,children:H.name},H.id))]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",onClick:P,children:"Salveaz"}),o.jsx("button",{className:"px-3 py-1 border rounded text-sm",onClick:T,children:"Anuleaz"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-mono",children:A.departure}),o.jsxs("span",{className:"text-gray-500",children:["  ",A.direction]}),A.operator_name?o.jsxs("span",{className:"ml-2 text-xs text-gray-600",children:["(",A.operator_name,")"]}):A.operator_id?o.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(operator #",A.operator_id,")"]}):null,A.default_vehicle_name&&o.jsxs("span",{className:"ml-2 text-xs text-indigo-600",children:["vehicul implicit: ",A.default_vehicle_name,A.default_vehicle_plate?` (${A.default_vehicle_plate})`:""]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:`text-blue-700 text-sm ${S?"opacity-50 pointer-events-none":""}`,onClick:()=>z(A),disabled:!!S,children:"Editeaz"}),o.jsx("button",{className:`text-red-600 text-sm ${S?"opacity-50 pointer-events-none":""}`,onClick:()=>Y(A.id),disabled:!!S,children:"terge"})]})]})},A.id))})]})}function AD(){const[e,t]=f.useState([]),[r,i]=f.useState(null),[s,u]=f.useState(""),[d,m]=f.useState(!0),[h,p]=f.useState(!0),[g,b]=f.useState(!0),[w,S]=f.useState({key:"name",direction:"asc"}),y=async()=>{try{const C=await vt.get("/api/routes");t(C.data)}catch(C){console.error("Eroare la ncrcarea rutelor:",C),alert("Nu s-au putut ncrca rutele")}};f.useEffect(()=>{y()},[]);const j=C=>{let L="asc";w.key===C&&w.direction==="asc"&&(L="desc"),S({key:C,direction:L})},N=f.useMemo(()=>{const C=[...e];return C.sort((L,B)=>{let Z=(L[w.key]||"").toLowerCase(),R=(B[w.key]||"").toLowerCase();return Z<R?w.direction==="asc"?-1:1:Z>R?w.direction==="asc"?1:-1:0}),C},[e,w]),E=async(C,L)=>{try{await vt.patch(`/api/routes/${C}`,L),await y()}catch(B){console.error("Eroare la actualizarea rutei:",B),alert("Nu s-a putut salva modificarea.")}},_=async()=>{const C=s.trim();if(!C){alert("Scrie numele rutei");return}try{await vt.post("/api/routes",{name:C,visible_in_reservations:d,visible_for_drivers:h,visible_online:g}),u(""),m(!0),p(!0),b(!0),await y()}catch(L){console.error("Eroare la adugare rut:",L),alert("Nu s-a putut aduga ruta.")}},M=async(C,L)=>{var B,Z;if(window.confirm(`Sigur vrei s tergi ruta "${L}"?`))try{await vt.delete(`/api/routes/${C}`),await y()}catch(R){const X=((Z=(B=R.response)==null?void 0:B.data)==null?void 0:Z.error)||"Eroare la tergere.";alert(X)}},O=C=>{window.open(`/admin/routes/${C}/edit`,"_blank","noopener,noreferrer")};return o.jsxs("div",{className:"overflow-x-auto",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Trasee"}),o.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsxs("th",{onClick:()=>j("name"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Nume",w.key==="name"?w.direction==="asc"?" ":" ":""]}),o.jsx("th",{className:"p-1 border text-center bg-gray-200",children:"Apare n rezervri"}),o.jsx("th",{className:"p-1 border text-center bg-gray-200",children:"Apare la ofer"}),o.jsx("th",{className:"p-1 border text-center bg-gray-200",children:"Apare online"}),o.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Aciuni"})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{className:"bg-white",children:[o.jsx("td",{className:"p-1 border",children:o.jsx("input",{className:"w-full border rounded px-2 py-1",placeholder:"Nume rut (ex: Botoani  Iai)",value:s,onChange:C=>u(C.target.value)})}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:d,onChange:C=>m(C.target.checked)})}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:h,onChange:C=>p(C.target.checked)})}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:g,onChange:C=>b(C.target.checked)})}),o.jsx("td",{className:"p-1 border",children:o.jsx("button",{className:"px-3 py-1 bg-green-600 text-white rounded text-sm",onClick:_,children:"Adaug"})})]}),N.map((C,L)=>o.jsxs(Rc.Fragment,{children:[o.jsxs("tr",{className:L%2===0?"bg-white":"bg-gray-50",children:[o.jsx("td",{className:"p-1 border",children:C.name}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:!!C.visible_in_reservations,onChange:B=>E(C.id,{visible_in_reservations:B.target.checked})})}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:!!C.visible_for_drivers,onChange:B=>E(C.id,{visible_for_drivers:B.target.checked})})}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:!!C.visible_online,onChange:B=>E(C.id,{visible_online:B.target.checked})})}),o.jsxs("td",{className:"p-1 border",children:[o.jsx("button",{className:"px-2 py-1 text-xs bg-blue-500 text-white rounded",onClick:()=>O(C.id),title:"Deschide n tab nou",children:"Editeaz"}),o.jsx("button",{className:"px-2 py-1 text-xs bg-gray-700 text-white rounded",onClick:()=>i(r===C.id?null:C.id),title:"Gestioneaz ore",children:"Ore"}),o.jsx("button",{className:"px-2 py-1 bg-red-600 text-white rounded text-sm ml-1",onClick:()=>M(C.id,C.name),children:"terge"})]})]}),r===C.id&&o.jsx("tr",{children:o.jsx("td",{className:"p-2 border bg-gray-50",colSpan:5,children:o.jsx(kD,{routeId:C.id})})})]},C.id))]})]})]})}function Hc(e){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(e)}function TD(e,t){if(Hc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(Hc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DD(e){var t=TD(e,"string");return Hc(t)=="symbol"?t:t+""}function Re(e,t,r){return(t=DD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qj(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xm,l0;function RD(){if(l0)return Xm;l0=1;var e=function(r,i,s,u,d,m,h,p){if(!r){var g;if(i===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[s,u,d,m,h,p],w=0;g=new Error(i.replace(/%s/g,function(){return b[w++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}};return Xm=e,Xm}var PD=RD(),Kn=qj(PD),Tt=f.createContext(null);function zD(){Kn(!!f.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=f.useContext(Tt);return Kn(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}function $D(e,t,r){return Object.keys(e).reduce(function(s,u){return t(s,e[u],u)},r)}function UD(e,t){Object.keys(e).forEach(r=>t(e[r],r))}function ID(e,t,r,i){var s={},u=(d,m)=>{var h=r[m];h!==t[m]&&(s[m]=h,d(i,h))};return UD(e,u),s}function VD(e,t,r){var i=$D(r,function(u,d,m){return typeof e[m]=="function"&&u.push(google.maps.event.addListener(t,d,e[m])),u},[]);return i}function BD(e){google.maps.event.removeListener(e)}function Ht(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];e.forEach(BD)}function It(e){var{updaterMap:t,eventMap:r,prevProps:i,nextProps:s,instance:u}=e,d=VD(s,u,r);return ID(t,i,s,u),d}var c0={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},u0={extraMapTypes(e,t){t.forEach(function(i,s){e.mapTypes.set(String(s),i)})},center(e,t){e.setCenter(t)},clickableIcons(e,t){e.setClickableIcons(t)},heading(e,t){e.setHeading(t)},mapTypeId(e,t){e.setMapTypeId(t)},options(e,t){e.setOptions(t)},streetView(e,t){e.setStreetView(t)},tilt(e,t){e.setTilt(t)},zoom(e,t){e.setZoom(t)}};function HD(e){var{children:t,options:r,id:i,mapContainerStyle:s,mapContainerClassName:u,center:d,onClick:m,onDblClick:h,onDrag:p,onDragEnd:g,onDragStart:b,onMouseMove:w,onMouseOut:S,onMouseOver:y,onMouseDown:j,onMouseUp:N,onRightClick:E,onCenterChanged:_,onLoad:M,onUnmount:O}=e,[C,L]=f.useState(null),B=f.useRef(null),[Z,R]=f.useState(null),[X,te]=f.useState(null),[xe,Pe]=f.useState(null),[ve,se]=f.useState(null),[V,F]=f.useState(null),[Y,z]=f.useState(null),[T,P]=f.useState(null),[A,H]=f.useState(null),[U,W]=f.useState(null),[ue,Ee]=f.useState(null),[be,Be]=f.useState(null),[Te,Ge]=f.useState(null);return f.useEffect(()=>{r&&C!==null&&C.setOptions(r)},[C,r]),f.useEffect(()=>{C!==null&&typeof d<"u"&&C.setCenter(d)},[C,d]),f.useEffect(()=>{C&&h&&(X!==null&&google.maps.event.removeListener(X),te(google.maps.event.addListener(C,"dblclick",h)))},[h]),f.useEffect(()=>{C&&g&&(xe!==null&&google.maps.event.removeListener(xe),Pe(google.maps.event.addListener(C,"dragend",g)))},[g]),f.useEffect(()=>{C&&b&&(ve!==null&&google.maps.event.removeListener(ve),se(google.maps.event.addListener(C,"dragstart",b)))},[b]),f.useEffect(()=>{C&&j&&(V!==null&&google.maps.event.removeListener(V),F(google.maps.event.addListener(C,"mousedown",j)))},[j]),f.useEffect(()=>{C&&w&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(C,"mousemove",w)))},[w]),f.useEffect(()=>{C&&S&&(T!==null&&google.maps.event.removeListener(T),P(google.maps.event.addListener(C,"mouseout",S)))},[S]),f.useEffect(()=>{C&&y&&(A!==null&&google.maps.event.removeListener(A),H(google.maps.event.addListener(C,"mouseover",y)))},[y]),f.useEffect(()=>{C&&N&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(C,"mouseup",N)))},[N]),f.useEffect(()=>{C&&E&&(ue!==null&&google.maps.event.removeListener(ue),Ee(google.maps.event.addListener(C,"rightclick",E)))},[E]),f.useEffect(()=>{C&&m&&(be!==null&&google.maps.event.removeListener(be),Be(google.maps.event.addListener(C,"click",m)))},[m]),f.useEffect(()=>{C&&p&&(Te!==null&&google.maps.event.removeListener(Te),Ge(google.maps.event.addListener(C,"drag",p)))},[p]),f.useEffect(()=>{C&&_&&(Z!==null&&google.maps.event.removeListener(Z),R(google.maps.event.addListener(C,"center_changed",_)))},[m]),f.useEffect(()=>{var ge=B.current===null?null:new google.maps.Map(B.current,r);return L(ge),ge!==null&&M&&M(ge),()=>{ge!==null&&O&&O(ge)}},[]),o.jsx("div",{id:i,ref:B,style:s,className:u,children:o.jsx(Tt.Provider,{value:C,children:C!==null?t:null})})}f.memo(HD);class Gj extends f.PureComponent{constructor(){super(...arguments),Re(this,"state",{map:null}),Re(this,"registeredEvents",[]),Re(this,"mapRef",null),Re(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),Re(this,"panTo",t=>{var r=this.getInstance();r&&r.panTo(t)}),Re(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),Re(this,"getRef",t=>{this.mapRef=t})}componentDidMount(){var t=this.getInstance();this.registeredEvents=It({updaterMap:u0,eventMap:c0,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{map:t}},this.setMapCallback)}componentDidUpdate(t){this.state.map!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:u0,eventMap:c0,prevProps:t,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),Ht(this.registeredEvents))}render(){return o.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:o.jsx(Tt.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function d0(e,t,r,i,s,u,d){try{var m=e[u](d),h=m.value}catch(p){return void r(p)}m.done?t(h):Promise.resolve(h).then(i,s)}function Wj(e){return function(){var t=this,r=arguments;return new Promise(function(i,s){var u=e.apply(t,r);function d(h){d0(u,i,s,d,m,"next",h)}function m(h){d0(u,i,s,d,m,"throw",h)}d(void 0)})}}function Zj(e){var{googleMapsApiKey:t,googleMapsClientId:r,version:i="weekly",language:s,region:u,libraries:d,channel:m,mapIds:h,authReferrerPolicy:p,apiUrl:g="https://maps.googleapis.com"}=e,b=[];return Kn(t&&r||!(t&&r),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?b.push("key=".concat(t)):r&&b.push("client=".concat(r)),i&&b.push("v=".concat(i)),s&&b.push("language=".concat(s)),u&&b.push("region=".concat(u)),d&&d.length&&b.push("libraries=".concat(d.sort().join(","))),m&&b.push("channel=".concat(m)),h&&h.length&&b.push("map_ids=".concat(h.join(","))),p&&b.push("auth_referrer_policy=".concat(p)),b.push("loading=async"),b.push("callback=initMap"),"".concat(g,"/maps/api/js?").concat(b.join("&"))}var ms=typeof document<"u";function Xj(e){var{url:t,id:r,nonce:i}=e;return ms?new Promise(function(u,d){var m=document.getElementById(r),h=window;if(m){var p=m.getAttribute("data-state");if(m.src===t&&p!=="error"){if(p==="ready")return u(r);var g=h.initMap,b=m.onerror;h.initMap=function(){g&&g(),u(r)},m.onerror=function(S){b&&b(S),d(S)};return}else m.remove()}var w=document.createElement("script");w.type="text/javascript",w.src=t,w.id=r,w.async=!0,w.nonce=i||"",w.onerror=function(y){w.setAttribute("data-state","error"),d(y)},h.initMap=function(){w.setAttribute("data-state","ready"),u(r)},document.head.appendChild(w)}).catch(s=>{throw console.error("injectScript error: ",s),s}):Promise.reject(new Error("document is undefined"))}function f0(e){var t=e.href;return t&&(t.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:e.tagName.toLowerCase()==="style"&&e.styleSheet&&e.styleSheet.cssText&&e.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(e.styleSheet.cssText="",!0):e.tagName.toLowerCase()==="style"&&e.innerHTML&&e.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(e.innerHTML="",!0):e.tagName.toLowerCase()==="style"&&!e.styleSheet&&!e.innerHTML}function Cg(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(s,u){return f0(s)||Reflect.apply(t,e,[s,u]),s};var r=e.appendChild.bind(e);e.appendChild=function(s){return f0(s)||Reflect.apply(r,e,[s]),s}}}var Nc=!1;function Kj(){return o.jsx("div",{children:"Loading..."})}var Fc={id:"script-loader",version:"weekly"};class FD extends f.PureComponent{constructor(){super(...arguments),Re(this,"check",null),Re(this,"state",{loaded:!1}),Re(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Re(this,"isCleaningUp",Wj(function*(){function t(r){if(!Nc)r();else if(ms)var i=window.setInterval(function(){Nc||(window.clearInterval(i),r())},1)}return new Promise(t)})),Re(this,"cleanup",()=>{Nc=!0;var t=document.getElementById(this.props.id);t&&t.parentNode&&t.parentNode.removeChild(t),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(i){return typeof i.src=="string"&&i.src.includes("maps.googleapis")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(i){return i.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(i){return i.innerText!==void 0&&i.innerText.length>0&&i.innerText.includes(".gm-")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)})}),Re(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&Cg(),Kn(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var t={id:this.props.id,nonce:this.props.nonce,url:Zj(this.props)};Xj(t).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(r=>{this.props.onError&&this.props.onError(r),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),Re(this,"getRef",t=>{this.check=t})}componentDidMount(){if(ms){if(window.google&&window.google.maps&&!Nc){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(r){console.error("Error at injecting script after cleaning up: ",r)})}}componentDidUpdate(t){this.props.libraries!==t.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),ms&&t.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(ms){this.cleanup();var t=()=>{this.check||(delete window.google,Nc=!1)};window.setTimeout(t,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||o.jsx(Kj,{})]})}}Re(FD,"defaultProps",Fc);function YD(e,t){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}function Eg(e,t){if(e==null)return{};var r,i,s=YD(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++)r=u[i],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var h0;function qD(e){var{id:t=Fc.id,version:r=Fc.version,nonce:i,googleMapsApiKey:s,googleMapsClientId:u,language:d,region:m,libraries:h,preventGoogleFontsLoading:p,channel:g,mapIds:b,authReferrerPolicy:w,apiUrl:S="https://maps.googleapis.com"}=e,y=f.useRef(!1),[j,N]=f.useState(!1),[E,_]=f.useState(void 0);f.useEffect(function(){return y.current=!0,()=>{y.current=!1}},[]),f.useEffect(function(){ms&&p&&Cg()},[p]),f.useEffect(function(){j&&Kn(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[j]);var M=Zj({version:r,googleMapsApiKey:s,googleMapsClientId:u,language:d,region:m,libraries:h,channel:g,mapIds:b,authReferrerPolicy:w,apiUrl:S});f.useEffect(function(){if(!ms)return;function L(){y.current&&(N(!0),h0=M)}if(window.google&&window.google.maps&&h0===M){L();return}Xj({id:t,url:M,nonce:i}).then(L).catch(function(Z){y.current&&_(Z),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(s||"-",") or Client ID (").concat(u||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(Z)})},[t,M,i]);var O=f.useRef(void 0);return f.useEffect(function(){O.current&&h!==O.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),O.current=h},[h]),{isLoaded:j,loadError:E,url:M}}var GD=["loadingElement","onLoad","onError","onUnmount","children"],WD=o.jsx(Kj,{});function ZD(e){var{loadingElement:t,onLoad:r,onError:i,onUnmount:s,children:u}=e,d=Eg(e,GD),{isLoaded:m,loadError:h}=qD(d);return f.useEffect(function(){m&&typeof r=="function"&&r()},[m,r]),f.useEffect(function(){h&&typeof i=="function"&&i(h)},[h,i]),f.useEffect(function(){return()=>{s&&s()}},[s]),m?u:t||WD}f.memo(ZD);function XD(e,t,r,i){function s(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(g){try{p(i.next(g))}catch(b){d(b)}}function h(g){try{p(i.throw(g))}catch(b){d(b)}}function p(g){g.done?u(g.value):s(g.value).then(m,h)}p((i=i.apply(e,[])).next())})}function KD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var QD=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var i,s,u;if(Array.isArray(t)){if(i=t.length,i!=r.length)return!1;for(s=i;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(u=Object.keys(t),i=u.length,i!==Object.keys(r).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,u[s]))return!1;for(s=i;s--!==0;){var d=u[s];if(!e(t[d],r[d]))return!1}return!0}return t!==t&&r!==r},JD=KD(QD),m0="__googleMapsScriptId",Wo;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Wo||(Wo={}));class Bs{constructor(t){var{apiKey:r,authReferrerPolicy:i,channel:s,client:u,id:d=m0,language:m,libraries:h=[],mapIds:p,nonce:g,region:b,retries:w=3,url:S="https://maps.googleapis.com/maps/api/js",version:y}=t;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=r,this.authReferrerPolicy=i,this.channel=s,this.client=u,this.id=d||m0,this.language=m,this.libraries=h,this.mapIds=p,this.nonce=g,this.region=b,this.retries=w,this.url=S,this.version=y,Bs.instance){if(!JD(this.options,Bs.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(Bs.instance.options)));return Bs.instance}Bs.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Wo.FAILURE:this.done?Wo.SUCCESS:this.loading?Wo.LOADING:Wo.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var t=this.url;return t+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(t+="&key=".concat(this.apiKey)),this.channel&&(t+="&channel=".concat(this.channel)),this.client&&(t+="&client=".concat(this.client)),this.libraries.length>0&&(t+="&libraries=".concat(this.libraries.join(","))),this.language&&(t+="&language=".concat(this.language)),this.region&&(t+="&region=".concat(this.region)),this.version&&(t+="&v=".concat(this.version)),this.mapIds&&(t+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(t+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),t}deleteScript(){var t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(i=>{i?r(i.error):t(window.google)})})}importLibrary(t){return this.execute(),google.maps.importLibrary(t)}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){var t,r;if(document.getElementById(this.id)){this.callback();return}var i={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(i).forEach(u=>!i[u]&&delete i[u]),!((r=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.maps)===null||r===void 0)&&r.importLibrary||(u=>{var d,m,h,p="The Google Maps JavaScript API",g="google",b="importLibrary",w="__ib__",S=document,y=window;y=y[g]||(y[g]={});var j=y.maps||(y.maps={}),N=new Set,E=new URLSearchParams,_=()=>d||(d=new Promise((M,O)=>XD(this,void 0,void 0,function*(){var C;yield m=S.createElement("script"),m.id=this.id,E.set("libraries",[...N]+"");for(h in u)E.set(h.replace(/[A-Z]/g,L=>"_"+L[0].toLowerCase()),u[h]);E.set("callback",g+".maps."+w),m.src=this.url+"?"+E,j[w]=M,m.onerror=()=>d=O(Error(p+" could not load.")),m.nonce=this.nonce||((C=S.querySelector("script[nonce]"))===null||C===void 0?void 0:C.nonce)||"",S.head.append(m)})));j[b]?console.warn(p+" only loads once. Ignoring:",u):j[b]=function(M){for(var O=arguments.length,C=new Array(O>1?O-1:0),L=1;L<O;L++)C[L-1]=arguments[L];return N.add(M)&&_().then(()=>j[b](M,...C))}})(i);var s=this.libraries.map(u=>this.importLibrary(u));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),u=>{var d=new ErrorEvent("error",{error:u});this.loadErrorCallback(d)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){var r=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(r," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var eR=["maps"];function tR(e){var{id:t=Fc.id,version:r=Fc.version,nonce:i,googleMapsApiKey:s,language:u,region:d,libraries:m=eR,preventGoogleFontsLoading:h,mapIds:p,authReferrerPolicy:g}=e,b=f.useRef(!1),[w,S]=f.useState(!1),[y,j]=f.useState(void 0);f.useEffect(function(){return b.current=!0,()=>{b.current=!1}},[]);var N=f.useMemo(()=>new Bs({id:t,apiKey:s,version:r,libraries:m,language:u||"en",region:d||"US",mapIds:p||[],nonce:i||"",authReferrerPolicy:g||"origin"}),[t,s,r,m,u,d,p,i,g]);f.useEffect(function(){w||N.load().then(()=>{b.current&&S(!0)}).catch(M=>{j(M)})},[]),f.useEffect(()=>{ms&&h&&Cg()},[h]);var E=f.useRef();return f.useEffect(()=>{E.current&&m!==E.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),E.current=m},[m]),{isLoaded:w,loadError:y}}function p0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function of(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var g0={},v0={options(e,t){e.setOptions(t)}};function nR(e){var{options:t,onLoad:r,onUnmount:i}=e,s=f.useContext(Tt),[u,d]=f.useState(null);return f.useEffect(()=>{u!==null&&u.setMap(s)},[s]),f.useEffect(()=>{t&&u!==null&&u.setOptions(t)},[u,t]),f.useEffect(()=>{var m=new google.maps.TrafficLayer(of(of({},t),{},{map:s}));return d(m),r&&r(m),()=>{u!==null&&(i&&i(u),u.setMap(null))}},[]),null}f.memo(nR);class rR extends f.PureComponent{constructor(){super(...arguments),Re(this,"state",{trafficLayer:null}),Re(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Re(this,"registeredEvents",[])}componentDidMount(){var t=new google.maps.TrafficLayer(of(of({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:v0,eventMap:g0,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{trafficLayer:t}},this.setTrafficLayerCallback)}componentDidUpdate(t){this.state.trafficLayer!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:v0,eventMap:g0,prevProps:t,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Ht(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Re(rR,"contextType",Tt);function aR(e){var{onLoad:t,onUnmount:r}=e,i=f.useContext(Tt),[s,u]=f.useState(null);return f.useEffect(()=>{s!==null&&s.setMap(i)},[i]),f.useEffect(()=>{var d=new google.maps.BicyclingLayer;return u(d),d.setMap(i),t&&t(d),()=>{d!==null&&(r&&r(d),d.setMap(null))}},[]),null}f.memo(aR);class iR extends f.PureComponent{constructor(){super(...arguments),Re(this,"state",{bicyclingLayer:null}),Re(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var t=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:t}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Re(iR,"contextType",Tt);function sR(e){var{onLoad:t,onUnmount:r}=e,i=f.useContext(Tt),[s,u]=f.useState(null);return f.useEffect(()=>{s!==null&&s.setMap(i)},[i]),f.useEffect(()=>{var d=new google.maps.TransitLayer;return u(d),d.setMap(i),t&&t(d),()=>{s!==null&&(r&&r(s),s.setMap(null))}},[]),null}f.memo(sR);class oR extends f.PureComponent{constructor(){super(...arguments),Re(this,"state",{transitLayer:null}),Re(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var t=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:t}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}Re(oR,"contextType",Tt);function b0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function lf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var y0={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},x0={drawingMode(e,t){e.setDrawingMode(t)},options(e,t){e.setOptions(t)}};function lR(e){var{options:t,drawingMode:r,onCircleComplete:i,onMarkerComplete:s,onOverlayComplete:u,onPolygonComplete:d,onPolylineComplete:m,onRectangleComplete:h,onLoad:p,onUnmount:g}=e,b=f.useContext(Tt),[w,S]=f.useState(null),[y,j]=f.useState(null),[N,E]=f.useState(null),[_,M]=f.useState(null),[O,C]=f.useState(null),[L,B]=f.useState(null),[Z,R]=f.useState(null);return f.useEffect(()=>{w!==null&&w.setMap(b)},[b]),f.useEffect(()=>{t&&w!==null&&w.setOptions(t)},[w,t]),f.useEffect(()=>{w!==null&&w.setDrawingMode(r??null)},[w,r]),f.useEffect(()=>{w&&i&&(y!==null&&google.maps.event.removeListener(y),j(google.maps.event.addListener(w,"circlecomplete",i)))},[w,i]),f.useEffect(()=>{w&&s&&(N!==null&&google.maps.event.removeListener(N),E(google.maps.event.addListener(w,"markercomplete",s)))},[w,s]),f.useEffect(()=>{w&&u&&(_!==null&&google.maps.event.removeListener(_),M(google.maps.event.addListener(w,"overlaycomplete",u)))},[w,u]),f.useEffect(()=>{w&&d&&(O!==null&&google.maps.event.removeListener(O),C(google.maps.event.addListener(w,"polygoncomplete",d)))},[w,d]),f.useEffect(()=>{w&&m&&(L!==null&&google.maps.event.removeListener(L),B(google.maps.event.addListener(w,"polylinecomplete",m)))},[w,m]),f.useEffect(()=>{w&&h&&(Z!==null&&google.maps.event.removeListener(Z),R(google.maps.event.addListener(w,"rectanglecomplete",h)))},[w,h]),f.useEffect(()=>{Kn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var X=new google.maps.drawing.DrawingManager(lf(lf({},t),{},{map:b}));return r&&X.setDrawingMode(r),i&&j(google.maps.event.addListener(X,"circlecomplete",i)),s&&E(google.maps.event.addListener(X,"markercomplete",s)),u&&M(google.maps.event.addListener(X,"overlaycomplete",u)),d&&C(google.maps.event.addListener(X,"polygoncomplete",d)),m&&B(google.maps.event.addListener(X,"polylinecomplete",m)),h&&R(google.maps.event.addListener(X,"rectanglecomplete",h)),S(X),p&&p(X),()=>{w!==null&&(y&&google.maps.event.removeListener(y),N&&google.maps.event.removeListener(N),_&&google.maps.event.removeListener(_),O&&google.maps.event.removeListener(O),L&&google.maps.event.removeListener(L),Z&&google.maps.event.removeListener(Z),g&&g(w),w.setMap(null))}},[]),null}f.memo(lR);class cR extends f.PureComponent{constructor(t){super(t),Re(this,"registeredEvents",[]),Re(this,"state",{drawingManager:null}),Re(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Kn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var t=new google.maps.drawing.DrawingManager(lf(lf({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:x0,eventMap:y0,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{drawingManager:t}},this.setDrawingManagerCallback)}componentDidUpdate(t){this.state.drawingManager!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:x0,eventMap:y0,prevProps:t,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Ht(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}Re(cR,"contextType",Tt);function w0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var S0={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},j0={animation(e,t){e.setAnimation(t)},clickable(e,t){e.setClickable(t)},cursor(e,t){e.setCursor(t)},draggable(e,t){e.setDraggable(t)},icon(e,t){e.setIcon(t)},label(e,t){e.setLabel(t)},map(e,t){e.setMap(t)},opacity(e,t){e.setOpacity(t)},options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},shape(e,t){e.setShape(t)},title(e,t){e.setTitle(t)},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},cf={};function uR(e){var{position:t,options:r,clusterer:i,noClustererRedraw:s,children:u,draggable:d,visible:m,animation:h,clickable:p,cursor:g,icon:b,label:w,opacity:S,shape:y,title:j,zIndex:N,onClick:E,onDblClick:_,onDrag:M,onDragEnd:O,onDragStart:C,onMouseOut:L,onMouseOver:B,onMouseUp:Z,onMouseDown:R,onRightClick:X,onClickableChanged:te,onCursorChanged:xe,onAnimationChanged:Pe,onDraggableChanged:ve,onFlatChanged:se,onIconChanged:V,onPositionChanged:F,onShapeChanged:Y,onTitleChanged:z,onVisibleChanged:T,onZindexChanged:P,onLoad:A,onUnmount:H}=e,U=f.useContext(Tt),[W,ue]=f.useState(null),[Ee,be]=f.useState(null),[Be,Te]=f.useState(null),[Ge,ge]=f.useState(null),[Ke,le]=f.useState(null),[ce,K]=f.useState(null),[Ae,Se]=f.useState(null),[De,Ze]=f.useState(null),[Ve,de]=f.useState(null),[I,oe]=f.useState(null),[he,_e]=f.useState(null),[ae,fe]=f.useState(null),[ne,Xe]=f.useState(null),[Je,et]=f.useState(null),[ot,wt]=f.useState(null),[rt,$t]=f.useState(null),[Lt,Yn]=f.useState(null),[Un,ea]=f.useState(null),[bt,mt]=f.useState(null),[gt,Zt]=f.useState(null),[qn,Ft]=f.useState(null),[jn,nn]=f.useState(null);f.useEffect(()=>{W!==null&&W.setMap(U)},[U]),f.useEffect(()=>{typeof r<"u"&&W!==null&&W.setOptions(r)},[W,r]),f.useEffect(()=>{typeof d<"u"&&W!==null&&W.setDraggable(d)},[W,d]),f.useEffect(()=>{t&&W!==null&&W.setPosition(t)},[W,t]),f.useEffect(()=>{typeof m<"u"&&W!==null&&W.setVisible(m)},[W,m]),f.useEffect(()=>{W==null||W.setAnimation(h)},[W,h]),f.useEffect(()=>{W&&p!==void 0&&W.setClickable(p)},[W,p]),f.useEffect(()=>{W&&g!==void 0&&W.setCursor(g)},[W,g]),f.useEffect(()=>{W&&b!==void 0&&W.setIcon(b)},[W,b]),f.useEffect(()=>{W&&w!==void 0&&W.setLabel(w)},[W,w]),f.useEffect(()=>{W&&S!==void 0&&W.setOpacity(S)},[W,S]),f.useEffect(()=>{W&&y!==void 0&&W.setShape(y)},[W,y]),f.useEffect(()=>{W&&j!==void 0&&W.setTitle(j)},[W,j]),f.useEffect(()=>{W&&N!==void 0&&W.setZIndex(N)},[W,N]),f.useEffect(()=>{W&&_&&(Ee!==null&&google.maps.event.removeListener(Ee),be(google.maps.event.addListener(W,"dblclick",_)))},[_]),f.useEffect(()=>{W&&O&&(Be!==null&&google.maps.event.removeListener(Be),Te(google.maps.event.addListener(W,"dragend",O)))},[O]),f.useEffect(()=>{W&&C&&(Ge!==null&&google.maps.event.removeListener(Ge),ge(google.maps.event.addListener(W,"dragstart",C)))},[C]),f.useEffect(()=>{W&&R&&(Ke!==null&&google.maps.event.removeListener(Ke),le(google.maps.event.addListener(W,"mousedown",R)))},[R]),f.useEffect(()=>{W&&L&&(ce!==null&&google.maps.event.removeListener(ce),K(google.maps.event.addListener(W,"mouseout",L)))},[L]),f.useEffect(()=>{W&&B&&(Ae!==null&&google.maps.event.removeListener(Ae),Se(google.maps.event.addListener(W,"mouseover",B)))},[B]),f.useEffect(()=>{W&&Z&&(De!==null&&google.maps.event.removeListener(De),Ze(google.maps.event.addListener(W,"mouseup",Z)))},[Z]),f.useEffect(()=>{W&&X&&(Ve!==null&&google.maps.event.removeListener(Ve),de(google.maps.event.addListener(W,"rightclick",X)))},[X]),f.useEffect(()=>{W&&E&&(I!==null&&google.maps.event.removeListener(I),oe(google.maps.event.addListener(W,"click",E)))},[E]),f.useEffect(()=>{W&&M&&(he!==null&&google.maps.event.removeListener(he),_e(google.maps.event.addListener(W,"drag",M)))},[M]),f.useEffect(()=>{W&&te&&(ae!==null&&google.maps.event.removeListener(ae),fe(google.maps.event.addListener(W,"clickable_changed",te)))},[te]),f.useEffect(()=>{W&&xe&&(ne!==null&&google.maps.event.removeListener(ne),Xe(google.maps.event.addListener(W,"cursor_changed",xe)))},[xe]),f.useEffect(()=>{W&&Pe&&(Je!==null&&google.maps.event.removeListener(Je),et(google.maps.event.addListener(W,"animation_changed",Pe)))},[Pe]),f.useEffect(()=>{W&&ve&&(ot!==null&&google.maps.event.removeListener(ot),wt(google.maps.event.addListener(W,"draggable_changed",ve)))},[ve]),f.useEffect(()=>{W&&se&&(rt!==null&&google.maps.event.removeListener(rt),$t(google.maps.event.addListener(W,"flat_changed",se)))},[se]),f.useEffect(()=>{W&&V&&(Lt!==null&&google.maps.event.removeListener(Lt),Yn(google.maps.event.addListener(W,"icon_changed",V)))},[V]),f.useEffect(()=>{W&&F&&(Un!==null&&google.maps.event.removeListener(Un),ea(google.maps.event.addListener(W,"position_changed",F)))},[F]),f.useEffect(()=>{W&&Y&&(bt!==null&&google.maps.event.removeListener(bt),mt(google.maps.event.addListener(W,"shape_changed",Y)))},[Y]),f.useEffect(()=>{W&&z&&(gt!==null&&google.maps.event.removeListener(gt),Zt(google.maps.event.addListener(W,"title_changed",z)))},[z]),f.useEffect(()=>{W&&T&&(qn!==null&&google.maps.event.removeListener(qn),Ft(google.maps.event.addListener(W,"visible_changed",T)))},[T]),f.useEffect(()=>{W&&P&&(jn!==null&&google.maps.event.removeListener(jn),nn(google.maps.event.addListener(W,"zindex_changed",P)))},[P]),f.useEffect(()=>{var Yt=Ko(Ko(Ko({},r||cf),i?cf:{map:U}),{},{position:t}),lt=new google.maps.Marker(Yt);return i?i.addMarker(lt,!!s):lt.setMap(U),t&&lt.setPosition(t),typeof m<"u"&&lt.setVisible(m),typeof d<"u"&&lt.setDraggable(d),typeof p<"u"&&lt.setClickable(p),typeof g=="string"&&lt.setCursor(g),b&&lt.setIcon(b),typeof w<"u"&&lt.setLabel(w),typeof S<"u"&&lt.setOpacity(S),y&&lt.setShape(y),typeof j=="string"&&lt.setTitle(j),typeof N=="number"&&lt.setZIndex(N),_&&be(google.maps.event.addListener(lt,"dblclick",_)),O&&Te(google.maps.event.addListener(lt,"dragend",O)),C&&ge(google.maps.event.addListener(lt,"dragstart",C)),R&&le(google.maps.event.addListener(lt,"mousedown",R)),L&&K(google.maps.event.addListener(lt,"mouseout",L)),B&&Se(google.maps.event.addListener(lt,"mouseover",B)),Z&&Ze(google.maps.event.addListener(lt,"mouseup",Z)),X&&de(google.maps.event.addListener(lt,"rightclick",X)),E&&oe(google.maps.event.addListener(lt,"click",E)),M&&_e(google.maps.event.addListener(lt,"drag",M)),te&&fe(google.maps.event.addListener(lt,"clickable_changed",te)),xe&&Xe(google.maps.event.addListener(lt,"cursor_changed",xe)),Pe&&et(google.maps.event.addListener(lt,"animation_changed",Pe)),ve&&wt(google.maps.event.addListener(lt,"draggable_changed",ve)),se&&$t(google.maps.event.addListener(lt,"flat_changed",se)),V&&Yn(google.maps.event.addListener(lt,"icon_changed",V)),F&&ea(google.maps.event.addListener(lt,"position_changed",F)),Y&&mt(google.maps.event.addListener(lt,"shape_changed",Y)),z&&Zt(google.maps.event.addListener(lt,"title_changed",z)),T&&Ft(google.maps.event.addListener(lt,"visible_changed",T)),P&&nn(google.maps.event.addListener(lt,"zindex_changed",P)),ue(lt),A&&A(lt),()=>{Ee!==null&&google.maps.event.removeListener(Ee),Be!==null&&google.maps.event.removeListener(Be),Ge!==null&&google.maps.event.removeListener(Ge),Ke!==null&&google.maps.event.removeListener(Ke),ce!==null&&google.maps.event.removeListener(ce),Ae!==null&&google.maps.event.removeListener(Ae),De!==null&&google.maps.event.removeListener(De),Ve!==null&&google.maps.event.removeListener(Ve),I!==null&&google.maps.event.removeListener(I),ae!==null&&google.maps.event.removeListener(ae),ne!==null&&google.maps.event.removeListener(ne),Je!==null&&google.maps.event.removeListener(Je),ot!==null&&google.maps.event.removeListener(ot),rt!==null&&google.maps.event.removeListener(rt),Lt!==null&&google.maps.event.removeListener(Lt),Un!==null&&google.maps.event.removeListener(Un),gt!==null&&google.maps.event.removeListener(gt),qn!==null&&google.maps.event.removeListener(qn),jn!==null&&google.maps.event.removeListener(jn),H&&H(lt),i?i.removeMarker(lt,!!s):lt&&lt.setMap(null)}},[]);var Qn=f.useMemo(()=>u?f.Children.map(u,Yt=>{if(!f.isValidElement(Yt))return Yt;var lt=Yt;return f.cloneElement(lt,{anchor:W})}):null,[u,W]);return o.jsx(o.Fragment,{children:Qn})||null}f.memo(uR);class dR extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[])}componentDidMount(){var t=this;return Wj(function*(){var r=Ko(Ko(Ko({},t.props.options||cf),t.props.clusterer?cf:{map:t.context}),{},{position:t.props.position});t.marker=new google.maps.Marker(r),t.props.clusterer?t.props.clusterer.addMarker(t.marker,!!t.props.noClustererRedraw):t.marker.setMap(t.context),t.registeredEvents=It({updaterMap:j0,eventMap:S0,prevProps:{},nextProps:t.props,instance:t.marker}),t.props.onLoad&&t.props.onLoad(t.marker)})()}componentDidUpdate(t){this.marker&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:j0,eventMap:S0,prevProps:t,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Ht(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var t=this.props.children?f.Children.map(this.props.children,r=>{if(!f.isValidElement(r))return r;var i=r;return f.cloneElement(i,{anchor:this.marker})}):null;return t||null}}Re(dR,"contextType",Tt);var fR=function(){function e(t,r){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=r,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(t){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var r=this.cluster.getClusterer();if(google.maps.event.trigger(r,"click",this.cluster),google.maps.event.trigger(r,"clusterclick",this.cluster),r.getZoomOnClick()){var i=r.getMaxZoom(),s=this.cluster.getBounds(),u=r.getMap();u!==null&&"fitBounds"in u&&u.fitBounds(s),this.timeOut=window.setTimeout(function(){var d=r.getMap();if(d!==null){"fitBounds"in d&&d.fitBounds(s);var m=d.getZoom()||0;i!==null&&m>i&&d.setZoom(i+1)}},100)}t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var t;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(t=this.getPanes())===null||t===void 0||t.overlayMouseTarget.appendChild(this.div);var r=this.getMap();r!==null&&(this.boundsChangedListener=google.maps.event.addListener(r,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var t=this.getPosFromLatLng(this.center);this.div.style.top=t!==null?"".concat(t.y,"px"):"0",this.div.style.left=t!==null?"".concat(t.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var t,r,i,s,u,d;if(this.div&&this.center){var m=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,h=this.backgroundPosition.split(" "),p=parseInt(((t=h[0])===null||t===void 0?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),g=parseInt(((r=h[1])===null||r===void 0?void 0:r.replace(/^\s+|\s+$/g,""))||"0",10),b=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(b!==null?"".concat(b.y,"px"):"0","; left: ").concat(b!==null?"".concat(b.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var w=document.createElement("img");w.alt=m,w.src=this.url,w.width=this.width,w.height=this.height,w.setAttribute("style","position: absolute; top: ".concat(g,"px; left: ").concat(p,"px")),this.cluster.getClusterer().enableRetinaIcons||(w.style.clip="rect(-".concat(g,"px, -").concat(p+this.width,"px, -").concat(g+this.height,", -").concat(p,")"));var S=document.createElement("div");S.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((i=this.sums)===null||i===void 0)&&i.text&&(S.innerText="".concat((s=this.sums)===null||s===void 0?void 0:s.text)),!((u=this.sums)===null||u===void 0)&&u.html&&(S.innerHTML="".concat((d=this.sums)===null||d===void 0?void 0:d.html)),this.div.innerHTML="",this.div.appendChild(w),this.div.appendChild(S),this.div.title=m,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(t){this.sums=t;var r=this.cluster.getClusterer().getStyles(),i=r[Math.min(r.length-1,Math.max(0,t.index-1))];i&&(this.url=i.url,this.height=i.height,this.width=i.width,i.className&&(this.className="".concat(this.clusterClassName," ").concat(i.className)),this.anchorText=i.anchorText||[0,0],this.anchorIcon=i.anchorIcon||[this.height/2,this.width/2],this.textColor=i.textColor||"black",this.textSize=i.textSize||11,this.textDecoration=i.textDecoration||"none",this.fontWeight=i.fontWeight||"bold",this.fontStyle=i.fontStyle||"normal",this.fontFamily=i.fontFamily||"Arial,sans-serif",this.backgroundPosition=i.backgroundPosition||"0 0")},e.prototype.setCenter=function(t){this.center=t},e.prototype.getPosFromLatLng=function(t){var r=this.getProjection().fromLatLngToDivPixel(t);return r!==null&&(r.x-=this.anchorIcon[1],r.y-=this.anchorIcon[0]),r},e}(),hR=function(){function e(t){this.markerClusterer=t,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new fR(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var t=new google.maps.LatLngBounds(this.center,this.center),r=this.getMarkers(),i=0,s=r;i<s.length;i++){var u=s[i],d=u.getPosition();d&&t.extend(d)}return t},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(t){var r;if(this.isMarkerAlreadyAdded(t))return!1;if(this.center){if(this.averageCenter){var i=t.getPosition();if(i){var s=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(s-1)+i.lat())/s,(this.center.lng()*(s-1)+i.lng())/s),this.calculateBounds()}}}else{var i=t.getPosition();i&&(this.center=i,this.calculateBounds())}t.isAdded=!0,this.markers.push(t);var u=this.markers.length,d=this.markerClusterer.getMaxZoom(),m=(r=this.map)===null||r===void 0?void 0:r.getZoom();if(d!==null&&typeof m<"u"&&m>d)t.getMap()!==this.map&&t.setMap(this.map);else if(u<this.minClusterSize)t.getMap()!==this.map&&t.setMap(this.map);else if(u===this.minClusterSize)for(var h=0,p=this.markers;h<p.length;h++){var g=p[h];g.setMap(null)}else t.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(t){if(this.bounds!==null){var r=t.getPosition();if(r)return this.bounds.contains(r)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var t,r=this.markers.length,i=this.markerClusterer.getMaxZoom(),s=(t=this.map)===null||t===void 0?void 0:t.getZoom();if(i!==null&&typeof s<"u"&&s>i){this.clusterIcon.hide();return}if(r<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},e.prototype.isMarkerAlreadyAdded=function(t){if(this.markers.includes)return this.markers.includes(t);for(var r=0;r<this.markers.length;r++)if(t===this.markers[r])return!0;return!1},e}();function mR(e,t){var r=e.length,i=r.toString().length,s=Math.min(i,t);return{text:r.toString(),index:s,title:""}}var pR=2e3,gR=500,vR="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",bR="png",yR=[53,56,66,78,90],xR="cluster",Qj=function(){function e(t,r,i){r===void 0&&(r=[]),i===void 0&&(i={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=i.gridSize||60,this.minClusterSize=i.minimumClusterSize||2,this.maxZoom=i.maxZoom||null,this.styles=i.styles||[],this.title=i.title||"",this.zoomOnClick=!0,i.zoomOnClick!==void 0&&(this.zoomOnClick=i.zoomOnClick),this.averageCenter=!1,i.averageCenter!==void 0&&(this.averageCenter=i.averageCenter),this.ignoreHidden=!1,i.ignoreHidden!==void 0&&(this.ignoreHidden=i.ignoreHidden),this.enableRetinaIcons=!1,i.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=i.enableRetinaIcons),this.imagePath=i.imagePath||vR,this.imageExtension=i.imageExtension||bR,this.imageSizes=i.imageSizes||yR,this.calculator=i.calculator||mR,this.batchSize=i.batchSize||pR,this.batchSizeIE=i.batchSizeIE||gR,this.clusterClass=i.clusterClass||xR,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(r,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var t,r;this.resetViewport(!1),(((t=this.getMap())===null||t===void 0?void 0:t.getZoom())===(this.get("minZoom")||0)||((r=this.getMap())===null||r===void 0?void 0:r.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var t=this.getMap();this.activeMap=t,this.ready=!0,this.repaint(),t!==null&&(this.listeners=[google.maps.event.addListener(t,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(t,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var t=0,r=this.markers;t<r.length;t++){var i=r[t];i.getMap()!==this.activeMap&&i.setMap(this.activeMap)}for(var s=0,u=this.clusters;s<u.length;s++){var d=u[s];d.remove()}this.clusters=[];for(var m=0,h=this.listeners;m<h.length;m++){var p=h[m];google.maps.event.removeListener(p)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var t=0;t<this.imageSizes.length;t++)this.styles.push({url:"".concat(this.imagePath+(t+1),".").concat(this.imageExtension),height:this.imageSizes[t]||0,width:this.imageSizes[t]||0})},e.prototype.fitMapToMarkers=function(){for(var t=this.getMarkers(),r=new google.maps.LatLngBounds,i=0,s=t;i<s.length;i++){var u=s[i],d=u.getPosition();d&&r.extend(d)}var m=this.getMap();m!==null&&"fitBounds"in m&&m.fitBounds(r)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(t){this.gridSize=t},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(t){this.minClusterSize=t},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(t){this.maxZoom=t},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(t){this.styles=t},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(t){this.title=t},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(t){this.zoomOnClick=t},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(t){this.averageCenter=t},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(t){this.ignoreHidden=t},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons=t},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(t){this.imageExtension=t},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(t){this.imagePath=t},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(t){this.imageSizes=t},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(t){this.calculator=t},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(t){this.batchSizeIE=t},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(t){this.clusterClass=t},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(t,r){this.pushMarkerTo(t),r||this.redraw()},e.prototype.addMarkers=function(t,r){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];s&&this.pushMarkerTo(s)}r||this.redraw()},e.prototype.pushMarkerTo=function(t){var r=this;t.getDraggable()&&google.maps.event.addListener(t,"dragend",function(){r.ready&&(t.isAdded=!1,r.repaint())}),t.isAdded=!1,this.markers.push(t)},e.prototype.removeMarker_=function(t){var r=-1;if(this.markers.indexOf)r=this.markers.indexOf(t);else for(var i=0;i<this.markers.length;i++)if(t===this.markers[i]){r=i;break}return r===-1?!1:(t.setMap(null),this.markers.splice(r,1),!0)},e.prototype.removeMarker=function(t,r){var i=this.removeMarker_(t);return!r&&i&&this.repaint(),i},e.prototype.removeMarkers=function(t,r){for(var i=!1,s=0,u=t;s<u.length;s++){var d=u[s];i=i||this.removeMarker_(d)}return!r&&i&&this.repaint(),i},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var t=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var i=0,s=t;i<s.length;i++){var u=s[i];u.remove()}},0)},e.prototype.getExtendedBounds=function(t){var r=this.getProjection(),i=r.fromLatLngToDivPixel(new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()));i!==null&&(i.x+=this.gridSize,i.y-=this.gridSize);var s=r.fromLatLngToDivPixel(new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()));if(s!==null&&(s.x-=this.gridSize,s.y+=this.gridSize),i!==null){var u=r.fromDivPixelToLatLng(i);u!==null&&t.extend(u)}if(s!==null){var d=r.fromDivPixelToLatLng(s);d!==null&&t.extend(d)}return t},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(t){for(var r=0,i=this.clusters;r<i.length;r++){var s=i[r];s.remove()}this.clusters=[];for(var u=0,d=this.markers;u<d.length;u++){var m=d[u];m.isAdded=!1,t&&m.setMap(null)}},e.prototype.distanceBetweenPoints=function(t,r){var i=6371,s=(r.lat()-t.lat())*Math.PI/180,u=(r.lng()-t.lng())*Math.PI/180,d=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(r.lat()*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2);return i*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},e.prototype.isMarkerInBounds=function(t,r){var i=t.getPosition();return i?r.contains(i):!1},e.prototype.addToClosestCluster=function(t){for(var r,i=4e4,s=null,u=0,d=this.clusters;u<d.length;u++){var m=d[u];r=m;var h=r.getCenter(),p=t.getPosition();if(h&&p){var g=this.distanceBetweenPoints(h,p);g<i&&(i=g,s=r)}}s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):(r=new hR(this),r.addMarker(t),this.clusters.push(r))},e.prototype.createClusters=function(t){var r=this;if(this.ready){t===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var i=this.getMap(),s=i!==null&&("getBounds"in i)?i.getBounds():null,u=(i==null?void 0:i.getZoom())||0,d=u>3?new google.maps.LatLngBounds(s==null?void 0:s.getSouthWest(),s==null?void 0:s.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),m=this.getExtendedBounds(d),h=Math.min(t+this.batchSize,this.markers.length),p=t;p<h;p++){var g=this.markers[p];g&&!g.isAdded&&this.isMarkerInBounds(g,m)&&(!this.ignoreHidden||this.ignoreHidden&&g.getVisible())&&this.addToClosestCluster(g)}if(h<this.markers.length)this.timerRefStatic=window.setTimeout(function(){r.createClusters(h)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var b=0,w=this.clusters;b<w.length;b++){var S=w[b];S.updateIcon()}}}},e.prototype.extend=function(t,r){return(function(s){for(var u in s.prototype){var d=u;this.prototype[d]=s.prototype[d]}return this}).apply(t,[r])},e}();function _0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function wR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var fa={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},en={averageCenter(e,t){e.setAverageCenter(t)},batchSizeIE(e,t){e.setBatchSizeIE(t)},calculator(e,t){e.setCalculator(t)},clusterClass(e,t){e.setClusterClass(t)},enableRetinaIcons(e,t){e.setEnableRetinaIcons(t)},gridSize(e,t){e.setGridSize(t)},ignoreHidden(e,t){e.setIgnoreHidden(t)},imageExtension(e,t){e.setImageExtension(t)},imagePath(e,t){e.setImagePath(t)},imageSizes(e,t){e.setImageSizes(t)},maxZoom(e,t){e.setMaxZoom(t)},minimumClusterSize(e,t){e.setMinimumClusterSize(t)},styles(e,t){e.setStyles(t)},title(e,t){e.setTitle(t)},zoomOnClick(e,t){e.setZoomOnClick(t)}},SR={};function jR(e){var{children:t,options:r,averageCenter:i,batchSizeIE:s,calculator:u,clusterClass:d,enableRetinaIcons:m,gridSize:h,ignoreHidden:p,imageExtension:g,imagePath:b,imageSizes:w,maxZoom:S,minimumClusterSize:y,styles:j,title:N,zoomOnClick:E,onClick:_,onClusteringBegin:M,onClusteringEnd:O,onMouseOver:C,onMouseOut:L,onLoad:B,onUnmount:Z}=e,[R,X]=f.useState(null),te=f.useContext(Tt),[xe,Pe]=f.useState(null),[ve,se]=f.useState(null),[V,F]=f.useState(null),[Y,z]=f.useState(null),[T,P]=f.useState(null);return f.useEffect(()=>{R&&L&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(R,fa.onMouseOut,L)))},[L]),f.useEffect(()=>{R&&C&&(T!==null&&google.maps.event.removeListener(T),P(google.maps.event.addListener(R,fa.onMouseOver,C)))},[C]),f.useEffect(()=>{R&&_&&(xe!==null&&google.maps.event.removeListener(xe),Pe(google.maps.event.addListener(R,fa.onClick,_)))},[_]),f.useEffect(()=>{R&&M&&(ve!==null&&google.maps.event.removeListener(ve),se(google.maps.event.addListener(R,fa.onClusteringBegin,M)))},[M]),f.useEffect(()=>{R&&O&&(V!==null&&google.maps.event.removeListener(V),se(google.maps.event.addListener(R,fa.onClusteringEnd,O)))},[O]),f.useEffect(()=>{typeof i<"u"&&R!==null&&en.averageCenter(R,i)},[R,i]),f.useEffect(()=>{typeof s<"u"&&R!==null&&en.batchSizeIE(R,s)},[R,s]),f.useEffect(()=>{typeof u<"u"&&R!==null&&en.calculator(R,u)},[R,u]),f.useEffect(()=>{typeof d<"u"&&R!==null&&en.clusterClass(R,d)},[R,d]),f.useEffect(()=>{typeof m<"u"&&R!==null&&en.enableRetinaIcons(R,m)},[R,m]),f.useEffect(()=>{typeof h<"u"&&R!==null&&en.gridSize(R,h)},[R,h]),f.useEffect(()=>{typeof p<"u"&&R!==null&&en.ignoreHidden(R,p)},[R,p]),f.useEffect(()=>{typeof g<"u"&&R!==null&&en.imageExtension(R,g)},[R,g]),f.useEffect(()=>{typeof b<"u"&&R!==null&&en.imagePath(R,b)},[R,b]),f.useEffect(()=>{typeof w<"u"&&R!==null&&en.imageSizes(R,w)},[R,w]),f.useEffect(()=>{typeof S<"u"&&R!==null&&en.maxZoom(R,S)},[R,S]),f.useEffect(()=>{typeof y<"u"&&R!==null&&en.minimumClusterSize(R,y)},[R,y]),f.useEffect(()=>{typeof j<"u"&&R!==null&&en.styles(R,j)},[R,j]),f.useEffect(()=>{typeof N<"u"&&R!==null&&en.title(R,N)},[R,N]),f.useEffect(()=>{typeof E<"u"&&R!==null&&en.zoomOnClick(R,E)},[R,E]),f.useEffect(()=>{if(te){var A=wR({},r||SR),H=new Qj(te,[],A);return i&&en.averageCenter(H,i),s&&en.batchSizeIE(H,s),u&&en.calculator(H,u),d&&en.clusterClass(H,d),m&&en.enableRetinaIcons(H,m),h&&en.gridSize(H,h),p&&en.ignoreHidden(H,p),g&&en.imageExtension(H,g),b&&en.imagePath(H,b),w&&en.imageSizes(H,w),S&&en.maxZoom(H,S),y&&en.minimumClusterSize(H,y),j&&en.styles(H,j),N&&en.title(H,N),E&&en.zoomOnClick(H,E),L&&z(google.maps.event.addListener(H,fa.onMouseOut,L)),C&&P(google.maps.event.addListener(H,fa.onMouseOver,C)),_&&Pe(google.maps.event.addListener(H,fa.onClick,_)),M&&se(google.maps.event.addListener(H,fa.onClusteringBegin,M)),O&&F(google.maps.event.addListener(H,fa.onClusteringEnd,O)),X(H),B&&B(H),()=>{Y!==null&&google.maps.event.removeListener(Y),T!==null&&google.maps.event.removeListener(T),xe!==null&&google.maps.event.removeListener(xe),ve!==null&&google.maps.event.removeListener(ve),V!==null&&google.maps.event.removeListener(V),Z&&Z(H)}}},[]),R!==null&&t(R)||null}f.memo(jR);class _R extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{markerClusterer:null}),Re(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var t=new Qj(this.context,[],this.props.options);this.registeredEvents=It({updaterMap:en,eventMap:fa,prevProps:{},nextProps:this.props,instance:t}),this.setState(()=>({markerClusterer:t}),this.setClustererCallback)}}componentDidUpdate(t){this.state.markerClusterer&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:en,eventMap:fa,prevProps:t,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Ht(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}Re(_R,"contextType",Tt);function N0(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}var Jj=function(){function e(t){t===void 0&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",t.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),typeof t.visible>"u"&&(typeof t.isHidden>"u"?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var t=this,r=function(g){g.returnValue=!1,g.preventDefault&&g.preventDefault(),t.enableEventPropagation||N0(g)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var i=this.getPanes();if(i!==null&&i[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var s=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-s.left-s.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var u=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],d=0,m=u;d<m.length;d++){var h=m[d];this.eventListeners.push(google.maps.event.addListener(this.div,h,N0))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){t.div&&(t.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",r),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var t="";return this.closeBoxURL!==""&&(t='<img alt=""',t+=' aria-hidden="true"',t+=" src='"+this.closeBoxURL+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin+";",t+="'>"),t},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(t){if(this.div&&!t){var r=this.getMap();if(r instanceof google.maps.Map){var i=0,s=0,u=r.getBounds();u&&!u.contains(this.position)&&r.setCenter(this.position);var d=r.getDiv(),m=d.offsetWidth,h=d.offsetHeight,p=this.pixelOffset.width,g=this.pixelOffset.height,b=this.div.offsetWidth,w=this.div.offsetHeight,S=this.infoBoxClearance.width,y=this.infoBoxClearance.height,j=this.getProjection(),N=j.fromLatLngToContainerPixel(this.position);N!==null&&(N.x<-p+S?i=N.x+p-S:N.x+b+p+S>m&&(i=N.x+b+p+S-m),this.alignBottom?N.y<-g+y+w?s=N.y+g-y-w:N.y+g+y>h&&(s=N.y+g+y-h):N.y<-g+y?s=N.y+g-y:N.y+w+g+y>h&&(s=N.y+w+g+y-h)),i===0&&s===0||r.panBy(i,s)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var t=this.boxStyle;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this.div.style[r]=t[r]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var i=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+i*100+')"',this.div.style.filter="alpha(opacity="+i*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var t={top:0,bottom:0,left:0,right:0};if(!this.div)return t;if(document.defaultView){var r=this.div.ownerDocument,i=r&&r.defaultView?r.defaultView.getComputedStyle(this.div,""):null;i&&(t.top=parseInt(i.borderTopWidth||"",10)||0,t.bottom=parseInt(i.borderBottomWidth||"",10)||0,t.left=parseInt(i.borderLeftWidth||"",10)||0,t.right=parseInt(i.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var s=this.div.currentStyle;s&&(t.top=parseInt(s.borderTopWidth||"",10)||0,t.bottom=parseInt(s.borderBottomWidth||"",10)||0,t.left=parseInt(s.borderLeftWidth||"",10)||0,t.right=parseInt(s.borderRightWidth||"",10)||0)}return t},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var t=this.getProjection(),r=t.fromLatLngToDivPixel(this.position);r!==null&&(this.div.style.left=r.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(r.y+this.pixelOffset.height)+"px":this.div.style.top=r.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(t){t===void 0&&(t={}),typeof t.boxClass<"u"&&(this.boxClass=t.boxClass,this.setBoxStyle()),typeof t.boxStyle<"u"&&(this.boxStyle=t.boxStyle,this.setBoxStyle()),typeof t.content<"u"&&this.setContent(t.content),typeof t.disableAutoPan<"u"&&(this.disableAutoPan=t.disableAutoPan),typeof t.maxWidth<"u"&&(this.maxWidth=t.maxWidth),typeof t.pixelOffset<"u"&&(this.pixelOffset=t.pixelOffset),typeof t.alignBottom<"u"&&(this.alignBottom=t.alignBottom),typeof t.position<"u"&&this.setPosition(t.position),typeof t.zIndex<"u"&&this.setZIndex(t.zIndex),typeof t.closeBoxMargin<"u"&&(this.closeBoxMargin=t.closeBoxMargin),typeof t.closeBoxURL<"u"&&(this.closeBoxURL=t.closeBoxURL),typeof t.infoBoxClearance<"u"&&(this.infoBoxClearance=t.infoBoxClearance),typeof t.isHidden<"u"&&(this.isHidden=t.isHidden),typeof t.visible<"u"&&(this.isHidden=!t.visible),typeof t.enableEventPropagation<"u"&&(this.enableEventPropagation=t.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(t){this.content=t,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof t=="string"?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof t=="string"?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(t){this.position=t,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(t){this.isHidden=!t,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(t){this.zIndex=t,this.div&&(this.div.style.zIndex=t+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var t=this.getMap();return typeof t>"u"||t===null?!1:!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(t,r){var i=this;r&&(this.position=r.getPosition(),this.moveListener=google.maps.event.addListener(r,"position_changed",function(){var s=r.getPosition();i.setPosition(s)}),this.mapListener=google.maps.event.addListener(r,"map_changed",function(){i.setMap(r.map)})),this.setMap(t),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var t=0,r=this.eventListeners;t<r.length;t++){var i=r[t];google.maps.event.removeListener(i)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(t,r){return(function(s){for(var u in s.prototype)Object.prototype.hasOwnProperty.call(this,u)||(this.prototype[u]=s.prototype[u]);return this}).apply(t,[r])},e}(),NR=["position"],CR=["position"];function C0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function uf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var E0={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},M0={options(e,t){e.setOptions(t)},position(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},ER={};function MR(e){var{children:t,anchor:r,options:i,position:s,zIndex:u,onCloseClick:d,onDomReady:m,onContentChanged:h,onPositionChanged:p,onZindexChanged:g,onLoad:b,onUnmount:w}=e,S=f.useContext(Tt),[y,j]=f.useState(null),[N,E]=f.useState(null),[_,M]=f.useState(null),[O,C]=f.useState(null),[L,B]=f.useState(null),[Z,R]=f.useState(null),X=f.useRef(null);return f.useEffect(()=>{S&&y!==null&&(y.close(),r?y.open(S,r):y.getPosition()&&y.open(S))},[S,y,r]),f.useEffect(()=>{i&&y!==null&&y.setOptions(i)},[y,i]),f.useEffect(()=>{if(s&&y!==null){var te=s instanceof google.maps.LatLng?s:new google.maps.LatLng(s.lat,s.lng);y.setPosition(te)}},[s]),f.useEffect(()=>{typeof u=="number"&&y!==null&&y.setZIndex(u)},[u]),f.useEffect(()=>{y&&d&&(N!==null&&google.maps.event.removeListener(N),E(google.maps.event.addListener(y,"closeclick",d)))},[d]),f.useEffect(()=>{y&&m&&(_!==null&&google.maps.event.removeListener(_),M(google.maps.event.addListener(y,"domready",m)))},[m]),f.useEffect(()=>{y&&h&&(O!==null&&google.maps.event.removeListener(O),C(google.maps.event.addListener(y,"content_changed",h)))},[h]),f.useEffect(()=>{y&&p&&(L!==null&&google.maps.event.removeListener(L),B(google.maps.event.addListener(y,"position_changed",p)))},[p]),f.useEffect(()=>{y&&g&&(Z!==null&&google.maps.event.removeListener(Z),R(google.maps.event.addListener(y,"zindex_changed",g)))},[g]),f.useEffect(()=>{if(S){var te=i||ER,{position:xe}=te,Pe=Eg(te,NR),ve;xe&&!(xe instanceof google.maps.LatLng)&&(ve=new google.maps.LatLng(xe.lat,xe.lng));var se=new Jj(uf(uf({},Pe),ve?{position:ve}:{}));X.current=document.createElement("div"),j(se),d&&E(google.maps.event.addListener(se,"closeclick",d)),m&&M(google.maps.event.addListener(se,"domready",m)),h&&C(google.maps.event.addListener(se,"content_changed",h)),p&&B(google.maps.event.addListener(se,"position_changed",p)),g&&R(google.maps.event.addListener(se,"zindex_changed",g)),se.setContent(X.current),r?se.open(S,r):se.getPosition()?se.open(S):Kn(!1,"You must provide either an anchor or a position prop for <InfoBox>."),b&&b(se)}return()=>{y!==null&&(N&&google.maps.event.removeListener(N),O&&google.maps.event.removeListener(O),_&&google.maps.event.removeListener(_),L&&google.maps.event.removeListener(L),Z&&google.maps.event.removeListener(Z),w&&w(y),y.close())}},[]),X.current?Xs.createPortal(f.Children.only(t),X.current):null}f.memo(MR);class OR extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"containerElement",null),Re(this,"state",{infoBox:null}),Re(this,"open",(t,r)=>{r?this.context!==null&&t.open(this.context,r):t.getPosition()?this.context!==null&&t.open(this.context):Kn(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Re(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var t=this.props.options||{},{position:r}=t,i=Eg(t,CR),s;r&&!(r instanceof google.maps.LatLng)&&(s=new google.maps.LatLng(r.lat,r.lng));var u=new Jj(uf(uf({},i),s?{position:s}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=It({updaterMap:M0,eventMap:E0,prevProps:{},nextProps:this.props,instance:u}),this.setState({infoBox:u},this.setInfoBoxCallback)}componentDidUpdate(t){var{infoBox:r}=this.state;r!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:M0,eventMap:E0,prevProps:t,nextProps:this.props,instance:r}))}componentWillUnmount(){var{onUnmount:t}=this.props,{infoBox:r}=this.state;r!==null&&(t&&t(r),Ht(this.registeredEvents),r.close())}render(){return this.containerElement?Xs.createPortal(f.Children.only(this.props.children),this.containerElement):null}}Re(OR,"contextType",Tt);var Km,O0;function LR(){return O0||(O0=1,Km=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var i,s,u;if(Array.isArray(t)){if(i=t.length,i!=r.length)return!1;for(s=i;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(u=Object.keys(t),i=u.length,i!==Object.keys(r).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,u[s]))return!1;for(s=i;s--!==0;){var d=u[s];if(!e(t[d],r[d]))return!1}return!0}return t!==t&&r!==r}),Km}var kR=LR(),L0=qj(kR),k0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Qm=1,Cc=8;class Mg{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[r,i]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");var s=i>>4;if(s!==Qm)throw new Error("Got v".concat(s," data when expected v").concat(Qm,"."));var u=k0[i&15];if(!u)throw new Error("Unrecognized array type.");var[d]=new Uint16Array(t,2,1),[m]=new Uint32Array(t,4,1);return new Mg(m,d,u,t)}constructor(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,s=arguments.length>3?arguments[3]:void 0;if(isNaN(t)||t<0)throw new Error("Unpexpected numItems value: ".concat(t,"."));this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=i,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;var u=k0.indexOf(this.ArrayType),d=t*2*this.ArrayType.BYTES_PER_ELEMENT,m=t*this.IndexArrayType.BYTES_PER_ELEMENT,h=(8-m%8)%8;if(u<0)throw new Error("Unexpected typed array class: ".concat(i,"."));s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,Cc,t),this.coords=new this.ArrayType(this.data,Cc+m+h,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(Cc+d+m+h),this.ids=new this.IndexArrayType(this.data,Cc,t),this.coords=new this.ArrayType(this.data,Cc+m+h,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Qm<<4)+u]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){var i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=t,this.coords[this._pos++]=r,i}finish(){var t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return $p(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,i,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:u,coords:d,nodeSize:m}=this,h=[0,u.length-1,0],p=[];h.length;){var g=h.pop()||0,b=h.pop()||0,w=h.pop()||0;if(b-w<=m){for(var S=w;S<=b;S++){var y=d[2*S],j=d[2*S+1];y>=t&&y<=i&&j>=r&&j<=s&&p.push(u[S])}continue}var N=w+b>>1,E=d[2*N],_=d[2*N+1];E>=t&&E<=i&&_>=r&&_<=s&&p.push(u[N]),(g===0?t<=E:r<=_)&&(h.push(w),h.push(N-1),h.push(1-g)),(g===0?i>=E:s>=_)&&(h.push(N+1),h.push(b),h.push(1-g))}return p}within(t,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:s,coords:u,nodeSize:d}=this,m=[0,s.length-1,0],h=[],p=i*i;m.length;){var g=m.pop()||0,b=m.pop()||0,w=m.pop()||0;if(b-w<=d){for(var S=w;S<=b;S++)A0(u[2*S],u[2*S+1],t,r)<=p&&h.push(s[S]);continue}var y=w+b>>1,j=u[2*y],N=u[2*y+1];A0(j,N,t,r)<=p&&h.push(s[y]),(g===0?t-i<=j:r-i<=N)&&(m.push(w),m.push(y-1),m.push(1-g)),(g===0?t+i>=j:r+i>=N)&&(m.push(y+1),m.push(b),m.push(1-g))}return h}}function $p(e,t,r,i,s,u){if(!(s-i<=r)){var d=i+s>>1;e1(e,t,d,i,s,u),$p(e,t,r,i,d-1,1-u),$p(e,t,r,d+1,s,1-u)}}function e1(e,t,r,i,s,u){for(;s>i;){if(s-i>600){var d=s-i+1,m=r-i+1,h=Math.log(d),p=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*p*(d-p)/d)*(m-d/2<0?-1:1),b=Math.max(i,Math.floor(r-m*p/d+g)),w=Math.min(s,Math.floor(r+(d-m)*p/d+g));e1(e,t,r,b,w,u)}var S=t[2*r+u],y=i,j=s;for(Ec(e,t,i,r),t[2*s+u]>S&&Ec(e,t,i,s);y<j;){for(Ec(e,t,y,j),y++,j--;t[2*y+u]<S;)y++;for(;t[2*j+u]>S;)j--}t[2*i+u]===S?Ec(e,t,i,j):(j++,Ec(e,t,j,s)),j<=r&&(i=j+1),r<=j&&(s=j-1)}}function Ec(e,t,r,i){Jm(e,r,i),Jm(t,2*r,2*i),Jm(t,2*r+1,2*i+1)}function Jm(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function A0(e,t,r,i){var s=e-r,u=t-i;return s*s+u*u}var AR={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},T0=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1)),$s=2,hs=3,ep=4,fs=5,t1=6;class TR{constructor(t){this.options=Object.assign(Object.create(AR),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){var{log:r,minZoom:i,maxZoom:s}=this.options;r&&console.time("total time");var u="prepare ".concat(t.length," points");r&&console.time(u),this.points=t;for(var d=[],m=0;m<t.length;m++){var h=t[m];if(h.geometry){var[p,g]=h.geometry.coordinates,b=T0(Md(p)),w=T0(Od(g));d.push(b,w,1/0,m,-1,1),this.options.reduce&&d.push(0)}}var S=this.trees[s+1]=this._createTree(d);r&&console.timeEnd(u);for(var y=s;y>=i;y--){var j=+Date.now();S=this.trees[y]=this._createTree(this._cluster(S,y)),r&&console.log("z%d: %d clusters in %dms",y,S.numItems,+Date.now()-j)}return r&&console.timeEnd("total time"),this}getClusters(t,r){var i=((t[0]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,t[1])),u=t[2]===180?180:((t[2]+180)%360+360)%360-180,d=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,u=180;else if(i>u){var m=this.getClusters([i,s,180,d],r),h=this.getClusters([-180,s,u,d],r);return m.concat(h)}var p=this.trees[this._limitZoom(r)],g=p.range(Md(i),Od(d),Md(u),Od(s)),b=p.data,w=[];for(var S of g){var y=this.stride*S;w.push(b[y+fs]>1?D0(b,y,this.clusterProps):this.points[b[y+hs]])}return w}getChildren(t){var r=this._getOriginId(t),i=this._getOriginZoom(t),s="No cluster with the specified id.",u=this.trees[i];if(!u)throw new Error(s);var d=u.data;if(r*this.stride>=d.length)throw new Error(s);var m=this.options.radius/(this.options.extent*Math.pow(2,i-1)),h=d[r*this.stride],p=d[r*this.stride+1],g=u.within(h,p,m),b=[];for(var w of g){var S=w*this.stride;d[S+ep]===t&&b.push(d[S+fs]>1?D0(d,S,this.clusterProps):this.points[d[S+hs]])}if(b.length===0)throw new Error(s);return b}getLeaves(t,r,i){r=r||10,i=i||0;var s=[];return this._appendLeaves(s,t,r,i,0),s}getTile(t,r,i){var s=this.trees[this._limitZoom(t)],u=Math.pow(2,t),{extent:d,radius:m}=this.options,h=m/d,p=(i-h)/u,g=(i+1+h)/u,b={features:[]};return this._addTileFeatures(s.range((r-h)/u,p,(r+1+h)/u,g),s.data,r,i,u,b),r===0&&this._addTileFeatures(s.range(1-h/u,p,1,g),s.data,u,i,u,b),r===u-1&&this._addTileFeatures(s.range(0,p,h/u,g),s.data,-1,i,u,b),b.features.length?b:null}getClusterExpansionZoom(t){for(var r=this._getOriginZoom(t)-1;r<=this.options.maxZoom;){var i=this.getChildren(t);if(r++,i.length!==1)break;t=i[0].properties.cluster_id}return r}_appendLeaves(t,r,i,s,u){var d=this.getChildren(r);for(var m of d){var h=m.properties;if(h&&h.cluster?u+h.point_count<=s?u+=h.point_count:u=this._appendLeaves(t,h.cluster_id,i,s,u):u<s?u++:t.push(m),t.length===i)break}return u}_createTree(t){for(var r=new Mg(t.length/this.stride|0,this.options.nodeSize,Float32Array),i=0;i<t.length;i+=this.stride)r.add(t[i],t[i+1]);return r.finish(),r.data=t,r}_addTileFeatures(t,r,i,s,u,d){for(var m of t){var h=m*this.stride,p=r[h+fs]>1,g=void 0,b=void 0,w=void 0;if(p)g=n1(r,h,this.clusterProps),b=r[h],w=r[h+1];else{var S=this.points[r[h+hs]];g=S.properties;var[y,j]=S.geometry.coordinates;b=Md(y),w=Od(j)}var N={type:1,geometry:[[Math.round(this.options.extent*(b*u-i)),Math.round(this.options.extent*(w*u-s))]],tags:g},E=void 0;p||this.options.generateId?E=r[h+hs]:E=this.points[r[h+hs]].id,E!==void 0&&(N.id=E),d.features.push(N)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,r){for(var{radius:i,extent:s,reduce:u,minPoints:d}=this.options,m=i/(s*Math.pow(2,r)),h=t.data,p=[],g=this.stride,b=0;b<h.length;b+=g)if(!(h[b+$s]<=r)){h[b+$s]=r;var w=h[b],S=h[b+1],y=t.within(h[b],h[b+1],m),j=h[b+fs],N=j;for(var E of y){var _=E*g;h[_+$s]>r&&(N+=h[_+fs])}if(N>j&&N>=d){var M=w*j,O=S*j,C=void 0,L=-1,B=((b/g|0)<<5)+(r+1)+this.points.length;for(var Z of y){var R=Z*g;if(!(h[R+$s]<=r)){h[R+$s]=r;var X=h[R+fs];M+=h[R]*X,O+=h[R+1]*X,h[R+ep]=B,u&&(C||(C=this._map(h,b,!0),L=this.clusterProps.length,this.clusterProps.push(C)),u(C,this._map(h,R)))}}h[b+ep]=B,p.push(M/N,O/N,1/0,B,-1,N),u&&p.push(L)}else{for(var te=0;te<g;te++)p.push(h[b+te]);if(N>1)for(var xe of y){var Pe=xe*g;if(!(h[Pe+$s]<=r)){h[Pe+$s]=r;for(var ve=0;ve<g;ve++)p.push(h[Pe+ve])}}}}return p}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,r,i){if(t[r+fs]>1){var s=this.clusterProps[t[r+t1]];return i?Object.assign({},s):s}var u=this.points[t[r+hs]].properties,d=this.options.map(u);return i&&d===u?Object.assign({},d):d}}function D0(e,t,r){return{type:"Feature",id:e[t+hs],properties:n1(e,t,r),geometry:{type:"Point",coordinates:[DR(e[t]),RR(e[t+1])]}}}function n1(e,t,r){var i=e[t+fs],s=i>=1e4?"".concat(Math.round(i/1e3),"k"):i>=1e3?"".concat(Math.round(i/100)/10,"k"):i,u=e[t+t1],d=u===-1?{}:Object.assign({},r[u]);return Object.assign(d,{cluster:!0,cluster_id:e[t+hs],point_count:i,point_count_abbreviated:s})}function Md(e){return e/360+.5}function Od(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function DR(e){return(e-.5)*360}function RR(e){var t=(180-e*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function PR(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}class Qr{static isAdvancedMarkerAvailable(t){return google.maps.marker&&t.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,r){this.isAdvancedMarker(t)?t.map=r:t.setMap(r)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(t.position.lat&&t.position.lng)return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return this.isAdvancedMarker(t)?!0:t.getVisible()}}class Up{constructor(t){var{markers:r,position:i}=t;this.markers=r,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(!(this.markers.length===0&&!this._position)){var t=new google.maps.LatLngBounds(this._position,this._position);for(var r of this.markers)t.extend(Qr.getPosition(r));return t}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>Qr.getVisible(t)).length}push(t){this.markers.push(t)}delete(){this.marker&&(Qr.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class zR{constructor(t){var{maxZoom:r=16}=t;this.maxZoom=r}noop(t){var{markers:r}=t;return $R(r)}}var $R=e=>{var t=e.map(r=>new Up({position:Qr.getPosition(r),markers:[r]}));return t};class UR extends zR{constructor(t){var{maxZoom:r,radius:i=60}=t,s=PR(t,["maxZoom","radius"]);super({maxZoom:r}),this.state={zoom:-1},this.superCluster=new TR(Object.assign({maxZoom:this.maxZoom,radius:i},s))}calculate(t){var r=!1,i={zoom:t.map.getZoom()};if(!L0(t.markers,this.markers)){r=!0,this.markers=[...t.markers];var s=this.markers.map(u=>{var d=Qr.getPosition(u),m=[d.lng(),d.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:m},properties:{marker:u}}});this.superCluster.load(s)}return r||(this.state.zoom<=this.maxZoom||i.zoom<=this.maxZoom)&&(r=!L0(this.state,i)),this.state=i,r&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:r}}cluster(t){var{map:r}=t;return this.superCluster.getClusters([-180,-90,180,90],Math.round(r.getZoom())).map(i=>this.transformCluster(i))}transformCluster(t){var{geometry:{coordinates:[r,i]},properties:s}=t;if(s.cluster)return new Up({markers:this.superCluster.getLeaves(s.cluster_id,1/0).map(d=>d.properties.marker),position:{lat:i,lng:r}});var u=s.marker;return new Up({markers:[u],position:Qr.getPosition(u)})}}class IR{constructor(t,r){this.markers={sum:t.length};var i=r.map(u=>u.count),s=i.reduce((u,d)=>u+d,0);this.clusters={count:r.length,markers:{mean:s/r.length,sum:s,min:Math.min(...i),max:Math.max(...i)}}}}class VR{render(t,r,i){var{count:s,position:u}=t,d=s>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff",m='<svg fill="'.concat(d,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(s,`</text>
</svg>`),h="Cluster of ".concat(s," markers"),p=Number(google.maps.Marker.MAX_ZINDEX)+s;if(Qr.isAdvancedMarkerAvailable(i)){var g=new DOMParser,b=g.parseFromString(m,"image/svg+xml").documentElement;b.setAttribute("transform","translate(0 25)");var w={map:i,position:u,zIndex:p,title:h,content:b};return new google.maps.marker.AdvancedMarkerElement(w)}var S={position:u,zIndex:p,title:h,icon:{url:"data:image/svg+xml;base64,".concat(btoa(m)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(S)}}function BR(e,t){for(var r in t.prototype)e.prototype[r]=t.prototype[r]}class Og{constructor(){BR(Og,google.maps.OverlayView)}}var Dc;(function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"})(Dc||(Dc={}));var HR=(e,t,r)=>{r.fitBounds(t.bounds)};class FR extends Og{constructor(t){var{map:r,markers:i=[],algorithmOptions:s={},algorithm:u=new UR(s),renderer:d=new VR,onClusterClick:m=HR}=t;super(),this.markers=[...i],this.clusters=[],this.algorithm=u,this.renderer=d,this.onClusterClick=m,r&&this.setMap(r)}addMarker(t,r){this.markers.includes(t)||(this.markers.push(t),r||this.render())}addMarkers(t,r){t.forEach(i=>{this.addMarker(i,!0)}),r||this.render()}removeMarker(t,r){var i=this.markers.indexOf(t);return i===-1?!1:(Qr.setMap(t,null),this.markers.splice(i,1),r||this.render(),!0)}removeMarkers(t,r){var i=!1;return t.forEach(s=>{i=this.removeMarker(s,!0)||i}),i&&!r&&this.render(),i}clearMarkers(t){this.markers.length=0,t||this.render()}render(){var t=this.getMap();if(t instanceof google.maps.Map&&t.getProjection()){google.maps.event.trigger(this,Dc.CLUSTERING_BEGIN,this);var{clusters:r,changed:i}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});if(i||i==null){var s=new Set;for(var u of r)u.markers.length==1&&s.add(u.markers[0]);var d=[];for(var m of this.clusters)m.marker!=null&&(m.markers.length==1?s.has(m.marker)||Qr.setMap(m.marker,null):d.push(m.marker));this.clusters=r,this.renderClusters(),requestAnimationFrame(()=>d.forEach(h=>Qr.setMap(h,null)))}google.maps.event.trigger(this,Dc.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>Qr.setMap(t,null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){var t=new IR(this.markers,this.clusters),r=this.getMap();this.clusters.forEach(i=>{i.markers.length===1?i.marker=i.markers[0]:(i.marker=this.renderer.render(i,t,r),i.markers.forEach(s=>Qr.setMap(s,null)),this.onClusterClick&&i.marker.addListener("click",s=>{google.maps.event.trigger(this,Dc.CLUSTER_CLICK,i),this.onClusterClick(s,i,r)})),Qr.setMap(i.marker,r)})}}function R0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function P0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function YR(e){var t=zD(),[r,i]=f.useState(null);return f.useEffect(()=>{if(t&&r===null){var s=new FR(P0(P0({},e),{},{map:t}));i(s)}},[t]),r}function qR(e){var{children:t,options:r}=e,i=YR(r);return i!==null?t(i):null}f.memo(qR);var z0={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},$0={options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},zIndex(e,t){e.setZIndex(t)}};function GR(e){var{children:t,anchor:r,options:i,position:s,zIndex:u,onCloseClick:d,onDomReady:m,onContentChanged:h,onPositionChanged:p,onZindexChanged:g,onLoad:b,onUnmount:w}=e,S=f.useContext(Tt),[y,j]=f.useState(null),[N,E]=f.useState(null),[_,M]=f.useState(null),[O,C]=f.useState(null),[L,B]=f.useState(null),[Z,R]=f.useState(null),X=f.useRef(null);return f.useEffect(()=>{y!==null&&(y.close(),r?y.open(S,r):y.getPosition()&&y.open(S))},[S,y,r]),f.useEffect(()=>{i&&y!==null&&y.setOptions(i)},[y,i]),f.useEffect(()=>{s&&y!==null&&y.setPosition(s)},[s]),f.useEffect(()=>{typeof u=="number"&&y!==null&&y.setZIndex(u)},[u]),f.useEffect(()=>{y&&d&&(N!==null&&google.maps.event.removeListener(N),E(google.maps.event.addListener(y,"closeclick",d)))},[d]),f.useEffect(()=>{y&&m&&(_!==null&&google.maps.event.removeListener(_),M(google.maps.event.addListener(y,"domready",m)))},[m]),f.useEffect(()=>{y&&h&&(O!==null&&google.maps.event.removeListener(O),C(google.maps.event.addListener(y,"content_changed",h)))},[h]),f.useEffect(()=>{y&&p&&(L!==null&&google.maps.event.removeListener(L),B(google.maps.event.addListener(y,"position_changed",p)))},[p]),f.useEffect(()=>{y&&g&&(Z!==null&&google.maps.event.removeListener(Z),R(google.maps.event.addListener(y,"zindex_changed",g)))},[g]),f.useEffect(()=>{var te=new google.maps.InfoWindow(i);return j(te),X.current=document.createElement("div"),d&&E(google.maps.event.addListener(te,"closeclick",d)),m&&M(google.maps.event.addListener(te,"domready",m)),h&&C(google.maps.event.addListener(te,"content_changed",h)),p&&B(google.maps.event.addListener(te,"position_changed",p)),g&&R(google.maps.event.addListener(te,"zindex_changed",g)),te.setContent(X.current),s&&te.setPosition(s),u&&te.setZIndex(u),r?te.open(S,r):te.getPosition()?te.open(S):Kn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),b&&b(te),()=>{N&&google.maps.event.removeListener(N),O&&google.maps.event.removeListener(O),_&&google.maps.event.removeListener(_),L&&google.maps.event.removeListener(L),Z&&google.maps.event.removeListener(Z),w&&w(te),te.close()}},[]),X.current?Xs.createPortal(f.Children.only(t),X.current):null}f.memo(GR);class WR extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"containerElement",null),Re(this,"state",{infoWindow:null}),Re(this,"open",(t,r)=>{r?t.open(this.context,r):t.getPosition()?t.open(this.context):Kn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Re(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var t=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=It({updaterMap:$0,eventMap:z0,prevProps:{},nextProps:this.props,instance:t}),this.setState(()=>({infoWindow:t}),this.setInfoWindowCallback)}componentDidUpdate(t){this.state.infoWindow!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:$0,eventMap:z0,prevProps:t,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Ht(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Xs.createPortal(f.Children.only(this.props.children),this.containerElement):null}}Re(WR,"contextType",Tt);function U0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function df(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var I0={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},V0={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},visible(e,t){e.setVisible(t)}},ZR={};function XR(e){var{options:t,draggable:r,editable:i,visible:s,path:u,onDblClick:d,onDragEnd:m,onDragStart:h,onMouseDown:p,onMouseMove:g,onMouseOut:b,onMouseOver:w,onMouseUp:S,onRightClick:y,onClick:j,onDrag:N,onLoad:E,onUnmount:_}=e,M=f.useContext(Tt),[O,C]=f.useState(null),[L,B]=f.useState(null),[Z,R]=f.useState(null),[X,te]=f.useState(null),[xe,Pe]=f.useState(null),[ve,se]=f.useState(null),[V,F]=f.useState(null),[Y,z]=f.useState(null),[T,P]=f.useState(null),[A,H]=f.useState(null),[U,W]=f.useState(null),[ue,Ee]=f.useState(null);return f.useEffect(()=>{O!==null&&O.setMap(M)},[M]),f.useEffect(()=>{typeof t<"u"&&O!==null&&O.setOptions(t)},[O,t]),f.useEffect(()=>{typeof r<"u"&&O!==null&&O.setDraggable(r)},[O,r]),f.useEffect(()=>{typeof i<"u"&&O!==null&&O.setEditable(i)},[O,i]),f.useEffect(()=>{typeof s<"u"&&O!==null&&O.setVisible(s)},[O,s]),f.useEffect(()=>{typeof u<"u"&&O!==null&&O.setPath(u)},[O,u]),f.useEffect(()=>{O&&d&&(L!==null&&google.maps.event.removeListener(L),B(google.maps.event.addListener(O,"dblclick",d)))},[d]),f.useEffect(()=>{O&&m&&(Z!==null&&google.maps.event.removeListener(Z),R(google.maps.event.addListener(O,"dragend",m)))},[m]),f.useEffect(()=>{O&&h&&(X!==null&&google.maps.event.removeListener(X),te(google.maps.event.addListener(O,"dragstart",h)))},[h]),f.useEffect(()=>{O&&p&&(xe!==null&&google.maps.event.removeListener(xe),Pe(google.maps.event.addListener(O,"mousedown",p)))},[p]),f.useEffect(()=>{O&&g&&(ve!==null&&google.maps.event.removeListener(ve),se(google.maps.event.addListener(O,"mousemove",g)))},[g]),f.useEffect(()=>{O&&b&&(V!==null&&google.maps.event.removeListener(V),F(google.maps.event.addListener(O,"mouseout",b)))},[b]),f.useEffect(()=>{O&&w&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(O,"mouseover",w)))},[w]),f.useEffect(()=>{O&&S&&(T!==null&&google.maps.event.removeListener(T),P(google.maps.event.addListener(O,"mouseup",S)))},[S]),f.useEffect(()=>{O&&y&&(A!==null&&google.maps.event.removeListener(A),H(google.maps.event.addListener(O,"rightclick",y)))},[y]),f.useEffect(()=>{O&&j&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(O,"click",j)))},[j]),f.useEffect(()=>{O&&N&&(ue!==null&&google.maps.event.removeListener(ue),Ee(google.maps.event.addListener(O,"drag",N)))},[N]),f.useEffect(()=>{var be=new google.maps.Polyline(df(df({},t||ZR),{},{map:M}));return u&&be.setPath(u),typeof s<"u"&&be.setVisible(s),typeof i<"u"&&be.setEditable(i),typeof r<"u"&&be.setDraggable(r),d&&B(google.maps.event.addListener(be,"dblclick",d)),m&&R(google.maps.event.addListener(be,"dragend",m)),h&&te(google.maps.event.addListener(be,"dragstart",h)),p&&Pe(google.maps.event.addListener(be,"mousedown",p)),g&&se(google.maps.event.addListener(be,"mousemove",g)),b&&F(google.maps.event.addListener(be,"mouseout",b)),w&&z(google.maps.event.addListener(be,"mouseover",w)),S&&P(google.maps.event.addListener(be,"mouseup",S)),y&&H(google.maps.event.addListener(be,"rightclick",y)),j&&W(google.maps.event.addListener(be,"click",j)),N&&Ee(google.maps.event.addListener(be,"drag",N)),C(be),E&&E(be),()=>{L!==null&&google.maps.event.removeListener(L),Z!==null&&google.maps.event.removeListener(Z),X!==null&&google.maps.event.removeListener(X),xe!==null&&google.maps.event.removeListener(xe),ve!==null&&google.maps.event.removeListener(ve),V!==null&&google.maps.event.removeListener(V),Y!==null&&google.maps.event.removeListener(Y),T!==null&&google.maps.event.removeListener(T),A!==null&&google.maps.event.removeListener(A),U!==null&&google.maps.event.removeListener(U),_&&_(be),be.setMap(null)}},[]),null}f.memo(XR);class Ip extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{polyline:null}),Re(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var t=new google.maps.Polyline(df(df({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:V0,eventMap:I0,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{polyline:t}},this.setPolylineCallback)}componentDidUpdate(t){this.state.polyline!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:V0,eventMap:I0,prevProps:t,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Ht(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}Re(Ip,"contextType",Tt);function B0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function H0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var F0={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Y0={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},paths(e,t){e.setPaths(t)},visible(e,t){e.setVisible(t)}};function KR(e){var{options:t,draggable:r,editable:i,visible:s,path:u,paths:d,onDblClick:m,onDragEnd:h,onDragStart:p,onMouseDown:g,onMouseMove:b,onMouseOut:w,onMouseOver:S,onMouseUp:y,onRightClick:j,onClick:N,onDrag:E,onLoad:_,onUnmount:M,onEdit:O}=e,C=f.useContext(Tt),[L,B]=f.useState(null),[Z,R]=f.useState(null),[X,te]=f.useState(null),[xe,Pe]=f.useState(null),[ve,se]=f.useState(null),[V,F]=f.useState(null),[Y,z]=f.useState(null),[T,P]=f.useState(null),[A,H]=f.useState(null),[U,W]=f.useState(null),[ue,Ee]=f.useState(null),[be,Be]=f.useState(null);return f.useEffect(()=>{L!==null&&L.setMap(C)},[C]),f.useEffect(()=>{typeof t<"u"&&L!==null&&L.setOptions(t)},[L,t]),f.useEffect(()=>{typeof r<"u"&&L!==null&&L.setDraggable(r)},[L,r]),f.useEffect(()=>{typeof i<"u"&&L!==null&&L.setEditable(i)},[L,i]),f.useEffect(()=>{typeof s<"u"&&L!==null&&L.setVisible(s)},[L,s]),f.useEffect(()=>{typeof u<"u"&&L!==null&&L.setPath(u)},[L,u]),f.useEffect(()=>{typeof d<"u"&&L!==null&&L.setPaths(d)},[L,d]),f.useEffect(()=>{L&&typeof m=="function"&&(Z!==null&&google.maps.event.removeListener(Z),R(google.maps.event.addListener(L,"dblclick",m)))},[m]),f.useEffect(()=>{L&&(google.maps.event.addListener(L.getPath(),"insert_at",()=>{O==null||O(L)}),google.maps.event.addListener(L.getPath(),"set_at",()=>{O==null||O(L)}),google.maps.event.addListener(L.getPath(),"remove_at",()=>{O==null||O(L)}))},[L,O]),f.useEffect(()=>{L&&typeof h=="function"&&(X!==null&&google.maps.event.removeListener(X),te(google.maps.event.addListener(L,"dragend",h)))},[h]),f.useEffect(()=>{L&&typeof p=="function"&&(xe!==null&&google.maps.event.removeListener(xe),Pe(google.maps.event.addListener(L,"dragstart",p)))},[p]),f.useEffect(()=>{L&&typeof g=="function"&&(ve!==null&&google.maps.event.removeListener(ve),se(google.maps.event.addListener(L,"mousedown",g)))},[g]),f.useEffect(()=>{L&&typeof b=="function"&&(V!==null&&google.maps.event.removeListener(V),F(google.maps.event.addListener(L,"mousemove",b)))},[b]),f.useEffect(()=>{L&&typeof w=="function"&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(L,"mouseout",w)))},[w]),f.useEffect(()=>{L&&typeof S=="function"&&(T!==null&&google.maps.event.removeListener(T),P(google.maps.event.addListener(L,"mouseover",S)))},[S]),f.useEffect(()=>{L&&typeof y=="function"&&(A!==null&&google.maps.event.removeListener(A),H(google.maps.event.addListener(L,"mouseup",y)))},[y]),f.useEffect(()=>{L&&typeof j=="function"&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(L,"rightclick",j)))},[j]),f.useEffect(()=>{L&&typeof N=="function"&&(ue!==null&&google.maps.event.removeListener(ue),Ee(google.maps.event.addListener(L,"click",N)))},[N]),f.useEffect(()=>{L&&typeof E=="function"&&(be!==null&&google.maps.event.removeListener(be),Be(google.maps.event.addListener(L,"drag",E)))},[E]),f.useEffect(()=>{var Te=new google.maps.Polygon(H0(H0({},t),{},{map:C}));return u&&Te.setPath(u),d&&Te.setPaths(d),typeof s<"u"&&Te.setVisible(s),typeof i<"u"&&Te.setEditable(i),typeof r<"u"&&Te.setDraggable(r),m&&R(google.maps.event.addListener(Te,"dblclick",m)),h&&te(google.maps.event.addListener(Te,"dragend",h)),p&&Pe(google.maps.event.addListener(Te,"dragstart",p)),g&&se(google.maps.event.addListener(Te,"mousedown",g)),b&&F(google.maps.event.addListener(Te,"mousemove",b)),w&&z(google.maps.event.addListener(Te,"mouseout",w)),S&&P(google.maps.event.addListener(Te,"mouseover",S)),y&&H(google.maps.event.addListener(Te,"mouseup",y)),j&&W(google.maps.event.addListener(Te,"rightclick",j)),N&&Ee(google.maps.event.addListener(Te,"click",N)),E&&Be(google.maps.event.addListener(Te,"drag",E)),B(Te),_&&_(Te),()=>{Z!==null&&google.maps.event.removeListener(Z),X!==null&&google.maps.event.removeListener(X),xe!==null&&google.maps.event.removeListener(xe),ve!==null&&google.maps.event.removeListener(ve),V!==null&&google.maps.event.removeListener(V),Y!==null&&google.maps.event.removeListener(Y),T!==null&&google.maps.event.removeListener(T),A!==null&&google.maps.event.removeListener(A),U!==null&&google.maps.event.removeListener(U),ue!==null&&google.maps.event.removeListener(ue),M&&M(Te),Te.setMap(null)}},[]),null}f.memo(KR);class r1 extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[])}componentDidMount(){var t=this.props.options||{};this.polygon=new google.maps.Polygon(t),this.polygon.setMap(this.context),this.registeredEvents=It({updaterMap:Y0,eventMap:F0,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(t){this.polygon&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:Y0,eventMap:F0,prevProps:t,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Ht(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}Re(r1,"contextType",Tt);function q0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function ff(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var G0={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},W0={bounds(e,t){e.setBounds(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},visible(e,t){e.setVisible(t)}};function QR(e){var{options:t,bounds:r,draggable:i,editable:s,visible:u,onDblClick:d,onDragEnd:m,onDragStart:h,onMouseDown:p,onMouseMove:g,onMouseOut:b,onMouseOver:w,onMouseUp:S,onRightClick:y,onClick:j,onDrag:N,onBoundsChanged:E,onLoad:_,onUnmount:M}=e,O=f.useContext(Tt),[C,L]=f.useState(null),[B,Z]=f.useState(null),[R,X]=f.useState(null),[te,xe]=f.useState(null),[Pe,ve]=f.useState(null),[se,V]=f.useState(null),[F,Y]=f.useState(null),[z,T]=f.useState(null),[P,A]=f.useState(null),[H,U]=f.useState(null),[W,ue]=f.useState(null),[Ee,be]=f.useState(null),[Be,Te]=f.useState(null);return f.useEffect(()=>{C!==null&&C.setMap(O)},[O]),f.useEffect(()=>{typeof t<"u"&&C!==null&&C.setOptions(t)},[C,t]),f.useEffect(()=>{typeof i<"u"&&C!==null&&C.setDraggable(i)},[C,i]),f.useEffect(()=>{typeof s<"u"&&C!==null&&C.setEditable(s)},[C,s]),f.useEffect(()=>{typeof u<"u"&&C!==null&&C.setVisible(u)},[C,u]),f.useEffect(()=>{typeof r<"u"&&C!==null&&C.setBounds(r)},[C,r]),f.useEffect(()=>{C&&d&&(B!==null&&google.maps.event.removeListener(B),Z(google.maps.event.addListener(C,"dblclick",d)))},[d]),f.useEffect(()=>{C&&m&&(R!==null&&google.maps.event.removeListener(R),X(google.maps.event.addListener(C,"dragend",m)))},[m]),f.useEffect(()=>{C&&h&&(te!==null&&google.maps.event.removeListener(te),xe(google.maps.event.addListener(C,"dragstart",h)))},[h]),f.useEffect(()=>{C&&p&&(Pe!==null&&google.maps.event.removeListener(Pe),ve(google.maps.event.addListener(C,"mousedown",p)))},[p]),f.useEffect(()=>{C&&g&&(se!==null&&google.maps.event.removeListener(se),V(google.maps.event.addListener(C,"mousemove",g)))},[g]),f.useEffect(()=>{C&&b&&(F!==null&&google.maps.event.removeListener(F),Y(google.maps.event.addListener(C,"mouseout",b)))},[b]),f.useEffect(()=>{C&&w&&(z!==null&&google.maps.event.removeListener(z),T(google.maps.event.addListener(C,"mouseover",w)))},[w]),f.useEffect(()=>{C&&S&&(P!==null&&google.maps.event.removeListener(P),A(google.maps.event.addListener(C,"mouseup",S)))},[S]),f.useEffect(()=>{C&&y&&(H!==null&&google.maps.event.removeListener(H),U(google.maps.event.addListener(C,"rightclick",y)))},[y]),f.useEffect(()=>{C&&j&&(W!==null&&google.maps.event.removeListener(W),ue(google.maps.event.addListener(C,"click",j)))},[j]),f.useEffect(()=>{C&&N&&(Ee!==null&&google.maps.event.removeListener(Ee),be(google.maps.event.addListener(C,"drag",N)))},[N]),f.useEffect(()=>{C&&E&&(Be!==null&&google.maps.event.removeListener(Be),Te(google.maps.event.addListener(C,"bounds_changed",E)))},[E]),f.useEffect(()=>{var Ge=new google.maps.Rectangle(ff(ff({},t),{},{map:O}));return typeof u<"u"&&Ge.setVisible(u),typeof s<"u"&&Ge.setEditable(s),typeof i<"u"&&Ge.setDraggable(i),typeof r<"u"&&Ge.setBounds(r),d&&Z(google.maps.event.addListener(Ge,"dblclick",d)),m&&X(google.maps.event.addListener(Ge,"dragend",m)),h&&xe(google.maps.event.addListener(Ge,"dragstart",h)),p&&ve(google.maps.event.addListener(Ge,"mousedown",p)),g&&V(google.maps.event.addListener(Ge,"mousemove",g)),b&&Y(google.maps.event.addListener(Ge,"mouseout",b)),w&&T(google.maps.event.addListener(Ge,"mouseover",w)),S&&A(google.maps.event.addListener(Ge,"mouseup",S)),y&&U(google.maps.event.addListener(Ge,"rightclick",y)),j&&ue(google.maps.event.addListener(Ge,"click",j)),N&&be(google.maps.event.addListener(Ge,"drag",N)),E&&Te(google.maps.event.addListener(Ge,"bounds_changed",E)),L(Ge),_&&_(Ge),()=>{B!==null&&google.maps.event.removeListener(B),R!==null&&google.maps.event.removeListener(R),te!==null&&google.maps.event.removeListener(te),Pe!==null&&google.maps.event.removeListener(Pe),se!==null&&google.maps.event.removeListener(se),F!==null&&google.maps.event.removeListener(F),z!==null&&google.maps.event.removeListener(z),P!==null&&google.maps.event.removeListener(P),H!==null&&google.maps.event.removeListener(H),W!==null&&google.maps.event.removeListener(W),Ee!==null&&google.maps.event.removeListener(Ee),Be!==null&&google.maps.event.removeListener(Be),M&&M(Ge),Ge.setMap(null)}},[]),null}f.memo(QR);class JR extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{rectangle:null}),Re(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var t=new google.maps.Rectangle(ff(ff({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:W0,eventMap:G0,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{rectangle:t}},this.setRectangleCallback)}componentDidUpdate(t){this.state.rectangle!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:W0,eventMap:G0,prevProps:t,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Ht(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}Re(JR,"contextType",Tt);function Z0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function hf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var X0={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},K0={center(e,t){e.setCenter(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},radius(e,t){e.setRadius(t)},visible(e,t){e.setVisible(t)}},eP={};function tP(e){var{options:t,center:r,radius:i,draggable:s,editable:u,visible:d,onDblClick:m,onDragEnd:h,onDragStart:p,onMouseDown:g,onMouseMove:b,onMouseOut:w,onMouseOver:S,onMouseUp:y,onRightClick:j,onClick:N,onDrag:E,onCenterChanged:_,onRadiusChanged:M,onLoad:O,onUnmount:C}=e,L=f.useContext(Tt),[B,Z]=f.useState(null),[R,X]=f.useState(null),[te,xe]=f.useState(null),[Pe,ve]=f.useState(null),[se,V]=f.useState(null),[F,Y]=f.useState(null),[z,T]=f.useState(null),[P,A]=f.useState(null),[H,U]=f.useState(null),[W,ue]=f.useState(null),[Ee,be]=f.useState(null),[Be,Te]=f.useState(null),[Ge,ge]=f.useState(null),[Ke,le]=f.useState(null);return f.useEffect(()=>{B!==null&&B.setMap(L)},[L]),f.useEffect(()=>{typeof t<"u"&&B!==null&&B.setOptions(t)},[B,t]),f.useEffect(()=>{typeof s<"u"&&B!==null&&B.setDraggable(s)},[B,s]),f.useEffect(()=>{typeof u<"u"&&B!==null&&B.setEditable(u)},[B,u]),f.useEffect(()=>{typeof d<"u"&&B!==null&&B.setVisible(d)},[B,d]),f.useEffect(()=>{typeof i=="number"&&B!==null&&B.setRadius(i)},[B,i]),f.useEffect(()=>{typeof r<"u"&&B!==null&&B.setCenter(r)},[B,r]),f.useEffect(()=>{B&&m&&(R!==null&&google.maps.event.removeListener(R),X(google.maps.event.addListener(B,"dblclick",m)))},[m]),f.useEffect(()=>{B&&h&&(te!==null&&google.maps.event.removeListener(te),xe(google.maps.event.addListener(B,"dragend",h)))},[h]),f.useEffect(()=>{B&&p&&(Pe!==null&&google.maps.event.removeListener(Pe),ve(google.maps.event.addListener(B,"dragstart",p)))},[p]),f.useEffect(()=>{B&&g&&(se!==null&&google.maps.event.removeListener(se),V(google.maps.event.addListener(B,"mousedown",g)))},[g]),f.useEffect(()=>{B&&b&&(F!==null&&google.maps.event.removeListener(F),Y(google.maps.event.addListener(B,"mousemove",b)))},[b]),f.useEffect(()=>{B&&w&&(z!==null&&google.maps.event.removeListener(z),T(google.maps.event.addListener(B,"mouseout",w)))},[w]),f.useEffect(()=>{B&&S&&(P!==null&&google.maps.event.removeListener(P),A(google.maps.event.addListener(B,"mouseover",S)))},[S]),f.useEffect(()=>{B&&y&&(H!==null&&google.maps.event.removeListener(H),U(google.maps.event.addListener(B,"mouseup",y)))},[y]),f.useEffect(()=>{B&&j&&(W!==null&&google.maps.event.removeListener(W),ue(google.maps.event.addListener(B,"rightclick",j)))},[j]),f.useEffect(()=>{B&&N&&(Ee!==null&&google.maps.event.removeListener(Ee),be(google.maps.event.addListener(B,"click",N)))},[N]),f.useEffect(()=>{B&&E&&(Be!==null&&google.maps.event.removeListener(Be),Te(google.maps.event.addListener(B,"drag",E)))},[E]),f.useEffect(()=>{B&&_&&(Ge!==null&&google.maps.event.removeListener(Ge),ge(google.maps.event.addListener(B,"center_changed",_)))},[N]),f.useEffect(()=>{B&&M&&(Ke!==null&&google.maps.event.removeListener(Ke),le(google.maps.event.addListener(B,"radius_changed",M)))},[M]),f.useEffect(()=>{var ce=new google.maps.Circle(hf(hf({},t||eP),{},{map:L}));return typeof i=="number"&&ce.setRadius(i),typeof r<"u"&&ce.setCenter(r),typeof i=="number"&&ce.setRadius(i),typeof d<"u"&&ce.setVisible(d),typeof u<"u"&&ce.setEditable(u),typeof s<"u"&&ce.setDraggable(s),m&&X(google.maps.event.addListener(ce,"dblclick",m)),h&&xe(google.maps.event.addListener(ce,"dragend",h)),p&&ve(google.maps.event.addListener(ce,"dragstart",p)),g&&V(google.maps.event.addListener(ce,"mousedown",g)),b&&Y(google.maps.event.addListener(ce,"mousemove",b)),w&&T(google.maps.event.addListener(ce,"mouseout",w)),S&&A(google.maps.event.addListener(ce,"mouseover",S)),y&&U(google.maps.event.addListener(ce,"mouseup",y)),j&&ue(google.maps.event.addListener(ce,"rightclick",j)),N&&be(google.maps.event.addListener(ce,"click",N)),E&&Te(google.maps.event.addListener(ce,"drag",E)),_&&ge(google.maps.event.addListener(ce,"center_changed",_)),M&&le(google.maps.event.addListener(ce,"radius_changed",M)),Z(ce),O&&O(ce),()=>{R!==null&&google.maps.event.removeListener(R),te!==null&&google.maps.event.removeListener(te),Pe!==null&&google.maps.event.removeListener(Pe),se!==null&&google.maps.event.removeListener(se),F!==null&&google.maps.event.removeListener(F),z!==null&&google.maps.event.removeListener(z),P!==null&&google.maps.event.removeListener(P),H!==null&&google.maps.event.removeListener(H),W!==null&&google.maps.event.removeListener(W),Ee!==null&&google.maps.event.removeListener(Ee),Ge!==null&&google.maps.event.removeListener(Ge),Ke!==null&&google.maps.event.removeListener(Ke),C&&C(ce),ce.setMap(null)}},[]),null}f.memo(tP);class a1 extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{circle:null}),Re(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var t=new google.maps.Circle(hf(hf({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:K0,eventMap:X0,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{circle:t}},this.setCircleCallback)}componentDidUpdate(t){this.state.circle!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:K0,eventMap:X0,prevProps:t,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var t;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Ht(this.registeredEvents),(t=this.state.circle)===null||t===void 0||t.setMap(null)}}render(){return null}}Re(a1,"contextType",Tt);function Q0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function mf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q0(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q0(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var J0={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},ew={add(e,t){e.add(t)},addgeojson(e,t,r){e.addGeoJson(t,r)},contains(e,t){e.contains(t)},foreach(e,t){e.forEach(t)},loadgeojson(e,t,r,i){e.loadGeoJson(t,r,i)},overridestyle(e,t,r){e.overrideStyle(t,r)},remove(e,t){e.remove(t)},revertstyle(e,t){e.revertStyle(t)},controlposition(e,t){e.setControlPosition(t)},controls(e,t){e.setControls(t)},drawingmode(e,t){e.setDrawingMode(t)},map(e,t){e.setMap(t)},style(e,t){e.setStyle(t)},togeojson(e,t){e.toGeoJson(t)}};function nP(e){var{options:t,onClick:r,onDblClick:i,onMouseDown:s,onMouseMove:u,onMouseOut:d,onMouseOver:m,onMouseUp:h,onRightClick:p,onAddFeature:g,onRemoveFeature:b,onRemoveProperty:w,onSetGeometry:S,onSetProperty:y,onLoad:j,onUnmount:N}=e,E=f.useContext(Tt),[_,M]=f.useState(null),[O,C]=f.useState(null),[L,B]=f.useState(null),[Z,R]=f.useState(null),[X,te]=f.useState(null),[xe,Pe]=f.useState(null),[ve,se]=f.useState(null),[V,F]=f.useState(null),[Y,z]=f.useState(null),[T,P]=f.useState(null),[A,H]=f.useState(null),[U,W]=f.useState(null),[ue,Ee]=f.useState(null),[be,Be]=f.useState(null);return f.useEffect(()=>{_!==null&&_.setMap(E)},[E]),f.useEffect(()=>{_&&i&&(O!==null&&google.maps.event.removeListener(O),C(google.maps.event.addListener(_,"dblclick",i)))},[i]),f.useEffect(()=>{_&&s&&(L!==null&&google.maps.event.removeListener(L),B(google.maps.event.addListener(_,"mousedown",s)))},[s]),f.useEffect(()=>{_&&u&&(Z!==null&&google.maps.event.removeListener(Z),R(google.maps.event.addListener(_,"mousemove",u)))},[u]),f.useEffect(()=>{_&&d&&(X!==null&&google.maps.event.removeListener(X),te(google.maps.event.addListener(_,"mouseout",d)))},[d]),f.useEffect(()=>{_&&m&&(xe!==null&&google.maps.event.removeListener(xe),Pe(google.maps.event.addListener(_,"mouseover",m)))},[m]),f.useEffect(()=>{_&&h&&(ve!==null&&google.maps.event.removeListener(ve),se(google.maps.event.addListener(_,"mouseup",h)))},[h]),f.useEffect(()=>{_&&p&&(V!==null&&google.maps.event.removeListener(V),F(google.maps.event.addListener(_,"rightclick",p)))},[p]),f.useEffect(()=>{_&&r&&(Y!==null&&google.maps.event.removeListener(Y),z(google.maps.event.addListener(_,"click",r)))},[r]),f.useEffect(()=>{_&&g&&(T!==null&&google.maps.event.removeListener(T),P(google.maps.event.addListener(_,"addfeature",g)))},[g]),f.useEffect(()=>{_&&b&&(A!==null&&google.maps.event.removeListener(A),H(google.maps.event.addListener(_,"removefeature",b)))},[b]),f.useEffect(()=>{_&&w&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(_,"removeproperty",w)))},[w]),f.useEffect(()=>{_&&S&&(ue!==null&&google.maps.event.removeListener(ue),Ee(google.maps.event.addListener(_,"setgeometry",S)))},[S]),f.useEffect(()=>{_&&y&&(be!==null&&google.maps.event.removeListener(be),Be(google.maps.event.addListener(_,"setproperty",y)))},[y]),f.useEffect(()=>{if(E!==null){var Te=new google.maps.Data(mf(mf({},t),{},{map:E}));i&&C(google.maps.event.addListener(Te,"dblclick",i)),s&&B(google.maps.event.addListener(Te,"mousedown",s)),u&&R(google.maps.event.addListener(Te,"mousemove",u)),d&&te(google.maps.event.addListener(Te,"mouseout",d)),m&&Pe(google.maps.event.addListener(Te,"mouseover",m)),h&&se(google.maps.event.addListener(Te,"mouseup",h)),p&&F(google.maps.event.addListener(Te,"rightclick",p)),r&&z(google.maps.event.addListener(Te,"click",r)),g&&P(google.maps.event.addListener(Te,"addfeature",g)),b&&H(google.maps.event.addListener(Te,"removefeature",b)),w&&W(google.maps.event.addListener(Te,"removeproperty",w)),S&&Ee(google.maps.event.addListener(Te,"setgeometry",S)),y&&Be(google.maps.event.addListener(Te,"setproperty",y)),M(Te),j&&j(Te)}return()=>{_&&(O!==null&&google.maps.event.removeListener(O),L!==null&&google.maps.event.removeListener(L),Z!==null&&google.maps.event.removeListener(Z),X!==null&&google.maps.event.removeListener(X),xe!==null&&google.maps.event.removeListener(xe),ve!==null&&google.maps.event.removeListener(ve),V!==null&&google.maps.event.removeListener(V),Y!==null&&google.maps.event.removeListener(Y),T!==null&&google.maps.event.removeListener(T),A!==null&&google.maps.event.removeListener(A),U!==null&&google.maps.event.removeListener(U),ue!==null&&google.maps.event.removeListener(ue),be!==null&&google.maps.event.removeListener(be),N&&N(_),_.setMap(null))}},[]),null}f.memo(nP);class rP extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{data:null}),Re(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var t=new google.maps.Data(mf(mf({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:ew,eventMap:J0,prevProps:{},nextProps:this.props,instance:t}),this.setState(()=>({data:t}),this.setDataCallback)}}componentDidUpdate(t){this.state.data!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:ew,eventMap:J0,prevProps:t,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Ht(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}Re(rP,"contextType",Tt);function tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function nw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tw(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tw(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var rw={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},aw={options(e,t){e.setOptions(t)},url(e,t){e.setUrl(t)},zIndex(e,t){e.setZIndex(t)}};class aP extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{kmlLayer:null}),Re(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var t=new google.maps.KmlLayer(nw(nw({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:aw,eventMap:rw,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{kmlLayer:t}},this.setKmlLayerCallback)}componentDidUpdate(t){this.state.kmlLayer!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:aw,eventMap:rw,prevProps:t,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Ht(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}Re(aP,"contextType",Tt);function i1(e,t){return typeof t=="function"?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function iP(e,t){return new t(e.lat,e.lng)}function sP(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function oP(e,t,r){return e instanceof t?e:r(e,t)}function lP(e,t,r){return e instanceof t?e:r(e,t)}function cP(e,t,r){var i=e&&e.fromLatLngToDivPixel(r.getNorthEast()),s=e&&e.fromLatLngToDivPixel(r.getSouthWest());return i&&s?{left:"".concat(s.x+t.x,"px"),top:"".concat(i.y+t.y,"px"),width:"".concat(i.x-s.x-t.x,"px"),height:"".concat(s.y-i.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}function uP(e,t,r){var i=e&&e.fromLatLngToDivPixel(r);if(i){var{x:s,y:u}=i;return{left:"".concat(s+t.x,"px"),top:"".concat(u+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}function s1(e,t,r,i){return r!==void 0?cP(e,t,lP(r,google.maps.LatLngBounds,sP)):uP(e,t,oP(i,google.maps.LatLng,iP))}function dP(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.height&&e.height===t.height}function iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function fP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iw(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function hP(e,t,r,i,s){class u extends google.maps.OverlayView{constructor(m,h,p,g){super(),this.container=m,this.pane=h,this.position=p,this.bounds=g}onAdd(){var m,h=(m=this.getPanes())===null||m===void 0?void 0:m[this.pane];h==null||h.appendChild(this.container)}draw(){var m=this.getProjection(),h=fP({},this.container?i1(this.container,s):{x:0,y:0}),p=s1(m,h,this.bounds,this.position);for(var[g,b]of Object.entries(p))this.container.style[g]=b}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new u(e,t,r,i)}function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function mP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ow(e){if(!e)return"";var t=e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng);return t+""}function lw(e){if(!e)return"";var t=e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west));return t+""}function pP(e){var{position:t,bounds:r,mapPaneName:i,zIndex:s,onLoad:u,onUnmount:d,getPixelPositionOffset:m,children:h}=e,p=f.useContext(Tt),g=f.useMemo(()=>{var w=document.createElement("div");return w.style.position="absolute",w},[]),b=f.useMemo(()=>hP(g,i,t,r,m),[g,i,t,r]);return f.useEffect(()=>(u==null||u(b),b==null||b.setMap(p),()=>{d==null||d(b),b==null||b.setMap(null)}),[p,b]),f.useEffect(()=>{g.style.zIndex="".concat(s)},[s,g]),Xs.createPortal(h,g)}f.memo(pP);class ul extends f.PureComponent{constructor(t){super(t),Re(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Re(this,"updatePane",()=>{var i=this.props.mapPaneName,s=this.overlayView.getPanes();Kn(!!i,"OverlayView requires props.mapPaneName but got %s",i),s?this.setState({paneEl:s[i]}):this.setState({paneEl:null})}),Re(this,"onAdd",()=>{var i,s;this.updatePane(),(i=(s=this.props).onLoad)===null||i===void 0||i.call(s,this.overlayView)}),Re(this,"onPositionElement",()=>{var i=this.overlayView.getProjection(),s=mP({x:0,y:0},this.containerRef.current?i1(this.containerRef.current,this.props.getPixelPositionOffset):{}),u=s1(i,s,this.props.bounds,this.props.position);if(!dP(u,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var d,m,h,p;this.setState({containerStyle:{top:(d=u.top)!==null&&d!==void 0?d:0,left:(m=u.left)!==null&&m!==void 0?m:0,width:(h=u.width)!==null&&h!==void 0?h:0,height:(p=u.height)!==null&&p!==void 0?p:0,position:"absolute"}})}}),Re(this,"draw",()=>{this.onPositionElement()}),Re(this,"onRemove",()=>{var i,s;this.setState(()=>({paneEl:null})),(i=(s=this.props).onUnmount)===null||i===void 0||i.call(s,this.overlayView)}),this.containerRef=f.createRef();var r=new google.maps.OverlayView;r.onAdd=this.onAdd,r.draw=this.draw,r.onRemove=this.onRemove,this.overlayView=r}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(t){var r=ow(t.position),i=ow(this.props.position),s=lw(t.bounds),u=lw(this.props.bounds);(r!==i||s!==u)&&this.overlayView.draw(),t.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var t=this.state.paneEl;return t?Xs.createPortal(o.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:f.Children.only(this.props.children)}),t):null}}Re(ul,"FLOAT_PANE","floatPane");Re(ul,"MAP_PANE","mapPane");Re(ul,"MARKER_LAYER","markerLayer");Re(ul,"OVERLAY_LAYER","overlayLayer");Re(ul,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");Re(ul,"contextType",Tt);function gP(){}function cw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cw(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var dw={onDblClick:"dblclick",onClick:"click"},fw={opacity(e,t){e.setOpacity(t)}};function vP(e){var{url:t,bounds:r,options:i,visible:s}=e,u=f.useContext(Tt),d=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),m=f.useMemo(()=>new google.maps.GroundOverlay(t,d,i),[]);return f.useEffect(()=>{m!==null&&m.setMap(u)},[u]),f.useEffect(()=>{typeof t<"u"&&m!==null&&(m.set("url",t),m.setMap(u))},[m,t]),f.useEffect(()=>{typeof s<"u"&&m!==null&&m.setOpacity(s?1:0)},[m,s]),f.useEffect(()=>{var h=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));typeof r<"u"&&m!==null&&(m.set("bounds",h),m.setMap(u))},[m,r]),null}f.memo(vP);class o1 extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{groundOverlay:null}),Re(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Kn(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var t=new google.maps.GroundOverlay(this.props.url,this.props.bounds,uw(uw({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:fw,eventMap:dw,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{groundOverlay:t}},this.setGroundOverlayCallback)}componentDidUpdate(t){this.state.groundOverlay!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:fw,eventMap:dw,prevProps:t,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}Re(o1,"defaultProps",{onLoad:gP});Re(o1,"contextType",Tt);function hw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function pf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(r),!0).forEach(function(i){Re(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hw(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var mw={},pw={data(e,t){e.setData(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)}};function bP(e){var{data:t,onLoad:r,onUnmount:i,options:s}=e,u=f.useContext(Tt),[d,m]=f.useState(null);return f.useEffect(()=>{google.maps.visualization||Kn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),f.useEffect(()=>{Kn(!!t,"data property is required in HeatmapLayer %s",t)},[t]),f.useEffect(()=>{d!==null&&d.setMap(u)},[u]),f.useEffect(()=>{s&&d!==null&&d.setOptions(s)},[d,s]),f.useEffect(()=>{var h=new google.maps.visualization.HeatmapLayer(pf(pf({},s),{},{data:t,map:u}));return m(h),r&&r(h),()=>{d!==null&&(i&&i(d),d.setMap(null))}},[]),null}f.memo(bP);class yP extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{heatmapLayer:null}),Re(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Kn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Kn(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var t=new google.maps.visualization.HeatmapLayer(pf(pf({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=It({updaterMap:pw,eventMap:mw,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{heatmapLayer:t}},this.setHeatmapLayerCallback)}componentDidUpdate(t){Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:pw,eventMap:mw,prevProps:t,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Ht(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Re(yP,"contextType",Tt);var gw={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},vw={register(e,t,r){e.registerPanoProvider(t,r)},links(e,t){e.setLinks(t)},motionTracking(e,t){e.setMotionTracking(t)},options(e,t){e.setOptions(t)},pano(e,t){e.setPano(t)},position(e,t){e.setPosition(t)},pov(e,t){e.setPov(t)},visible(e,t){e.setVisible(t)},zoom(e,t){e.setZoom(t)}};class xP extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{streetViewPanorama:null}),Re(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var t,r,i=(t=(r=this.context)===null||r===void 0?void 0:r.getStreetView())!==null&&t!==void 0?t:null;this.registeredEvents=It({updaterMap:vw,eventMap:gw,prevProps:{},nextProps:this.props,instance:i}),this.setState(()=>({streetViewPanorama:i}),this.setStreetViewPanoramaCallback)}componentDidUpdate(t){this.state.streetViewPanorama!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:vw,eventMap:gw,prevProps:t,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Ht(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Re(xP,"contextType",Tt);class wP extends f.PureComponent{constructor(){super(...arguments),Re(this,"state",{streetViewService:null}),Re(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var t=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:t}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Re(wP,"contextType",Tt);var bw={onDirectionsChanged:"directions_changed"},yw={directions(e,t){e.setDirections(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},panel(e,t){e.setPanel(t)},routeIndex(e,t){e.setRouteIndex(t)}};class SP extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"state",{directionsRenderer:null}),Re(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var t=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=It({updaterMap:yw,eventMap:bw,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{directionsRenderer:t}},this.setDirectionsRendererCallback)}componentDidUpdate(t){this.state.directionsRenderer!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:yw,eventMap:bw,prevProps:t,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Ht(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Re(SP,"contextType",Tt);var xw={onPlacesChanged:"places_changed"},ww={bounds(e,t){e.setBounds(t)}};class jP extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"containerElement",f.createRef()),Re(this,"state",{searchBox:null}),Re(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Kn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var t=this.containerElement.current.querySelector("input");if(t!==null){var r=new google.maps.places.SearchBox(t,this.props.options);this.registeredEvents=It({updaterMap:ww,eventMap:xw,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{searchBox:r}},this.setSearchBoxCallback)}}}componentDidUpdate(t){this.state.searchBox!==null&&(Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:ww,eventMap:xw,prevProps:t,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Ht(this.registeredEvents))}render(){return o.jsx("div",{ref:this.containerElement,children:f.Children.only(this.props.children)})}}Re(jP,"contextType",Tt);var Sw={onPlaceChanged:"place_changed"},jw={bounds(e,t){e.setBounds(t)},restrictions(e,t){e.setComponentRestrictions(t)},fields(e,t){e.setFields(t)},options(e,t){e.setOptions(t)},types(e,t){e.setTypes(t)}};class l1 extends f.PureComponent{constructor(){super(...arguments),Re(this,"registeredEvents",[]),Re(this,"containerElement",f.createRef()),Re(this,"state",{autocomplete:null}),Re(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var t;Kn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var r=(t=this.containerElement.current)===null||t===void 0?void 0:t.querySelector("input");if(r){var i=new google.maps.places.Autocomplete(r,this.props.options);this.registeredEvents=It({updaterMap:jw,eventMap:Sw,prevProps:{},nextProps:this.props,instance:i}),this.setState(()=>({autocomplete:i}),this.setAutocompleteCallback)}}componentDidUpdate(t){Ht(this.registeredEvents),this.registeredEvents=It({updaterMap:jw,eventMap:Sw,prevProps:t,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Ht(this.registeredEvents)}render(){return o.jsx("div",{ref:this.containerElement,className:this.props.className,children:f.Children.only(this.props.children)})}}Re(l1,"defaultProps",{className:""});Re(l1,"contextType",Tt);const _P=`
  body { font-family: Arial, sans-serif; font-size: 12px; color: #111827; }
  table { border-collapse: collapse; width: 100%; }
  th, td { border: 1px solid #d1d5db; padding: 4px 6px; text-align: left; }
  th { background: #f1f5f9; }
`;function pr(e){return e==null?"":String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function NP(e){return e.replace(/[\\/:*?"<>|]/g,"_").replace(/\s+/g,"-").slice(0,80)||"export"}function ru(e=new Date){try{return e.toLocaleString("ro-RO",{dateStyle:"medium",timeStyle:"short"})}catch{return e.toISOString()}}function au({filenameBase:e,headingHtml:t="",tableHtml:r,extraCss:i=""}){if(!r)return;const u=`<!DOCTYPE html><html><head><meta charset="UTF-8"/><style>${`${_P}${i||""}`}</style></head><body>${t||""}${r}</body></html>`,d=new Blob([u],{type:"application/vnd.ms-excel"}),m=URL.createObjectURL(d),h=document.createElement("a"),p=new Date,g=`${p.getFullYear()}${String(p.getMonth()+1).padStart(2,"0")}${String(p.getDate()).padStart(2,"0")}-${String(p.getHours()).padStart(2,"0")}${String(p.getMinutes()).padStart(2,"0")}`,b=NP(e||"export");h.href=m,h.download=`${b}-${g}.xls`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(m)}const CP="1d47f70c3cee1162b7dddfcf",EP={lat:45.9432,lng:24.9668};function _w(e){const t=document.createElement("div");return t.style.transform="translate(-50%,-50%)",t.style.padding="4px 8px",t.style.borderRadius="9999px",t.style.background="white",t.style.boxShadow="0 1px 4px rgba(0,0,0,.3)",t.style.fontSize="12px",t.style.fontWeight="600",t.textContent=e??"",t}function MP({map:e,position:t,label:r,draggable:i=!1,onClick:s,onDragEnd:u}){const d=f.useRef(null),m=f.useRef(null),h=f.useRef(null);return f.useEffect(()=>{var p,g,b;if(!(!e||!((b=(g=(p=window.google)==null?void 0:p.maps)==null?void 0:g.marker)!=null&&b.AdvancedMarkerElement)))return d.current?(d.current.position=t,d.current.content=_w(r),d.current.gmpDraggable=!!i):(d.current=new window.google.maps.marker.AdvancedMarkerElement({map:e,position:t,content:_w(r),gmpDraggable:!!i}),s&&(m.current=d.current.addListener("click",s)),u&&i&&(h.current=d.current.addListener("dragend",w=>{const{latLng:S}=w;S&&u({lat:S.lat(),lng:S.lng()})}))),()=>{m.current&&(window.google.maps.event.removeListener(m.current),m.current=null),h.current&&(window.google.maps.event.removeListener(h.current),h.current=null),d.current&&(d.current.map=null,d.current=null)}},[e,t==null?void 0:t.lat,t==null?void 0:t.lng,r,i,s,u]),null}function OP(){const[e,t]=f.useState([]),[r,i]=f.useState(""),[s,u]=f.useState(null),[d,m]=f.useState(!1),[h,p]=f.useState(""),[g,b]=f.useState({field:null,direction:"asc"});f.useEffect(()=>{(async()=>{const{data:C}=await vt.get("/api/stations",{headers:{"Cache-Control":"no-cache"}});t(C??[])})()},[]);const w=async C=>{m(!0);try{if(C.id)await vt.put(`/api/stations/${C.id}`,C),t(L=>L.map(B=>B.id===C.id?C:B));else{const{data:L}=await vt.post("/api/stations",C);t(B=>[...B,L])}u(null)}finally{m(!1)}},S=Array.from(new Set((e??[]).map(C=>C==null?void 0:C.county).filter(Boolean))).sort((C,L)=>String(C).localeCompare(String(L),"ro",{sensitivity:"base"})),y=C=>{C&&b(L=>L.field===C?{field:C,direction:L.direction==="asc"?"desc":"asc"}:{field:C,direction:"asc"})},j=r.trim().toLowerCase(),N=new Set(["name","locality","county"]),E=(e??[]).filter(C=>((C==null?void 0:C.name)||"").toLowerCase().includes(j)).filter(C=>h?((C==null?void 0:C.county)||"")===h:!0),_=(()=>{const{field:C,direction:L}=g;if(!C||!N.has(C))return E;const B=L==="desc"?-1:1;return[...E].sort((Z,R)=>{const X=String((Z==null?void 0:Z[C])??""),te=String((R==null?void 0:R[C])??"");return X.localeCompare(te,"ro",{sensitivity:"base"})*B})})(),M=f.useCallback(()=>{if(!e.length){alert("Nu exist staii de exportat.");return}const C=["#","ID","Nume","Localitate","Jude","Latitudine","Longitudine","Creat la","Actualizat la"],L=e.map((R,X)=>`<tr>${[X+1,R.id??"",R.name??"",R.locality??"",R.county??"",R.latitude??"",R.longitude??"",R.created_at??"",R.updated_at??""].map(xe=>`<td>${pr(xe)}</td>`).join("")}</tr>`).join(""),B=`<tr>${C.map(R=>`<th>${pr(R)}</th>`).join("")}</tr>`,Z=`
      <table style="margin-bottom:12px;width:auto;">
        <tr>
          <td>Export staii</td>
          <td>${pr(ru())}</td>
        </tr>
      </table>
    `;au({filenameBase:"administrare-statii",headingHtml:Z,tableHtml:`<table>${B}${L}</table>`})},[e]),O=(C,L)=>{const B=g.field===C,Z=B?g.direction==="asc"?"":"":"";return o.jsx("th",{className:"p-2 border text-left",children:o.jsxs("button",{type:"button",onClick:()=>y(C),className:"flex items-center gap-1 text-left font-medium",children:[o.jsx("span",{children:L}),o.jsx("span",{className:`text-xs ${B?"text-gray-700":"text-gray-400"}`,children:Z})]})})};return o.jsxs("div",{className:"p-6",children:[o.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Staii"}),o.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[o.jsxs("label",{className:"flex flex-col text-sm text-gray-700",children:[o.jsx("span",{className:"mb-1",children:"Caut dup nume"}),o.jsx("input",{placeholder:"Ex: Bucureti Nord",className:"border rounded px-3 py-1",value:r,onChange:C=>i(C.target.value)})]}),o.jsxs("label",{className:"flex flex-col text-sm text-gray-700 min-w-[200px]",children:[o.jsx("span",{className:"mb-1",children:"Filtreaz dup jude"}),o.jsxs("select",{className:"border rounded px-3 py-1",value:h,onChange:C=>p(C.target.value),children:[o.jsx("option",{value:"",children:"Toate judeele"}),S.map(C=>o.jsx("option",{value:C,children:C},C))]})]})]}),o.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[o.jsx("button",{onClick:()=>u({id:null,name:"",locality:"",county:"",latitude:47,longitude:26}),className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ Adaug staie"}),o.jsx("button",{type:"button",onClick:M,disabled:!e.length,className:"bg-emerald-600 text-white px-4 py-2 rounded disabled:opacity-60 disabled:cursor-not-allowed",children:"Export Excel"})]}),o.jsxs("table",{className:"w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[O("name","Nume"),O("locality","Localitate"),O("county","Jude"),o.jsx("th",{className:"p-2 border",children:"Lat"}),o.jsx("th",{className:"p-2 border",children:"Lon"}),o.jsx("th",{className:"p-2 border",children:"Aciuni"})]})}),o.jsx("tbody",{children:_.map(C=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2",children:C.name}),o.jsx("td",{className:"border p-2",children:C.locality}),o.jsx("td",{className:"border p-2",children:C.county}),o.jsx("td",{className:"border p-2",children:C.latitude}),o.jsx("td",{className:"border p-2",children:C.longitude}),o.jsxs("td",{className:"border p-2 space-x-2",children:[o.jsx("button",{onClick:()=>u({...C}),className:"bg-blue-600 text-white px-2 py-1 rounded",children:"Editeaz"}),o.jsx("button",{onClick:async()=>{await vt.delete(`/api/stations/${C.id}`),t(L=>L.filter(B=>B.id!==C.id))},className:"bg-red-600 text-white px-2 py-1 rounded",children:"terge"})]})]},C.id))})]}),s&&o.jsx(LP,{data:s,onClose:()=>u(null),onSave:w,saving:d})]})}function LP({data:e,onClose:t,onSave:r,saving:i}){var w;const[s,u]=f.useState({id:e.id??null,name:e.name??"",locality:e.locality??"",county:e.county??"",latitude:e.latitude??"",longitude:e.longitude??""}),[d,m]=f.useState(null),[h,p]=f.useState(Number.isFinite(+e.latitude)&&Number.isFinite(+e.longitude)?{lat:+e.latitude,lng:+e.longitude}:null),g=!!((w=window.google)!=null&&w.maps),b=S=>{const y=S.latLng.lat(),j=S.latLng.lng();p({lat:y,lng:j}),u(N=>({...N,latitude:y,longitude:j}))};return o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-start justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg mt-10",children:[o.jsx("h2",{className:"text-lg font-medium px-6 py-4 border-b",children:s.id?"Editeaz staia":"Adaug staie"}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx(Mc,{label:"Name",value:s.name,onChange:S=>u(y=>({...y,name:S}))}),o.jsx(Mc,{label:"Locality",value:s.locality,onChange:S=>u(y=>({...y,locality:S}))}),o.jsx(Mc,{label:"County",value:s.county,onChange:S=>u(y=>({...y,county:S}))}),o.jsx(Mc,{label:"Latitude",value:s.latitude,onChange:S=>u(y=>({...y,latitude:S}))}),o.jsx(Mc,{label:"Longitude",value:s.longitude,onChange:S=>u(y=>({...y,longitude:S}))}),g?o.jsx(Gj,{onLoad:S=>m(S),onClick:b,center:h??EP,zoom:h?12:6,options:{mapId:CP,gestureHandling:"greedy",scrollwheel:!0},mapContainerStyle:{width:"100%",height:300},children:d&&h&&o.jsx(MP,{map:d,position:h,label:"S",draggable:!0,onDragEnd:({lat:S,lng:y})=>{p({lat:S,lng:y}),u(j=>({...j,latitude:S,longitude:y}))}})}):o.jsx("div",{className:"text-sm text-gray-500 border rounded p-3",children:"Harta nu e nc disponibil. Asigur-te c Google Maps JS e ncrcat la nivelul aplicaiei (MapProvider)."})]}),o.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 rounded bg-gray-300",children:"Anuleaz"}),o.jsx("button",{disabled:i,onClick:()=>r({...s,latitude:s.latitude===""?null:Number(s.latitude),longitude:s.longitude===""?null:Number(s.longitude)}),className:"px-4 py-2 rounded bg-green-600 text-white disabled:opacity-50",children:i?"Se salveaz":"Salveaz"})]})]})})}function Mc({label:e,value:t,onChange:r,readOnly:i=!1}){return o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:e}),o.jsx("input",{className:"w-full border rounded px-3 py-1 mt-1 disabled:bg-gray-100",value:t??"",readOnly:i,onChange:s=>r==null?void 0:r(s.target.value)})]})}function kP({activeDiscountId:e=null,onActiveChange:t,onClose:r}){const[i,s]=f.useState([]),[u,d]=f.useState([]),[m,h]=f.useState(null),[p,g]=f.useState(new Map),[b,w]=f.useState(!1),[S,y]=f.useState(!1),[j,N]=f.useState(""),E=t??h,_=e??m,[M,O]=f.useState({key:"route_name",direction:"asc"});f.useEffect(()=>{vt.get("/api/discount-types").then(z=>s(z.data)),vt.get("/api/discount-types/schedules/all").then(z=>d(z.data))},[]),f.useEffect(()=>{e!=null&&h(e)},[e]),f.useEffect(()=>{i.length!==0&&E(z=>{var P;if(z!=null)return z;const T=(P=i[0])==null?void 0:P.id;return typeof T=="number"?T:null})},[i]),f.useEffect(()=>{if(!_)return;const z=p.get(_);if(z!=null&&z.loaded)return;let T=!1;return w(!0),vt.get(`/api/discount-types/${_}/schedules`).then(P=>{if(T)return;const A=Array.isArray(P.data)?P.data:[],H=new Set,U=new Set,W=new Set;A.forEach(ue=>{if(ue==null)return;if(typeof ue=="number"){const be=Number(ue);Number.isFinite(be)&&H.add(be);return}const Ee=Number(ue.route_schedule_id??ue.id??ue);Number.isFinite(Ee)&&((ue.visible_agents??ue.agents??ue.apply??!1)&&H.add(Ee),(ue.visible_online??ue.online??!1)&&U.add(Ee),(ue.visible_driver??ue.driver??!1)&&W.add(Ee))}),g(ue=>{const Ee=new Map(ue);return Ee.set(_,{agents:H,online:U,driver:W,loaded:!0,dirty:!1}),Ee})}).catch(()=>{T||g(P=>{const A=new Map(P);return A.set(_,{agents:new Set,online:new Set,driver:new Set,loaded:!0,dirty:!1}),A})}).finally(()=>{T||w(!1)}),()=>{T=!0}},[_,p]);const C=_?p.get(_):null,L=(C==null?void 0:C.agents)??new Set,B=(C==null?void 0:C.online)??new Set,Z=(C==null?void 0:C.driver)??new Set,R=!!(C!=null&&C.dirty);function X(z){_&&g(T=>{const P=new Map(T),A=P.get(_)||{agents:new Set,online:new Set,driver:new Set,loaded:!0,dirty:!1},H=new Set(A.agents);return H.has(z)?H.delete(z):H.add(z),P.set(_,{...A,agents:H,dirty:!0,loaded:!0}),P})}function te(z){_&&g(T=>{const P=new Map(T),A=P.get(_)||{agents:new Set,online:new Set,driver:new Set,loaded:!0,dirty:!1},H=new Set(A.online);return H.has(z)?H.delete(z):H.add(z),P.set(_,{...A,online:H,dirty:!0,loaded:!0}),P})}function xe(z){_&&g(T=>{const P=new Map(T),A=P.get(_)||{agents:new Set,online:new Set,driver:new Set,loaded:!0,dirty:!1},H=new Set(A.driver);return H.has(z)?H.delete(z):H.add(z),P.set(_,{...A,driver:H,dirty:!0,loaded:!0}),P})}async function Pe(){if(!_)return;const z=p.get(_)||{agents:new Set,online:new Set,driver:new Set},T=new Set([...z.agents??[],...z.online??[],...z.driver??[]]),P=Array.from(T).map(A=>{var H,U,W;return{scheduleId:A,visibleAgents:((H=z.agents)==null?void 0:H.has(A))??!1,visibleOnline:((U=z.online)==null?void 0:U.has(A))??!1,visibleDriver:((W=z.driver)==null?void 0:W.has(A))??!1}});y(!0);try{await vt.put(`/api/discount-types/${_}/schedules`,{schedules:P}),g(A=>{const H=new Map(A),U=H.get(_);return U&&H.set(_,{...U,dirty:!1}),H}),alert("Salvat!")}catch(A){console.error("DiscountAppliesTab: nu pot salva reducerile",A),alert("Eroare la salvare")}finally{y(!1)}}const ve=z=>{let T="asc";M.key===z&&M.direction==="asc"&&(T="desc"),O({key:z,direction:T})},se=f.useMemo(()=>{const z=[...u];return z.sort((T,P)=>{let A=T[M.key],H=P[M.key];return typeof A=="string"&&(A=A.toLowerCase()),typeof H=="string"&&(H=H.toLowerCase()),A<H?M.direction==="asc"?-1:1:A>H?M.direction==="asc"?1:-1:0}),z},[u,M]),V=f.useMemo(()=>{const z=new Map;return u.forEach(T=>{z.has(T.route_id)||z.set(T.route_id,T.route_name)}),Array.from(z.entries()).map(([T,P])=>({id:T,name:P}))},[u]),F=f.useMemo(()=>j?se.filter(z=>String(z.route_id)===String(j)):se,[se,j]),Y=i.find(z=>z.id===_)||null;return o.jsxs("div",{className:"space-y-10",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Se aplic la"}),o.jsxs("section",{className:"mb-10",children:[o.jsx("h3",{className:"text-base font-semibold mb-2",children:"Reducerile"}),o.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(z=>{const T=p.get(z.id),P=T==null?void 0:T.dirty,A=_===z.id;return o.jsxs("button",{type:"button",onClick:()=>E(z.id),className:["px-2 py-1 text-sm rounded border transition-colors",A?"bg-blue-600 border-blue-600 text-white":"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200"].join(" "),children:[z.label,P?o.jsx("span",{className:"ml-2 text-[10px] font-semibold uppercase",children:"modificat"}):null]},z.id)})}),i.length>0&&o.jsx("div",{className:"text-xs text-gray-600",children:Y?`Configurezi: ${Y.label}`:"Selecteaz o reducere pentru a configura programrile disponibile."})]}),o.jsxs("div",{className:"flex items-center gap-3 mb-3 flex-wrap",children:[o.jsx("label",{className:"text-sm font-medium",children:"Filtreaz traseul:"}),o.jsxs("select",{className:"p-2 text-sm border rounded",value:j,onChange:z=>N(z.target.value),children:[o.jsx("option",{value:"",children:"Toate traseele"}),V.map(z=>o.jsx("option",{value:z.id,children:z.name},z.id))]}),r&&o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 text-xs rounded bg-gray-100 hover:bg-gray-200 border",onClick:r,children:"nchide"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsxs("th",{onClick:()=>ve("route_name"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Traseu ",M.key==="route_name"?M.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>ve("departure"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Ora ",M.key==="departure"?M.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>ve("direction"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Direcie ",M.key==="direction"?M.direction==="asc"?"":"":""]}),o.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Ageni"}),o.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Online"}),o.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"ofer"})]})}),o.jsx("tbody",{children:F.map((z,T)=>o.jsxs("tr",{className:T%2===0?"bg-white":"bg-gray-50",children:[o.jsx("td",{className:"p-1 border",children:z.route_name}),o.jsx("td",{className:"p-1 border",children:z.departure}),o.jsx("td",{className:"p-1 border",children:z.direction}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:L.has(z.id),onChange:()=>X(z.id),disabled:!_})}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:B.has(z.id),onChange:()=>te(z.id),disabled:!_})}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:Z.has(z.id),onChange:()=>xe(z.id),disabled:!_})})]},z.id))})]})}),o.jsxs("div",{className:"text-left mt-4",children:[o.jsx("button",{className:"px-3 py-1 text-sm bg-green-600 text-white rounded disabled:opacity-60",disabled:!_||S||b||!R,onClick:Pe,children:S?"Se salveaz":"Salveaz"}),b&&o.jsx("span",{className:"ml-3 text-xs text-gray-500",children:"Se ncarc reducerile selectate"})]})]})]})}const Ld={code:"",label:"",value_off:"",type:"percent",description_required:!1,description_label:"",date_limited:!1,valid_from:"",valid_to:""},AP=()=>{const[e,t]=f.useState([]),[r,i]=f.useState({...Ld}),[s,u]=f.useState(!1),[d,m]=f.useState(null),[h,p]=f.useState(!1),[g,b]=f.useState(null),[w,S]=f.useState([]),[y,j]=f.useState([]),[N,E]=f.useState(""),[_,M]=f.useState(new Set),[O,C]=f.useState({key:"route_name",direction:"asc"}),[L,B]=f.useState(""),[Z,R]=f.useState({key:"id",direction:"asc"}),X=async()=>{const A=await vt.get("/api/discount-types");t(A.data)};f.useEffect(()=>{X()},[]),f.useEffect(()=>{vt.get("/api/pricing-categories").then(A=>S(Array.isArray(A.data)?A.data:[])).catch(()=>S([])),vt.get("/api/discount-types/schedules/all").then(A=>j(Array.isArray(A.data)?A.data:[])).catch(()=>j([]))},[]),f.useEffect(()=>{if(!N){M(new Set);return}vt.get(`/api/pricing-categories/${N}/schedules`).then(A=>M(new Set(A.data))).catch(()=>M(new Set))},[N]);const te=async()=>{if(!(!r.code||!r.label||!r.value_off)){if(r.description_required&&!r.description_label.trim()){alert("Te rugm s completezi textul pentru descriere.");return}if(r.date_limited&&(!r.valid_from||!r.valid_to)){alert("Completeaz att data de nceput ct i cea de sfrit pentru perioada de valabilitate.");return}d?await vt.put(`/api/discount-types/${d.id}`,r):await vt.post("/api/discount-types",r),u(!1),m(null),i({...Ld}),X()}},xe=A=>{m(A),i({code:A.code,label:A.label,value_off:A.value_off,type:A.type,description_required:!!A.description_required,description_label:A.description_label||"",date_limited:!!A.date_limited,valid_from:A.valid_from?String(A.valid_from).slice(0,10):"",valid_to:A.valid_to?String(A.valid_to).slice(0,10):""}),u(!0)},Pe=async A=>{var H,U;if(window.confirm("Sigur doreti s tergi aceast reducere?"))try{await vt.delete(`/api/discount-types/${A}`),t(e.filter(W=>W.id!==A))}catch(W){const ue=((U=(H=W.response)==null?void 0:H.data)==null?void 0:U.message)||"Eroare la tergere";console.error("Eroare la tergere:",W),alert(ue)}},ve=A=>{let H="asc";Z.key===A&&Z.direction==="asc"&&(H="desc"),R({key:A,direction:H})},se=f.useMemo(()=>{const A=[...e];return A.sort((H,U)=>{let W=H[Z.key],ue=U[Z.key];return Z.key==="value_off"?(W=parseFloat(W),ue=parseFloat(ue)):(typeof W=="string"&&(W=W.toLowerCase()),typeof ue=="string"&&(ue=ue.toLowerCase())),W<ue?Z.direction==="asc"?-1:1:W>ue?Z.direction==="asc"?1:-1:0}),A},[e,Z]),V=A=>{let H="asc";O.key===A&&O.direction==="asc"&&(H="desc"),C({key:A,direction:H})},F=f.useMemo(()=>{const A=[...y];return A.sort((H,U)=>{let W=H[O.key],ue=U[O.key];return typeof W=="string"&&(W=W.toLowerCase()),typeof ue=="string"&&(ue=ue.toLowerCase()),W<ue?O.direction==="asc"?-1:1:W>ue?O.direction==="asc"?1:-1:0}),A},[y,O]),Y=f.useMemo(()=>{const A=new Map;return y.forEach(H=>{A.has(H.route_id)||A.set(H.route_id,H.route_name)}),Array.from(A.entries()).map(([H,U])=>({id:H,name:U}))},[y]),z=f.useMemo(()=>L?F.filter(A=>String(A.route_id)===String(L)):F,[F,L]),T=A=>{M(H=>{const U=new Set(H);return U.has(A)?U.delete(A):U.add(A),U})},P=()=>{N&&vt.put(`/api/pricing-categories/${N}/schedules`,{scheduleIds:Array.from(_)}).then(()=>alert("Salvat!")).catch(()=>alert("Eroare la salvare"))};return o.jsxs("div",{className:"space-y-10",children:[o.jsxs("div",{className:"overflow-x-auto",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tipuri de reduceri"}),o.jsx("button",{className:"mb-4 px-3 py-1 text-sm bg-blue-600 text-white rounded",onClick:()=>{m(null),i({...Ld}),u(!0)},children:"+ Adaug"}),o.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsxs("th",{onClick:()=>ve("code"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Cod ",Z.key==="code"?Z.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>ve("label"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Etichet ",Z.key==="label"?Z.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>ve("value_off"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Reducere ",Z.key==="value_off"?Z.direction==="asc"?"":"":""]}),o.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Aciuni"})]})}),o.jsx("tbody",{children:se.map((A,H)=>o.jsxs("tr",{className:H%2===0?"bg-white":"bg-gray-50",children:[o.jsx("td",{className:"p-1 border",children:A.code}),o.jsx("td",{className:"p-1 border",children:A.label}),o.jsx("td",{className:"p-1 border",children:`${parseFloat(A.value_off)%1===0?parseInt(A.value_off):parseFloat(A.value_off)}${A.type==="percent"?"%":""}`}),o.jsxs("td",{className:"p-1 border space-x-2",children:[o.jsx("button",{className:"px-2 py-1 text-xs bg-indigo-600 text-white rounded",onClick:()=>{b(A.id),p(!0)},children:"Se aplic la"}),o.jsx("button",{className:"px-2 py-1 text-xs bg-blue-500 text-white rounded",onClick:()=>xe(A),children:"Editeaz"}),o.jsx("button",{className:"px-2 py-1 text-xs bg-red-500 text-white rounded",onClick:()=>Pe(A.id),children:"terge"})]})]},A.id))})]}),s&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-80",children:[o.jsx("h3",{className:"mb-4 text-lg font-semibold",children:d?"Editeaz Reducere":"Adaug Reducere"}),o.jsx("input",{type:"text",placeholder:"Cod",className:"w-full mb-2 px-2 py-1 border rounded text-sm",value:r.code,onChange:A=>i({...r,code:A.target.value})}),o.jsx("input",{type:"text",placeholder:"Etichet",className:"w-full mb-2 px-2 py-1 border rounded text-sm",value:r.label,onChange:A=>i({...r,label:A.target.value})}),o.jsx("input",{type:"number",placeholder:"Reducere",className:"w-full mb-2 px-2 py-1 border rounded text-sm",value:r.value_off,onChange:A=>i({...r,value_off:A.target.value})}),o.jsxs("div",{className:"mb-2 text-sm",children:[o.jsxs("label",{className:"mr-4",children:[o.jsx("input",{type:"radio",value:"percent",checked:r.type==="percent",onChange:()=>i({...r,type:"percent"}),className:"mr-1"}),"Procent"]}),o.jsxs("label",{children:[o.jsx("input",{type:"radio",value:"fixed",checked:r.type==="fixed",onChange:()=>i({...r,type:"fixed"}),className:"mr-1"}),"Valoare fix"]})]}),o.jsxs("div",{className:"mb-3 text-sm border rounded p-2 space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx("input",{type:"checkbox",checked:r.description_required,onChange:A=>i({...r,description_required:A.target.checked})}),"Descriere obligatorie (completat de ofer la mbarcare)"]}),r.description_required&&o.jsx("input",{type:"text",placeholder:"Text implicit pentru descriere",className:"w-full px-2 py-1 border rounded text-sm",value:r.description_label,onChange:A=>i({...r,description_label:A.target.value})})]}),o.jsxs("div",{className:"mb-3 text-sm border rounded p-2 space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx("input",{type:"checkbox",checked:r.date_limited,onChange:A=>i({...r,date_limited:A.target.checked})}),"Valabil doar ntr-o perioad"]}),r.date_limited&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"De la"}),o.jsx("input",{type:"date",className:"w-full px-2 py-1 border rounded text-sm",value:r.valid_from,onChange:A=>i({...r,valid_from:A.target.value})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pn la"}),o.jsx("input",{type:"date",className:"w-full px-2 py-1 border rounded text-sm",value:r.valid_to,onChange:A=>i({...r,valid_to:A.target.value})})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-1 bg-gray-300 rounded text-sm",onClick:()=>{u(!1),m(null),i({...Ld})},children:"Anuleaz"}),o.jsx("button",{className:"px-3 py-1 bg-green-600 text-white rounded text-sm",onClick:te,children:"Salveaz"})]})]})})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Categorii de pre afiate agenilor"}),o.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[o.jsx("label",{className:"text-sm font-medium",children:"Selecteaz categorie:"}),o.jsxs("select",{className:"p-2 text-sm border rounded",value:N,onChange:A=>E(A.target.value),children:[o.jsx("option",{value:"",children:"Alege categorie"}),w.map(A=>o.jsx("option",{value:A.id,children:A.name},A.id))]}),o.jsx("label",{className:"text-sm font-medium",children:"Filtreaz traseul:"}),o.jsxs("select",{className:"p-2 text-sm border rounded",value:L,onChange:A=>B(A.target.value),children:[o.jsx("option",{value:"",children:"Toate traseele"}),Y.map(A=>o.jsx("option",{value:A.id,children:A.name},A.id))]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsxs("th",{onClick:()=>V("route_name"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Traseu ",O.key==="route_name"?O.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>V("departure"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Ora ",O.key==="departure"?O.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>V("direction"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Direcie ",O.key==="direction"?O.direction==="asc"?"":"":""]}),o.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Disponibil"})]})}),o.jsx("tbody",{children:z.map((A,H)=>o.jsxs("tr",{className:H%2===0?"bg-white":"bg-gray-50",children:[o.jsx("td",{className:"p-1 border",children:A.route_name}),o.jsx("td",{className:"p-1 border",children:A.departure}),o.jsx("td",{className:"p-1 border",children:A.direction}),o.jsx("td",{className:"p-1 border text-center",children:o.jsx("input",{type:"checkbox",checked:_.has(A.id),onChange:()=>T(A.id),disabled:!N})})]},A.id))})]})}),o.jsx("div",{className:"text-left mt-2",children:o.jsx("button",{className:"px-3 py-1 text-sm bg-green-600 text-white rounded",disabled:!N,onClick:P,children:"Salveaz"})})]}),h&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-40 p-4",children:o.jsxs("div",{className:"bg-white rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-base font-semibold",children:"Configureaz unde se aplic reducerea"}),g&&o.jsxs("div",{className:"text-xs text-gray-600",children:["Discount selectat ID #",g]})]}),o.jsx("button",{className:"px-3 py-1 text-sm rounded bg-gray-200 hover:bg-gray-300",onClick:()=>p(!1),children:"nchide"})]}),o.jsx("div",{className:"overflow-y-auto p-4 flex-1",children:o.jsx(kP,{activeDiscountId:g,onActiveChange:b,onClose:()=>p(!1)})})]})})]})},vi=e=>{if(e==null||e==="")return"";const t=Number(e);return Number.isNaN(t)?"":Number.isInteger(t)?String(t):t.toFixed(2).replace(/\.00$/,"").replace(/(\.\d*?[1-9])0+$/,"$1")},kd=e=>{const t={};return e.forEach(r=>{t[r]={},e.forEach(i=>{t[r][i]={price:"",price_return:"",r_price:"",r_price_return:"",local_price:""}})}),t};function TP(){const[e,t]=f.useState([]),[r,i]=f.useState([]),[s,u]=f.useState([]),[d,m]=f.useState([]),[h,p]=f.useState({}),[g,b]=f.useState([]),[w,S]=f.useState(!1),[y,j]=f.useState(""),[N,E]=f.useState(""),[_,M]=f.useState(()=>new Date().toISOString().slice(0,10)),[O,C]=f.useState(""),[L,B]=f.useState(""),[Z,R]=f.useState(""),[X,te]=f.useState(""),[xe,Pe]=f.useState(""),[ve,se]=f.useState(()=>new Date().toISOString().slice(0,10)),[V,F]=f.useState([]),[Y,z]=f.useState(""),[T,P]=f.useState([]),[A,H]=f.useState([]),[U,W]=f.useState(!1),[ue,Ee]=f.useState(!0),be=f.useMemo(()=>{if(!y)return"";const de=e.find(I=>String(I.id)===String(y));return(de==null?void 0:de.name)||""},[e,y]),Be=f.useMemo(()=>{if(!N)return"";const de=r.find(I=>String(I.id)===String(N));return(de==null?void 0:de.name)||""},[r,N]),Te=f.useMemo(()=>{const de=new Map;return s.forEach(I=>{de.set(I.name,I.station_id)}),de},[s]);f.useEffect(()=>{(async()=>{try{const[I,oe]=await Promise.all([fetch("/api/routes"),fetch("/api/pricing-categories")]),[he,_e]=await Promise.all([I.ok?I.json():Promise.resolve([]),oe.ok?oe.json():Promise.resolve([])]);t(Array.isArray(he)?he:[]),i(Array.isArray(_e)?_e:[])}catch(I){console.error("AdminPriceLists: nu pot ncrca rutele sau categoriile",I),t([]),i([])}})()},[]),f.useEffect(()=>{var I;if(r.length===0||N)return;const de=(I=r[0])==null?void 0:I.id;de&&E(String(de))},[r,N]),f.useEffect(()=>{if(u([]),m([]),p({}),b([]),C(""),!y)return;const de=new AbortController;return(async()=>{try{const oe=await fetch(`/api/routes/${y}/stations`,{signal:de.signal});if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const he=await oe.json();if(de.signal.aborted)return;const _e=Array.isArray(he)?[...he].sort((fe,ne)=>(fe.sequence??0)-(ne.sequence??0)):[],ae=_e.map(fe=>fe.name);u(_e),m(ae)}catch(oe){oe.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca staiile rutei",oe)}})(),()=>de.abort()},[y]),f.useEffect(()=>{if(!y||!N||!_){b([]),C("");return}const de=new AbortController;return(async()=>{try{const oe=await fetch(`/api/price-lists?route=${y}&category=${N}&date=${_}`,{signal:de.signal});if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const he=await oe.json();if(de.signal.aborted)return;const _e=Array.isArray(he)?he:[];b(_e),C(_e[0]?String(_e[0].id):"")}catch(oe){oe.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca versiunile",oe),b([]),C("")}})(),()=>de.abort()},[y,N,_]),f.useEffect(()=>{if(!O){d.length&&p(kd(d));return}const de=new AbortController;return(async()=>{S(!0);try{const oe=await fetch(`/api/price-lists/${O}/items`,{signal:de.signal});if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const he=await oe.json();if(de.signal.aborted)return;const _e=Array.isArray(he)?he:[];p(()=>{const ae=kd(d),fe=new Map(d.map((ne,Xe)=>[ne,Xe]));return _e.forEach(ne=>{var wt,rt,$t;const Xe=ne.from_stop||((wt=s.find(Lt=>Lt.station_id===ne.from_station_id))==null?void 0:wt.name),Je=ne.to_stop||((rt=s.find(Lt=>Lt.station_id===ne.to_station_id))==null?void 0:rt.name);if(!Xe||!Je)return;const et=fe.get(Xe),ot=fe.get(Je);et==null||ot==null||($t=ae[Xe])!=null&&$t[Je]&&(et<ot?(ae[Xe][Je].price=vi(ne.price),ae[Xe][Je].price_return=vi(ne.price_return??"")):et>ot?(ae[Xe][Je].r_price=vi(ne.price),ae[Xe][Je].r_price_return=vi(ne.price_return??"")):ae[Xe][Je].local_price=vi(ne.price))}),ae})}catch(oe){oe.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca preurile",oe),p(kd(d))}finally{S(!1)}})(),()=>de.abort()},[O,d,s]),f.useEffect(()=>{B(""),R("")},[y,N,O,d]),f.useEffect(()=>{if(P([]),H([]),!X)return;const de=new AbortController;return(async()=>{try{const oe=await fetch(`/api/routes/${X}/stations`,{signal:de.signal});if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const he=await oe.json();if(de.signal.aborted)return;const _e=Array.isArray(he)?[...he].sort((fe,ne)=>(fe.sequence??0)-(ne.sequence??0)):[],ae=_e.map(fe=>fe.name);P(_e),H(ae)}catch(oe){oe.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca staiile pentru import",oe),P([]),H([])}})(),()=>de.abort()},[X]),f.useEffect(()=>{if(F([]),z(""),!X||!xe||!ve)return;const de=new AbortController;return(async()=>{try{const oe=await fetch(`/api/price-lists?route=${X}&category=${xe}&date=${ve}`,{signal:de.signal});if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const he=await oe.json();if(de.signal.aborted)return;const _e=Array.isArray(he)?he:[];F(_e),z(_e[0]?String(_e[0].id):"")}catch(oe){oe.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca versiunile pentru import",oe),F([]),z("")}})(),()=>de.abort()},[X,xe,ve]);const Ge=de=>{B(I=>I===de?"":de)},ge=de=>{R(I=>I===de?"":de)},Ke=(de,I,oe,he)=>{he!==""&&!/^\d+(\.\d{0,2})?$/.test(he)||p(_e=>({..._e,[de]:{..._e[de],[I]:{..._e[de][I],[oe]:he}}}))},le=async()=>{if(!y||!N){alert("Selecteaz traseul i categoria.");return}const de=[];let I=null;if(d.forEach(oe=>{var ae;if(I)return;const he=(ae=h[oe])==null?void 0:ae[oe];if(!he)return;const _e=(he.local_price??"")!=="";if(_e&&!/^\d+(\.\d{0,2})?$/.test(he.local_price)){I=`Pre invalid (local) pentru ${oe}`;return}_e&&de.push({from_station_id:Te.get(oe),to_station_id:Te.get(oe),from_stop:oe,to_stop:oe,price:Number(he.local_price),price_return:null,currency:"RON"})}),d.forEach((oe,he)=>{I||d.forEach((_e,ae)=>{var Xe,Je;if(I||ae<=he)return;const fe=(Xe=h[oe])==null?void 0:Xe[_e];if(fe){const et=(fe.price??"")!=="",ot=(fe.price_return??"")!=="";if(et&&!/^\d+(\.\d{0,2})?$/.test(fe.price)){I=`Pre invalid (T) ntre ${oe} i ${_e}`;return}if(ot&&!/^\d+(\.\d{0,2})?$/.test(fe.price_return)){I=`Pre invalid (T/R) ntre ${oe} i ${_e}`;return}(et||ot)&&de.push({from_station_id:Te.get(oe),to_station_id:Te.get(_e),from_stop:oe,to_stop:_e,price:et?Number(fe.price):0,price_return:ot?Number(fe.price_return):null,currency:"RON"})}const ne=(Je=h[_e])==null?void 0:Je[oe];if(ne){const et=(ne.r_price??"")!=="",ot=(ne.r_price_return??"")!=="";if(et&&!/^\d+(\.\d{0,2})?$/.test(ne.r_price)){I=`Pre invalid (R) ntre ${_e} i ${oe}`;return}if(ot&&!/^\d+(\.\d{0,2})?$/.test(ne.r_price_return)){I=`Pre invalid (R/T) ntre ${_e} i ${oe}`;return}(et||ot)&&de.push({from_station_id:Te.get(_e),to_station_id:Te.get(oe),from_stop:_e,to_stop:oe,price:et?Number(ne.r_price):0,price_return:ot?Number(ne.r_price_return):null,currency:"RON"})}})}),I){alert(I);return}if(!de.length){alert("Completeaz cel puin un pre.");return}try{const oe=await fetch("/api/price-lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({route:Number(y),category:Number(N),effective_from:_,name:`${y}-${N}-${_}`,version:1,created_by:1,items:de})});if(!oe.ok){const ne=await oe.json().catch(()=>({error:"Eroare la salvare"}));throw new Error(ne.error||"Eroare la salvare")}const he=await oe.json();alert(`Salvat cu succes! ID: ${he.id}`);const _e=await fetch(`/api/price-lists?route=${y}&category=${N}&date=${_}`),ae=_e.ok?await _e.json():[],fe=Array.isArray(ae)?ae:[];b(fe),C(fe[0]?String(fe[0].id):"")}catch(oe){console.error("AdminPriceLists: nu pot salva lista de preuri",oe),alert(oe.message||"Eroare la salvare")}},ce=de=>{const I={};return d.forEach(oe=>{I[oe]={},d.forEach(he=>{var ae;const _e=((ae=de[oe])==null?void 0:ae[he])??{price:"",price_return:"",r_price:"",r_price_return:"",local_price:""};I[oe][he]={price:_e.price??"",price_return:_e.price_return??"",r_price:_e.r_price??"",r_price_return:_e.r_price_return??"",local_price:_e.local_price??""}})}),I},K=()=>{d.length&&p(de=>{const I=ce(de);return d.forEach((oe,he)=>{d.forEach((_e,ae)=>{var Xe,Je;if(ae<=he)return;const fe=(Xe=de[oe])==null?void 0:Xe[_e],ne=(Je=I[_e])==null?void 0:Je[oe];!fe||!ne||(ne.r_price=fe.price,ne.r_price_return=fe.price_return)})}),I})},Ae=()=>{d.length&&p(de=>{const I=ce(de);return d.forEach((oe,he)=>{d.forEach((_e,ae)=>{var Xe,Je;if(ae<=he)return;const fe=(Xe=de[_e])==null?void 0:Xe[oe],ne=(Je=I[oe])==null?void 0:Je[_e];!fe||!ne||(ne.price=fe.r_price,ne.price_return=fe.r_price_return)})}),I})},Se=(de,I)=>{const oe=L&&de===L,he=Z&&I===Z;return oe&&he?"bg-emerald-200":oe?"bg-blue-100":he?"bg-amber-100":""},De=()=>{if(!d.length){alert("Nu exist staii pentru export.");return}const de=`
      <tr>
        <th>Staie</th>
        ${d.map(he=>`<th>${pr(he)}</th>`).join("")}
      </tr>
    `,I=d.map((he,_e)=>{const ae=d.map((fe,ne)=>{var et;if(ne===_e)return'<td class="price-grid-diagonal"></td>';const Xe=(et=h[he])==null?void 0:et[fe],Je=ne>_e?(Xe==null?void 0:Xe.price)??"":(Xe==null?void 0:Xe.r_price)??"";return`<td style="text-align:center">${pr(Je)}</td>`}).join("");return`<tr><td>${pr(he)}</td>${ae}</tr>`}).join(""),oe=`
      <table style="margin-bottom:12px;width:auto;">
        <tr>
          <td>Rut</td>
          <td>${pr(be||y||"-")}</td>
        </tr>
        <tr>
          <td>Categorie</td>
          <td>${pr(Be||"-")}</td>
        </tr>
        <tr>
          <td>Export</td>
          <td>${pr(ru())}</td>
        </tr>
      </table>
    `;au({filenameBase:`preturi-${be||y||"ruta"}-${Be||"categorie"}`,headingHtml:oe,tableHtml:`<table class="price-grid-table">${de}${I}</table>`,extraCss:".price-grid-table{border-collapse:collapse;table-layout:fixed;}.price-grid-table th,.price-grid-table td{border:1px solid #000;padding:4px 6px;width:20ch;min-width:20ch;white-space:nowrap;}.price-grid-table td{height:auto;vertical-align:middle;}.price-grid-table .price-grid-diagonal{background:#000;color:#000;}"})},Ze=async()=>{if(!Y){alert("Selecteaz o versiune pentru import.");return}if(!d.length){alert("Nu exist staii n lista curent.");return}if(!A.length){alert("Nu exist staii disponibile pentru lista surs selectat.");return}if(!(d.length===A.length&&d.every((oe,he)=>oe===A[he]))){alert("Staiile nu se potrivesc ca numr i ordine ntre lista curent i lista surs.");return}try{W(!0);const oe=await fetch(`/api/price-lists/${Y}/items`);if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const he=await oe.json(),_e=Array.isArray(he)?he:[];p(()=>{const ae=kd(d),fe=new Map(d.map((ne,Xe)=>[ne,Xe]));return _e.forEach(ne=>{var wt,rt,$t;const Xe=ne.from_stop||((wt=T.find(Lt=>Lt.station_id===ne.from_station_id))==null?void 0:wt.name),Je=ne.to_stop||((rt=T.find(Lt=>Lt.station_id===ne.to_station_id))==null?void 0:rt.name);if(!Xe||!Je)return;const et=fe.get(Xe),ot=fe.get(Je);et==null||ot==null||($t=ae[Xe])!=null&&$t[Je]&&(et<ot?(ae[Xe][Je].price=vi(ne.price),ae[Xe][Je].price_return=vi(ne.price_return??"")):et>ot&&(ae[Xe][Je].r_price=vi(ne.price),ae[Xe][Je].r_price_return=vi(ne.price_return??"")))}),ae}),alert("Preurile au fost importate cu succes.")}catch(oe){console.error("AdminPriceLists: nu pot importa preurile",oe),alert(oe.message||"Nu pot importa preurile")}finally{W(!1)}},Ve=d.length>0&&A.length>0&&d.length===A.length&&d.every((de,I)=>de===A[I]);return o.jsxs("div",{className:"space-y-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[o.jsx("h2",{className:"text-sm font-semibold text-gray-700",children:"Setri list de preuri"}),o.jsx("button",{type:"button",onClick:()=>Ee(de=>!de),className:"text-xs px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:ue?"Ascunde ":"Arat "})]}),ue&&o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-start md:gap-x-10",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 w-fit text-sm lg:flex-none",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Traseu:"}),o.jsxs("select",{value:y,onChange:de=>j(de.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[o.jsx("option",{value:"",children:"Selecteaz traseu"}),e.map(de=>o.jsx("option",{value:de.id,children:de.name},de.id))]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Categorie:"}),o.jsxs("select",{value:N,onChange:de=>E(de.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[o.jsx("option",{value:"",children:"Selecteaz categorie"}),r.map(de=>o.jsx("option",{value:de.id,children:de.name},de.id))]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Dat aplicare:"}),o.jsx("input",{type:"date",value:_,onChange:de=>M(de.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Versiune:"}),o.jsxs("select",{value:O,onChange:de=>C(de.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[o.jsx("option",{value:"",children:"Selecteaz versiune"}),g.map(de=>o.jsxs("option",{value:de.id,children:[new Date(de.effective_from).toLocaleDateString()," (ver. ",de.version,")"]},de.id))]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-2 w-fit text-sm lg:flex-none",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Import preuri din alt list"}),o.jsx("p",{className:"text-xs text-gray-600",children:"Importul reuete doar dac staiile i ordinea lor sunt identice cu lista curent."}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Traseu surs:"}),o.jsxs("select",{value:X,onChange:de=>te(de.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[o.jsx("option",{value:"",children:"Selecteaz traseu"}),e.map(de=>o.jsx("option",{value:de.id,children:de.name},de.id))]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Categorie surs:"}),o.jsxs("select",{value:xe,onChange:de=>Pe(de.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[o.jsx("option",{value:"",children:"Selecteaz categorie"}),r.map(de=>o.jsx("option",{value:de.id,children:de.name},de.id))]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Dat aplicare:"}),o.jsx("input",{type:"date",value:ve,onChange:de=>se(de.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Versiune:"}),o.jsxs("select",{value:Y,onChange:de=>z(de.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[o.jsx("option",{value:"",children:"Selecteaz versiune"}),V.map(de=>o.jsxs("option",{value:de.id,children:[new Date(de.effective_from).toLocaleDateString()," (ver. ",de.version,")"]},de.id))]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[o.jsx("button",{type:"button",onClick:Ze,disabled:U,className:`px-3 py-1 rounded text-white ${U?"bg-gray-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700"}`,children:U?"Se import":"Import preuri"}),Ve?o.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:"Staiile se potrivesc."}):X&&xe&&Y&&A.length>0?o.jsx("span",{className:"text-xs text-amber-600",children:"Staiile nu se potrivesc ca numr sau ordine."}):null]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("button",{type:"button",onClick:K,className:"px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded",children:"Copie Tur/Retur"}),o.jsx("button",{type:"button",onClick:Ae,className:"px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded",children:"Copie Retur/Tur"}),o.jsx("button",{type:"button",onClick:le,className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Salveaz"}),o.jsx("button",{type:"button",onClick:De,disabled:!d.length,className:"px-2 py-1 bg-emerald-600 hover:bg-emerald-700 text-white rounded disabled:opacity-60 disabled:cursor-not-allowed",children:"Export Excel"})]})]}),d.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"relative inline-block border rounded shadow bg-white p-2 max-w-full max-h-[600px] overflow-auto",children:o.jsxs("table",{className:"min-w-max table-fixed border-collapse text-[13px]",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:["border px-1 py-1 text-center w-[120px] min-w-[120px] h-[50px] sticky top-0 left-0 z-40 bg-gray-100"].join(" "),children:"Staie"}),d.map(de=>{const I=Se(null,de);return o.jsx("th",{className:["border px-1 py-1 text-center w-[90px] min-w-[90px] h-[32px] truncate sticky top-0 z-30 bg-gray-100",I].filter(Boolean).join(" "),children:o.jsx("button",{type:"button",onClick:()=>ge(de),className:"w-full h-full cursor-pointer select-none focus:outline-none",title:"Selecteaz coloana",children:de})},de)})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{colSpan:d.length+1,className:"border px-1 py-1 text-center",children:"Se ncarc preurile"})}):d.map((de,I)=>o.jsxs("tr",{className:I%2===0?"bg-white":"bg-gray-100",children:[o.jsx("td",{className:["border px-1 py-1 text-black font-bold text-center w-[120px] min-w-[120px] h-[32px] align-middle sticky left-0 z-30 bg-white",Se(de,null)].filter(Boolean).join(" "),children:o.jsx("button",{type:"button",onClick:()=>Ge(de),className:"w-full h-full cursor-pointer select-none focus:outline-none",title:"Selecteaz linia",children:de})}),d.map((oe,he)=>{var ne,Xe;const _e=Se(de,oe);if(he===I)return o.jsx("td",{className:["border px-1 py-1 text-center w-[90px] min-w-[90px] h-[32px] align-middle bg-gray-100",_e].filter(Boolean).join(" "),children:o.jsx("div",{className:"w-full h-[50px]"})},`${de}-${oe}`);const ae=(ne=h[de])==null?void 0:ne[oe];if(he>I)return o.jsx("td",{className:["border px-1 py-1 text-center w-[90px] min-w-[90px] h-[32px] align-middle",_e].filter(Boolean).join(" "),children:o.jsxs("div",{className:"flex flex-col items-stretch gap-[4px]",children:[o.jsx("span",{className:"text-[10px] font-semibold uppercase text-gray-600 text-center",children:"Tur"}),o.jsxs("div",{className:"flex items-center gap-[4px]",children:[o.jsx("label",{className:"w-[24px] text-[9px] font-medium text-gray-600 text-center",children:"T"}),o.jsx("input",{className:"w-[54px] h-[20px] px-1 text-[13px] border border-gray-300 rounded text-center focus:outline-none",value:(ae==null?void 0:ae.price)??"",onChange:Je=>Ke(de,oe,"price",Je.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-[4px]",children:[o.jsx("label",{className:"w-[24px] text-[9px] font-medium text-gray-600 text-center",children:"T/R"}),o.jsx("input",{className:"w-[54px] h-[20px] px-1 text-[13px] border border-gray-300 rounded text-center focus:outline-none",value:(ae==null?void 0:ae.price_return)??"",onChange:Je=>Ke(de,oe,"price_return",Je.target.value)})]})]})},`${de}-${oe}`);const fe=(Xe=h[de])==null?void 0:Xe[oe];return o.jsx("td",{className:["border px-1 py-1 text-center w-[90px] min-w-[90px] h-[32px] align-middle",_e].filter(Boolean).join(" "),children:o.jsxs("div",{className:"flex flex-col items-stretch gap-[4px]",children:[o.jsx("span",{className:"text-[10px] font-semibold uppercase text-gray-600 text-center",children:"Retur"}),o.jsxs("div",{className:"flex items-center gap-[4px]",children:[o.jsx("label",{className:"w-[24px] text-[9px] font-medium text-gray-600 text-center",children:"R"}),o.jsx("input",{className:"w-[54px] h-[20px] px-1 text-[13px] border border-gray-300 rounded text-center focus:outline-none",value:(fe==null?void 0:fe.r_price)??"",onChange:Je=>Ke(de,oe,"r_price",Je.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-[4px]",children:[o.jsx("label",{className:"w-[24px] text-[9px] font-medium text-gray-600 text-center",children:"R/T"}),o.jsx("input",{className:"w-[54px] h-[20px] px-1 text-[13px] border border-gray-300 rounded text-center focus:outline-none",value:(fe==null?void 0:fe.r_price_return)??"",onChange:Je=>Ke(de,oe,"r_price_return",Je.target.value)})]})]})},`${de}-${oe}`)})]},de))})]})}),o.jsxs("div",{className:"border rounded shadow bg-white p-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Pre pe segment n interiorul aceleiai localiti"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsx("div",{className:"flex items-end gap-6 min-w-[320px]",children:d.map(de=>{var I,oe;return o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx("span",{className:"text-xs font-semibold text-gray-700 text-center whitespace-nowrap",children:de}),o.jsx("input",{className:"w-[70px] h-[28px] px-2 text-[13px] border border-gray-300 rounded text-center focus:outline-none",value:((oe=(I=h[de])==null?void 0:I[de])==null?void 0:oe.local_price)??"",onChange:he=>Ke(de,de,"local_price",he.target.value),placeholder:"0"})]},de)})})})]})]})]})}function DP(){const[e,t]=f.useState([]),[r,i]=f.useState([]),[s,u]=f.useState(!0),[d,m]=f.useState(null),[h,p]=f.useState(!1),[g,b]=f.useState({id:null,name:"",username:"",phone:"",email:"",role:"driver",active:!0,operator_id:null}),[w,S]=f.useState({email:"",role:"agent",operator_id:null,ttl_hours:72}),[y,j]=f.useState(null),[N,E]=f.useState(!1),[_,M]=f.useState(null),[O,C]=f.useState(!1),[L,B]=f.useState(!1),[Z,R]=f.useState(null),[X,te]=f.useState({key:"id",direction:"asc"});f.useEffect(()=>{xe(),Pe(),ve()},[]);const xe=async()=>{try{u(!0);const U=await fetch("/api/employees?active=all");if(!U.ok)throw new Error("Nu am putut ncrca angajaii");const W=await U.json();t(Array.isArray(W)?W:[])}catch(U){console.error("fetchAll employees failed",U),t([])}finally{u(!1)}},Pe=async()=>{var U;try{const W=await fetch("/api/operators");if(!W.ok)throw new Error("Nu am putut ncrca operatorii");const ue=await W.json();i(Array.isArray(ue)?ue:[]);const Ee=Array.isArray(ue)&&((U=ue[0])==null?void 0:U.id)||null;b(be=>({...be,operator_id:be.operator_id??Ee})),S(be=>({...be,operator_id:be.operator_id??Ee}))}catch(W){console.error("fetchOperators failed",W),i([])}},ve=async()=>{var U;try{const W=await fetch("/api/auth/me");if(W.ok){const ue=await W.json();m(((U=ue==null?void 0:ue.user)==null?void 0:U.role)??null)}}catch(W){console.error("loadRole failed",W),m(null)}},se=()=>{var U;b({id:null,name:"",username:"",phone:"",email:"",role:"driver",active:!0,operator_id:((U=r[0])==null?void 0:U.id)??null}),p(!0)},V=U=>{b({...U,username:U.username??""}),p(!0)},F=()=>p(!1),Y=async()=>{const U={...g,username:g.username&&g.username.trim()?g.username.trim():null,operator_id:g.operator_id?Number(g.operator_id):null,active:g.active?1:0},W=g.id?"PUT":"POST",ue=g.id?`/api/employees/${g.id}`:"/api/employees",Ee=await fetch(ue,{method:W,headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(!Ee.ok){console.error("save failed",await Ee.text());return}await xe(),F()},z=async U=>{window.confirm("terge angajatul?")&&(await fetch(`/api/employees/${U}`,{method:"DELETE"}),xe())},T=async U=>{U.preventDefault();const W=w.email.trim();if(!W){M("Completeaz emailul destinatarului.");return}C(!0),M(null),j(null),E(!1),B(!1),R(null);try{const ue={email:W,role:w.role,ttl_hours:Number(w.ttl_hours)||72};w.operator_id&&(ue.operator_id=Number(w.operator_id));const Ee=await fetch("/api/invitations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)});if(!Ee.ok){const Te=await Ee.text();M(Te||"Nu am putut genera invitaia.");return}const be=await Ee.json(),Be=(be==null?void 0:be.invite_url)||`${window.location.origin}/invita/${be.token}`;j(Be),B(!!(be!=null&&be.email_sent)),R(W||null),S(Te=>({...Te,email:""}))}catch(ue){console.error("createInvitation failed",ue),M("A aprut o eroare la generarea invitaiei.")}finally{C(!1)}},P=U=>{let W="asc";X.key===U&&X.direction==="asc"&&(W="desc"),te({key:U,direction:W})},A=f.useMemo(()=>{const U=[...e];return U.sort((W,ue)=>{let Ee=W[X.key],be=ue[X.key];return(Ee===null||typeof Ee>"u")&&(Ee=""),(be===null||typeof be>"u")&&(be=""),typeof Ee=="string"&&(Ee=Ee.toLowerCase()),typeof be=="string"&&(be=be.toLowerCase()),Ee<be?X.direction==="asc"?-1:1:Ee>be?X.direction==="asc"?1:-1:0}),U},[e,X]),H=()=>{if(!e.length){alert("Nu exist angajai de exportat.");return}const U=new Map(r.map(be=>[be.id,be.name])),W=["#","Nume","Utilizator","Telefon","Email","Rol","Activ","Operator"],ue=e.map((be,Be)=>`<tr>${[be.id??Be+1,be.name??"",be.username??"",be.phone??"",be.email??"",be.role??"",be.active?"DA":"NU",U.get(be.operator_id)??""].map(Ge=>`<td>${pr(Ge)}</td>`).join("")}</tr>`).join(""),Ee=`
      <table style="margin-bottom:12px;width:auto;">
        <tr>
          <td>Export angajai</td>
          <td>${pr(ru())}</td>
        </tr>
      </table>
    `;au({filenameBase:"administrare-angajati",headingHtml:Ee,tableHtml:`<table><tr>${W.map(be=>`<th>${pr(be)}</th>`).join("")}</tr>${ue}</table>`})};return s?o.jsx("p",{children:"Se ncarc angajaii"}):o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Angajai"}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[o.jsx("button",{onClick:se,className:"px-3 py-1 text-sm bg-green-600 text-white rounded",children:"+ Adaug"}),o.jsx("button",{type:"button",onClick:H,disabled:!e.length,className:"px-3 py-1 text-sm bg-emerald-600 text-white rounded disabled:opacity-60 disabled:cursor-not-allowed",children:"Export Excel"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsxs("th",{onClick:()=>P("id"),className:"p-1 border text-left cursor-pointer select-none",children:["# ",X.key==="id"?X.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>P("name"),className:"p-1 border text-left cursor-pointer select-none",children:["Nume ",X.key==="name"?X.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>P("username"),className:"p-1 border text-left cursor-pointer select-none",children:["Utilizator ",X.key==="username"?X.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>P("phone"),className:"p-1 border text-left cursor-pointer select-none",children:["Telefon ",X.key==="phone"?X.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>P("email"),className:"p-1 border text-left cursor-pointer select-none",children:["Email ",X.key==="email"?X.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>P("role"),className:"p-1 border text-left cursor-pointer select-none",children:["Rol ",X.key==="role"?X.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>P("active"),className:"p-1 border text-left cursor-pointer select-none",children:["Activ ",X.key==="active"?X.direction==="asc"?"":"":""]}),o.jsxs("th",{onClick:()=>P("operator_id"),className:"p-1 border text-left cursor-pointer select-none",children:["Operator ",X.key==="operator_id"?X.direction==="asc"?"":"":""]}),o.jsx("th",{className:"p-1 border text-left",children:"Aciuni"})]})}),o.jsx("tbody",{children:A.map((U,W)=>{var ue;return o.jsxs("tr",{className:`${W%2===0?"bg-white":"bg-gray-50"} ${U.active?"":"opacity-60"}`,children:[o.jsx("td",{className:"p-1 border",children:U.id}),o.jsx("td",{className:"p-1 border",children:U.name}),o.jsx("td",{className:"p-1 border",children:U.username||""}),o.jsx("td",{className:"p-1 border",children:U.phone||""}),o.jsx("td",{className:"p-1 border",children:U.email||""}),o.jsx("td",{className:"p-1 border",children:U.role}),o.jsx("td",{className:"p-1 border",children:o.jsx("input",{type:"checkbox",checked:!!U.active,onChange:async()=>{await fetch(`/api/employees/${U.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!U.active})}),xe()}})}),o.jsx("td",{className:"p-1 border",children:((ue=r.find(Ee=>Ee.id===U.operator_id))==null?void 0:ue.name)||""}),o.jsxs("td",{className:"p-1 border space-x-2",children:[o.jsx("button",{onClick:()=>V(U),className:"px-2 py-1 text-xs bg-blue-500 text-white rounded",children:"Editeaz"}),o.jsx("button",{onClick:()=>z(U.id),className:"px-2 py-1 text-xs bg-red-500 text-white rounded",children:"terge"})]})]},U.id)})})]})}),h&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-80",children:[o.jsxs("h3",{className:"mb-4 text-lg font-semibold",children:[g.id?"Editeaz":"Adaug"," angajat"]}),o.jsxs("label",{className:"block mb-2 text-sm",children:["Nume",o.jsx("input",{className:"w-full p-2 border rounded text-sm",value:g.name,onChange:U=>b({...g,name:U.target.value})})]}),o.jsxs("label",{className:"block mb-2 text-sm",children:["Utilizator (username)",o.jsx("input",{className:"w-full p-2 border rounded text-sm",value:g.username??"",onChange:U=>b({...g,username:U.target.value}),placeholder:"ex: prenume.nume"})]}),o.jsxs("label",{className:"block mb-2 text-sm",children:["Telefon",o.jsx("input",{className:"w-full p-2 border rounded text-sm",value:g.phone,onChange:U=>b({...g,phone:U.target.value})})]}),o.jsxs("label",{className:"block mb-2 text-sm",children:["Email",o.jsx("input",{className:"w-full p-2 border rounded text-sm",value:g.email,onChange:U=>b({...g,email:U.target.value})})]}),o.jsxs("label",{className:"block mb-2 text-sm",children:["Rol",o.jsxs("select",{className:"w-full p-2 border rounded text-sm",value:g.role,onChange:U=>b({...g,role:U.target.value}),children:[o.jsx("option",{value:"driver",children:"Driver"}),o.jsx("option",{value:"agent",children:"Agent"}),o.jsx("option",{value:"operator_admin",children:"Operator admin"}),o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"altceva",children:"Altceva"})]})]}),o.jsxs("label",{className:"block mb-2 text-sm flex items-center",children:[o.jsx("input",{type:"checkbox",className:"mr-2",checked:!!g.active,onChange:U=>b({...g,active:U.target.checked})}),"Activ"]}),o.jsxs("label",{className:"block mb-4 text-sm",children:["Operator",o.jsxs("select",{className:"w-full p-2 border rounded text-sm",value:g.operator_id??"",onChange:U=>b({...g,operator_id:U.target.value?Number(U.target.value):null}),children:[o.jsx("option",{value:"",children:"Fr operator specific"}),r.map(U=>o.jsx("option",{value:U.id,children:U.name},U.id))]})]}),o.jsxs("div",{className:"text-right space-x-2",children:[o.jsx("button",{onClick:F,className:"px-3 py-1 bg-gray-300 rounded text-sm",children:"Anuleaz"}),o.jsx("button",{onClick:Y,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Salveaz"})]})]})}),o.jsxs("section",{className:"mt-10 max-w-xl",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Invitaii rapide"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Trimite un link de nscriere unui viitor coleg. Invitaia expir automat dup perioada aleas."}),o.jsxs("form",{onSubmit:T,className:"space-y-4 bg-gray-50 border border-gray-200 rounded p-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-email",children:"Email destinatar"}),o.jsx("input",{id:"invite-email",type:"email",required:!0,value:w.email,onChange:U=>S(W=>({...W,email:U.target.value})),className:"w-full border rounded px-3 py-2 text-sm",placeholder:"nume@exemplu.ro"})]}),o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("label",{className:"block text-sm font-medium",children:["Rol acordat",o.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2 text-sm",value:w.role,onChange:U=>S(W=>({...W,role:U.target.value})),children:[o.jsx("option",{value:"agent",children:"Agent"}),o.jsx("option",{value:"driver",children:"ofer"}),o.jsx("option",{value:"operator_admin",children:"Operator admin"}),o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"altceva",children:"Altceva"})]})]}),o.jsxs("label",{className:"block text-sm font-medium",children:["Valabilitate (ore)",o.jsx("input",{type:"number",min:"1",className:"mt-1 w-full border rounded px-3 py-2 text-sm",value:w.ttl_hours,onChange:U=>S(W=>({...W,ttl_hours:U.target.value}))})]})]}),r.length>0&&o.jsxs("label",{className:"block text-sm font-medium",children:["Operator asignat",o.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2 text-sm",value:w.operator_id??"",onChange:U=>S(W=>({...W,operator_id:U.target.value||null})),disabled:d==="operator_admin",children:[o.jsx("option",{value:"",children:"Fr operator specific"}),r.map(U=>o.jsx("option",{value:U.id,children:U.name},U.id))]})]}),_&&o.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2",children:_}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm bg-green-600 text-white rounded disabled:opacity-60",disabled:O,children:O?"Se genereaz":"Genereaz invitaia"}),o.jsx("span",{className:"text-xs text-gray-500",children:"Vom salva automat angajatul cnd folosete linkul."})]})]}),y&&o.jsxs("div",{className:"mt-4 bg-green-50 border border-green-200 rounded px-4 py-3 text-sm",children:[o.jsx("p",{className:"font-semibold text-green-700",children:"Invitaie generat!"}),o.jsx("p",{className:"mt-1 text-green-700",children:"Trimite linkul de mai jos colegului:"}),L?o.jsxs("p",{className:"mt-2 text-xs text-green-600",children:["Email trimis automat ctre ",Z||"destinatar","."]}):o.jsx("p",{className:"mt-2 text-xs text-amber-600",children:"Emailul automat nu a putut fi trimis. Copiaz linkul manual i transmite-l colegului."}),o.jsxs("div",{className:"mt-3 flex flex-col gap-2 sm:flex-row sm:items-center",children:[o.jsx("input",{readOnly:!0,value:y,className:"flex-1 border border-green-300 rounded px-3 py-2 bg-white text-green-900"}),o.jsx("button",{type:"button",className:"px-3 py-2 bg-green-600 text-white rounded",onClick:async()=>{var U;try{(U=navigator==null?void 0:navigator.clipboard)!=null&&U.writeText?(await navigator.clipboard.writeText(y),E(!0)):E(!1)}catch(W){console.error("copy failed",W),E(!1)}},children:"Copiaz linkul"})]}),N&&o.jsx("p",{className:"mt-2 text-xs text-green-600",children:"Link copiat n clipboard."})]})]})]})}const Lg="-",RP=e=>{const t=zP(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:d=>{const m=d.split(Lg);return m[0]===""&&m.length!==1&&m.shift(),c1(m,t)||PP(d)},getConflictingClassGroupIds:(d,m)=>{const h=r[d]||[];return m&&i[d]?[...h,...i[d]]:h}}},c1=(e,t)=>{var d;if(e.length===0)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),s=i?c1(e.slice(1),i):void 0;if(s)return s;if(t.validators.length===0)return;const u=e.join(Lg);return(d=t.validators.find(({validator:m})=>m(u)))==null?void 0:d.classGroupId},Nw=/^\[(.+)\]$/,PP=e=>{if(Nw.test(e)){const t=Nw.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},zP=e=>{const{theme:t,classGroups:r}=e,i={nextPart:new Map,validators:[]};for(const s in r)Vp(r[s],i,s,t);return i},Vp=(e,t,r,i)=>{e.forEach(s=>{if(typeof s=="string"){const u=s===""?t:Cw(t,s);u.classGroupId=r;return}if(typeof s=="function"){if($P(s)){Vp(s(i),t,r,i);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([u,d])=>{Vp(d,Cw(t,u),r,i)})})},Cw=(e,t)=>{let r=e;return t.split(Lg).forEach(i=>{r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r},$P=e=>e.isThemeGetter,UP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,i=new Map;const s=(u,d)=>{r.set(u,d),t++,t>e&&(t=0,i=r,r=new Map)};return{get(u){let d=r.get(u);if(d!==void 0)return d;if((d=i.get(u))!==void 0)return s(u,d),d},set(u,d){r.has(u)?r.set(u,d):s(u,d)}}},Bp="!",Hp=":",IP=Hp.length,VP=e=>{const{prefix:t,experimentalParseClassName:r}=e;let i=s=>{const u=[];let d=0,m=0,h=0,p;for(let y=0;y<s.length;y++){let j=s[y];if(d===0&&m===0){if(j===Hp){u.push(s.slice(h,y)),h=y+IP;continue}if(j==="/"){p=y;continue}}j==="["?d++:j==="]"?d--:j==="("?m++:j===")"&&m--}const g=u.length===0?s:s.substring(h),b=BP(g),w=b!==g,S=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:w,baseClassName:b,maybePostfixModifierPosition:S}};if(t){const s=t+Hp,u=i;i=d=>d.startsWith(s)?u(d.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(r){const s=i;i=u=>r({className:u,parseClassName:s})}return i},BP=e=>e.endsWith(Bp)?e.substring(0,e.length-1):e.startsWith(Bp)?e.substring(1):e,HP=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const s=[];let u=[];return i.forEach(d=>{d[0]==="["||t[d]?(s.push(...u.sort(),d),u=[]):u.push(d)}),s.push(...u.sort()),s}},FP=e=>({cache:UP(e.cacheSize),parseClassName:VP(e),sortModifiers:HP(e),...RP(e)}),YP=/\s+/,qP=(e,t)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:s,sortModifiers:u}=t,d=[],m=e.trim().split(YP);let h="";for(let p=m.length-1;p>=0;p-=1){const g=m[p],{isExternal:b,modifiers:w,hasImportantModifier:S,baseClassName:y,maybePostfixModifierPosition:j}=r(g);if(b){h=g+(h.length>0?" "+h:h);continue}let N=!!j,E=i(N?y.substring(0,j):y);if(!E){if(!N){h=g+(h.length>0?" "+h:h);continue}if(E=i(y),!E){h=g+(h.length>0?" "+h:h);continue}N=!1}const _=u(w).join(":"),M=S?_+Bp:_,O=M+E;if(d.includes(O))continue;d.push(O);const C=s(E,N);for(let L=0;L<C.length;++L){const B=C[L];d.push(M+B)}h=g+(h.length>0?" "+h:h)}return h};function GP(){let e=0,t,r,i="";for(;e<arguments.length;)(t=arguments[e++])&&(r=u1(t))&&(i&&(i+=" "),i+=r);return i}const u1=e=>{if(typeof e=="string")return e;let t,r="";for(let i=0;i<e.length;i++)e[i]&&(t=u1(e[i]))&&(r&&(r+=" "),r+=t);return r};function WP(e,...t){let r,i,s,u=d;function d(h){const p=t.reduce((g,b)=>b(g),e());return r=FP(p),i=r.cache.get,s=r.cache.set,u=m,m(h)}function m(h){const p=i(h);if(p)return p;const g=qP(h,r);return s(h,g),g}return function(){return u(GP.apply(null,arguments))}}const Zn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},d1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,f1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ZP=/^\d+\/\d+$/,XP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,JP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,e3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fo=e=>ZP.test(e),zt=e=>!!e&&!Number.isNaN(Number(e)),us=e=>!!e&&Number.isInteger(Number(e)),tp=e=>e.endsWith("%")&&zt(e.slice(0,-1)),bi=e=>XP.test(e),t3=()=>!0,n3=e=>KP.test(e)&&!QP.test(e),h1=()=>!1,r3=e=>JP.test(e),a3=e=>e3.test(e),i3=e=>!ft(e)&&!ht(e),s3=e=>dl(e,g1,h1),ft=e=>d1.test(e),Us=e=>dl(e,v1,n3),np=e=>dl(e,d3,zt),Ew=e=>dl(e,m1,h1),o3=e=>dl(e,p1,a3),Ad=e=>dl(e,b1,r3),ht=e=>f1.test(e),Oc=e=>fl(e,v1),l3=e=>fl(e,f3),Mw=e=>fl(e,m1),c3=e=>fl(e,g1),u3=e=>fl(e,p1),Td=e=>fl(e,b1,!0),dl=(e,t,r)=>{const i=d1.exec(e);return i?i[1]?t(i[1]):r(i[2]):!1},fl=(e,t,r=!1)=>{const i=f1.exec(e);return i?i[1]?t(i[1]):r:!1},m1=e=>e==="position"||e==="percentage",p1=e=>e==="image"||e==="url",g1=e=>e==="length"||e==="size"||e==="bg-size",v1=e=>e==="length",d3=e=>e==="number",f3=e=>e==="family-name",b1=e=>e==="shadow",h3=()=>{const e=Zn("color"),t=Zn("font"),r=Zn("text"),i=Zn("font-weight"),s=Zn("tracking"),u=Zn("leading"),d=Zn("breakpoint"),m=Zn("container"),h=Zn("spacing"),p=Zn("radius"),g=Zn("shadow"),b=Zn("inset-shadow"),w=Zn("text-shadow"),S=Zn("drop-shadow"),y=Zn("blur"),j=Zn("perspective"),N=Zn("aspect"),E=Zn("ease"),_=Zn("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],C=()=>[...O(),ht,ft],L=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],Z=()=>[ht,ft,h],R=()=>[Fo,"full","auto",...Z()],X=()=>[us,"none","subgrid",ht,ft],te=()=>["auto",{span:["full",us,ht,ft]},us,ht,ft],xe=()=>[us,"auto",ht,ft],Pe=()=>["auto","min","max","fr",ht,ft],ve=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...Z()],F=()=>[Fo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Z()],Y=()=>[e,ht,ft],z=()=>[...O(),Mw,Ew,{position:[ht,ft]}],T=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",c3,s3,{size:[ht,ft]}],A=()=>[tp,Oc,Us],H=()=>["","none","full",p,ht,ft],U=()=>["",zt,Oc,Us],W=()=>["solid","dashed","dotted","double"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ee=()=>[zt,tp,Mw,Ew],be=()=>["","none",y,ht,ft],Be=()=>["none",zt,ht,ft],Te=()=>["none",zt,ht,ft],Ge=()=>[zt,ht,ft],ge=()=>[Fo,"full",...Z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[bi],breakpoint:[bi],color:[t3],container:[bi],"drop-shadow":[bi],ease:["in","out","in-out"],font:[i3],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[bi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[bi],shadow:[bi],spacing:["px",zt],text:[bi],"text-shadow":[bi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Fo,ft,ht,N]}],container:["container"],columns:[{columns:[zt,ft,ht,m]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:C()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[us,"auto",ht,ft]}],basis:[{basis:[Fo,"full","auto",m,...Z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[zt,Fo,"auto","initial","none",ft]}],grow:[{grow:["",zt,ht,ft]}],shrink:[{shrink:["",zt,ht,ft]}],order:[{order:[us,"first","last","none",ht,ft]}],"grid-cols":[{"grid-cols":X()}],"col-start-end":[{col:te()}],"col-start":[{"col-start":xe()}],"col-end":[{"col-end":xe()}],"grid-rows":[{"grid-rows":X()}],"row-start-end":[{row:te()}],"row-start":[{"row-start":xe()}],"row-end":[{"row-end":xe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Pe()}],"auto-rows":[{"auto-rows":Pe()}],gap:[{gap:Z()}],"gap-x":[{"gap-x":Z()}],"gap-y":[{"gap-y":Z()}],"justify-content":[{justify:[...ve(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...ve()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":ve()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:Z()}],px:[{px:Z()}],py:[{py:Z()}],ps:[{ps:Z()}],pe:[{pe:Z()}],pt:[{pt:Z()}],pr:[{pr:Z()}],pb:[{pb:Z()}],pl:[{pl:Z()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":Z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Z()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[m,"screen",...F()]}],"min-w":[{"min-w":[m,"screen","none",...F()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[d]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",r,Oc,Us]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,ht,np]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",tp,ft]}],"font-family":[{font:[l3,ft,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ht,ft]}],"line-clamp":[{"line-clamp":[zt,"none",ht,np]}],leading:[{leading:[u,...Z()]}],"list-image":[{"list-image":["none",ht,ft]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ht,ft]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:[zt,"from-font","auto",ht,Us]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[zt,"auto",ht,ft]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ht,ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ht,ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:T()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},us,ht,ft],radial:["",ht,ft],conic:[us,ht,ft]},u3,o3]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:A()}],"gradient-via-pos":[{via:A()}],"gradient-to-pos":[{to:A()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:U()}],"border-w-x":[{"border-x":U()}],"border-w-y":[{"border-y":U()}],"border-w-s":[{"border-s":U()}],"border-w-e":[{"border-e":U()}],"border-w-t":[{"border-t":U()}],"border-w-r":[{"border-r":U()}],"border-w-b":[{"border-b":U()}],"border-w-l":[{"border-l":U()}],"divide-x":[{"divide-x":U()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":U()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...W(),"hidden","none"]}],"divide-style":[{divide:[...W(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...W(),"none","hidden"]}],"outline-offset":[{"outline-offset":[zt,ht,ft]}],"outline-w":[{outline:["",zt,Oc,Us]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",g,Td,Ad]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",b,Td,Ad]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[zt,Us]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":U()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",w,Td,Ad]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[zt,ht,ft]}],"mix-blend":[{"mix-blend":[...ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[zt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ee()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":Ee()}],"mask-image-t-to-pos":[{"mask-t-to":Ee()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":Ee()}],"mask-image-r-to-pos":[{"mask-r-to":Ee()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":Ee()}],"mask-image-b-to-pos":[{"mask-b-to":Ee()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":Ee()}],"mask-image-l-to-pos":[{"mask-l-to":Ee()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":Ee()}],"mask-image-x-to-pos":[{"mask-x-to":Ee()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":Ee()}],"mask-image-y-to-pos":[{"mask-y-to":Ee()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[ht,ft]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ee()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[zt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ee()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:T()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ht,ft]}],filter:[{filter:["","none",ht,ft]}],blur:[{blur:be()}],brightness:[{brightness:[zt,ht,ft]}],contrast:[{contrast:[zt,ht,ft]}],"drop-shadow":[{"drop-shadow":["","none",S,Td,Ad]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",zt,ht,ft]}],"hue-rotate":[{"hue-rotate":[zt,ht,ft]}],invert:[{invert:["",zt,ht,ft]}],saturate:[{saturate:[zt,ht,ft]}],sepia:[{sepia:["",zt,ht,ft]}],"backdrop-filter":[{"backdrop-filter":["","none",ht,ft]}],"backdrop-blur":[{"backdrop-blur":be()}],"backdrop-brightness":[{"backdrop-brightness":[zt,ht,ft]}],"backdrop-contrast":[{"backdrop-contrast":[zt,ht,ft]}],"backdrop-grayscale":[{"backdrop-grayscale":["",zt,ht,ft]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[zt,ht,ft]}],"backdrop-invert":[{"backdrop-invert":["",zt,ht,ft]}],"backdrop-opacity":[{"backdrop-opacity":[zt,ht,ft]}],"backdrop-saturate":[{"backdrop-saturate":[zt,ht,ft]}],"backdrop-sepia":[{"backdrop-sepia":["",zt,ht,ft]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Z()}],"border-spacing-x":[{"border-spacing-x":Z()}],"border-spacing-y":[{"border-spacing-y":Z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ht,ft]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[zt,"initial",ht,ft]}],ease:[{ease:["linear","initial",E,ht,ft]}],delay:[{delay:[zt,ht,ft]}],animate:[{animate:["none",_,ht,ft]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,ht,ft]}],"perspective-origin":[{"perspective-origin":C()}],rotate:[{rotate:Be()}],"rotate-x":[{"rotate-x":Be()}],"rotate-y":[{"rotate-y":Be()}],"rotate-z":[{"rotate-z":Be()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:Ge()}],"skew-x":[{"skew-x":Ge()}],"skew-y":[{"skew-y":Ge()}],transform:[{transform:[ht,ft,"","none","gpu","cpu"]}],"transform-origin":[{origin:C()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ge()}],"translate-x":[{"translate-x":ge()}],"translate-y":[{"translate-y":ge()}],"translate-z":[{"translate-z":ge()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ht,ft]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Z()}],"scroll-mx":[{"scroll-mx":Z()}],"scroll-my":[{"scroll-my":Z()}],"scroll-ms":[{"scroll-ms":Z()}],"scroll-me":[{"scroll-me":Z()}],"scroll-mt":[{"scroll-mt":Z()}],"scroll-mr":[{"scroll-mr":Z()}],"scroll-mb":[{"scroll-mb":Z()}],"scroll-ml":[{"scroll-ml":Z()}],"scroll-p":[{"scroll-p":Z()}],"scroll-px":[{"scroll-px":Z()}],"scroll-py":[{"scroll-py":Z()}],"scroll-ps":[{"scroll-ps":Z()}],"scroll-pe":[{"scroll-pe":Z()}],"scroll-pt":[{"scroll-pt":Z()}],"scroll-pr":[{"scroll-pr":Z()}],"scroll-pb":[{"scroll-pb":Z()}],"scroll-pl":[{"scroll-pl":Z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ht,ft]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[zt,Oc,Us,np]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},m3=WP(h3);function Ei(...e){return m3(sl(e))}const Fp=f.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ei("rounded-xl border bg-card text-card-foreground shadow",e),...t}));Fp.displayName="Card";const p3=f.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ei("flex flex-col space-y-1.5 p-6",e),...t}));p3.displayName="CardHeader";const g3=f.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ei("font-semibold leading-none tracking-tight",e),...t}));g3.displayName="CardTitle";const v3=f.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ei("text-sm text-muted-foreground",e),...t}));v3.displayName="CardDescription";const Yp=f.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ei("p-6 pt-0",e),...t}));Yp.displayName="CardContent";const b3=f.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ei("flex items-center p-6 pt-0",e),...t}));b3.displayName="CardFooter";function Ow(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function y3(...e){return t=>{let r=!1;const i=e.map(s=>{const u=Ow(s,t);return!r&&typeof u=="function"&&(r=!0),u});if(r)return()=>{for(let s=0;s<i.length;s++){const u=i[s];typeof u=="function"?u():Ow(e[s],null)}}}}function y1(e){const t=w3(e),r=f.forwardRef((i,s)=>{const{children:u,...d}=i,m=f.Children.toArray(u),h=m.find(j3);if(h){const p=h.props.children,g=m.map(b=>b===h?f.Children.count(p)>1?f.Children.only(null):f.isValidElement(p)?p.props.children:null:b);return o.jsx(t,{...d,ref:s,children:f.isValidElement(p)?f.cloneElement(p,void 0,g):null})}return o.jsx(t,{...d,ref:s,children:u})});return r.displayName=`${e}.Slot`,r}var x3=y1("Slot");function w3(e){const t=f.forwardRef((r,i)=>{const{children:s,...u}=r;if(f.isValidElement(s)){const d=N3(s),m=_3(u,s.props);return s.type!==f.Fragment&&(m.ref=i?y3(i,d):d),f.cloneElement(s,m)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var S3=Symbol("radix.slottable");function j3(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===S3}function _3(e,t){const r={...t};for(const i in t){const s=e[i],u=t[i];/^on[A-Z]/.test(i)?s&&u?r[i]=(...m)=>{const h=u(...m);return s(...m),h}:s&&(r[i]=s):i==="style"?r[i]={...s,...u}:i==="className"&&(r[i]=[s,u].filter(Boolean).join(" "))}return{...e,...r}}function N3(e){var i,s;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const Lw=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,kw=sl,x1=(e,t)=>r=>{var i;if((t==null?void 0:t.variants)==null)return kw(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:u}=t,d=Object.keys(s).map(p=>{const g=r==null?void 0:r[p],b=u==null?void 0:u[p];if(g===null)return null;const w=Lw(g)||Lw(b);return s[p][w]}),m=r&&Object.entries(r).reduce((p,g)=>{let[b,w]=g;return w===void 0||(p[b]=w),p},{}),h=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((p,g)=>{let{class:b,className:w,...S}=g;return Object.entries(S).every(y=>{let[j,N]=y;return Array.isArray(N)?N.includes({...u,...m}[j]):{...u,...m}[j]===N})?[...p,b,w]:p},[]);return kw(e,d,h,r==null?void 0:r.class,r==null?void 0:r.className)},C3=x1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),w1=f.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...s},u)=>{const d=i?x3:"button";return o.jsx(d,{className:Ei(C3({variant:t,size:r,className:e})),ref:u,...s})});w1.displayName="Button";const qa=f.forwardRef(({className:e,type:t,...r},i)=>o.jsx("input",{type:t,className:Ei("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));qa.displayName="Input";var E3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],M3=E3.reduce((e,t)=>{const r=y1(`Primitive.${t}`),i=f.forwardRef((s,u)=>{const{asChild:d,...m}=s,h=d?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(h,{...m,ref:u})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),O3="Label",S1=f.forwardRef((e,t)=>o.jsx(M3.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));S1.displayName=O3;var j1=S1;const L3=x1("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Xn=f.forwardRef(({className:e,...t},r)=>o.jsx(j1,{ref:r,className:Ei(L3(),e),...t}));Xn.displayName=j1.displayName;function k3(){const[e,t]=f.useState([]),r=()=>({code:"",label:"",type:"percent",value_off:0,valid_from:"",valid_to:"",active:!0,channels:{online:!0,agent:!1},min_price:"",max_discount:"",max_total_uses:"",max_uses_per_person:"",combinable:!1,route_ids:[],route_schedule_ids:[],hours:[],weekdays:[]}),[i,s]=f.useState(r()),[u,d]=f.useState(null),[m,h]=f.useState([]),[p,g]=f.useState([]),b=async()=>{try{const E=await fetch("/api/promo-codes"),_=E.ok?await E.json():[];t(Array.isArray(_)?_:[])}catch{t([])}};f.useEffect(()=>{b();const E=new Date().toISOString().slice(0,10);fetch(`/api/routes?date=${E}`).then(_=>_.ok?_.json():[]).then(_=>{const M=Array.isArray(_)?_:[];h(M.map(C=>({id:C.id,name:C.name})));const O=[];M.forEach(C=>{(C.schedules||[]).forEach(L=>{O.push({id:L.scheduleId??L.id,label:`${C.name}  ${L.departure}`,routeId:C.id})})}),g(O)}).catch(()=>{h([]),g([])})},[]);const w=async E=>{if(E.preventDefault(),!i.code.trim()||!i.label.trim()||!String(i.value_off).trim()){alert("Completeaz: Cod, Label i Valoare");return}const _={...i,code:(i.code||"").toUpperCase().trim(),channels:[i.channels.online?"online":null,i.channels.agent?"agent":null].filter(Boolean).join(",")},M=u?`/api/promo-codes/${u}`:"/api/promo-codes",C=await fetch(M,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(C.ok)s(r()),d(null),b();else{const L=await C.json().catch(()=>null);alert((L==null?void 0:L.error)||"Eroare la salvare")}},S=E=>{d(E.id),s({code:E.code,label:E.label,type:E.type,value_off:E.value_off,valid_from:E.valid_from?E.valid_from.replace("Z","").slice(0,16):"",valid_to:E.valid_to?E.valid_to.replace("Z","").slice(0,16):"",active:!!E.active,channels:{online:(E.channels||"").includes("online"),agent:(E.channels||"").includes("agent")},min_price:E.min_price??"",max_discount:E.max_discount??"",max_total_uses:E.max_total_uses??"",max_uses_per_person:E.max_uses_per_person??"",combinable:!!E.combinable,route_ids:[],route_schedule_ids:[],hours:[],weekdays:[]}),window.scrollTo({top:0,behavior:"smooth"})},y=()=>{d(null),s(r())},j=async E=>{(await fetch(`/api/promo-codes/${E}/toggle`,{method:"PATCH"})).ok&&b()},N=async E=>{if(!window.confirm("Sigur tergi acest cod promo?"))return;(await fetch(`/api/promo-codes/${E}`,{method:"DELETE"})).ok&&b()};return o.jsxs("div",{className:"space-y-6",children:[o.jsx(Fp,{children:o.jsx(Yp,{className:"p-4",children:o.jsxs("form",{onSubmit:w,className:"grid md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(Xn,{children:"Cod"}),o.jsx(qa,{value:i.code,onChange:E=>s(_=>({..._,code:E.target.value})),placeholder:"EX: FALL25"})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Label"}),o.jsx(qa,{value:i.label,onChange:E=>s(_=>({..._,label:E.target.value}))})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Tip"}),o.jsxs("select",{className:"w-full border rounded h-10 px-2",value:i.type,onChange:E=>s(_=>({..._,type:E.target.value})),children:[o.jsx("option",{value:"percent",children:"Procent"}),o.jsx("option",{value:"fixed",children:"Fix (lei)"})]})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Valoare"}),o.jsx(qa,{type:"number",step:"0.01",value:i.value_off,onChange:E=>s(_=>({..._,value_off:E.target.value}))})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Valabil de la"}),o.jsx(qa,{type:"datetime-local",value:i.valid_from,onChange:E=>s(_=>({..._,valid_from:E.target.value}))})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Valabil pn la"}),o.jsx(qa,{type:"datetime-local",value:i.valid_to,onChange:E=>s(_=>({..._,valid_to:E.target.value}))})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{id:"online",type:"checkbox",checked:i.channels.online,onChange:E=>s(_=>({..._,channels:{..._.channels,online:E.target.checked}}))}),o.jsx(Xn,{htmlFor:"online",className:"m-0",children:"Online"}),o.jsx("input",{id:"agent",type:"checkbox",checked:i.channels.agent,onChange:E=>s(_=>({..._,channels:{..._.channels,agent:E.target.checked}}))}),o.jsx(Xn,{htmlFor:"agent",className:"m-0",children:"Offline (agent)"})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Prag minim (lei)"}),o.jsx(qa,{type:"number",step:"0.01",value:i.min_price,onChange:E=>s(_=>({..._,min_price:E.target.value}))})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Plafon reducere (lei)"}),o.jsx(qa,{type:"number",step:"0.01",value:i.max_discount,onChange:E=>s(_=>({..._,max_discount:E.target.value}))})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Max. utilizri total"}),o.jsx(qa,{type:"number",value:i.max_total_uses,onChange:E=>s(_=>({..._,max_total_uses:E.target.value}))})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Max. utilizri/persoan"}),o.jsx(qa,{type:"number",value:i.max_uses_per_person,onChange:E=>s(_=>({..._,max_uses_per_person:E.target.value}))})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{id:"combinable",type:"checkbox",checked:i.combinable,onChange:E=>s(_=>({..._,combinable:E.target.checked}))}),o.jsx(Xn,{htmlFor:"combinable",className:"m-0",children:"Combinabil cu alte reduceri"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{id:"active",type:"checkbox",checked:i.active,onChange:E=>s(_=>({..._,active:E.target.checked}))}),o.jsx(Xn,{htmlFor:"active",className:"m-0",children:"Activ"})]}),o.jsxs("div",{className:"md:col-span-3 mt-2 p-3 border rounded",children:[o.jsx("div",{className:"font-semibold mb-3",children:"Filtrare (scope)  opional"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Xn,{children:"Trasee permise"}),o.jsx("div",{className:"border rounded max-h-40 overflow-auto p-2",children:m.map(E=>o.jsxs("label",{className:"flex items-center gap-2 py-1",children:[o.jsx("input",{type:"checkbox",checked:(i.route_ids||[]).includes(E.id),onChange:_=>{s(M=>{const O=new Set(M.route_ids);return _.target.checked?O.add(E.id):O.delete(E.id),{...M,route_ids:[...O]}})}}),o.jsx("span",{children:E.name})]},E.id))}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Dac nu selectezi nimic: valabil pe toate traseele."})]}),o.jsxs("div",{children:[o.jsx(Xn,{children:"Orar(e) permise"}),Array.isArray(p)&&p.length>0?o.jsx("div",{className:"border rounded max-h-40 overflow-auto p-2",children:p.map(E=>o.jsxs("label",{className:"flex items-center gap-2 py-1",children:[o.jsx("input",{type:"checkbox",checked:(i.route_schedule_ids||[]).includes(E.id),onChange:_=>{s(M=>{const O=new Set(M.route_schedule_ids||[]);return _.target.checked?O.add(E.id):O.delete(E.id),{...M,route_schedule_ids:[...O]}})}}),o.jsx("span",{children:E.label})]},E.id))}):o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Nu exist orare returnate de /api/routes. Poi folosi Intervale orare zilnice."}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Dac nu selectezi nimic: valabil pe toate orele."})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx(Xn,{children:"Intervale orare zilnice (opional)"}),o.jsx(A3,{value:i.hours,onChange:E=>s(_=>({..._,hours:E}))}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ex.: 08:0010:00 i 16:0018:00. Dac nu pui nimic: valabil toat ziua."})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx(Xn,{children:"Zile ale sptmnii (opional)"}),o.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:["D","L","Ma","Mi","J","V","S"].map((E,_)=>o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:(i.weekdays||[]).includes(_),onChange:M=>{s(O=>{const C=new Set(O.weekdays);return M.target.checked?C.add(_):C.delete(_),{...O,weekdays:[...C].sort()}})}}),o.jsx("span",{children:E})]},_))}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Dac nu bifezi: valabil n toate zilele."})]})]}),o.jsxs("div",{className:"md:col-span-3 flex items-center gap-2",children:[o.jsx(w1,{type:"submit",children:u?"Salveaz modificrile":"Salveaz"}),u&&o.jsx("button",{type:"button",onClick:y,className:"h-10 px-3 rounded border",children:"Anuleaz editarea"})]})]})})}),o.jsx(Fp,{children:o.jsxs(Yp,{className:"p-4",children:[o.jsx("div",{className:"font-semibold mb-2",children:"Coduri existente"}),o.jsx("div",{className:"overflow-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left border-b",children:[o.jsx("th",{className:"py-2",children:"ID"}),o.jsx("th",{children:"Cod"}),o.jsx("th",{children:"Label"}),o.jsx("th",{children:"Tip"}),o.jsx("th",{children:"Valoare"}),o.jsx("th",{children:"Active"}),o.jsx("th",{children:"Canale"}),o.jsx("th",{children:"Scope"}),o.jsx("th",{className:"py-2",children:"Aciuni"})]})}),o.jsx("tbody",{children:e.map(E=>{var _,M,O,C;return o.jsxs("tr",{className:"border-b",children:[o.jsx("td",{className:"py-2",children:E.id}),o.jsx("td",{children:E.code}),o.jsx("td",{children:E.label}),o.jsx("td",{children:E.type}),o.jsx("td",{children:E.value_off}),o.jsx("td",{children:E.active?"DA":"NU"}),o.jsx("td",{children:E.channels}),o.jsxs("td",{className:"text-xs text-gray-600",children:["r:",((_=E._scope)==null?void 0:_.routes)??0," / s:",((M=E._scope)==null?void 0:M.schedules)??0," / h:",((O=E._scope)==null?void 0:O.hours)??0," / d:",((C=E._scope)==null?void 0:C.weekdays)??0]}),o.jsx("td",{className:"py-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>S(E),className:"px-2 py-1 border rounded",children:"Editeaz"}),o.jsx("button",{onClick:()=>j(E.id),className:"px-2 py-1 border rounded",children:E.active?"Dezactiveaz":"Activeaz"}),o.jsx("button",{onClick:()=>N(E.id),className:"px-2 py-1 border rounded text-red-600",children:"terge"})]})})]},E.id)})})]})})]})})]})}function A3({value:e,onChange:t}){const[r,i]=f.useState("08:00"),[s,u]=f.useState("10:00"),d=()=>{if(!r||!s)return;const[h,p]=r.split(":").map(Number),[g,b]=s.split(":").map(Number),w=h*60+p;g*60+b<=w||t([...e||[],{start:r,end:s}])},m=h=>{const p=[...e||[]];p.splice(h,1),t(p)};return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"time",className:"border rounded px-2 h-10",value:r,onChange:h=>i(h.target.value)}),o.jsx("span",{children:""}),o.jsx("input",{type:"time",className:"border rounded px-2 h-10",value:s,onChange:h=>u(h.target.value)}),o.jsx("button",{type:"button",onClick:d,className:"h-10 px-3 rounded bg-gray-800 text-white",children:"Adaug"})]}),(e||[]).length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((h,p)=>o.jsxs("span",{className:"px-2 py-1 border rounded inline-flex items-center gap-2",children:[h.start,"",h.end,o.jsx("button",{type:"button",onClick:()=>m(p),className:"text-red-600",children:""})]},p))})]})}function T3(){const[e,t]=f.useState([]),[r,i]=f.useState([]),[s,u]=f.useState("permanent"),[d,m]=f.useState({offline:!0,online:!0}),[h,p]=f.useState({date:"",weekday:"",routeId:"",schedule_id:""}),[g,b]=f.useState(!0),[w,S]=f.useState(null),[y,j]=f.useState("route"),N=["Dum","Lun","Mar","Mie","Joi","Vin","Sm"],E=(R,X)=>{const te=(R||"").trim();return te?`${te.toUpperCase()} ${X}`:X},_=()=>{p({date:"",weekday:"",routeId:"",schedule_id:""}),m({offline:!0,online:!0})},M=async()=>{b(!0);try{const R=new Date().toISOString().slice(0,10),[X,te]=await Promise.all([fetch("/api/trips/admin/disabled-schedules"),fetch(`/api/routes?date=${R}`)]);if(!X.ok||!te.ok)throw new Error("Network error");const xe=await X.json(),Pe=await te.json();t(xe);const ve=[];Pe.forEach(se=>{se.schedules.forEach(V=>{ve.push({routeId:se.id,scheduleId:V.scheduleId??V.id,routeName:se.name,departure:V.departure,direction:V.direction||"",key:`${se.id}-${V.scheduleId??V.id}`})})}),i(ve),S(null)}catch(R){S(R)}finally{b(!1)}};f.useEffect(()=>{M()},[]);const O=r.filter(R=>!e.some(X=>X.schedule_id!==R.scheduleId?!1:!!(X.rule_type==="permanent"||s==="weekly"&&(X.rule_type==="weekday"&&X.weekday.toString()===h.weekday||X.rule_type==="date"&&h.weekday&&new Date(X.exception_date).getDay().toString()===h.weekday)||s==="specific"&&(X.rule_type==="date"&&X.exception_date===h.date||X.rule_type==="weekday"&&h.date&&new Date(h.date).getDay()===X.weekday)))),C=[...e].sort((R,X)=>y==="route"?R.route_name.localeCompare(X.route_name):y==="-route"?X.route_name.localeCompare(R.route_name):y==="hour"?E(R.direction,R.hour).localeCompare(E(X.direction,X.hour)):y==="-hour"?E(X.direction,X.hour).localeCompare(E(R.direction,R.hour)):0),L=async R=>{R.preventDefault();const X={schedule_id:Number(h.schedule_id)};if(s==="weekly"&&(X.weekday=Number(h.weekday)),s==="specific"&&(X.exception_date=h.date),!d.offline&&!d.online){window.alert("Selecteaz cel puin o opiune de anulare (offline sau online).");return}X.disable_run=!!d.offline,X.disable_online=!!d.online;const te=await fetch("/api/trips/exceptions/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(te.status===409){const xe=await te.json().catch(()=>({}));window.alert(xe.error||"Exist rezervri active n viitor pentru aceast curs. Mut pasagerii nainte de a o dezactiva.");return}if(!te.ok){const xe=await te.json().catch(()=>({}));window.alert(xe.error||"Eroare la salvarea regulii. ncearc din nou.");return}_(),u("permanent"),M()},B=async(R,X)=>{const te={schedule_id:R.schedule_id,exception_date:R.rule_type==="date"?R.exception_date:null,weekday:R.rule_type==="weekday"?R.weekday:null,disable_run:X==="disable_run"?!R.disable_run:R.disable_run,disable_online:X==="disable_online"?!R.disable_online:R.disable_online},xe=await fetch("/api/trips/exceptions/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});if(xe.status===409){const Pe=await xe.json().catch(()=>({}));window.alert(Pe.error||"Exist rezervri active n viitor pentru aceast curs. Mut pasagerii nainte de a o dezactiva.");return}if(!xe.ok){const Pe=await xe.json().catch(()=>({}));window.alert(Pe.error||"Eroare la actualizarea regulii. ncearc din nou.");return}M()},Z=async R=>{window.confirm("Sigur tergi regula?")&&(await fetch(`/api/trips/admin/disabled-schedules/${R.id}`,{method:"DELETE"}),M())};return g?o.jsx("div",{children:"Loading"}):w?o.jsx("div",{className:"text-red-600",children:w.message}):o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("form",{onSubmit:L,className:"p-4 bg-white rounded shadow space-y-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium mr-4",children:"Cum vrei s anulezi?"}),["permanent","weekly","specific"].map(R=>o.jsxs("label",{className:"inline-flex items-center mr-4 capitalize",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",checked:s===R,onChange:()=>{u(R),_()}}),o.jsx("span",{className:"ml-1",children:R})]},R))]}),s==="weekly"&&o.jsxs("select",{required:!0,value:h.weekday,onChange:R=>p(X=>({...X,weekday:R.target.value})),className:"border p-2 rounded",children:[o.jsx("option",{value:"",children:"Zi sptmn"}),N.map((R,X)=>o.jsx("option",{value:X,children:R},X))]}),s==="specific"&&o.jsx("input",{type:"date",required:!0,value:h.date,onChange:R=>p(X=>({...X,date:R.target.value})),className:"border p-2 rounded"}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[o.jsxs("select",{required:!0,value:h.routeId,onChange:R=>p(X=>({...X,routeId:R.target.value,schedule_id:""})),className:"border p-2 rounded",children:[o.jsx("option",{value:"",children:"Alege traseu"}),[...new Set(O.map(R=>R.routeId))].map(R=>{var te;const X=(te=O.find(xe=>xe.routeId===R))==null?void 0:te.routeName;return o.jsx("option",{value:R,children:X},R)})]}),o.jsxs("select",{required:!0,value:h.schedule_id,onChange:R=>p(X=>({...X,schedule_id:R.target.value})),className:"border p-2 rounded",children:[o.jsx("option",{value:"",children:"Alege or"}),O.filter(R=>R.routeId===Number(h.routeId)).map(R=>o.jsx("option",{value:R.scheduleId,children:E(R.direction,R.departure)},R.scheduleId))]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Opiuni anulare"}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600",checked:d.offline,onChange:R=>m(X=>({...X,offline:R.target.checked}))}),o.jsx("span",{children:"Anulat offline"})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600",checked:d.online,onChange:R=>m(X=>({...X,online:R.target.checked}))}),o.jsx("span",{children:"Anulat online"})]})]})]}),o.jsx("button",{type:"submit",className:"bg-green-600 text-white px-3 py-2 rounded",children:"Adaug"})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"table-auto w-full text-sm divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>j(y==="route"?"-route":"route"),children:["Rut ",y==="route"?"":y==="-route"?"":""]}),o.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>j(y==="hour"?"-hour":"hour"),children:["Or ",y==="hour"?"":y==="-hour"?"":""]}),o.jsx("th",{className:"px-4 py-2",children:"Tip"}),o.jsx("th",{className:"px-4 py-2",children:"Dat/Zi"}),o.jsx("th",{className:"px-4 py-2 text-center",children:"Anulat offline"}),o.jsx("th",{className:"px-4 py-2 text-center",children:"Anulat online"}),o.jsx("th",{className:"px-4 py-2 text-center",children:"Aciuni"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(R=>o.jsxs("tr",{className:R.disable_run?"bg-red-50":"",children:[o.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:R.route_name}),o.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:E(R.direction,R.hour)}),o.jsx("td",{className:"px-4 py-2 capitalize",children:R.rule_type}),o.jsxs("td",{className:"px-4 py-2",children:[R.rule_type==="date"&&R.exception_date,R.rule_type==="weekday"&&N[R.weekday],R.rule_type==="permanent"&&"Permanent"]}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-red-600",checked:R.disable_run,onChange:()=>B(R,"disable_run"),"aria-label":"Anulat offline"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-amber-500",checked:R.disable_online,onChange:()=>B(R,"disable_online"),"aria-label":"Anulat online"})}),o.jsx("td",{className:"px-4 py-2 text-center",children:o.jsx("button",{onClick:()=>Z(R),className:"text-red-600 hover:underline",children:"terge"})})]},R.id))})]})})]})}const rp=[{value:"microbuz",label:"Microbuz"},{value:"autocar",label:"Autocar"}],D3=[{value:"empty",label:"Gol (configurez manual)"},{value:"microbus_2x1_20",label:"Microbuz 2+1 (20 locuri, cu ofer/ghid)"},{value:"coach_2x2_51",label:"Autocar 2+2 (51 locuri, cu ofer/ghid)"},{value:"copy_other",label:"Copiaz layout de la alt main"}];function Xr({label:e,children:t}){return o.jsxs("label",{className:"block mb-3",children:[o.jsx("span",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),t]})}function Ya(e){return o.jsx("input",{...e,className:"w-full rounded-lg border border-gray-300 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500 "+(e.className||"")})}function yi(e){return o.jsx("select",{...e,className:"w-full rounded-lg border border-gray-300 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500 "+(e.className||"")})}function R3(){const[e,t]=f.useState([]),[r,i]=f.useState(!1),[s,u]=f.useState(""),[d,m]=f.useState([]),[h,p]=f.useState(""),[g,b]=f.useState(""),[w,S]=f.useState(!1),[y,j]=f.useState({name:"",plate_number:"",type:"",operator_id:"",seat_count:"",template:"empty"}),[N,E]=f.useState(null),[_,M]=f.useState(null),[O,C]=f.useState(!1),[L,B]=f.useState([]),[Z,R]=f.useState(!1),[X,te]=f.useState(""),[xe,Pe]=f.useState(!1),[ve,se]=f.useState(0),[V,F]=f.useState(0),[Y,z]=f.useState(null),T=I=>I.id??I._tmpId;function P(I){const oe=Math.min(...I.filter(ae=>!ae._delete).map(ae=>Number(ae.row)).filter(ae=>Number.isFinite(ae)),1),he=Math.max(...I.filter(ae=>!ae._delete).map(ae=>Number(ae.row)).filter(ae=>Number.isFinite(ae)),1),_e=Math.max(...I.filter(ae=>!ae._delete).map(ae=>Number(ae.seat_col)).filter(ae=>Number.isFinite(ae)),1);return{minRow:oe,maxRow:he,cols:_e}}function A(I,oe,he){return I.some(_e=>!_e._delete&&Number(_e.row)===oe&&Number(_e.seat_col)===he)}function H(I){const{minRow:oe,maxRow:he,cols:_e}=P(I),ae=he;for(let fe=1;fe<=Math.max(_e,1);fe++)if(!A(I,ae,fe))return{row:ae,col:fe};return{row:he+1,col:1}}function U(I,oe,he,_e=1){let{minRow:ae,maxRow:fe,cols:ne}=P(I),Xe=oe,Je=he;for(;;){if(!A(I,Xe,Je))return{row:Xe,col:Je};Je+=_e,Je<1&&(Xe=Math.max(ae,Xe-1),Je=ne),Je>ne&&(Xe+=1,Je=1,fe=Math.max(fe,Xe))}}f.useEffect(()=>{W()},[]),f.useEffect(()=>{ue()},[h,g]);async function W(){try{const I=await fetch("/api/operators");if(!I.ok)throw new Error(`HTTP ${I.status}`);const oe=await I.json();m(Array.isArray(oe)?oe:[])}catch(I){console.error(I)}}async function ue(){try{i(!0),u("");const I=new URLSearchParams;h&&I.set("operator_id",h),g&&I.set("type",g);const oe=`/api/vehicles${I.toString()?"?"+I:""}`,he=await fetch(oe);if(!he.ok)throw new Error(`HTTP ${he.status}`);const _e=await he.json();t(Array.isArray(_e)?_e:[])}catch(I){console.error(I),u("Nu am putut ncrca lista de maini.")}finally{i(!1)}}const Ee=()=>{var _e;if(!e.length){alert("Nu exist maini de exportat pentru filtrele curente.");return}const I=["Nume","Nr. nmatr.","Tip","Operator","Locuri"],oe=e.map(ae=>{var Xe;const fe=ae.operator_name??((Xe=d.find(Je=>Je.id===ae.operator_id))==null?void 0:Xe.name)??"";return`<tr>${[ae.name??"",ae.plate_number??"",ae.type??"",fe,ae.seat_count??""].map(Je=>`<td>${pr(Je)}</td>`).join("")}</tr>`}).join(""),he=`
            <table style="margin-bottom:12px;width:auto;">
                <tr>
                    <td>Export maini</td>
                    <td>${pr(ru())}</td>
                </tr>
                ${h?`<tr><td>Operator filtrat</td><td>${pr(((_e=d.find(ae=>String(ae.id)===String(h)))==null?void 0:_e.name)||h)}</td></tr>`:""}
                ${g?`<tr><td>Tip filtrat</td><td>${pr(g)}</td></tr>`:""}
            </table>
        `;au({filenameBase:"administrare-masini",headingHtml:he,tableHtml:`<table><tr>${I.map(ae=>`<th>${pr(ae)}</th>`).join("")}</tr>${oe}</table>`})};async function be(I){E(I),M(null),B([]),se(0),F(0),te("");try{const oe=await fetch(`/api/vehicles/${I}`);if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const he=await oe.json();M(he);const _e=await fetch(`/api/vehicles/${I}/seats`);if(!_e.ok)throw new Error(`HTTP ${_e.status}`);const ae=await _e.json(),fe=(Array.isArray(ae)?ae:[]).map(ne=>({...ne,_tmpId:ne._tmpId||ne.id||`tmp_${Date.now()}_${Math.random().toString(36).slice(2,7)}`}));B(fe)}catch(oe){console.error(oe),u("Nu am putut ncrca editorul pentru aceast main.")}}async function Be(){if(_!=null&&_.id){if(!X){alert("Selecteaz maina surs pentru copiere.");return}if(Number(X)===Number(_.id)){alert("Selecteaz alt main dect cea curent.");return}Pe(!0),u("");try{const I=await fetch(`/api/vehicles/${X}/seats`);if(!I.ok)throw new Error(`HTTP ${I.status}`);const oe=await I.json();if(!Array.isArray(oe)||oe.length===0){alert("Maina selectat nu are locuri definite.");return}const he=Date.now(),_e=oe.map((ae,fe)=>({...ae,id:void 0,vehicle_id:_.id,_delete:!1,_tmpId:`copy_${he}_${fe}_${Math.random().toString(36).slice(2,7)}`}));B(ae=>[...ae.filter(fe=>fe.id).map(fe=>({...fe,_delete:!0})),..._e])}catch(I){console.error(I),u("Nu am putut copia layoutul de la maina selectat.")}finally{Pe(!1)}}}async function Te(){if(_!=null&&_.id){C(!0),u("");try{const I=await fetch(`/api/vehicles/${_.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:_.name??"",seat_count:_.seat_count??null,type:_.type??"",plate_number:_.plate_number??"",operator_id:_.operator_id??null})});if(!I.ok)throw new Error(`HTTP ${I.status}`);await ue()}catch(I){console.error(I),u("Nu am putut salva detaliile mainii.")}finally{C(!1)}}}async function Ge(I){if(window.confirm("Sigur tergi aceast main? Operaia nu poate fi anulat."))try{const oe=await fetch(`/api/vehicles/${I}`,{method:"DELETE"});if(!oe.ok){const he=await oe.json().catch(()=>({}));oe.status===409?alert(he.error||"Maina este folosit pe curse i nu poate fi tears."):alert(he.error||`Eroare la tergere (HTTP ${oe.status})`);return}N===I&&(E(null),M(null),B([])),await ue()}catch(oe){console.error(oe),alert("Eroare la tergerea vehiculului.")}}async function ge(){if(_!=null&&_.id){R(!0),u("");try{for(const ae of L)if(!ae._delete&&(ae.row==null||ae.seat_col==null)){R(!1),u("Toate locurile trebuie s aib rnd i coloan.");return}const I=await fetch(`/api/vehicles/${_.id}/seats/bulk`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!I.ok)throw new Error(`HTTP ${I.status}`);const he=await(await fetch(`/api/vehicles/${_.id}/seats`)).json(),_e=(Array.isArray(he)?he:[]).map(ae=>({...ae,_tmpId:ae._tmpId||ae.id||`tmp_${Date.now()}_${Math.random().toString(36).slice(2,7)}`}));B(_e),await ue()}catch(I){console.error(I),u("Nu am putut salva layoutul locurilor.")}finally{R(!1)}}}function Ke(I){const oe=I.map(_e=>Number(String(_e.label).trim())).filter(_e=>Number.isFinite(_e)),he=oe.length?Math.max(...oe)+1:1;return String(he)}function le(){const I=Ke(L),oe=H(L);B(he=>[...he,{vehicle_id:_==null?void 0:_.id,seat_number:null,position:null,row:oe.row,seat_col:oe.col,is_available:1,label:I,seat_type:"normal",pair_id:null,_tmpId:`tmp_${Date.now()}_${Math.random().toString(36).slice(2,7)}`}])}function ce(I,oe){if(A(L,I,oe))return;const he=Ke(L);B(_e=>[..._e,{vehicle_id:_==null?void 0:_.id,seat_number:null,position:null,row:I,seat_col:oe,is_available:1,label:he,seat_type:"normal",pair_id:null,_tmpId:`tmp_${Date.now()}_${Math.random().toString(36).slice(2,7)}`}])}function K(I,oe){B(he=>he.map(_e=>T(_e)===I?{..._e,...oe}:_e))}function Ae(I){B(oe=>oe.flatMap(he=>T(he)!==I?[he]:he.id?[{...he,_delete:!he._delete}]:[]))}function Se(I,oe){const he=[];let _e=1;const ae=(fe,ne,Xe="normal",Je=null)=>{he.push({vehicle_id:oe,row:fe,seat_col:ne,seat_number:null,position:null,is_available:1,label:Je??String(_e++),seat_type:Xe,pair_id:null})};if(ae(0,1,"driver","ofer"),ae(0,3,"guide","Ghid"),I==="empty")return he;if(I==="microbus_2x1_20"){for(let fe=1;fe<=6;fe++)ae(fe,1),ae(fe,2),ae(fe,4);return ae(7,1),ae(7,4),he}if(I==="coach_2x2_51"){for(let fe=1;fe<=12;fe++)ae(fe,1),ae(fe,2),ae(fe,4),ae(fe,5);return ae(13,1),ae(13,2),ae(13,4),he}return he}const De=f.useMemo(()=>P(L),[L]),Ze=De.maxRow-De.minRow+1+ve,Ve=Math.max(1,De.cols)+V;return o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Administrare  Maini"}),o.jsxs("div",{className:"mb-6 rounded-2xl border border-gray-200 p-4 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsx(Xr,{label:"Operator",children:o.jsxs(yi,{value:h,onChange:I=>p(I.target.value),children:[o.jsx("option",{value:"",children:"Toi"}),d.map(I=>o.jsx("option",{value:I.id,children:I.name},I.id))]})}),o.jsx(Xr,{label:"Tip",children:o.jsxs(yi,{value:g,onChange:I=>b(I.target.value),children:[o.jsx("option",{value:"",children:"Toate"}),rp.map(I=>o.jsx("option",{value:I.value,children:I.label},I.value))]})}),o.jsx("button",{className:"ml-auto rounded-xl bg-gray-100 hover:bg-gray-200 px-4 py-2",onClick:ue,children:"Rencarc"}),o.jsx("button",{className:"rounded-xl bg-emerald-600 text-white px-4 py-2 hover:bg-emerald-700 disabled:opacity-60 disabled:cursor-not-allowed",onClick:Ee,disabled:!e.length,children:"Export Excel"}),o.jsx("button",{className:"rounded-xl bg-blue-600 text-white px-4 py-2 hover:bg-blue-700",onClick:()=>S(!0),children:"Adaug main"})]}),r?o.jsx("div",{className:"text-gray-500",children:"Se ncarc lista"}):s?o.jsx("div",{className:"text-red-600",children:s}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-gray-600",children:[o.jsx("th",{className:"py-2 pr-4",children:"Nume"}),o.jsx("th",{className:"py-2 pr-4",children:"Nr. nmatr."}),o.jsx("th",{className:"py-2 pr-4",children:"Tip"}),o.jsx("th",{className:"py-2 pr-4",children:"Operator"}),o.jsx("th",{className:"py-2 pr-4",children:"Locuri"}),o.jsx("th",{className:"py-2"})]})}),o.jsxs("tbody",{children:[e.map(I=>{var oe;return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"py-2 pr-4",children:I.name}),o.jsx("td",{className:"py-2 pr-4",children:I.plate_number}),o.jsx("td",{className:"py-2 pr-4 capitalize",children:I.type}),o.jsx("td",{className:"py-2 pr-4",children:I.operator_name??((oe=d.find(he=>he.id===I.operator_id))==null?void 0:oe.name)??"-"}),o.jsx("td",{className:"py-2 pr-4",children:I.seat_count}),o.jsx("td",{className:"py-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-xl bg-blue-600 text-white px-3 py-1.5 hover:bg-blue-700",onClick:()=>be(I.id),children:"Editeaz"}),o.jsx("button",{className:"rounded-xl bg-red-600 text-white px-3 py-1.5 hover:bg-red-700",onClick:()=>Ge(I.id),children:"terge"})]})})]},I.id)}),e.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"py-4 text-gray-500",children:"Nu exist maini pentru filtrul selectat."})})]})]})})]}),w&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[999]",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 w-full max-w-xl",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Adaug main"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsx(Xr,{label:"Nume",children:o.jsx(Ya,{value:y.name,onChange:I=>j({...y,name:I.target.value})})}),o.jsx(Xr,{label:"Numr nmatriculare",children:o.jsx(Ya,{value:y.plate_number,onChange:I=>j({...y,plate_number:I.target.value})})}),o.jsx(Xr,{label:"Tip",children:o.jsxs(yi,{value:y.type,onChange:I=>j({...y,type:I.target.value}),children:[o.jsx("option",{value:"",children:""}),rp.map(I=>o.jsx("option",{value:I.value,children:I.label},I.value))]})}),o.jsx(Xr,{label:"Operator",children:o.jsxs(yi,{value:y.operator_id,onChange:I=>j({...y,operator_id:I.target.value}),children:[o.jsx("option",{value:"",children:""}),d.map(I=>o.jsx("option",{value:I.id,children:I.name},I.id))]})}),o.jsx(Xr,{label:"Nr. locuri (informativ)",children:o.jsx(Ya,{type:"number",value:y.seat_count,onChange:I=>j({...y,seat_count:I.target.value})})}),o.jsxs(Xr,{label:"ablon locuri",children:[o.jsx(yi,{value:y.template,onChange:I=>j({...y,template:I.target.value}),children:D3.map(I=>o.jsx("option",{value:I.value,children:I.label},I.value))}),y.template==="copy_other"&&o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Alege maina surs"}),o.jsxs("select",{value:y.copyFromId||"",onChange:I=>j(oe=>({...oe,copyFromId:I.target.value})),className:"border rounded-lg px-2 py-1 w-full",children:[o.jsx("option",{value:"",children:"Selecteaz o main existent"}),e.map(I=>o.jsxs("option",{value:I.id,children:[I.name," (",I.plate_number,")"]},I.id))]})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"rounded-xl bg-gray-100 px-4 py-2",onClick:()=>S(!1),children:"Anuleaz"}),o.jsx("button",{className:"rounded-xl bg-green-600 text-white px-4 py-2",onClick:de,children:"Creeaz"})]})]})}),N&&_&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"rounded-2xl border border-gray-200 p-4 shadow-sm bg-white",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Detalii vehicul"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsx(Xr,{label:"Nume",children:o.jsx(Ya,{value:_.name||"",onChange:I=>M({..._,name:I.target.value})})}),o.jsx(Xr,{label:"Numr nmatriculare",children:o.jsx(Ya,{value:_.plate_number||"",onChange:I=>M({..._,plate_number:I.target.value})})}),o.jsx(Xr,{label:"Tip",children:o.jsxs(yi,{value:_.type||"",onChange:I=>M({..._,type:I.target.value}),children:[o.jsx("option",{value:"",children:""}),rp.map(I=>o.jsx("option",{value:I.value,children:I.label},I.value))]})}),o.jsx(Xr,{label:"Operator",children:o.jsxs(yi,{value:_.operator_id||"",onChange:I=>M({..._,operator_id:I.target.value?Number(I.target.value):null}),children:[o.jsx("option",{value:"",children:""}),d.map(I=>o.jsx("option",{value:I.id,children:I.name},I.id))]})}),o.jsx(Xr,{label:"Locuri (informativ)",children:o.jsx(Ya,{type:"number",value:_.seat_count??"",onChange:I=>M({..._,seat_count:Number(I.target.value)||null})})})]}),o.jsx("div",{className:"mt-4 flex gap-3",children:o.jsx("button",{onClick:Te,disabled:O,className:"rounded-xl bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 disabled:opacity-60",children:O?"Se salveaz":"Salveaz detalii"})})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-200 p-4 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Layout locuri"}),o.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(yi,{value:X,onChange:I=>te(I.target.value),className:"min-w-[220px]",children:[o.jsx("option",{value:"",children:"Copiaz layout de la"}),e.filter(I=>I.id!==(_==null?void 0:_.id)).map(I=>o.jsxs("option",{value:I.id,children:[I.name," (",I.plate_number,")"]},I.id))]}),o.jsx("button",{onClick:Be,disabled:!X||xe,className:"rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200 disabled:opacity-60",children:xe?"Se copiaz":"Copiaz layout"})]}),o.jsx("button",{onClick:()=>F(I=>I+1),className:"rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200",children:"+ Coloan dreapta"}),o.jsx("button",{onClick:()=>se(I=>I+1),className:"rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200",children:"+ Rnd jos"}),o.jsx("button",{onClick:le,className:"rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200",children:"+ Adaug loc"}),o.jsx("button",{onClick:ge,disabled:Z,className:"rounded-xl bg-green-600 text-white px-4 py-2 hover:bg-green-700 disabled:opacity-60",children:Z?"Se salveaz":"Salveaz layout"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"bg-gray-50 rounded-2xl p-4 overflow-auto",style:{border:"1px solid #e5e7eb"},children:o.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${Ve}, minmax(44px, 1fr))`},children:Array.from({length:Ze*Ve}).map((I,oe)=>{const he=Math.floor(oe/Ve),_e=De.minRow+he,ae=oe%Ve+1,fe=L.find(Je=>Number(Je.row)===_e&&Number(Je.seat_col)===ae&&!Je._delete);if(!fe)return o.jsx("div",{onDragOver:Je=>Je.preventDefault(),onDrop:()=>{Y&&(A(L,_e,ae)||K(Y,{row:_e,seat_col:ae}),z(null))},className:"h-11 rounded-lg bg-transparent border border-dashed border-gray-300 hover:border-blue-400 hover:bg-blue-50 transition",title:`Adaug loc la r${_e} c${ae}`,onClick:()=>ce(_e,ae)},`empty_${_e}_${ae}`);const ne=fe.seat_type==="driver"||String(fe.label||"").toLowerCase().includes("ofer")||String(fe.label||"").toLowerCase().includes("sofer"),Xe=fe.seat_type==="guide"||String(fe.label||"").toLowerCase().includes("ghid");return o.jsx("div",{draggable:!0,onDragStart:()=>z(T(fe)),onDragEnd:()=>z(null),title:`r${_e} c${ae}`,className:`h-11 rounded-lg flex items-center justify-center text-sm font-semibold select-none
                          ${fe._delete?"bg-red-100 text-red-600 border border-red-300":ne?"bg-gray-700 text-white":Xe?"bg-slate-500 text-white":"bg-emerald-500 text-white"}`,children:fe.label||`${_e}:${ae}`},`${T(fe)}_${oe}`)})})}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Rndul 0 (sus) este pentru ofer/Ghid. Poi trage un loc n alt celul liber sau poi da click pe o celul liber ca s adaugi acolo."})]}),o.jsx("div",{className:"overflow-auto max-h-[420px] border rounded-xl",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:o.jsxs("tr",{className:"text-left text-gray-600",children:[o.jsx("th",{className:"py-2 px-3",children:"Label"}),o.jsx("th",{className:"py-2 px-3",children:"Tip"}),o.jsx("th",{className:"py-2 px-3",children:"Rnd"}),o.jsx("th",{className:"py-2 px-3",children:"Coloan"}),o.jsx("th",{className:"py-2 px-3",children:"Pair ID"}),o.jsx("th",{className:"py-2 px-3"})]})}),o.jsxs("tbody",{children:[L.slice().sort((I,oe)=>I.row-oe.row||I.seat_col-oe.seat_col||String(I.label).localeCompare(String(oe.label))).map(I=>{const oe=T(I);return o.jsxs("tr",{className:`border-t ${I._delete?"bg-red-50":""}`,children:[o.jsx("td",{className:"py-1.5 px-3",children:o.jsx(Ya,{value:I.label??"",onChange:he=>K(oe,{label:he.target.value})})}),o.jsx("td",{className:"py-1.5 px-3",children:o.jsxs(yi,{value:I.seat_type||"normal",onChange:he=>K(oe,{seat_type:he.target.value}),children:[o.jsx("option",{value:"normal",children:"norm."}),o.jsx("option",{value:"driver",children:"driver"}),o.jsx("option",{value:"guide",children:"guide"}),o.jsx("option",{value:"foldable",children:"foldable"}),o.jsx("option",{value:"wheelchair",children:"wheelchair"})]})}),o.jsx("td",{className:"py-1.5 px-3 w-36",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>{const he=L.filter(ae=>T(ae)!==oe),_e=U(he,(I.row??0)-1,I.seat_col,-1);K(oe,{row:_e.row})},children:""}),o.jsx(Ya,{type:"number",value:I.row??"",onChange:he=>K(oe,{row:Number(he.target.value)||0}),onBlur:()=>{const he=L.filter(fe=>T(fe)!==oe),_e=Number(I.row)||0,ae=Number(I.seat_col)||1;if(A(he,_e,ae)){const fe=U(he,_e,ae,1);K(oe,{row:fe.row,seat_col:fe.col})}}}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>{const he=L.filter(ae=>T(ae)!==oe),_e=U(he,(I.row??0)+1,I.seat_col,1);K(oe,{row:_e.row})},children:""})]})}),o.jsx("td",{className:"py-1.5 px-3 w-36",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>{const he=Math.max(1,(I.seat_col||1)-1),_e=L.filter(fe=>T(fe)!==oe),ae=U(_e,I.row??0,he,-1);K(oe,{row:ae.row,seat_col:ae.col})},children:""}),o.jsx(Ya,{type:"number",value:I.seat_col??"",onChange:he=>K(oe,{seat_col:Number(he.target.value)||0}),onBlur:()=>{const he=L.filter(fe=>T(fe)!==oe),_e=Number(I.row)||0,ae=Number(I.seat_col)||1;if(A(he,_e,ae)){const fe=U(he,_e,ae,1);K(oe,{row:fe.row,seat_col:fe.col})}}}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>{const he=L.filter(ae=>T(ae)!==oe),_e=U(he,I.row??0,(I.seat_col||1)+1,1);K(oe,{row:_e.row,seat_col:_e.col})},children:""})]})}),o.jsx("td",{className:"py-1.5 px-3 w-28",children:o.jsx(Ya,{type:"number",value:I.pair_id??"",onChange:he=>K(oe,{pair_id:Number(he.target.value)||null})})}),o.jsx("td",{className:"py-1.5 px-3",children:o.jsx("button",{className:`rounded-lg px-3 py-1.5 text-sm ${I._delete?"bg-gray-200":"bg-red-600 text-white hover:bg-red-700"}`,onClick:()=>Ae(oe),children:I._delete?"Anuleaz":"terge"})})]},oe)}),L.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"py-4 px-3 text-gray-500",children:"Nu exist locuri. Apas + Adaug loc."})})]})]})})]})]})]});async function de(){try{if(!y.name||!y.type){alert("Completeaz Nume i Tip.");return}const I={name:y.name,plate_number:y.plate_number||"",type:y.type,operator_id:y.operator_id?Number(y.operator_id):null,seat_count:y.seat_count?Number(y.seat_count):null},oe=await fetch("/api/vehicles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!oe.ok){alert("Nu am putut crea maina. Verific backend-ul pentru POST /api/vehicles.");return}const he=await oe.json(),_e=(he==null?void 0:he.id)??(he==null?void 0:he.insertId)??null;if(!_e){alert("Nu am primit ID-ul noii maini de la server.");return}if(y.template==="copy_other"&&y.copyFromId){console.log("Copiere layout de la vehicul:",y.copyFromId);const fe=await(await fetch(`/api/vehicles/${y.copyFromId}/seats`)).json();if(Array.isArray(fe)&&fe.length>0){const ne=fe.map(Je=>({...Je,id:void 0,vehicle_id:_e}));(await fetch(`/api/vehicles/${_e}/seats/bulk`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)})).ok||alert("Nu s-a putut copia layoutul.")}}else if(y.template!=="empty"){const ae=Se(y.template,_e);await fetch(`/api/vehicles/${_e}/seats/bulk`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)})}S(!1),j({name:"",plate_number:"",type:"",operator_id:"",seat_count:"",template:"empty",copyFromId:""}),await ue(),await be(_e)}catch(I){console.error(I),alert("Eroare la crearea mainii.")}}}function P3(){const[e,t]=f.useState([]),[r,i]=f.useState([]),[s,u]=f.useState(!0);f.useEffect(()=>{let h=!0;return(async()=>{try{const[p,g]=await Promise.all([fetch("/api/routes").then(S=>S.json()),fetch("/api/user/route-order",{credentials:"include"}).then(S=>S.json())]);if(!h)return;const b={};(Array.isArray(g)?g:[]).forEach(S=>{b[S.route_id]=S.position_idx});const w=[...p].sort((S,y)=>{const j=b[S.id]??1/0,N=b[y.id]??1/0;return j!==N?j-N:S.name.localeCompare(y.name)});t(w),i(w.map((S,y)=>({route_id:S.id,position_idx:y+1})))}catch(p){console.error(p)}finally{h&&u(!1)}})(),()=>{h=!1}},[]);const d=(h,p)=>{i(g=>{const b=[...g],w=p==="up"?h-1:h+1;return w<0||w>=b.length||([b[h],b[w]]=[b[w],b[h]],b.forEach((S,y)=>S.position_idx=y+1)),b}),t(g=>{const b=[...g],w=p==="up"?h-1:h+1;return w<0||w>=b.length||([b[h],b[w]]=[b[w],b[h]]),b})},m=async()=>{try{await fetch("/api/user/route-order",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({order:r})}),alert("Salvat!")}catch(h){console.error(h),alert("Eroare la salvare.")}};return s?o.jsx("div",{children:"Se ncarc"}):o.jsxs("div",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Preferine utilizator"}),o.jsxs("div",{className:"p-3 bg-white rounded shadow",children:[o.jsx("div",{className:"text-sm mb-2",children:"Ordinea rutelor (se aplic n pagina de rezervri doar pentru utilizatorul curent):"}),o.jsx("ul",{className:"space-y-1",children:e.map((h,p)=>o.jsxs("li",{className:"flex items-center justify-between border rounded px-2 py-1",children:[o.jsxs("div",{className:"truncate",children:[p+1,". ",h.name]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-2 py-1 border rounded text-xs",onClick:()=>d(p,"up"),disabled:p===0,title:"Mut n sus",children:""}),o.jsx("button",{className:"px-2 py-1 border rounded text-xs",onClick:()=>d(p,"down"),disabled:p===e.length-1,title:"Mut n jos",children:""})]})]},h.id))}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded",onClick:m,children:"Salveaz ordinea"})})]}),o.jsxs("div",{className:"p-3 bg-white rounded shadow",children:[o.jsx("div",{className:"text-sm mb-2",children:"Preferine UI (exemplu  de extins pe viitor):"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Dark mode, culori diagram etc. vor aprea aici cnd decizi."})]})]})}function z3(){const[e,t]=f.useState(!0),[r,i]=f.useState(!1),[s,u]=f.useState(""),[d,m]=f.useState(""),[h,p]=f.useState("");f.useEffect(()=>{let b=!1;return(async()=>{try{const S=await fetch("/api/fiscal-settings");if(!S.ok)throw new Error("Nu s-au putut ncrca setrile fiscale");const y=await S.json().catch(()=>({}));b||u(typeof(y==null?void 0:y.receipt_note)=="string"?y.receipt_note:"")}catch(S){console.error(S),b||m(S.message||"Nu s-au putut ncrca setrile fiscale")}finally{b||t(!1)}})(),()=>{b=!0}},[]);const g=async b=>{b.preventDefault(),i(!0),m(""),p("");try{const w=await fetch("/api/fiscal-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({receipt_note:s})});if(!w.ok){const S=await w.json().catch(()=>({}));throw new Error((S==null?void 0:S.error)||"Nu s-au putut salva setrile")}p("Setrile au fost salvate.")}catch(w){console.error(w),m(w.message||"Nu s-au putut salva setrile")}finally{i(!1)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Setri fiscalizare"}),e?o.jsx("div",{children:"Se ncarc"}):o.jsxs("form",{onSubmit:g,className:"bg-white rounded shadow p-4 space-y-4 max-w-xl",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"receipt-note",className:"block text-sm font-medium text-gray-700",children:"Text implicit pe bon fiscal"}),o.jsx("input",{id:"receipt-note",type:"text",className:"mt-1 block w-full border rounded px-3 py-2 text-sm",placeholder:"ex: Bilet Botoani  Iai (Agent: nume)",value:s,maxLength:120,onChange:b=>u(b.target.value)}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Acest text se adaug la descrierea tiprit pe bonul fiscal."})]}),d&&o.jsx("div",{className:"text-sm text-red-600",children:d}),h&&o.jsx("div",{className:"text-sm text-green-600",children:h}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-60",disabled:r,children:r?"Se salveaz":"Salveaz setrile"})]})]})}const ps=60,Zs=24,Yc=365,qd=Yc*Zs*ps;function kg(e,t){const r=Math.max(0,Math.min(Yc,Math.floor(Number(e)||0))),i=r>=Yc?0:Zs-1,s=Math.max(0,Math.min(i,Math.floor(Number(t)||0)));return{days:r,hours:s}}function ap(e){const t=Math.max(0,Math.floor(Number(e)||0));if(t<=0)return{days:0,hours:0};const r=Math.min(t,qd),i=Math.floor(r/(Zs*ps)),s=r-i*Zs*ps,u=Math.floor(s/ps);return kg(i,u)}function $3(e,t){const{days:r,hours:i}=kg(e,t);return r*Zs*ps+i*ps}const Lc={blockPastReservations:!0,publicMinNoticeMinutes:0,publicMaxAdvanceMinutes:0};function U3(e){const t=Number(e)||0;if(t<=0)return"Imediat";if(t%60===0){const r=t/60;return`${r} ${r===1?"or":"ore"}`}return`${t} minute`}function I3(){const[e,t]=f.useState(!0),[r,i]=f.useState(!1),[s,u]=f.useState(""),[d,m]=f.useState(""),[h,p]=f.useState(Lc),[g,b]=f.useState(Lc),[w,S]=f.useState(()=>ap(Lc.publicMaxAdvanceMinutes));f.useEffect(()=>{let M=!0;return t(!0),u(""),fetch("/api/online-settings",{credentials:"include"}).then(O=>{if(!O.ok)throw new Error("Nu am putut ncrca setrile.");return O.json()}).then(O=>{if(!M)return;const C=(()=>{if((O==null?void 0:O.publicMaxAdvanceMinutes)!=null)return Math.max(0,Math.min(qd,Math.floor(Number(O.publicMaxAdvanceMinutes))||0));if((O==null?void 0:O.publicMaxDaysAhead)!=null){const B=Math.floor(Number(O.publicMaxDaysAhead)||0)*Zs*ps;return Math.max(0,Math.min(qd,B))}return Lc.publicMaxAdvanceMinutes})(),L={blockPastReservations:!!(O!=null&&O.blockPastReservations),publicMinNoticeMinutes:Number(O==null?void 0:O.publicMinNoticeMinutes)||0,publicMaxAdvanceMinutes:C};p(L),b(L),S(ap(C))}).catch(O=>{M&&u((O==null?void 0:O.message)||"Nu am putut ncrca setrile.")}).finally(()=>{M&&t(!1)}),()=>{M=!1}},[]);const y=f.useMemo(()=>g.blockPastReservations!==h.blockPastReservations||g.publicMinNoticeMinutes!==h.publicMinNoticeMinutes||g.publicMaxAdvanceMinutes!==h.publicMaxAdvanceMinutes,[g,h]),j=M=>{b(O=>({...O,blockPastReservations:M.target.checked}))},N=M=>O=>{const C=Number(O.target.value);b(L=>({...L,[M]:Number.isFinite(C)?Math.max(0,C):0}))},E=M=>O=>{const C=Number(O.target.value);S(L=>{const B={days:M==="days"?C:L.days,hours:M==="hours"?C:L.hours},Z=kg(B.days,B.hours),R=$3(Z.days,Z.hours);return b(X=>({...X,publicMaxAdvanceMinutes:R})),Z})},_=async M=>{M.preventDefault(),i(!0),u(""),m("");try{const O=await fetch("/api/online-settings",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(g)});if(!O.ok){const R=await O.json().catch(()=>({}));throw new Error((R==null?void 0:R.error)||"Nu am putut salva setrile.")}const C=await O.json().catch(()=>null),L=(C==null?void 0:C.settings)||g,B=(L==null?void 0:L.publicMaxAdvanceMinutes)!=null?Math.floor(Number(L.publicMaxAdvanceMinutes)||0):(L==null?void 0:L.publicMaxDaysAhead)!=null?Math.floor(Number(L.publicMaxDaysAhead)||0)*Zs*ps:Lc.publicMaxAdvanceMinutes,Z={blockPastReservations:!!L.blockPastReservations,publicMinNoticeMinutes:Number(L.publicMinNoticeMinutes)||0,publicMaxAdvanceMinutes:Math.max(0,Math.min(qd,B))};p(Z),b(Z),S(ap(Z.publicMaxAdvanceMinutes)),m("Setrile au fost salvate."),setTimeout(()=>m(""),3e3)}catch(O){u((O==null?void 0:O.message)||"Nu am putut salva setrile.")}finally{i(!1)}};return o.jsxs("div",{className:"max-w-2xl",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Setri rezervri online"}),e&&o.jsx("div",{children:"Se ncarc setrile"}),!e&&o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("input",{id:"blockPastReservations",type:"checkbox",className:"mt-1",checked:g.blockPastReservations,onChange:j}),o.jsxs("label",{htmlFor:"blockPastReservations",className:"flex-1",children:[o.jsx("span",{className:"font-medium",children:"Blocheaz rezervrile pentru curse din trecut"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Atunci cnd este activ, curselor care au plecat deja nu li se mai pot aduga rezervri noi din aplicaia intern sau din site-ul public."})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"publicMinNoticeMinutes",className:"block font-medium",children:"nchide rezervrile online nainte de plecare"}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Specific numrul de minute nainte de plecare dup care rezervrile online nu mai sunt permise. Valoarea 0 nseamn c se pot face rezervri pn la plecare."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{id:"publicMinNoticeMinutes",type:"number",min:0,max:20160,value:g.publicMinNoticeMinutes,onChange:N("publicMinNoticeMinutes"),className:"w-32 rounded border border-gray-300 px-2 py-1"}),o.jsx("span",{className:"text-sm text-gray-500",children:U3(g.publicMinNoticeMinutes)})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"publicMaxAdvanceDays",className:"block font-medium",children:"Permite rezervri online cu cel mult  zile i ore n avans"}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Seteaz 0 zile i 0 ore pentru a permite rezervri pentru orice dat disponibil."}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{id:"publicMaxAdvanceDays",type:"number",min:0,max:Yc,value:w.days,onChange:E("days"),className:"w-24 rounded border border-gray-300 px-2 py-1"}),o.jsx("span",{className:"text-sm text-gray-600",children:"zile"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{id:"publicMaxAdvanceHours",type:"number",min:0,max:23,value:w.hours,onChange:E("hours"),disabled:w.days>=Yc,className:"w-24 rounded border border-gray-300 px-2 py-1 disabled:opacity-50 disabled:cursor-not-allowed"}),o.jsx("span",{className:"text-sm text-gray-600",children:"ore"})]})]})]}),s&&o.jsx("div",{className:"text-red-600",children:s}),d&&o.jsx("div",{className:"text-green-600",children:d}),o.jsx("button",{type:"submit",disabled:r||!y,className:"rounded bg-blue-600 px-4 py-2 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Se salveaz":"Salveaz setrile"})]})]})}function V3(e){if(!e)return"";const t=[e.departure||"00:00"];return e.direction&&t.push(e.direction),e.operator_name?t.push(`(${e.operator_name})`):e.operator_id&&t.push(`(operator #${e.operator_id})`),t.join("  ")}function B3({seat:e,blocked:t,onToggle:r,positionStyle:i}){const s=e.label||e.seat_number||`#${e.id}`,u=e.seat_type==="driver"||e.seat_type==="guide",d=["px-3 py-2 rounded-lg border text-sm flex flex-col gap-1 items-start",t?"bg-red-50 border-red-400 text-red-700":"bg-gray-50 border-gray-300 text-gray-700",u?"opacity-50 cursor-not-allowed":"hover:bg-indigo-50 hover:border-indigo-400 hover:text-indigo-700 cursor-pointer"].join(" ");return o.jsxs("button",{type:"button",className:d,onClick:()=>!u&&r(e),disabled:u,style:i,children:[o.jsx("span",{className:"font-medium",children:s}),o.jsxs("span",{className:"text-xs text-gray-500",children:["rnd ",e.row??"-",", col ",e.seat_col??"-",e.seat_type&&e.seat_type!=="normal"&&`  ${e.seat_type}`]}),t&&o.jsx("span",{className:"text-xs text-red-600",children:"Blocat online"}),u&&o.jsx("span",{className:"text-xs",children:"Loc de serviciu"})]})}function H3(){const[e,t]=f.useState([]),[r,i]=f.useState(!0),[s,u]=f.useState(""),[d,m]=f.useState([]),[h,p]=f.useState(!1),[g,b]=f.useState(""),[w,S]=f.useState([]),[y,j]=f.useState(!1),[N,E]=f.useState(""),[_,M]=f.useState(!1),[O,C]=f.useState(""),[L,B]=f.useState([]),[Z,R]=f.useState(new Set),[X,te]=f.useState(!1),[xe,Pe]=f.useState(""),ve=f.useMemo(()=>{if(!L||L.length===0)return null;let z=null,T=null,P=null;if(L.forEach(U=>{const W=Number.isFinite(Number(U.row))?Number(U.row):0,ue=Number.isFinite(Number(U.seat_col))?Number(U.seat_col):1;(z===null||W<z)&&(z=W),(T===null||W>T)&&(T=W),(P===null||ue>P)&&(P=ue)}),z===null||T===null||P===null)return null;const A=T-z+1;return{minRow:z,totalRows:A,totalCols:P}},[L]),se=f.useMemo(()=>{if(!g)return null;const z=Number(g);return Number.isFinite(z)&&d.find(T=>Number(T.id)===z)||null},[d,g]);f.useEffect(()=>{(async()=>{i(!0);try{const P=await(await fetch("/api/routes")).json();t(Array.isArray(P)?P:[]),!s&&Array.isArray(P)&&P.length>0&&u(String(P[0].id))}catch(T){console.error("Eroare la ncrcarea rutelor",T),t([])}finally{i(!1)}})()},[]),f.useEffect(()=>{if(!s){m([]),b("");return}(async()=>{p(!0);try{const P=await(await fetch(`/api/routes/${s}/schedules?include_defaults=1`)).json();m(Array.isArray(P)?P:[])}catch(T){console.error("Eroare la ncrcarea programelor",T),m([])}finally{p(!1)}})(),b("")},[s]),f.useEffect(()=>{if(!se){E(""),S([]),C(""),B([]),R(new Set);return}E(se.default_vehicle_id?String(se.default_vehicle_id):"");const z=se.operator_id;if(!z){S([]),C(""),B([]),R(new Set);return}(async()=>{j(!0);try{const A=await(await fetch(`/api/vehicles?operator_id=${z}`)).json(),H=Array.isArray(A)?A:[];S(H);const U=se.default_vehicle_id?String(se.default_vehicle_id):"";U&&H.some(W=>String(W.id)===U)?C(U):H.length?C(String(H[0].id)):C("")}catch(P){console.error("Eroare la ncrcarea vehiculelor",P),S([]),C("")}finally{j(!1)}})()},[se]),f.useEffect(()=>{if(!se||!O){B([]),R(new Set);return}(async()=>{te(!0);try{const[T,P]=await Promise.all([fetch(`/api/vehicles/${O}/seats`),fetch(`/api/route_schedules/${se.id}/seat-blocks?vehicle_id=${O}`)]),A=await T.json(),H=await P.json();B(Array.isArray(A)?A:[]);const U=new Set;H&&Array.isArray(H.seats)&&H.seats.forEach(W=>{U.add(Number(W.seat_id))}),R(U)}catch(T){console.error("Eroare la ncrcarea locurilor",T),B([]),R(new Set)}finally{te(!1)}})()},[se,O]);const V=async()=>{if(se){M(!0),Pe("");try{const z=N?{vehicle_id:Number(N)}:{vehicle_id:null},T=await fetch(`/api/route_schedules/${se.id}/default-vehicle`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(!T.ok){const H=await T.json().catch(()=>({})),U=(H==null?void 0:H.error)||"Nu s-a putut salva vehiculul implicit.";alert(U);return}Pe("Vehiculul implicit a fost actualizat.");const A=await(await fetch(`/api/routes/${s}/schedules?include_defaults=1`)).json();m(Array.isArray(A)?A:[])}catch(z){console.error("Eroare la salvarea vehiculului implicit",z),alert("Nu s-a putut salva vehiculul implicit.")}finally{M(!1)}}},F=z=>{R(T=>{const P=new Set(T);return P.has(z.id)?P.delete(z.id):P.add(z.id),P})},Y=async()=>{if(!(!se||!O)){Pe("");try{const z={vehicle_id:Number(O),seat_ids:Array.from(Z.values())},T=await fetch(`/api/route_schedules/${se.id}/seat-blocks`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(!T.ok){const P=await T.json().catch(()=>({})),A=(P==null?void 0:P.error)||"Nu s-au putut salva blocrile.";alert(A);return}Pe("Blocrile de locuri au fost actualizate.")}catch(z){console.error("Eroare la salvarea blocrilor de locuri",z),alert("Nu s-au putut salva blocrile.")}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Vehicule implicite & Blocri locuri"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Alege ruta i ora pentru a seta vehiculul implicit al cursei i pentru a bloca locuri indisponibile online."})]}),xe&&o.jsx("div",{className:"rounded border border-green-300 bg-green-50 px-3 py-2 text-sm text-green-700",children:xe}),o.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Rut"}),o.jsxs("select",{className:"w-full rounded border px-3 py-2",value:s,onChange:z=>u(z.target.value),children:[o.jsx("option",{value:"",children:" alege ruta "}),e.map(z=>o.jsx("option",{value:z.id,children:z.name},z.id))]}),r&&o.jsx("p",{className:"text-xs text-gray-500",children:"Se ncarc rutele"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Or / sens"}),o.jsxs("select",{className:"w-full rounded border px-3 py-2",value:g,onChange:z=>b(z.target.value),disabled:!d.length||h,children:[o.jsx("option",{value:"",children:" alege plecarea "}),d.map(z=>o.jsx("option",{value:z.id,children:V3(z)},z.id))]}),h&&o.jsx("p",{className:"text-xs text-gray-500",children:"Se ncarc orele"})]}),se&&o.jsxs("div",{className:"space-y-3 rounded border border-gray-200 bg-white p-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vehicul implicit"}),o.jsxs("select",{className:"w-full rounded border px-3 py-2",value:N,onChange:z=>E(z.target.value),disabled:y,children:[o.jsx("option",{value:"",children:"Primul vehicul al operatorului"}),w.map(z=>o.jsxs("option",{value:z.id,children:[z.name,z.plate_number?` (${z.plate_number})`:""]},z.id))]})]}),o.jsx("button",{type:"button",className:"rounded bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-60",onClick:V,disabled:_,children:_?"Se salveaz":"Salveaz vehiculul implicit"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vehicul pentru blocri"}),o.jsxs("select",{className:"w-full rounded border px-3 py-2",value:O,onChange:z=>C(z.target.value),disabled:!w.length,children:[o.jsx("option",{value:"",children:" selecteaz vehiculul "}),w.map(z=>o.jsxs("option",{value:z.id,children:[z.name,z.plate_number?` (${z.plate_number})`:""]},z.id))]})]}),!O&&o.jsx("p",{className:"text-sm text-gray-500",children:"Selecteaz o rut i un vehicul pentru a vedea locurile."}),O&&o.jsxs("div",{className:"space-y-3 rounded border border-gray-200 bg-white p-4",children:[X&&o.jsx("p",{className:"text-sm text-gray-500",children:"Se ncarc locurile"}),!X&&L.length===0&&o.jsx("p",{className:"text-sm text-gray-500",children:"Vehiculul selectat nu are locuri definite."}),!X&&L.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"inline-grid gap-2 bg-gray-50 p-4 rounded",style:{gridTemplateColumns:ve?`repeat(${ve.totalCols}, minmax(60px, 1fr))`:void 0,gridTemplateRows:ve?`repeat(${ve.totalRows}, auto)`:void 0,gridAutoFlow:"dense"},children:L.map(z=>{const T=Number.isFinite(Number(z.row))?Number(z.row):0,P=Number.isFinite(Number(z.seat_col))?Number(z.seat_col):1,A=ve?T-ve.minRow+1:1,H=A>=1?A:1,U=P>=1?P:1;return o.jsx(B3,{seat:{...z,row:T,seat_col:U},blocked:Z.has(z.id),onToggle:F,positionStyle:{gridRow:`${H}`,gridColumn:`${U}`}},z.id)})}),o.jsx("button",{type:"button",className:"rounded bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 disabled:opacity-60",onClick:Y,children:"Salveaz blocrile"})]})]})]})]})]})}function F3(){const[e,t]=f.useState("drivers"),[r,i]=f.useState(null),[s,u]=f.useState(!0);f.useEffect(()=>{(async()=>{var h;try{const g=await(await fetch("/api/auth/me",{credentials:"include"})).json().catch(()=>({}));i(((h=g==null?void 0:g.user)==null?void 0:h.role)||null)}catch{i(null)}finally{u(!1)}})()},[]);const d=(m,h)=>o.jsx("button",{className:e===m?"bg-blue-600 text-white px-3 py-1 rounded":"bg-gray-200 px-3 py-1 rounded",onClick:()=>t(m),children:h});return o.jsxs("div",{className:"p-4",children:[s&&o.jsx("div",{children:"Se ncarc..."}),!s&&!["admin","operator_admin","agent"].includes(r)&&o.jsx("div",{className:"text-red-600",children:"Acces interzis."}),!s&&["admin","operator_admin","agent"].includes(r)&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[d("drivers","oferi"),d("prefs","Preferine"),"   ",["admin","operator_admin"].includes(r)&&o.jsxs(o.Fragment,{children:[d("rute","Rute"),d("stations","Staii"),d("discounts","Tipuri Discount"),d("prices","Liste preuri"),d("employees","Angajai"),d("disabled","Curse Dezactivate"),d("vehicles","Maini"),d("routeDefaults","Vehicule rute"),d("promo","Coduri promo"),d("fiscal","Fiscalizare"),d("online","Online")]})]}),e==="drivers"&&o.jsx(LD,{}),e==="prefs"&&o.jsx(P3,{}),["admin","operator_admin"].includes(r)&&o.jsxs(o.Fragment,{children:[e==="rute"&&o.jsx(AD,{}),e==="stations"&&o.jsx(OP,{}),e==="discounts"&&o.jsx(AP,{}),e==="prices"&&o.jsx(TP,{}),e==="employees"&&o.jsx(DP,{}),e==="disabled"&&o.jsx(T3,{}),e==="vehicles"&&o.jsx(R3,{}),e==="routeDefaults"&&o.jsx(H3,{}),e==="promo"&&o.jsx(k3,{}),e==="fiscal"&&o.jsx(z3,{}),e==="online"&&o.jsx(I3,{})]})]})]})}function Y3({value:e,onChange:t}){const[r,i]=f.useState([]);return f.useEffect(()=>{fetch("/api/operators").then(s=>s.json()).then(i).catch(console.error)},[]),r.length?o.jsxs("select",{value:e??"",onChange:s=>t(Number(s.target.value)),className:"border rounded px-2 py-1",children:[o.jsx("option",{value:"",disabled:!0,children:"Alege operator"}),r.map(s=>o.jsx("option",{value:s.id,children:s.name},s.id))]}):o.jsx("span",{className:"text-gray-400 text-sm",children:"Se ncarc operatorii"})}function q3({value:e,onChange:t}){const r=i=>s=>t({...e,[i]:s.target.value});return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{className:"text-sm",children:"de la"}),o.jsx("input",{type:"date",value:e.start,onChange:r("start"),className:"border rounded px-2 py-1"}),o.jsx("label",{className:"text-sm",children:"pn la"}),o.jsx("input",{type:"date",value:e.end,onChange:r("end"),className:"border rounded px-2 py-1"})]})}function G3({value:e,onChange:t}){const[r,i]=f.useState([]),[s,u]=f.useState(!0);return f.useEffect(()=>{fetch("/api/agencies").then(d=>d.json()).then(d=>{i(d),u(!1)}).catch(()=>u(!1))},[]),s?o.jsx("span",{className:"text-gray-400 text-sm",children:"Agenii"}):o.jsxs("select",{value:e??"",onChange:d=>t(d.target.value||null),className:"border rounded px-2 py-1",children:[o.jsx("option",{value:"",children:"Toate ageniile"}),r.map(d=>o.jsx("option",{value:d.id,children:d.name},d.id))]})}function W3({value:e,onChange:t,agencyId:r}){const[i,s]=f.useState([]),[u,d]=f.useState(!0);return f.useEffect(()=>{if(!r){s([]),d(!1);return}d(!0),fetch(`/api/employees?agency_id=${r}`).then(m=>m.json()).then(m=>{s(m),d(!1)}).catch(()=>d(!1))},[r]),u?o.jsx("span",{className:"text-gray-400 text-sm",children:"Ageni"}):o.jsxs("select",{value:e??"",onChange:m=>t(m.target.value||null),className:"border rounded px-2 py-1",children:[o.jsx("option",{value:"",children:"Toi agenii"}),i.map(m=>o.jsx("option",{value:m.id,children:m.name},m.id))]})}var Gd={exports:{}},Z3=Gd.exports,Aw;function X3(){return Aw||(Aw=1,function(e,t){(function(r,i){e.exports=i()})(Z3,function(){var r=1e3,i=6e4,s=36e5,u="millisecond",d="second",m="minute",h="hour",p="day",g="week",b="month",w="quarter",S="year",y="date",j="Invalid Date",N=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ve){var se=["th","st","nd","rd"],V=ve%100;return"["+ve+(se[(V-20)%10]||se[V]||se[0])+"]"}},M=function(ve,se,V){var F=String(ve);return!F||F.length>=se?ve:""+Array(se+1-F.length).join(V)+ve},O={s:M,z:function(ve){var se=-ve.utcOffset(),V=Math.abs(se),F=Math.floor(V/60),Y=V%60;return(se<=0?"+":"-")+M(F,2,"0")+":"+M(Y,2,"0")},m:function ve(se,V){if(se.date()<V.date())return-ve(V,se);var F=12*(V.year()-se.year())+(V.month()-se.month()),Y=se.clone().add(F,b),z=V-Y<0,T=se.clone().add(F+(z?-1:1),b);return+(-(F+(V-Y)/(z?Y-T:T-Y))||0)},a:function(ve){return ve<0?Math.ceil(ve)||0:Math.floor(ve)},p:function(ve){return{M:b,y:S,w:g,d:p,D:y,h,m,s:d,ms:u,Q:w}[ve]||String(ve||"").toLowerCase().replace(/s$/,"")},u:function(ve){return ve===void 0}},C="en",L={};L[C]=_;var B="$isDayjsObject",Z=function(ve){return ve instanceof xe||!(!ve||!ve[B])},R=function ve(se,V,F){var Y;if(!se)return C;if(typeof se=="string"){var z=se.toLowerCase();L[z]&&(Y=z),V&&(L[z]=V,Y=z);var T=se.split("-");if(!Y&&T.length>1)return ve(T[0])}else{var P=se.name;L[P]=se,Y=P}return!F&&Y&&(C=Y),Y||!F&&C},X=function(ve,se){if(Z(ve))return ve.clone();var V=typeof se=="object"?se:{};return V.date=ve,V.args=arguments,new xe(V)},te=O;te.l=R,te.i=Z,te.w=function(ve,se){return X(ve,{locale:se.$L,utc:se.$u,x:se.$x,$offset:se.$offset})};var xe=function(){function ve(V){this.$L=R(V.locale,null,!0),this.parse(V),this.$x=this.$x||V.x||{},this[B]=!0}var se=ve.prototype;return se.parse=function(V){this.$d=function(F){var Y=F.date,z=F.utc;if(Y===null)return new Date(NaN);if(te.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var T=Y.match(N);if(T){var P=T[2]-1||0,A=(T[7]||"0").substring(0,3);return z?new Date(Date.UTC(T[1],P,T[3]||1,T[4]||0,T[5]||0,T[6]||0,A)):new Date(T[1],P,T[3]||1,T[4]||0,T[5]||0,T[6]||0,A)}}return new Date(Y)}(V),this.init()},se.init=function(){var V=this.$d;this.$y=V.getFullYear(),this.$M=V.getMonth(),this.$D=V.getDate(),this.$W=V.getDay(),this.$H=V.getHours(),this.$m=V.getMinutes(),this.$s=V.getSeconds(),this.$ms=V.getMilliseconds()},se.$utils=function(){return te},se.isValid=function(){return this.$d.toString()!==j},se.isSame=function(V,F){var Y=X(V);return this.startOf(F)<=Y&&Y<=this.endOf(F)},se.isAfter=function(V,F){return X(V)<this.startOf(F)},se.isBefore=function(V,F){return this.endOf(F)<X(V)},se.$g=function(V,F,Y){return te.u(V)?this[F]:this.set(Y,V)},se.unix=function(){return Math.floor(this.valueOf()/1e3)},se.valueOf=function(){return this.$d.getTime()},se.startOf=function(V,F){var Y=this,z=!!te.u(F)||F,T=te.p(V),P=function(Be,Te){var Ge=te.w(Y.$u?Date.UTC(Y.$y,Te,Be):new Date(Y.$y,Te,Be),Y);return z?Ge:Ge.endOf(p)},A=function(Be,Te){return te.w(Y.toDate()[Be].apply(Y.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(Te)),Y)},H=this.$W,U=this.$M,W=this.$D,ue="set"+(this.$u?"UTC":"");switch(T){case S:return z?P(1,0):P(31,11);case b:return z?P(1,U):P(0,U+1);case g:var Ee=this.$locale().weekStart||0,be=(H<Ee?H+7:H)-Ee;return P(z?W-be:W+(6-be),U);case p:case y:return A(ue+"Hours",0);case h:return A(ue+"Minutes",1);case m:return A(ue+"Seconds",2);case d:return A(ue+"Milliseconds",3);default:return this.clone()}},se.endOf=function(V){return this.startOf(V,!1)},se.$set=function(V,F){var Y,z=te.p(V),T="set"+(this.$u?"UTC":""),P=(Y={},Y[p]=T+"Date",Y[y]=T+"Date",Y[b]=T+"Month",Y[S]=T+"FullYear",Y[h]=T+"Hours",Y[m]=T+"Minutes",Y[d]=T+"Seconds",Y[u]=T+"Milliseconds",Y)[z],A=z===p?this.$D+(F-this.$W):F;if(z===b||z===S){var H=this.clone().set(y,1);H.$d[P](A),H.init(),this.$d=H.set(y,Math.min(this.$D,H.daysInMonth())).$d}else P&&this.$d[P](A);return this.init(),this},se.set=function(V,F){return this.clone().$set(V,F)},se.get=function(V){return this[te.p(V)]()},se.add=function(V,F){var Y,z=this;V=Number(V);var T=te.p(F),P=function(U){var W=X(z);return te.w(W.date(W.date()+Math.round(U*V)),z)};if(T===b)return this.set(b,this.$M+V);if(T===S)return this.set(S,this.$y+V);if(T===p)return P(1);if(T===g)return P(7);var A=(Y={},Y[m]=i,Y[h]=s,Y[d]=r,Y)[T]||1,H=this.$d.getTime()+V*A;return te.w(H,this)},se.subtract=function(V,F){return this.add(-1*V,F)},se.format=function(V){var F=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||j;var z=V||"YYYY-MM-DDTHH:mm:ssZ",T=te.z(this),P=this.$H,A=this.$m,H=this.$M,U=Y.weekdays,W=Y.months,ue=Y.meridiem,Ee=function(Te,Ge,ge,Ke){return Te&&(Te[Ge]||Te(F,z))||ge[Ge].slice(0,Ke)},be=function(Te){return te.s(P%12||12,Te,"0")},Be=ue||function(Te,Ge,ge){var Ke=Te<12?"AM":"PM";return ge?Ke.toLowerCase():Ke};return z.replace(E,function(Te,Ge){return Ge||function(ge){switch(ge){case"YY":return String(F.$y).slice(-2);case"YYYY":return te.s(F.$y,4,"0");case"M":return H+1;case"MM":return te.s(H+1,2,"0");case"MMM":return Ee(Y.monthsShort,H,W,3);case"MMMM":return Ee(W,H);case"D":return F.$D;case"DD":return te.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return Ee(Y.weekdaysMin,F.$W,U,2);case"ddd":return Ee(Y.weekdaysShort,F.$W,U,3);case"dddd":return U[F.$W];case"H":return String(P);case"HH":return te.s(P,2,"0");case"h":return be(1);case"hh":return be(2);case"a":return Be(P,A,!0);case"A":return Be(P,A,!1);case"m":return String(A);case"mm":return te.s(A,2,"0");case"s":return String(F.$s);case"ss":return te.s(F.$s,2,"0");case"SSS":return te.s(F.$ms,3,"0");case"Z":return T}return null}(Te)||T.replace(":","")})},se.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},se.diff=function(V,F,Y){var z,T=this,P=te.p(F),A=X(V),H=(A.utcOffset()-this.utcOffset())*i,U=this-A,W=function(){return te.m(T,A)};switch(P){case S:z=W()/12;break;case b:z=W();break;case w:z=W()/3;break;case g:z=(U-H)/6048e5;break;case p:z=(U-H)/864e5;break;case h:z=U/s;break;case m:z=U/i;break;case d:z=U/r;break;default:z=U}return Y?z:te.a(z)},se.daysInMonth=function(){return this.endOf(b).$D},se.$locale=function(){return L[this.$L]},se.locale=function(V,F){if(!V)return this.$L;var Y=this.clone(),z=R(V,F,!0);return z&&(Y.$L=z),Y},se.clone=function(){return te.w(this.$d,this)},se.toDate=function(){return new Date(this.valueOf())},se.toJSON=function(){return this.isValid()?this.toISOString():null},se.toISOString=function(){return this.$d.toISOString()},se.toString=function(){return this.$d.toUTCString()},ve}(),Pe=xe.prototype;return X.prototype=Pe,[["$ms",u],["$s",d],["$m",m],["$H",h],["$W",p],["$M",b],["$y",S],["$D",y]].forEach(function(ve){Pe[ve[1]]=function(se){return this.$g(se,ve[0],ve[1])}}),X.extend=function(ve,se){return ve.$i||(ve(se,xe,X),ve.$i=!0),X},X.locale=R,X.isDayjs=Z,X.unix=function(ve){return X(1e3*ve)},X.en=L[C],X.Ls=L,X.p={},X})}(Gd)),Gd.exports}var K3=X3();const _1=qp(K3);function Q3({rows:e}){const[t,r]=f.useState({key:"route_name",direction:"asc"}),i=Array.isArray(e)?e:[],s=f.useMemo(()=>{const S={};return i.forEach(y=>{S[y.trip_id]||(S[y.trip_id]={meta:y,online:null,offline:null}),y.channel==="online"?S[y.trip_id].online=y:S[y.trip_id].offline=y}),Object.values(S)},[i]),u=f.useMemo(()=>{const{key:S,direction:y}=t;return[...s].sort((j,N)=>{let E=j.meta[S],_=N.meta[S];return S==="seats_total"&&(E=Number(E),_=Number(_)),E<_?y==="asc"?-1:1:E>_?y==="asc"?1:-1:0})},[s,t]),d=f.useMemo(()=>{const S={offline:{seats:0,discountCount:0,discountTotal:0,paid:0,due:0},online:{seats:0,discountCount:0,discountTotal:0,paid:0,due:0}};return s.forEach(({offline:y,online:j})=>{const N=y||{},E=j||{};S.offline.seats+=Number(N.seats_booked||0),S.online.seats+=Number(E.seats_booked||0),S.offline.discountCount+=Number(N.discount_count||0),S.online.discountCount+=Number(E.discount_count||0),S.offline.discountTotal+=Number(N.discount_total||0),S.online.discountTotal+=Number(E.discount_total||0),S.offline.paid+=Number(N.paid_total||0),S.online.paid+=Number(E.paid_total||0),S.offline.due+=Number(N.due_total||0),S.online.due+=Number(E.due_total||0)}),S},[s]);if(!i.length)return o.jsx("div",{className:"text-gray-500 italic",children:"Nu exist curse n intervalul selectat."});const m=S=>{r(y=>y.key===S?{key:S,direction:y.direction==="asc"?"desc":"asc"}:{key:S,direction:"asc"})},h=S=>t.key===S?t.direction==="asc"?" ":" ":"",p=(S,y,j="",N="",E="text-center")=>o.jsxs("div",{className:`flex flex-col ${E}`,children:[o.jsx("div",{className:`${j} px-1`,children:S}),o.jsx("div",{className:`${N} px-1`,children:y})]}),g=[{label:"Rut",key:"route_name",sortable:!0},{label:"Ora",key:"trip_time",sortable:!0},{label:"Nr. main",key:"vehicle_name",sortable:!0},{label:"Locuri",key:"seats_total",sortable:!0},{label:"Rezervri (off/online)",key:null},{label:"Reduceri # (off/online)",key:null},{label:"Reduceri lei (off/online)",key:null},{label:"ncasri efective (off/online)",key:null},{label:"De ncasat (off/online)",key:null},{label:"Data",key:null}],b="bg-yellow-50",w="bg-pink-50";return o.jsxs("table",{className:"w-full table-auto border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsx("tr",{children:g.map(S=>o.jsxs("th",{className:`border px-2 py-1 whitespace-nowrap ${S.sortable?"cursor-pointer select-none":""}`,onClick:()=>S.sortable&&m(S.key),children:[S.label,S.sortable&&h(S.key)]},S.label))})}),o.jsx("tbody",{children:u.map(({meta:S,online:y,offline:j})=>{const N=Number(S.seats_total)||0,E=S.vehicle_plate??S.plate_number??S.vehicle_name??"",_=y||{seats_booked:0,discount_count:0,discount_total:0,paid_total:0,due_total:0},M=j||{seats_booked:0,discount_count:0,discount_total:0,paid_total:0,due_total:0};return o.jsxs("tr",{className:"hover:bg-blue-50",children:[o.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:S.route_name}),o.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:S.trip_time}),o.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:E}),o.jsx("td",{className:"border px-1 py-1 text-center whitespace-nowrap",children:N}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(M.seats_booked,_.seats_booked,b,w)}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(M.discount_count,_.discount_count,b,w)}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(Number(M.discount_total).toFixed(2),Number(_.discount_total).toFixed(2),b,w,"text-right")}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(Number(M.paid_total).toFixed(2),Number(_.paid_total).toFixed(2),b,w,"text-right")}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(Number(M.due_total).toFixed(2),Number(_.due_total).toFixed(2),b,w,"text-right")}),o.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:S.trip_date?_1(S.trip_date).format("DD.MM.YYYY"):""})]},S.trip_id)})}),o.jsx("tfoot",{children:o.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[o.jsx("td",{colSpan:4,className:"border px-2 py-1 text-right",children:"TOTAL"}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.seats,d.online.seats,b,w)}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.discountCount,d.online.discountCount,b,w)}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.discountTotal.toFixed(2),d.online.discountTotal.toFixed(2),b,w,"text-right")}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.paid.toFixed(2),d.online.paid.toFixed(2),b,w,"text-right")}),o.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.due.toFixed(2),d.online.due.toFixed(2),b,w,"text-right")}),o.jsx("td",{className:"border px-2 py-1"})]})})]})}function J3({user:e}){var ue,Ee,be,Be,Te,Ge;const t=new Date().toISOString().slice(0,10),[r,i]=f.useState(null),[s,u]=f.useState([]),[d,m]=f.useState(null),[h,p]=f.useState(null),[g,b]=f.useState(null),[w,S]=f.useState({start:t,end:t}),[y,j]=f.useState([]),[N,E]=f.useState(null),[_,M]=f.useState({trips:[],summary:{},toHandOver:0}),[O,C]=f.useState(!1),[L,B]=f.useState(null),Z=(e==null?void 0:e.id)??null,[R,X]=f.useState([]),[te,xe]=f.useState([]),[Pe,ve]=f.useState(!1),[se,V]=f.useState([]),[F,Y]=f.useState({rows:0,payments:0,total:0}),z=f.useCallback(async()=>{if(!Z){X([]);return}try{const Ke=await(await fetch(`/api/cash/unsettled?employeeId=${Z}`)).json();X(Array.isArray(Ke)?Ke:[])}catch(ge){console.error(ge),X([])}},[Z]),T=f.useCallback(async()=>{if(!Z){xe([]);return}try{const Ke=await(await fetch(`/api/cash/handovers/history?employeeId=${Z}`)).json();xe(Array.isArray(Ke)?Ke:[])}catch(ge){console.error(ge),xe([])}},[Z]);f.useEffect(()=>{if(!Z){X([]),xe([]);return}z(),T()},[Z,T,z]);const P=f.useMemo(()=>R.reduce((ge,Ke)=>ge+Number(Ke.total_amount||0),0),[R]);f.useEffect(()=>{V(ge=>ge.filter(Ke=>R.some(le=>String(le.operator_id)===String(Ke))))},[R]),f.useEffect(()=>{const ge=R.filter(ce=>se.some(K=>String(K)===String(ce.operator_id))),Ke=ge.reduce((ce,K)=>ce+Number(K.payments_count||0),0),le=ge.reduce((ce,K)=>ce+Number(K.total_amount||0),0);Y({rows:ge.length,payments:Ke,total:le})},[se,R]);const A=ge=>{V(Ke=>{const le=String(ge);return Ke.some(K=>String(K)===le)?Ke.filter(K=>String(K)!==le):[...Ke,ge]})},H=()=>{if(!R.length){V([]);return}const ge=se.length&&se.length===R.length;V(ge?[]:R.map(Ke=>Ke.operator_id))},U=f.useMemo(()=>se.map(ge=>Number(ge)).filter(ge=>!Number.isNaN(ge)),[se]),W=async()=>{var le;if(!R.length){alert("Nu ai nimic de predat.");return}if(!Z){alert("Nu eti autentificat ca agent.");return}const ge=F.rows,Ke=ge?`Predai ncasrile CASH pentru ${ge} operator(i), total ${F.total.toFixed(2)} lei?`:"Nu ai selectat niciun operator. Predai toate ncasrile CASH nepredate (grupate pe operator)?";if(window.confirm(Ke)){ve(!0);try{const K=await(await fetch("/api/cash/handovers/preda",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:Z,operatorIds:U})})).json();if(K!=null&&K.ok){await z(),await T();const Ae=(K.handovers||[]).reduce((De,Ze)=>De+Number(Ze.amount||0),0);alert(`${ge?"Predare parial reuit":"Predare reuit"}: ${((le=K.handovers)==null?void 0:le.length)||0} lot(uri), total ${Ae.toFixed(2)} lei.`),V([])}else alert("A aprut o eroare la predare. Verific selecia i ncearc din nou.")}catch(ce){console.error(ce),alert("Eroare la predare. Verific conexiunea i ncearc din nou.")}finally{ve(!1)}}};return f.useEffect(()=>{if(!r||isNaN(Number(r))){u([]);return}fetch(`/api/routes?operator_id=${Number(r)}&date=${w.start}`).then(ge=>ge.json()).then(ge=>{const le=(Array.isArray(ge==null?void 0:ge.routes)?ge.routes:Array.isArray(ge)?ge:[]).map(ce=>{const K=Array.isArray(ce.schedules)?ce.schedules.map(Ae=>({departure:Ae==null?void 0:Ae.departure,direction:(Ae==null?void 0:Ae.direction)||""})).filter(Ae=>Ae.departure):[];return{id:ce.id,name:ce.name,hours:K}});u(le)}).catch(console.error)},[r,w.start]),f.useEffect(()=>{let ge=[];if(d){const le=s.find(ce=>String(ce.id)===String(d));ge=Array.isArray(le==null?void 0:le.hours)?le.hours:[]}else{const le=[];for(const ce of s)(ce.hours||[]).forEach(K=>le.push(K));ge=le}const Ke=ge.sort((le,ce)=>le.direction===ce.direction?le.departure.localeCompare(ce.departure):le.direction.localeCompare(ce.direction));j(Ke),N&&!Ke.some(le=>le.departure===N)&&E(null)},[d,s]),f.useEffect(()=>{if(!r)return;C(!0);const ge={operator_id:r,start:w.start,end:w.end};d&&(ge.route_id=d),h&&(ge.agency_id=h),g&&(ge.agent_id=g),N&&(ge.hour=N),fetch(`/api/reports/trips?${new URLSearchParams(ge)}`).then(Ke=>Ke.json()).then(Ke=>{if(Ke.error)throw new Error(Ke.error);M(Ke),B(null)}).catch(Ke=>B(Ke.message)).finally(()=>C(!1))},[r,w,d,h,g,N]),o.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[o.jsx(Y3,{value:r,onChange:i}),o.jsxs("select",{value:d??"",onChange:ge=>m(ge.target.value||null),className:"border rounded px-2 py-1",children:[o.jsx("option",{value:"",children:"Toate rutele"}),s.map(ge=>o.jsx("option",{value:ge.id,children:ge.name},ge.id))]}),o.jsxs("select",{value:N??"",onChange:ge=>E(ge.target.value||null),className:"border rounded px-2 py-1",disabled:!y.length,children:[o.jsx("option",{value:"",children:y.length?"Toate orele":"Fr ore"}),y.map((ge,Ke)=>{var le;return o.jsx("option",{value:ge.departure,children:`${((le=ge.direction)==null?void 0:le.toUpperCase())||"TUR"} ${ge.departure}${ge.route_name?"  "+ge.route_name:""}`},`${ge.direction||"tur"}-${ge.departure}-${ge.route_name||""}-${Ke}`)})]}),o.jsx(G3,{value:h,onChange:ge=>{p(ge),b(null)}}),o.jsx(W3,{value:g,onChange:b,agencyId:h}),o.jsx(q3,{value:w,onChange:S})]}),L&&o.jsx("div",{className:"text-red-600",children:L}),O&&o.jsx("div",{className:"animate-pulse text-gray-400",children:"Se ncarc"}),!O&&!L&&o.jsxs(o.Fragment,{children:[o.jsx(Q3,{rows:_.trips}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"border rounded-xl p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Bani de predat ",Z?`(agent #${Z})`:""]}),o.jsx("button",{onClick:W,disabled:!R.length||Pe,className:`px-3 py-2 rounded-lg text-white ${!R.length||Pe?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:Pe?"Se pred":"Pred banii"})]}),R.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:Z?"Nu exist pli CASH nepredate.":"Autentific-te pentru a vedea plile CASH nepredate."}):o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left border-b",children:[o.jsx("th",{className:"py-2 w-10",children:o.jsx("input",{type:"checkbox",checked:R.length>0&&se.length===R.length,onChange:H,"aria-label":"Selecteaz toi operatorii"})}),o.jsx("th",{className:"py-2",children:"Operator"}),o.jsx("th",{className:"py-2",children:"# Pli"}),o.jsx("th",{className:"py-2",children:"Sum"})]})}),o.jsxs("tbody",{children:[R.map(ge=>o.jsxs("tr",{className:"border-b last:border-0",children:[o.jsx("td",{className:"py-2",children:o.jsx("input",{type:"checkbox",checked:se.some(Ke=>String(Ke)===String(ge.operator_id)),onChange:()=>A(ge.operator_id),"aria-label":`Selecteaz ${ge.operator_name}`})}),o.jsx("td",{className:"py-2",children:ge.operator_name}),o.jsx("td",{className:"py-2",children:ge.payments_count}),o.jsxs("td",{className:"py-2",children:[Number(ge.total_amount||0).toFixed(2)," lei"]})]},ge.operator_id)),F.rows>0&&o.jsxs("tr",{className:"font-semibold text-blue-700",children:[o.jsx("td",{className:"py-2"}),o.jsx("td",{className:"py-2",children:"Selectat"}),o.jsx("td",{className:"py-2",children:F.payments}),o.jsxs("td",{className:"py-2",children:[F.total.toFixed(2)," lei"]})]}),o.jsxs("tr",{className:"font-semibold",children:[o.jsx("td",{className:"py-2"}),o.jsx("td",{className:"py-2",children:"TOTAL"}),o.jsx("td",{className:"py-2",children:R.reduce((ge,Ke)=>ge+Number(Ke.payments_count||0),0)}),o.jsxs("td",{className:"py-2",children:[P.toFixed(2)," lei"]})]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-4 shadow-sm",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Istoric predri"}),te.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"nc nu exist predri."}):o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left border-b",children:[o.jsx("th",{className:"py-2",children:"Data"}),o.jsx("th",{className:"py-2",children:"Operator"}),o.jsx("th",{className:"py-2",children:"# Pli"}),o.jsx("th",{className:"py-2",children:"Sum"})]})}),o.jsx("tbody",{children:te.map(ge=>o.jsxs("tr",{className:"border-b last:border-0",children:[o.jsx("td",{className:"py-2",children:new Date(ge.created_at).toLocaleString()}),o.jsx("td",{className:"py-2",children:ge.operator_name}),o.jsx("td",{className:"py-2",children:ge.payments_count}),o.jsxs("td",{className:"py-2",children:[Number(ge.amount||0).toFixed(2)," lei"]})]},ge.id))})]})]})]}),o.jsx("div",{className:"mt-4 flex items-center justify-between",children:o.jsx("div",{className:"font-semibold",children:"Achitate"})}),o.jsx("table",{className:"w-full mt-4 text-sm border",children:o.jsxs("tbody",{className:"[&>tr:nth-child(odd)]:bg-gray-50",children:[o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Bilete achitate (nr.)"}),o.jsx("td",{className:"px-2 py-1 text-right",children:((ue=_.summary)==null?void 0:ue.paid_seats)??0})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"ncasri nete (lei)"}),o.jsx("td",{className:"px-2 py-1 text-right",children:Number(((Ee=_.summary)==null?void 0:Ee.paid_total)??0).toFixed(2)})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Reduceri aplicate (lei)"}),o.jsx("td",{className:"px-2 py-1 text-right",children:Number(((be=_.summary)==null?void 0:be.paid_discounts)??0).toFixed(2)})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1 whitespace-nowrap font-semibold",children:"Bani de predat (cash)"}),o.jsx("td",{className:"px-2 py-1 text-right font-semibold",children:P.toFixed(2)})]})]})}),o.jsx("table",{className:"w-full mt-4 text-sm border",children:o.jsxs("tbody",{className:"[&>tr:nth-child(odd)]:bg-gray-50",children:[o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Rezervri nepltite (nr.)"}),o.jsx("td",{className:"px-2 py-1 text-right",children:((Be=_.summary)==null?void 0:Be.reserved_seats)??0})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Valoare rezervri (lei)"}),o.jsx("td",{className:"px-2 py-1 text-right",children:Number(((Te=_.summary)==null?void 0:Te.reserved_total)??0).toFixed(2)})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Reduceri rezervri (lei)"}),o.jsx("td",{className:"px-2 py-1 text-right",children:Number(((Ge=_.summary)==null?void 0:Ge.reserved_discounts)??0).toFixed(2)})]})]})}),Array.isArray(_.discountsByType)&&_.discountsByType.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"font-semibold mb-1",children:"Reducerile pe tip"}),o.jsxs("table",{className:"w-full text-sm border",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border px-2 py-1 text-left",children:"Tip reducere"}),o.jsx("th",{className:"border px-2 py-1 text-right",children:"Nr. achitate"}),o.jsx("th",{className:"border px-2 py-1 text-right",children:"Lei achitate"}),o.jsx("th",{className:"border px-2 py-1 text-right",children:"Nr. rezervri"}),o.jsx("th",{className:"border px-2 py-1 text-right",children:"Lei rezervri"})]})}),o.jsxs("tbody",{className:"[&>tr:nth-child(odd)]:bg-gray-50",children:[_.discountsByType.map(ge=>o.jsxs("tr",{children:[o.jsx("td",{className:"border px-2 py-1",children:ge.discount_label}),o.jsx("td",{className:"border px-2 py-1 text-right",children:ge.paid_count}),o.jsx("td",{className:"border px-2 py-1 text-right",children:Number(ge.paid_total).toFixed(2)}),o.jsx("td",{className:"border px-2 py-1 text-right",children:ge.reserved_count}),o.jsx("td",{className:"border px-2 py-1 text-right",children:Number(ge.reserved_total).toFixed(2)})]},ge.discount_type_id)),o.jsxs("tr",{className:"font-semibold",children:[o.jsx("td",{className:"border px-2 py-1",children:"TOTAL"}),o.jsx("td",{className:"border px-2 py-1 text-right",children:_.discountsByType.reduce((ge,Ke)=>ge+Number(Ke.paid_count||0),0)}),o.jsx("td",{className:"border px-2 py-1 text-right",children:_.discountsByType.reduce((ge,Ke)=>ge+Number(Ke.paid_total||0),0).toFixed(2)}),o.jsx("td",{className:"border px-2 py-1 text-right",children:_.discountsByType.reduce((ge,Ke)=>ge+Number(Ke.reserved_count||0),0)}),o.jsx("td",{className:"border px-2 py-1 text-right",children:_.discountsByType.reduce((ge,Ke)=>ge+Number(Ke.reserved_total||0),0).toFixed(2)})]})]})]})]})]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t4=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,i)=>i?i.toUpperCase():r.toLowerCase()),Tw=e=>{const t=t4(e);return t.charAt(0).toUpperCase()+t.slice(1)},N1=(...e)=>e.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim(),n4=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:u,iconNode:d,...m},h)=>f.createElement("svg",{ref:h,...r4,width:t,height:t,stroke:e,strokeWidth:i?Number(r)*24/Number(t):r,className:N1("lucide",s),...!u&&!n4(m)&&{"aria-hidden":"true"},...m},[...d.map(([p,g])=>f.createElement(p,g)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=(e,t)=>{const r=f.forwardRef(({className:i,...s},u)=>f.createElement(a4,{ref:u,iconNode:t,className:N1(`lucide-${e4(Tw(e))}`,`lucide-${e}`,i),...s}));return r.displayName=Tw(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],s4=zf("chevron-down",i4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],l4=zf("chevron-right",o4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],u4=zf("trash-2",c4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],f4=zf("x",d4),h4="1d47f70c3cee1162b7dddfcf",m4={lat:45.9432,lng:24.9668},p4={height:"100vh",width:"100%"},ha=e=>{const t=Number(e);return Number.isFinite(t)?t:null},ds=(e,t)=>{const r=ha(e),i=ha(t);return r!=null&&i!=null?{lat:r,lng:i}:null};function C1(e){if(!e)return null;if(Array.isArray(e)&&e.length){if(typeof e[0]=="object"&&"lat"in e[0]&&"lng"in e[0])return e;if(Array.isArray(e[0])){const t=e,r=Math.abs(t[0][0])>90||Math.abs(t[0][1])<=90;return t.map(i=>r?{lat:i[1],lng:i[0]}:{lat:i[0],lng:i[1]})}}if(typeof e=="string"){const t=e.trim();if(t.toUpperCase().startsWith("POLYGON"))try{return t.substring(t.indexOf("((")+2,t.lastIndexOf("))")).split(",").map(s=>s.trim().split(/\s+/).map(Number)).map(([s,u])=>({lat:u,lng:s}))}catch{}try{const r=JSON.parse(t);return C1(r)}catch{return null}}return typeof e=="object"&&e.type==="Polygon"&&Array.isArray(e.coordinates)?(e.coordinates[0]||[]).map(([r,i])=>({lat:i,lng:r})):null}function Ag(e,t=!1,r={}){const{color:i,activeColor:s,textColor:u,size:d,activeSize:m}=r,g=t?s??(i||"#2563eb"):i??"#1e90ff",S=t?m??d??"26px":d??"20px",y=u??"white",j=document.createElement("div");j.style.position="relative",j.style.transform="translate(-50%, -50%)";const N=document.createElement("div");N.style.width=S,N.style.height=S,N.style.borderRadius="9999px",N.style.background=g,N.style.border="2px solid white",N.style.boxShadow="0 2px 6px rgba(0,0,0,0.35)",N.style.display="flex",N.style.alignItems="center",N.style.justifyContent="center",N.style.color=y,N.style.fontWeight="700",N.style.fontSize=t?"12px":"11px",N.textContent=e??"";const E=document.createElement("div");return E.style.position="absolute",E.style.left="50%",E.style.bottom="-8px",E.style.transform="translateX(-50%)",E.style.width="0",E.style.height="0",E.style.borderLeft="6px solid transparent",E.style.borderRight="6px solid transparent",E.style.borderTop=`8px solid ${g}`,j.appendChild(N),j.appendChild(E),j}function E1({map:e,position:t,label:r,contentEl:i,onClick:s,draggable:u=!1,onDragEnd:d}){const m=f.useRef(null),h=f.useRef([]);return f.useEffect(()=>{var g,b,w;if(!e||!((w=(b=(g=window.google)==null?void 0:g.maps)==null?void 0:b.marker)!=null&&w.AdvancedMarkerElement))return;const p=i??Ag(r,!1);return m.current?(m.current.position=t,m.current.content=p,m.current.gmpDraggable=!!u):(m.current=new window.google.maps.marker.AdvancedMarkerElement({map:e,position:t,content:p,gmpDraggable:!!u}),s&&h.current.push(m.current.addListener("click",s)),d&&u&&h.current.push(m.current.addListener("dragend",S=>{const{latLng:y}=S;y&&d({lat:y.lat(),lng:y.lng()})}))),()=>{h.current.forEach(S=>window.google.maps.event.removeListener(S)),h.current=[],m.current&&(m.current.map=null,m.current=null)}},[e,t==null?void 0:t.lat,t==null?void 0:t.lng,r,i,s,u,d]),null}function g4({map:e,position:t,index:r,active:i,onClick:s}){const u=Ag(String(r),!!i);return o.jsx(E1,{map:e,position:t,contentEl:u,onClick:s})}function Dw({map:e,position:t,type:r,active:i,draggable:s,onClick:u,onDragEnd:d}){const m=r==="tur",b=Ag(m?"U":"C",!!i,{color:m?"#f97316":"#8b5cf6",activeColor:m?"#ea580c":"#7c3aed",textColor:"white",size:"18px",activeSize:"24px"});return o.jsx(E1,{map:e,position:t,contentEl:b,onClick:u,draggable:!!s,onDragEnd:d})}function v4(){var ge,Ke;const e=bf(),t=Number(e.routeId??e.id??e.route_id??0)||NaN||1,[r,i]=f.useState([]),[s,u]=f.useState(null),[d,m]=f.useState([]),[h,p]=f.useState(!1),[g,b]=f.useState(!1),[w,S]=f.useState(""),[y,j]=f.useState(()=>new Set),[N,E]=f.useState(null),[_,M]=f.useState("idle"),[O,C]=f.useState([]),L=f.useRef(null),B=f.useRef({}),Z=f.useRef(!1);f.useEffect(()=>{j(()=>new Set)},[t]),f.useEffect(()=>{let le=!1;const ce=new AbortController;return i([]),u(null),M("idle"),C([]),Z.current=!1,E(null),(async()=>{var K,Ae;try{const[Se,De]=await Promise.all([vt.get(`/api/routes/${t}/stations`,{signal:ce.signal,headers:{"Cache-Control":"no-cache"}}),vt.get("/api/stations",{signal:ce.signal,headers:{"Cache-Control":"no-cache"}})]),Ze=(Se.data??[]).sort((I,oe)=>I.sequence-oe.sequence);console.log("[API /routes/:id/stations]",Ze.map(I=>{var oe,he;return{id:I.id,station_id:I.station_id,type:I.geofence_type,radius:I.geofence_radius_m,poly:((he=(oe=I.geofence_polygon)==null?void 0:oe.slice)==null?void 0:he.call(oe,0,40))||I.geofence_polygon}}));const Ve=Ze.map(I=>{const oe=C1(I.geofence_polygon),he=I.geofence_type??(oe?"polygon":I.geofence_radius_m?"circle":"none");return{...I,latitude:ha(I.latitude),longitude:ha(I.longitude),public_note_tur:typeof I.public_note_tur=="string"?I.public_note_tur:"",public_note_retur:typeof I.public_note_retur=="string"?I.public_note_retur:"",public_latitude_tur:ha(I.public_latitude_tur),public_longitude_tur:ha(I.public_longitude_tur),public_latitude_retur:ha(I.public_latitude_retur),public_longitude_retur:ha(I.public_longitude_retur),geofence_polygon:oe,geofence_radius_m:I.geofence_radius_m??null,geofence_type:he}});i(Ve);const de=(De.data??[]).map(I=>({...I,latitude:ha(I.latitude),longitude:ha(I.longitude)}));m(de)}catch(Se){if((K=vt.isCancel)!=null&&K.call(vt,Se)||(Se==null?void 0:Se.name)==="CanceledError")return;console.error("Fetch route failed",Se);return}try{const De=((await vt.get("/api/routes",{signal:ce.signal,headers:{"Cache-Control":"no-cache"}})).data??[]).find(Ze=>Number(Ze.id)===Number(t));E(De||null)}catch(Se){if((Ae=vt.isCancel)!=null&&Ae.call(vt,Se)||(Se==null?void 0:Se.name)==="CanceledError")return;console.warn("Nu am putut ncrca informaiile rutei",Se)}})(),()=>{ce.abort()}},[t]);const[R,X]=f.useState(null),te=(le,ce)=>{if(le.preventDefault(),R===ce)return;const K=[...r],[Ae]=K.splice(R,1);K.splice(ce,0,Ae),X(ce),i(K.map((Se,De)=>({...Se,sequence:De+1})))},xe=()=>X(null),Pe=le=>le?String(le).replace(/[\\/:*?"<>|]/g,"_").slice(0,80):"",ve=(ge=N==null?void 0:N.name)!=null&&ge.trim()?N.name:`ruta #${t}`,se=f.useCallback(()=>{if(!r.length)return;const le=["#","Staie","ID staie","Distan km","Timp min","Raz m","Latitudine","Longitudine","Tip geofence","Public (tur) - detaliu","Public (tur) - lat","Public (tur) - lng","Public (retur) - detaliu","Public (retur) - lat","Public (retur) - lng"],ce=Ze=>Ze==null?"":String(Ze).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),K=r.map((Ze,Ve)=>`<tr>${[Ve+1,Ze.name??"",Ze.station_id??"",Ze.distance_km??"",Ze.duration_min??"",Ze.geofence_radius_m??"",Ze.latitude??"",Ze.longitude??"",Ze.geofence_type??"",Ze.public_note_tur??"",Ze.public_latitude_tur??"",Ze.public_longitude_tur??"",Ze.public_note_retur??"",Ze.public_latitude_retur??"",Ze.public_longitude_retur??""].map(I=>`<td>${ce(I)}</td>`).join("")}</tr>`).join(""),Ae=`<tr>${le.map(Ze=>`<th>${ce(Ze)}</th>`).join("")}</tr>`,Se=new Date,De=`
      <table style="margin-bottom:12px;width:auto;">
        <tr>
          <td>Traseu</td>
          <td>${ce(ve)}</td>
        </tr>
        <tr>
          <td>Export</td>
          <td>${ce(ru(Se))}</td>
        </tr>
      </table>
    `;au({filenameBase:`statii-${Pe((N==null?void 0:N.name)||`ruta-${t}`)||`ruta-${t}`}`,headingHtml:De,tableHtml:`<table>${Ae}${K}</table>`})},[r,N==null?void 0:N.name,t,ve]),V=1e-6,F=f.useCallback((le,ce)=>{i(K=>{const Ae=K[le];let Se=!1;for(const[Ze,Ve]of Object.entries(ce)){const de=Ae[Ze];if(typeof Ve=="number"&&typeof de=="number"){if(Math.abs(Ve-de)>V){Se=!0;break}}else if(JSON.stringify(de)!==JSON.stringify(Ve)){Se=!0;break}}if(!Se)return K;const De=[...K];return De[le]={...Ae,...ce},De})},[]),Y=le=>{r.some(ce=>ce.station_id===le.id)||(i(ce=>[...ce,{id:null,station_id:le.id,name:le.name,latitude:ha(le.latitude),longitude:ha(le.longitude),sequence:ce.length+1,geofence_type:"circle",geofence_radius_m:200,geofence_polygon:null,distance_km:0,duration_min:0,public_note_tur:"",public_note_retur:"",public_latitude_tur:null,public_longitude_tur:null,public_latitude_retur:null,public_longitude_retur:null}]),p(!1),S(""))},z=async le=>{if(!le){i(ce=>ce.filter(K=>K.id!==null).map((K,Ae)=>({...K,sequence:Ae+1})));return}confirm("tergi staia din traseu?")&&(await vt.delete(`/api/routes/route-stations/${le}`),i(ce=>ce.filter(K=>K.id!==le).map((K,Ae)=>({...K,sequence:Ae+1}))))},T=le=>{if(!Array.isArray(le)||le.length<3)return null;const ce=le.map(Ve=>[Number(Ve.lng),Number(Ve.lat)]),[K,Ae]=ce[0],[Se,De]=ce[ce.length-1];return(Math.abs(K-Se)>1e-9||Math.abs(Ae-De)>1e-9)&&ce.push([K,Ae]),`POLYGON((${ce.map(([Ve,de])=>`${Ve} ${de}`).join(", ")}))`},P=async()=>{var le,ce,K,Ae;b(!0);try{const Se=de=>{if(typeof de!="string")return null;const I=de.trim();return I||null},De=de=>{if(de===""||de===null||de===void 0)return null;const I=Number(de);return Number.isFinite(I)?I:null},Ze=r.map((de,I)=>{const oe=de.geofence_type==="polygon"?"polygon":"circle",he=oe==="polygon"?T(de.geofence_polygon):null,_e=oe==="circle"?Number(de.geofence_radius_m)||0:null;return{id:de.id??null,route_id:Number(t),station_id:Number(de.station_id),sequence:I+1,distance_km:De(de.distance_km),duration_min:De(de.duration_min),dwell_time_minutes:Number(de.dwell_time_minutes||0),geofence_type:oe,geofence_radius_m:_e,geofence_polygon:he,public_note_tur:Se(de.public_note_tur),public_note_retur:Se(de.public_note_retur),public_latitude_tur:De(de.public_latitude_tur),public_longitude_tur:De(de.public_longitude_tur),public_latitude_retur:De(de.public_latitude_retur),public_longitude_retur:De(de.public_longitude_retur)}});if(Ze.find(de=>de.geofence_type==="polygon"&&!de.geofence_polygon)){alert("Poligonul trebuie s aib minim 3 puncte."),b(!1);return}await vt.put(`/api/routes/${t}/stations`,Ze)}catch(Se){console.error("[SaveRoute] payload=",((le=Se==null?void 0:Se.config)==null?void 0:le.data)||"(no data)"),console.error("[SaveRoute] 500 response=",(ce=Se==null?void 0:Se.response)==null?void 0:ce.data),alert(`Eroare la salvat staiile.
`+(((Ae=(K=Se==null?void 0:Se.response)==null?void 0:K.data)==null?void 0:Ae.error)||(Se==null?void 0:Se.message)||"Server 500"))}finally{b(!1)}},A=le=>{if(L.current=le,r.length&&!Z.current){const ce=new window.google.maps.LatLngBounds;r.forEach(K=>{const Ae=ds(K.latitude,K.longitude);Ae&&ce.extend(new window.google.maps.LatLng(Ae.lat,Ae.lng))}),le.fitBounds(ce),Z.current=!0}};f.useEffect(()=>{if(L.current&&r.length&&!Z.current){const le=new window.google.maps.LatLngBounds;r.forEach(ce=>{const K=ds(ce.latitude,ce.longitude);K&&le.extend(new window.google.maps.LatLng(K.lat,K.lng))}),L.current.fitBounds(le),Z.current=!0}},[r]),f.useEffect(()=>{if(typeof s=="number"&&L.current){const le=r[s];if(le){const ce=ds(le.latitude,le.longitude);ce&&L.current.panTo(ce)}}},[s,r]),f.useEffect(()=>{typeof s!="number"&&(M("idle"),C([]))},[s]);const H=f.useCallback(le=>{if(typeof s!="number")return;const ce=le.latLng.lat(),K=le.latLng.lng();if(_==="setPublicTur"){F(s,{public_latitude_tur:ce,public_longitude_tur:K}),M("idle");return}if(_==="setPublicRetur"){F(s,{public_latitude_retur:ce,public_longitude_retur:K}),M("idle");return}if(_==="drawCircle"){const Ae=r[s],Se=Number.isFinite(+Ae.geofence_radius_m)?+Ae.geofence_radius_m:200;F(s,{geofence_type:"circle",geofence_radius_m:Se,geofence_polygon:null,latitude:ce,longitude:K}),M("idle")}else _==="drawPolygon"&&C(Ae=>[...Ae,{lat:ce,lng:K}])},[_,s,r,F]),U=()=>{if(typeof s=="number"){if(O.length<3){alert("Poligonul are nevoie de minim 3 puncte.");return}F(s,{geofence_type:"polygon",geofence_polygon:O,geofence_radius_m:null}),C([]),M("idle")}},W=()=>{C([]),M("idle")},ue=f.useCallback(le=>{C([]),M(ce=>ce===le?"idle":le)},[]),Ee=f.useCallback(le=>{j(ce=>{const K=new Set(ce);return K.has(le)?K.delete(le):K.add(le),K})},[]),be=new Set(r.map(le=>le.station_id)),Be=(d||[]).filter(le=>!be.has(le.id)).filter(le=>{var K,Ae;const ce=w.trim().toLowerCase();return ce?((K=le.name)==null?void 0:K.toLowerCase().includes(ce))||String(le.id).includes(ce)||(((Ae=le.city)==null?void 0:Ae.toLowerCase())||"").includes(ce):!0}).slice(0,200);f.useEffect(()=>{const le=ce=>{ce.key==="Escape"&&p(!1)};return h&&window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[h]),f.useEffect(()=>{const le=ce=>{ce.key==="Escape"&&(M("idle"),C([]))};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[]);const Te=!!((Ke=window.google)!=null&&Ke.maps),Ge=(()=>{switch(_){case"drawCircle":return"Click pe hart pentru a repoziiona cercul staiei.";case"drawPolygon":return"Adaug puncte pe hart pentru poligon, apoi finalizeaz.";case"setPublicTur":return"Click pe hart pentru a seta pinul public de urcare.";case"setPublicRetur":return"Click pe hart pentru a seta pinul public de coborre.";default:return null}})();return o.jsxs("div",{className:"flex min-h-screen",children:[o.jsxs("aside",{className:"w-80 border-r p-4 h-screen overflow-y-auto",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"font-semibold text-lg",children:"Staii traseu"}),o.jsx("span",{className:"text-xs text-gray-500",children:ve})]}),o.jsx("button",{type:"button",className:"text-xs border rounded px-2 py-1 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",onClick:se,disabled:!r.length,children:"Export"})]}),r.map((le,ce)=>{const K=le.id??`tmp-${ce}`,Ae=y.has(K);return o.jsxs("div",{draggable:!0,onDragStart:Se=>{X(ce),Se.dataTransfer.effectAllowed="move"},onDragOver:Se=>te(Se,ce),onDrop:xe,onClick:()=>u(ce),className:`border rounded p-3 mb-3 cursor-pointer select-none ${ce===s?"bg-blue-50 border-blue-400":""}`,children:[o.jsxs("div",{className:`flex justify-between items-center ${Ae?"mb-2":""}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"p-1 rounded hover:bg-blue-100",onClick:Se=>{Se.stopPropagation(),u(ce),Ee(K)},"aria-label":Ae?"Restrnge detalii staie":"Extinde detalii staie",children:Ae?o.jsx(s4,{size:16}):o.jsx(l4,{size:16})}),o.jsxs("span",{className:"font-medium",children:[ce+1,". ",le.name]})]}),o.jsx("button",{className:"p-1 hover:text-red-600",onClick:Se=>{Se.stopPropagation(),z(le.id)},children:o.jsx(u4,{size:16})})]}),Ae&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[o.jsxs("label",{className:"flex flex-col",children:[o.jsx("span",{className:"text-gray-500",children:"Distan km"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-0.5",value:le.distance_km??"",onChange:Se=>{const De=Se.target.value;if(De===""){F(ce,{distance_km:null});return}const Ze=Number(De);F(ce,{distance_km:Number.isFinite(Ze)?Ze:le.distance_km})},disabled:ce===r.length-1})]}),o.jsxs("label",{className:"flex flex-col",children:[o.jsx("span",{className:"text-gray-500",children:"Timp min"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-0.5",value:le.duration_min??"",onChange:Se=>{const De=Se.target.value;if(De===""){F(ce,{duration_min:null});return}const Ze=Number(De);F(ce,{duration_min:Number.isFinite(Ze)?Ze:le.duration_min})},disabled:ce===r.length-1})]}),o.jsxs("label",{className:"flex flex-col",children:[o.jsx("span",{className:"text-gray-500",children:"Raz m"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-0.5",value:le.geofence_radius_m??"",onChange:Se=>F(ce,{geofence_radius_m:Number.isFinite(+Se.target.value)?+Se.target.value:0,geofence_type:"circle",geofence_polygon:null})})]})]}),o.jsxs("div",{className:"mt-3 space-y-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-gray-600",children:"Public (tur)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[o.jsxs("label",{className:"flex flex-col col-span-3",children:[o.jsx("span",{className:"text-gray-500",children:"Detaliu afiat pasagerilor"}),o.jsx("input",{type:"text",className:"border rounded px-2 py-0.5",value:le.public_note_tur??"",onChange:Se=>F(ce,{public_note_tur:Se.target.value})})]}),o.jsxs("label",{className:"flex flex-col",children:[o.jsx("span",{className:"text-gray-500",children:"Lat tur"}),o.jsx("input",{type:"number",step:"0.000001",className:"border rounded px-2 py-0.5",value:le.public_latitude_tur??"",onChange:Se=>{const De=Se.target.value;if(De===""){F(ce,{public_latitude_tur:null});return}const Ze=Number(De);F(ce,{public_latitude_tur:Number.isFinite(Ze)?Ze:le.public_latitude_tur})}})]}),o.jsxs("label",{className:"flex flex-col",children:[o.jsx("span",{className:"text-gray-500",children:"Lng tur"}),o.jsx("input",{type:"number",step:"0.000001",className:"border rounded px-2 py-0.5",value:le.public_longitude_tur??"",onChange:Se=>{const De=Se.target.value;if(De===""){F(ce,{public_longitude_tur:null});return}const Ze=Number(De);F(ce,{public_longitude_tur:Number.isFinite(Ze)?Ze:le.public_longitude_tur})}})]}),o.jsxs("div",{className:"col-span-3 flex flex-wrap gap-2",children:[o.jsx("button",{type:"button",className:`text-xs px-2 py-1 rounded border ${_==="setPublicTur"&&s===ce?"bg-blue-600 text-white border-blue-600":"bg-white hover:bg-blue-50"}`,onClick:Se=>{Se.stopPropagation(),u(ce),ue("setPublicTur")},children:_==="setPublicTur"&&s===ce?"Click pe hart":"Alege pe hart"}),Number.isFinite(le.public_latitude_tur)&&Number.isFinite(le.public_longitude_tur)&&o.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border bg-white hover:bg-red-50 text-red-600 border-red-200",onClick:Se=>{Se.stopPropagation(),M("idle"),F(ce,{public_latitude_tur:null,public_longitude_tur:null})},children:"terge pin"})]})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-gray-600",children:"Public (retur)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[o.jsxs("label",{className:"flex flex-col col-span-3",children:[o.jsx("span",{className:"text-gray-500",children:"Detaliu afiat pasagerilor"}),o.jsx("input",{type:"text",className:"border rounded px-2 py-0.5",value:le.public_note_retur??"",onChange:Se=>F(ce,{public_note_retur:Se.target.value})})]}),o.jsxs("label",{className:"flex flex-col",children:[o.jsx("span",{className:"text-gray-500",children:"Lat retur"}),o.jsx("input",{type:"number",step:"0.000001",className:"border rounded px-2 py-0.5",value:le.public_latitude_retur??"",onChange:Se=>{const De=Se.target.value;if(De===""){F(ce,{public_latitude_retur:null});return}const Ze=Number(De);F(ce,{public_latitude_retur:Number.isFinite(Ze)?Ze:le.public_latitude_retur})}})]}),o.jsxs("label",{className:"flex flex-col",children:[o.jsx("span",{className:"text-gray-500",children:"Lng retur"}),o.jsx("input",{type:"number",step:"0.000001",className:"border rounded px-2 py-0.5",value:le.public_longitude_retur??"",onChange:Se=>{const De=Se.target.value;if(De===""){F(ce,{public_longitude_retur:null});return}const Ze=Number(De);F(ce,{public_longitude_retur:Number.isFinite(Ze)?Ze:le.public_longitude_retur})}})]}),o.jsxs("div",{className:"col-span-3 flex flex-wrap gap-2",children:[o.jsx("button",{type:"button",className:`text-xs px-2 py-1 rounded border ${_==="setPublicRetur"&&s===ce?"bg-blue-600 text-white border-blue-600":"bg-white hover:bg-blue-50"}`,onClick:Se=>{Se.stopPropagation(),u(ce),ue("setPublicRetur")},children:_==="setPublicRetur"&&s===ce?"Click pe hart":"Alege pe hart"}),Number.isFinite(le.public_latitude_retur)&&Number.isFinite(le.public_longitude_retur)&&o.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border bg-white hover:bg-red-50 text-red-600 border-red-200",onClick:Se=>{Se.stopPropagation(),M("idle"),F(ce,{public_latitude_retur:null,public_longitude_retur:null})},children:"terge pin"})]})]})]})]}),o.jsx("div",{className:"text-xs italic mt-1",children:le.geofence_type!=="none"?`geofence: ${le.geofence_type}`:"fr geofence"})]})]},`${le.station_id}-${ce}`)}),o.jsx("button",{onClick:()=>p(!0),className:"w-full bg-blue-600 text-white py-2 rounded mb-3",children:"+ Adaug staie"}),o.jsx("button",{onClick:P,disabled:g,className:"w-full bg-green-600 text-white py-2 rounded disabled:opacity-50",children:g?"Se salveaz":"Salveaz traseul"})]}),o.jsxs("main",{className:"flex-1 relative min-h-screen",children:[Ge&&o.jsx("div",{className:"absolute top-4 left-1/2 z-20 -translate-x-1/2 bg-white/95 text-gray-800 px-3 py-1.5 rounded shadow pointer-events-none text-sm",children:Ge}),o.jsxs("div",{className:"absolute left-4 bottom-40 z-10 bg-white/90 backdrop-blur px-3 py-2 rounded shadow border flex gap-2 items-center pointer-events-auto",children:[o.jsx("span",{className:"text-sm font-medium",children:"Geofence"}),o.jsx("button",{className:`text-sm px-2 py-1 rounded border ${_==="drawCircle"?"bg-blue-600 text-white":"bg-white"}`,onClick:()=>M(_==="drawCircle"?"idle":"drawCircle"),disabled:typeof s!="number",title:"Plaseaz cerc (click pe hart)",children:"Cerc"}),o.jsx("button",{className:`text-sm px-2 py-1 rounded border ${_==="drawPolygon"?"bg-blue-600 text-white":"bg-white"}`,onClick:()=>{M(_==="drawPolygon"?"idle":"drawPolygon"),C([])},disabled:typeof s!="number",title:"Deseneaz poligon (click-uri succesive)",children:"Poligon"}),_==="drawPolygon"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"text-sm px-2 py-1 rounded border",onClick:U,children:"Finalizeaz"}),o.jsx("button",{className:"text-sm px-2 py-1 rounded border",onClick:W,children:"Anuleaz"})]})]}),h&&o.jsxs("div",{className:"absolute right-4 top-4 z-20 w-96 max-h-[80vh] overflow-hidden rounded-xl shadow-lg border bg-white",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-medium",children:"Adaug staie"}),o.jsx("button",{className:"p-1",onClick:()=>p(!1),"aria-label":"nchide",children:o.jsx(f4,{size:16})})]}),o.jsx("div",{className:"p-3",children:o.jsx("input",{autoFocus:!0,className:"w-full border rounded px-3 py-2 text-sm",placeholder:"Caut dup nume, id, ora...",value:w,onChange:le=>S(le.target.value)})}),o.jsxs("div",{className:"px-3 pb-3 text-xs text-gray-500",children:["Rezultate: ",Be.length]}),o.jsxs("div",{className:"overflow-auto max-h-[60vh] px-3 pb-3",children:[Be.map(le=>o.jsxs("button",{onClick:()=>Y(le),className:"w-full text-left border rounded p-2 mb-2 hover:bg-blue-50",title:`Lat: ${le.latitude}, Lng: ${le.longitude}`,children:[o.jsx("div",{className:"font-medium text-sm",children:le.name}),o.jsxs("div",{className:"text-xs text-gray-500",children:["#",le.id,le.city?`  ${le.city}`:""]})]},le.id)),Be.length===0&&o.jsx("div",{className:"text-sm text-gray-500",children:"Nu s-au gsit staii disponibile."})]})]}),Te?o.jsxs(Gj,{mapContainerStyle:p4,defaultCenter:m4,zoom:6,options:{mapId:h4,gestureHandling:"greedy",scrollwheel:!0},onLoad:le=>{A(le),setTimeout(()=>{if(h){const ce=document.querySelector('input[placeholder="Caut dup nume, id, ora..."]');ce&&ce.focus()}},0)},onClick:H,children:[r.length>1&&o.jsx(Ip,{path:r.map(le=>ds(le.latitude,le.longitude)).filter(Boolean),options:{strokeWeight:3}}),L.current&&r.map((le,ce)=>{const K=ds(le.latitude,le.longitude);return K?o.jsx(g4,{map:L.current,position:K,index:ce+1,active:ce===s,onClick:()=>u(ce)},`m-${le.station_id}-${ce}`):null}),L.current&&r.map((le,ce)=>{const K=ds(le.public_latitude_tur,le.public_longitude_tur);if(!K)return null;const Ae=ce===s;return o.jsx(Dw,{map:L.current,position:K,type:"tur",active:Ae&&_==="setPublicTur",draggable:Ae,onClick:()=>u(ce),onDragEnd:Se=>{F(ce,{public_latitude_tur:Se.lat,public_longitude_tur:Se.lng})}},`tur-${le.station_id}-${ce}`)}),L.current&&r.map((le,ce)=>{const K=ds(le.public_latitude_retur,le.public_longitude_retur);if(!K)return null;const Ae=ce===s;return o.jsx(Dw,{map:L.current,position:K,type:"retur",active:Ae&&_==="setPublicRetur",draggable:Ae,onClick:()=>u(ce),onDragEnd:Se=>{F(ce,{public_latitude_retur:Se.lat,public_longitude_retur:Se.lng})}},`retur-${le.station_id}-${ce}`)}),r.map((le,ce)=>{var De;const K=ce===s,Ae={editable:K,draggable:K,strokeWeight:K?2:1,strokeOpacity:K?.9:.6,fillOpacity:K?.15:.08},Se={editable:K,draggable:K,strokeWeight:K?2:1,strokeOpacity:K?.9:.6,fillOpacity:K?.15:.08};if(le.geofence_type==="circle"&&Number.isFinite(+le.geofence_radius_m)&&+le.geofence_radius_m>0){const Ze=ds(le.latitude,le.longitude);return Ze?o.jsx(a1,{center:Ze,radius:+le.geofence_radius_m,options:Ae,onLoad:Ve=>{K&&(B.current[ce]=Ve)},onUnmount:()=>{delete B.current[ce]},onCenterChanged:()=>{if(!K)return;const Ve=B.current[ce];if(!Ve)return;const de=Ve.getCenter();de&&F(ce,{latitude:de.lat(),longitude:de.lng()})},onRadiusChanged:()=>{if(!K)return;const Ve=B.current[ce];if(!Ve)return;const de=Ve.getRadius();F(ce,{geofence_radius_m:de,geofence_type:"circle",geofence_polygon:null})}},`c-${ce}`):null}return le.geofence_type==="polygon"&&((De=le.geofence_polygon)!=null&&De.length)?o.jsx(r1,{paths:le.geofence_polygon,options:Se,onMouseUp:Ze=>{if(!K)return;const Ve=Ze.getPath().getArray().map(de=>({lat:de.lat(),lng:de.lng()}));F(ce,{geofence_polygon:Ve,geofence_type:"polygon",geofence_radius_m:null})}},`p-${ce}`):null}),_==="drawPolygon"&&O.length>0&&o.jsx(Ip,{path:O,options:{strokeWeight:2}})]},`map-${t}`):o.jsx("div",{className:"p-4 text-gray-500",children:"Se ncarc harta..."})]})]})}function b4(){const[e,t]=f.useState(""),[r,i]=f.useState("name"),[s,u]=f.useState("asc"),[d,m]=f.useState(0),[h,p]=f.useState([]),[g,b]=f.useState(0),[w,S]=f.useState(!1),y=25,j=d*y,N=f.useMemo(()=>e,[e]);f.useEffect(()=>{let M=!0;return(async()=>{S(!0);try{const O=new URLSearchParams({q:N,sort:r,order:s,limit:String(y),offset:String(j)}),L=await(await fetch(`/api/people?${O.toString()}`)).json();if(!M)return;p(L.items||[]),b(L.total||0)}catch(O){if(!M)return;console.error("Eroare la ncrcarea pasagerilor",O)}finally{M&&S(!1)}})(),()=>{M=!1}},[N,r,s,j]);const E=Math.ceil(g/y),_=M=>{r!==M?(i(M),u("asc"),m(0)):(u(O=>O==="asc"?"desc":"asc"),m(0))};return o.jsxs("div",{className:"p-5 max-w-5xl mx-auto",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Pasageri"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[o.jsx("input",{className:"border rounded px-3 py-2 w-64",placeholder:"Caut dup nume sau telefon",value:e,onChange:M=>{t(M.target.value),m(0)}}),o.jsxs("div",{className:"ml-auto flex items-center gap-2 text-sm",children:[o.jsxs("button",{className:`px-3 py-2 border rounded ${r==="name"?"bg-gray-100":""}`,onClick:()=>_("name"),title:"Sorteaz dup nume",children:["Nume ",r==="name"?s==="asc"?"":"":""]}),o.jsxs("button",{className:`px-3 py-2 border rounded ${r==="phone"?"bg-gray-100":""}`,onClick:()=>_("phone"),title:"Sorteaz dup telefon",children:["Telefon ",r==="phone"?s==="asc"?"":"":""]})]})]}),o.jsx("div",{className:"bg-white border rounded overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-2 border",children:"#"}),o.jsx("th",{className:"text-left p-2 border",children:"Nume"}),o.jsx("th",{className:"text-left p-2 border",children:"Telefon"}),o.jsx("th",{className:"text-left p-2 border",children:"Aciuni"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Se ncarc"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Niciun rezultat"})}):h.map((M,O)=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border",children:j+O+1}),o.jsx("td",{className:"p-2 border",children:M.name||""}),o.jsx("td",{className:"p-2 border",children:M.phone||""}),o.jsx("td",{className:"p-2 border",children:o.jsx(Kr,{to:`/raport/${M.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",title:"Vezi raport",children:"Vizualizeaz"})})]},M.id))})]})}),E>1&&o.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[o.jsxs("span",{children:["Total: ",g]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{disabled:d===0,className:"px-3 py-1 border rounded disabled:opacity-50",onClick:()=>m(M=>Math.max(M-1,0)),children:" napoi"}),o.jsxs("span",{children:["Pagina ",d+1," / ",E]}),o.jsx("button",{disabled:d>=E-1,className:"px-3 py-1 border rounded disabled:opacity-50",onClick:()=>m(M=>Math.min(M+1,E-1)),children:"nainte "})]})]})]})}function y4({onLoggedIn:e}){const[t,r]=f.useState(""),[i,s]=f.useState(""),[u,d]=f.useState(!1),[m,h]=f.useState(""),p=vf(),g=async b=>{b.preventDefault(),h(""),d(!0);try{const w=await fetch("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:t,password:i})}),S=await w.json().catch(()=>({}));if(!w.ok||(S==null?void 0:S.ok)!==!0)h((S==null?void 0:S.error)||"Email sau parol greite.");else{const y=await fetch("/api/auth/me",{credentials:"include"}).then(j=>j.json()).catch(()=>({user:null}));e==null||e((y==null?void 0:y.user)||null),p("/",{replace:!0})}}catch{h("Eroare la autentificare.")}finally{d(!1)}};return o.jsxs("div",{className:"max-w-sm mx-auto mt-10 p-6 rounded border bg-white",children:[o.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Autentificare"}),m&&o.jsx("div",{className:"mb-3 text-sm text-red-600",children:m}),o.jsxs("form",{onSubmit:g,className:"flex flex-col gap-3",children:[o.jsxs("label",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-sm",children:"Email, telefon, username sau ID"}),o.jsx("input",{className:"border rounded px-3 py-2",type:"text",autoComplete:"username",value:t,onChange:b=>r(b.target.value),required:!0})]}),o.jsxs("label",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-sm",children:"Parol"}),o.jsx("input",{className:"border rounded px-3 py-2",type:"password",autoComplete:"current-password",value:i,onChange:b=>s(b.target.value),required:!0})]}),o.jsx("button",{type:"submit",disabled:u,className:"mt-2 bg-blue-600 hover:bg-blue-700 text-white rounded px-4 py-2 disabled:opacity-60",children:u?"Se conecteaz":"Login"})]})]})}function x4(){const[e,t]=f.useState([]),[r,i]=f.useState({from:"",to:"",action:""}),[s,u]=f.useState({}),d=g=>{if(!g)return null;try{return JSON.parse(g)}catch(b){return console.warn("Invalid JSON n audit log",b),null}},m=(g,b)=>{if(g==null||g==="")return"";if(b==="board_station_id"||b==="exit_station_id"){const w=String(g),S=s[w];if(S)return S}return g},h=g=>{const b=d(g.before_json),w=d(g.after_json),y=[{key:"name",label:"Nume"},{key:"phone",label:"Telefon"},{key:"seat_id",label:"Loc"},{key:"board_station_id",label:"Staie urcare"},{key:"exit_station_id",label:"Staie coborre"},{key:"observations",label:"Observaii"}].map(({key:j,label:N})=>{const E=b?b[j]:void 0,_=w?w[j]:void 0;if(E===void 0&&_===void 0||E===_)return null;const O=m(E,j),C=m(_,j);return b&&w?`${N}: ${O}  ${C}`:!b&&w?`${N}: setat la ${C}`:b&&!w?`${N}: ters (era ${O})`:null}).filter(Boolean);return y.length?y.join("; "):g.note||""},p=()=>{const g=new URLSearchParams(Object.entries(r).filter(([,b])=>b));fetch(`/api/audit-logs?${g}`).then(b=>b.json()).then(t).catch(console.error)};return f.useEffect(p,[]),f.useEffect(()=>{let g=!1;return fetch("/api/stations").then(b=>b.json()).then(b=>{if(g||!Array.isArray(b))return;const w={};b.forEach(S=>{const y=(S==null?void 0:S.id)??(S==null?void 0:S.station_id);y!=null&&(w[String(y)]=(S==null?void 0:S.name)||`Staie #${y}`)}),u(w)}).catch(b=>{console.error("AuditLog: nu am putut ncrca staiile",b)}),()=>{g=!0}},[]),o.jsxs("div",{className:"p-6",children:[o.jsx("h1",{className:"text-xl font-bold mb-4",children:" Jurnal operaiuni"}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{placeholder:"De la (YYYY-MM-DD)",value:r.from,onChange:g=>i({...r,from:g.target.value})}),o.jsx("input",{placeholder:"Pn la (YYYY-MM-DD)",value:r.to,onChange:g=>i({...r,to:g.target.value})}),o.jsx("input",{placeholder:"Aciune",value:r.action,onChange:g=>i({...r,action:g.target.value})}),o.jsx("button",{onClick:p,className:"bg-blue-600 text-white px-3 py-1 rounded",children:"Filtreaz"})]}),o.jsxs("table",{className:"w-full text-sm border",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Dat"}),o.jsx("th",{className:"border p-2",children:"Aciune"}),o.jsx("th",{className:"border p-2",children:"Rezervare"}),o.jsx("th",{className:"border p-2",children:"Din"}),o.jsx("th",{className:"border p-2",children:"Data curs"}),o.jsx("th",{className:"border p-2",children:"Traseu"}),o.jsx("th",{className:"border p-2",children:"Ora"}),o.jsx("th",{className:"border p-2",children:"Segment"}),o.jsx("th",{className:"border p-2",children:"Loc"}),o.jsx("th",{className:"border p-2",children:"Actor"}),o.jsx("th",{className:"border p-2",children:"Sum"}),o.jsx("th",{className:"border p-2",children:"Metod"}),o.jsx("th",{className:"border p-2",children:"Channel"}),o.jsx("th",{className:"border p-2",children:"Detalii modificri"})]})}),o.jsx("tbody",{children:e.map(g=>o.jsxs("tr",{children:[o.jsx("td",{className:"border p-2",children:g.at}),o.jsx("td",{className:"border p-2",children:g.action_label||g.action}),o.jsx("td",{className:"border p-2",children:o.jsxs("a",{href:`/rezervare/${g.reservation_id}`,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:["#",g.reservation_id]})}),o.jsx("td",{className:"border p-2",children:g.from_reservation_id?o.jsxs("span",{children:[g.from_trip_date||"",g.from_hour?` ${g.from_hour}`:""," ",g.from_route_name?`| ${g.from_route_name}`:""," ",g.from_segment?`| ${g.from_segment}`:""," ",g.from_seat?`| loc ${g.from_seat}`:""]}):""}),o.jsx("td",{className:"border p-2",children:g.trip_date||""}),o.jsx("td",{className:"border p-2",children:g.route_name}),o.jsx("td",{className:"border p-2",children:g.hour}),o.jsx("td",{className:"border p-2",children:g.segment}),o.jsx("td",{className:"border p-2",children:g.seat}),o.jsx("td",{className:"border p-2",children:g.actor_name||g.actor_id}),o.jsx("td",{className:"border p-2",children:g.amount??""}),o.jsx("td",{className:"border p-2",children:g.payment_method??""}),o.jsx("td",{className:"border p-2",children:g.channel??""}),o.jsx("td",{className:"border p-2 max-w-xs break-words whitespace-pre-wrap text-left",children:h(g)})]},g.event_id))})]})]})}function ip(e,t){if(!e)return"";const r=_1(e);return r.isValid()?r.format(t):""}function w4(){const[e,t]=f.useState([]),[r,i]=f.useState(!0),[s,u]=f.useState(""),[d,m]=f.useState(""),[h,p]=f.useState(()=>{const j=Number(localStorage.getItem("adminCallLogLimit"));return Number.isFinite(j)&&j>0?j:100}),[g,b]=f.useState(null),w=f.useCallback(async()=>{i(!0),u("");try{const j=await fetch(`/api/incoming-calls/log?limit=${h}`,{credentials:"include"});if(!j.ok)throw new Error("Nu am putut ncrca call log-ul");const N=await j.json();t(Array.isArray(N==null?void 0:N.entries)?N.entries:[]),b(new Date().toISOString())}catch(j){console.error("[AdminCallLog] loadData failed",j),u("Nu am putut ncrca lista de apeluri. ncearc din nou."),t([])}finally{i(!1)}},[h]);f.useEffect(()=>{w()},[w]),f.useEffect(()=>{localStorage.setItem("adminCallLogLimit",String(h))},[h]);const S=!r&&!e.length&&!s,y=f.useMemo(()=>{const j=d.trim().toLowerCase();return(j?e.filter(E=>{const _=String(E.phone||E.digits||"").replace(/\D/g,""),M=String(E.caller_name||"").toLowerCase(),O=j.replace(/\D/g,""),L=O.length>0?_.includes(O):_.includes(j),B=M.includes(j);return L||B}):e).map(E=>({id:E.id,date:ip(E.received_at,"DD.MM.YYYY"),time:ip(E.received_at,"HH:mm:ss"),phone:E.phone||E.digits||"",name:E.caller_name||"Nume neasociat"}))},[e,d]);return o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-4 border-b border-gray-200 pb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-3xl leading-none",children:""}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Call Log administrare"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Vezi ultimele apeluri primite i statusul lor (fr durata apelului)."})]})]}),o.jsxs("div",{className:"ml-auto flex flex-wrap gap-3 items-center text-sm",children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",value:d,onChange:j=>m(j.target.value),placeholder:"Caut dup nume sau telefon",className:"w-64 rounded border border-gray-300 px-3 py-1.5 pr-9 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"}),o.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-400",children:""})]}),o.jsxs("label",{className:"text-gray-700 flex items-center gap-2",children:["Afieaz",o.jsx("select",{className:"border rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:h,onChange:j=>p(Number(j.target.value)||50),children:[25,50,100,200,300,500].map(j=>o.jsx("option",{value:j,children:j},j))}),"apeluri"]}),o.jsx("button",{type:"button",onClick:w,className:"px-3 py-1.5 text-sm font-medium bg-blue-600 text-white rounded hover:bg-blue-700 shadow-sm",children:"Rencarc"})]})]}),s&&o.jsx("div",{className:"border border-red-200 bg-red-50 text-red-700 px-4 py-2 rounded",children:s}),g&&o.jsxs("p",{className:"text-xs text-gray-500",children:["Ultima actualizare: ",ip(g,"DD.MM.YYYY HH:mm:ss")]}),r&&o.jsx("div",{className:"text-gray-600",children:"Se ncarc lista de apeluri..."}),S&&o.jsx("div",{className:"border border-dashed rounded p-6 text-center text-gray-500",children:"Nu exist apeluri n istoricul recent."}),!r&&!!y.length&&o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm border border-gray-200 rounded-md overflow-hidden shadow-sm",children:[o.jsx("thead",{className:"bg-gray-100 text-left text-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 border-b border-gray-200",children:"Data"}),o.jsx("th",{className:"px-3 py-2 border-b border-gray-200",children:"Ora (cu secunde)"}),o.jsx("th",{className:"px-3 py-2 border-b border-gray-200",children:"Telefon"}),o.jsx("th",{className:"px-3 py-2 border-b border-gray-200",children:"Nume asociat"})]})}),o.jsx("tbody",{children:y.map(j=>o.jsxs("tr",{className:"odd:bg-white even:bg-gray-50",children:[o.jsx("td",{className:"px-3 py-1.5 align-top whitespace-nowrap text-gray-900",children:j.date}),o.jsx("td",{className:"px-3 py-1.5 align-top whitespace-nowrap font-mono text-gray-900",children:j.time}),o.jsx("td",{className:"px-3 py-1.5 align-top font-mono text-base text-gray-900",children:j.phone}),o.jsx("td",{className:"px-3 py-1.5 align-top text-gray-700",children:j.name})]},j.id))})]})})]})}function S4(){const{id:e}=bf(),[t,r]=f.useState(null),[i,s]=f.useState(""),[u,d]=f.useState(!0);if(f.useEffect(()=>{let b=!0;return d(!0),fetch(`/api/reservations/${e}/details`).then(w=>w.ok?w.json():w.json().then(S=>Promise.reject((S==null?void 0:S.error)||"Eroare server"))).then(w=>{b&&(r(w),s(""))}).catch(w=>{b&&s(String(w||"Eroare la ncrcare detalii"))}).finally(()=>{b&&d(!1)}),()=>{b=!1}},[e]),u)return o.jsx("div",{className:"p-4",children:"Se ncarc"});if(i)return o.jsxs("div",{className:"p-4 text-red-600",children:["Eroare: ",i]});if(!t)return o.jsx("div",{className:"p-4",children:"Nu s-au gsit detalii."});const m=t.reservation||{},h=t.pricing||{},p=t.payments||[],g=t.events||[];return o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("h1",{className:"text-xl font-semibold",children:["Detalii rezervare #",e]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"border rounded p-3",children:[o.jsx("h2",{className:"font-medium mb-2",children:"Rezervare"}),o.jsxs("div",{children:["Stare: ",o.jsx("b",{children:m.status})]}),o.jsxs("div",{children:["Curs: ",o.jsx("b",{children:m.trip_date})," ",m.trip_time,"  ",m.route_name]}),o.jsxs("div",{children:["Segment: ",o.jsxs("b",{children:[m.board_name,"  ",m.exit_name]})]}),o.jsxs("div",{children:["Loc: ",o.jsx("b",{children:m.seat_label})]}),m.passenger_name?o.jsxs("div",{children:["Nume cltor: ",o.jsx("b",{children:m.passenger_name})]}):null,o.jsxs("div",{children:["Creat de: ",o.jsx("b",{children:m.created_by_name||m.created_by||""})]}),o.jsxs("div",{children:["Creat la: ",o.jsx("b",{children:m.reservation_time??""})]}),m.observations?o.jsxs("div",{children:["Observaii: ",m.observations]}):null]}),o.jsxs("div",{className:"border rounded p-3",children:[o.jsx("h2",{className:"font-medium mb-2",children:"Pre & Pli"}),o.jsxs("div",{children:["Pre net: ",o.jsx("b",{children:(h==null?void 0:h.price_value)??""})]}),o.jsxs("div",{children:["Channel: ",o.jsx("b",{children:(h==null?void 0:h.booking_channel)??""})]}),o.jsxs("div",{children:["Operator: ",o.jsx("b",{children:m.operator_name||m.operator_id||""})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"font-medium",children:"Pli"}),p.length===0?o.jsx("div",{children:""}):o.jsx("ul",{className:"list-disc pl-5",children:p.map(b=>o.jsxs("li",{children:[b.ts,": ",b.amount," RON  ",b.payment_method," ",b.provider_transaction_id?`(txn ${b.provider_transaction_id})`:"",b.collected_by?` | casier ${b.collected_by_name||b.collected_by}`:"",b.status==="paid"&&(m.created_by_name||m.created_by)?` | Creat de: ${m.created_by_name||m.created_by}`:""]},b.id))})]})]})]}),o.jsxs("div",{className:"border rounded p-3",children:[o.jsx("h2",{className:"font-medium mb-2",children:"Evenimente (audit)"}),g.length===0?o.jsx("div",{children:""}):o.jsxs("table",{className:"w-full text-sm border",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Dat"}),o.jsx("th",{className:"border p-2",children:"Aciune"}),o.jsx("th",{className:"border p-2",children:"Actor"}),o.jsx("th",{className:"border p-2",children:"Sum"}),o.jsx("th",{className:"border p-2",children:"Metod"}),o.jsx("th",{className:"border p-2",children:"Channel"})]})}),o.jsx("tbody",{children:g.map(b=>o.jsxs("tr",{children:[o.jsx("td",{className:"border p-2",children:b.at}),o.jsx("td",{className:"border p-2",children:b.action}),o.jsx("td",{className:"border p-2",children:b.actor_name||b.actor_id}),o.jsx("td",{className:"border p-2",children:b.amount??""}),o.jsx("td",{className:"border p-2",children:b.payment_method??""}),o.jsx("td",{className:"border p-2",children:b.channel??""})]},b.event_id||b.id))})]})]})]})}const sp=new Set(["admin","operator_admin","agent"]),j4=5e3,Rw=500;function _4(e){if(!e)return"";try{const t=new Date(e);return new Intl.DateTimeFormat("ro-RO",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}).format(t)}catch{return e}}function Pw(e,t){if(!Array.isArray(t)||t.length===0)return e;const r=new Map(e.map(s=>[s.id,s]));for(const s of t)r.has(s.id)||r.set(s.id,s);const i=Array.from(r.values());return i.sort((s,u)=>s.id-u.id),i.length>Rw?i.slice(i.length-Rw):i}function N4({user:e}){const[t,r]=f.useState(null),i=F=>r(F),s=()=>r(null);f.useEffect(()=>{if(!t)return;const F=Y=>{Y.key==="Escape"&&s()};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[t]);const[u,d]=f.useState(!1),[m,h]=f.useState([]),[p,g]=f.useState(""),[b,w]=f.useState(null),[S,y]=f.useState(!1),[j,N]=f.useState(!1),[E,_]=f.useState(()=>{if(typeof window>"u"||!(e!=null&&e.id))return 0;try{const F=Number(window.localStorage.getItem(`agent-chat:last-read:${e.id}`)||"0");return Number.isFinite(F)&&F>0?F:0}catch{return 0}}),M=f.useRef(null),O=f.useRef(0),C=f.useRef(null),L=f.useRef(!0),B=f.useRef(null),Z=f.useMemo(()=>e!=null&&e.id?`agent-chat:last-read:${e.id}`:null,[e==null?void 0:e.id]);f.useEffect(()=>(L.current=!0,()=>{L.current=!1}),[]),f.useEffect(()=>{if(Z)try{const F=Number(window.localStorage.getItem(Z)||"0");Number.isFinite(F)&&F>0?(_(F),O.current<=F&&N(!1)):_(0)}catch{}},[Z]),f.useEffect(()=>{const F=O.current;F&&F<=E&&N(!1)},[E]);const R=f.useCallback(F=>{if(!Z)return;const Y=Number(F)||0;_(Y),N(!1);try{window.localStorage.setItem(Z,String(Y))}catch{}},[Z]),X=f.useCallback(async()=>{if(!sp.has(e==null?void 0:e.role))return;const F=O.current,Y=F>0?`/api/chat/messages?afterId=${F}`:"/api/chat/messages?limit=100";try{const z=await fetch(Y,{credentials:"include"});if(!z.ok)throw new Error("chat fetch error");const T=await z.json(),P=Array.isArray(T==null?void 0:T.messages)?T.messages:[];if(P.length===0)return;h(A=>{const H=Pw(A,P),U=H[H.length-1];return U!=null&&U.id&&(O.current=U.id,!u&&U.id>E&&N(!0)),H})}catch{}},[u,E,e==null?void 0:e.role]);f.useEffect(()=>{if(sp.has(e==null?void 0:e.role))return X(),M.current=setInterval(X,j4),()=>{clearInterval(M.current),M.current=null}},[X,e==null?void 0:e.role]),f.useEffect(()=>{if(!u||m.length===0)return;const F=m[m.length-1];F!=null&&F.id&&R(F.id),C.current&&(C.current.scrollTop=C.current.scrollHeight)},[u,m,R]);const te=()=>{d(F=>{const Y=!F;if(!Y)return Y;const z=m[m.length-1];return z!=null&&z.id&&R(z.id),setTimeout(()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},0),Y})},xe=async({content:F,attachmentUrl:Y,attachmentType:z})=>{const T={content:(F==null?void 0:F.trim())||"",attachmentType:Y?z||"image":null,attachmentUrl:Y||null},P=await fetch("/api/chat/messages",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!P.ok){const U=await P.json().catch(()=>({}));throw new Error((U==null?void 0:U.error)||"Nu am putut trimite mesajul.")}const A=await P.json(),H=A==null?void 0:A.message;H&&(h(U=>Pw(U,[H])),O.current=H.id,R(H.id),setTimeout(()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},0))},Pe=async F=>{F.preventDefault(),w(null);const Y=p.trim();if(!Y){w("Scrie un mesaj.");return}y(!0);try{await xe({content:Y}),g("")}catch(z){w(z.message||"Nu am putut trimite mesajul.")}finally{L.current&&y(!1)}},ve=()=>{var F;return(F=B.current)==null?void 0:F.click()},se=async F=>{var z;const Y=(z=F.target.files)==null?void 0:z[0];if(F.target.value="",!!Y){w(null),y(!0);try{const T=new FormData;T.append("image",Y);const P=await fetch("/api/chat/upload",{method:"POST",credentials:"include",body:T});if(!P.ok){const U=await P.json().catch(()=>({}));throw new Error((U==null?void 0:U.error)||"Upload euat.")}const A=await P.json(),H=A==null?void 0:A.url;if(!H)throw new Error("Rspuns invalid de la upload.");await xe({content:"",attachmentUrl:H,attachmentType:"image"})}catch(T){w(T.message||"Nu am putut ncrca imaginea.")}finally{L.current&&y(!1)}}};if(!e||!sp.has(e.role))return null;const V=m.length?m[m.length-1].id:E;return o.jsxs("div",{className:"fixed bottom-4 right-9 z-50",children:[o.jsxs("button",{type:"button",onClick:te,className:"relative rounded-full bg-transparent text-blue-600 px-5 py-3 shadow-lg border border-blue-600 hover:bg-blue-50 transition",children:["Chat ageni",(j||V>E&&!u)&&o.jsx("span",{className:"absolute -top-1 -right-1 inline-flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-semibold",children:"!"})]}),u&&o.jsxs("div",{className:"mt-3 w-96 max-w-[90vw] max-h-[40vh] rounded-lg bg-white shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Chatul agenilor"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Mesaje text sau imagine."})]}),o.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"nchide chatul",children:""})]}),o.jsx("div",{ref:C,className:"flex-1 overflow-y-auto px-4 py-3 bg-gray-50 space-y-3",children:m.length===0?o.jsx("p",{className:"text-center text-sm text-gray-500",children:"nc nu exist mesaje. Spune primul salut!"}):m.map(F=>{const Y=F.userId===e.id;return o.jsxs("div",{className:`flex flex-col ${Y?"items-end":"items-start"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[o.jsx("span",{className:"font-medium text-gray-700",children:F.authorName||"Agent"}),o.jsx("span",{children:_4(F.createdAt)})]}),o.jsxs("div",{className:`mt-1 max-w-full rounded-lg px-3 py-2 text-sm shadow ${Y?"bg-blue-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-200 rounded-bl-none"}`,children:[F.content&&o.jsx("div",{className:"whitespace-pre-wrap break-words",children:F.content}),F.attachmentUrl&&F.attachmentType==="image"&&(()=>{var P;const T=(P=F.attachmentUrl)!=null&&P.startsWith("/uploads/")?`https://api.pris-com.ro${F.attachmentUrl}`:F.attachmentUrl;return o.jsx("img",{src:T,alt:"Imagine trimis",className:"mt-2 max-h-48 w-auto rounded cursor-zoom-in",loading:"lazy",onClick:()=>i(T)})})()]})]},F.id)})}),o.jsxs("form",{onSubmit:Pe,className:"border-t border-gray-200 px-4 py-3 space-y-2",children:[b&&o.jsx("p",{className:"text-sm text-red-600",children:b}),o.jsx("textarea",{value:p,onChange:F=>g(F.target.value),rows:2,placeholder:"Scrie mesajul aici...",className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring",onKeyDown:F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),Pe(F))}}),o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{ref:B,type:"file",accept:"image/*",hidden:!0,onChange:se}),o.jsx("button",{type:"button",onClick:ve,className:"rounded border border-gray-300 px-3 py-2 text-sm hover:bg-gray-50",disabled:S,children:" Imagine"})]}),o.jsx("button",{type:"submit",className:"rounded bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",disabled:S,children:S?"Se trimite...":"Trimite"})]})]}),t&&o.jsx("div",{className:"fixed inset-0 z-[999] bg-black/70 flex items-center justify-center p-4",onClick:s,role:"dialog","aria-modal":"true",children:o.jsxs("div",{className:"relative",onClick:F=>F.stopPropagation(),children:[o.jsx("button",{onClick:s,className:"absolute -top-3 -right-3 bg-white rounded-full w-8 h-8 grid place-items-center shadow","aria-label":"nchide",title:"nchide",children:""}),o.jsx("img",{src:t,alt:"Imagine",className:"max-h-[90vh] max-w-[90vw] rounded shadow-lg"}),o.jsx("div",{className:"mt-2 text-center",children:o.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:"text-white underline text-sm",title:"Deschide ntr-un tab nou",children:"Deschide n tab nou"})})]})})]})]})}function zw(){const{token:e}=bf(),[t,r]=f.useState({name:"",username:"",password:"",confirm:""}),[i,s]=f.useState(null),[u,d]=f.useState(!!e),[m,h]=f.useState(null),[p,g]=f.useState(!1),[b,w]=f.useState(null),[S,y]=f.useState(!1);f.useEffect(()=>{if(!e)return;let N=!1;return d(!0),h(null),fetch(`/api/invitations/${e}`).then(async E=>{if(!E.ok){const _=await E.json().catch(()=>null);throw new Error((_==null?void 0:_.error)||"Invitaia nu a fost gsit.")}return E.json()}).then(E=>{N||s(E)}).catch(E=>{N||h(E.message||"Invitaia nu a fost gsit.")}).finally(()=>{N||d(!1)}),()=>{N=!0}},[e]);const j=async N=>{if(N.preventDefault(),!e){w("Link de invitaie invalid.");return}if(m){w(m);return}if(i!=null&&i.expired){w("Invitaia este expirat. Solicit un link nou administratorului.");return}if(i!=null&&i.used_at){w("Aceast invitaie a fost deja folosit.");return}if(!t.name.trim()){w("Completeaz numele.");return}if(!t.username.trim()){w("Alege un nume de utilizator.");return}if(t.username.trim().length<3){w("Username-ul trebuie s aib cel puin 3 caractere.");return}if(t.password.length<8){w("Parola trebuie s aib minimum 8 caractere.");return}if(t.password!==t.confirm){w("Parolele nu coincid.");return}g(!0),w(null);try{const E=await fetch("/api/invitations/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,name:t.name.trim(),username:t.username.trim(),password:t.password})});if(!E.ok){const _=await E.json().catch(()=>null);w((_==null?void 0:_.error)||"Nu am putut valida invitaia.");return}y(!0)}catch(E){console.error("invite accept failed",E),w("A aprut o eroare neateptat. ncearc din nou.")}finally{g(!1)}};return o.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:o.jsxs("div",{className:"max-w-md w-full bg-white shadow rounded p-6",children:[o.jsx("h1",{className:"text-xl font-semibold text-center mb-2",children:"Activare invitaie"}),o.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Completeaz datele de mai jos pentru a-i crea contul."}),!e&&o.jsx("div",{className:"text-red-600 text-sm mb-4",children:"Token lips sau invalid."}),u&&o.jsx("div",{className:"text-sm text-gray-500 mb-4",children:"Se verific invitaia"}),m&&o.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2 mb-4",children:m}),i&&!i.expired&&!i.used_at&&o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded px-3 py-2 text-xs text-gray-600 mb-4",children:[o.jsxs("p",{children:["Email: ",o.jsx("span",{className:"font-medium",children:i.email})]}),i.role&&o.jsxs("p",{children:["Rol alocat: ",o.jsx("span",{className:"font-medium",children:i.role})]}),i.expires_at&&o.jsxs("p",{children:["Valabil pn la: ",o.jsx("span",{className:"font-medium",children:new Date(i.expires_at).toLocaleString("ro-RO")})]})]}),(i==null?void 0:i.expired)&&o.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2 mb-4",children:"Invitaia a expirat. Cere administratorului un alt link."}),(i==null?void 0:i.used_at)&&o.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded px-3 py-2 mb-4",children:["Aceast invitaie a fost deja folosit pe ",new Date(i.used_at).toLocaleString("ro-RO"),"."]}),S?o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("p",{className:"text-green-600 font-semibold",children:"Cont creat cu succes!"}),o.jsx("p",{className:"text-sm text-gray-700",children:"Te poi autentifica acum folosind adresa ta de email i parola setat."}),o.jsx(Kr,{className:"inline-block px-4 py-2 bg-blue-600 text-white rounded",to:"/login",children:"Mergi la autentificare"})]}):o.jsxs("form",{onSubmit:j,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-name",children:"Nume complet"}),o.jsx("input",{id:"invite-name",type:"text",className:"w-full border rounded px-3 py-2 text-sm",value:t.name,onChange:N=>r({...t,name:N.target.value}),placeholder:"Nume Prenume"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-username",children:"Username"}),o.jsx("input",{id:"invite-username",type:"text",className:"w-full border rounded px-3 py-2 text-sm",value:t.username,onChange:N=>r({...t,username:N.target.value}),placeholder:"ex: prenume.nume",autoComplete:"username"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-email",children:"Email invitaie"}),o.jsx("input",{id:"invite-email",type:"email",className:"w-full border rounded px-3 py-2 text-sm bg-gray-100",value:(i==null?void 0:i.email)||"",readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-pass",children:"Parol"}),o.jsx("input",{id:"invite-pass",type:"password",className:"w-full border rounded px-3 py-2 text-sm",value:t.password,onChange:N=>r({...t,password:N.target.value}),placeholder:"Minim 8 caractere"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-confirm",children:"Confirm parola"}),o.jsx("input",{id:"invite-confirm",type:"password",className:"w-full border rounded px-3 py-2 text-sm",value:t.confirm,onChange:N=>r({...t,confirm:N.target.value})})]}),b&&o.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2",children:b}),o.jsx("button",{type:"submit",className:"w-full py-2 bg-green-600 text-white rounded disabled:opacity-60",disabled:p||!e||!!m||(i==null?void 0:i.expired)||(i==null?void 0:i.used_at),children:p?"Se confirm":"Creeaz contul"})]})]})})}const M1="https://api.pris-com.ro";vt.defaults.baseURL=M1;vt.defaults.withCredentials=!0;function C4(e){const t=document.cookie.split("; ").find(r=>r.startsWith(e+"="));return t?decodeURIComponent(t.split("=").slice(1).join("=")):null}vt.interceptors.request.use(e=>{const t=(e.method||"get").toLowerCase();if(["post","put","patch","delete"].includes(t)){const i=C4("csrf_token");i&&(e.headers=e.headers||{},e.headers["X-CSRF-Token"]=i)}return e});function E4(){f.useEffect(()=>{if(window.__apiPatched)return;window.__apiPatched=!0;const g=window.fetch.bind(window);window.fetch=(b,w={})=>{let S,y={};typeof b=="string"?(S=b,y={}):b&&typeof b=="object"&&"url"in b?(S=b.url,y={method:b.method,headers:b.headers,body:b.body,mode:b.mode,credentials:b.credentials,cache:b.cache,redirect:b.redirect,referrer:b.referrer,referrerPolicy:b.referrerPolicy,integrity:b.integrity,keepalive:b.keepalive,signal:b.signal}):S="",S.startsWith("/api/")&&(S=M1+S);const j={credentials:"include",...y,...w};return w&&"credentials"in w?j.credentials=w.credentials:y&&"credentials"in y&&(j.credentials=y.credentials),g(S,j)}},[]);const[e,t]=f.useState(null),[r,i]=f.useState(null),[s,u]=f.useState(!0);f.useEffect(()=>{(async()=>{var b;try{const w=await fetch("/api/auth/me",{credentials:"include"});if(w.ok){const S=await w.json();t((S==null?void 0:S.user)||null),i(((b=S==null?void 0:S.user)==null?void 0:b.role)||"guest")}else t(null),i("guest")}catch{t(null),i("guest")}finally{u(!1)}})()},[]);const d=g=>g.includes(r),m=({allow:g,children:b})=>s?o.jsx("div",{className:"p-4",children:"Se ncarc..."}):d(g)?b:!r||r==="guest"?o.jsx(BN,{to:"/login",replace:!0}):o.jsx("div",{className:"p-4 text-red-600",children:"Acces interzis."}),h=()=>{const{pathname:g}=Qa();return g==="/login"||g.startsWith("/invita")?null:o.jsxs("div",{className:"p-4 bg-gray-100 flex gap-6 items-center",children:[d(["admin","operator_admin","agent"])&&o.jsxs(o.Fragment,{children:[o.jsx(Kr,{to:"/",className:"text-blue-600 hover:underline",children:"Rezervri"}),o.jsx(Kr,{to:"/backup",className:"text-blue-600 hover:underline",children:"Backupuri"}),o.jsx(Kr,{to:"/admin/blacklist",className:"text-blue-600 hover:underline",children:"Blacklist"}),o.jsx(Kr,{to:"/pasageri",className:"text-blue-600 hover:underline",children:"Pasageri"})]}),d(["admin","operator_admin","agent"])&&o.jsx(Kr,{to:"/admin",className:"text-blue-600 hover:underline",children:"Administrare"}),d(["admin","operator_admin"])&&o.jsxs(o.Fragment,{children:[o.jsx(Kr,{to:"/admin/reports",className:"text-blue-600 hover:underline",children:"Rapoarte"}),o.jsx(Kr,{to:"/admin/log",className:"text-blue-600 hover:underline",children:"Log"}),o.jsx(Kr,{to:"/admin/call-log",className:"text-blue-600 hover:underline",children:"Call log"})]}),r&&r!=="guest"&&o.jsx("button",{onClick:async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch{}t(null),i("guest"),window.location.href="/login"},className:"ml-auto text-blue-600 hover:underline",children:"Logout"})]})},p=()=>{const{pathname:g}=Qa();return g==="/login"||g.startsWith("/invita")?null:o.jsx(N4,{user:e})};return o.jsxs(mC,{children:[o.jsx(h,{}),o.jsx(p,{}),o.jsxs(FN,{children:[o.jsx(Lr,{path:"/",element:o.jsx(m,{allow:["admin","operator_admin","agent"],children:o.jsx(ND,{userRole:r,user:e})})}),o.jsx(Lr,{path:"/backup",element:o.jsx(m,{allow:["admin","operator_admin","agent"],children:o.jsx(CD,{})})}),o.jsx(Lr,{path:"/admin/blacklist",element:o.jsx(m,{allow:["admin","operator_admin","agent"],children:o.jsx(ED,{})})}),o.jsx(Lr,{path:"/raport/:personId",element:o.jsx(m,{allow:["admin","operator_admin","agent"],children:o.jsx(OD,{})})}),o.jsx(Lr,{path:"/admin",element:o.jsx(m,{allow:["admin","operator_admin","agent"],children:o.jsx(F3,{})})}),o.jsx(Lr,{path:"/admin/reports",element:o.jsx(m,{allow:["admin","operator_admin"],children:o.jsx(J3,{user:e})})}),o.jsx(Lr,{path:"/admin/routes/:id/edit",element:o.jsx(m,{allow:["admin"],children:o.jsx(v4,{})})}),o.jsx(Lr,{path:"/pasageri",element:o.jsx(m,{allow:["admin","operator_admin","agent"],children:o.jsx(b4,{})})}),o.jsx(Lr,{path:"/login",element:o.jsx(y4,{onLoggedIn:g=>{t(g),i((g==null?void 0:g.role)||"guest")}})}),o.jsx(Lr,{path:"/invita",element:o.jsx(zw,{})}),o.jsx(Lr,{path:"/invita/:token",element:o.jsx(zw,{})}),o.jsx(Lr,{path:"/admin/log",element:o.jsx(m,{allow:["admin","operator_admin"],children:o.jsx(x4,{})})}),o.jsx(Lr,{path:"/admin/call-log",element:o.jsx(m,{allow:["admin","operator_admin"],children:o.jsx(w4,{})})}),o.jsx(Lr,{path:"/rezervare/:id",element:o.jsx(S4,{})})]})]})}const M4=["places","geometry","marker"];function O4(){const e=typeof window<"u"?window.location.hostname:"",t=["localhost","127.0.0.1"].includes(e),r=/^192\.168\./.test(e)||/^10\./.test(e)||/^172\.(1[6-9]|2\d|3[0-1])\./.test(e),i=t||r||e.endsWith(".local"),s=void 0;return i&&s?s:"AIzaSyAZMoYCEQXGpAbA1P0YtID1smLhT_X87XY"}function L4({children:e}){const t=f.useMemo(()=>O4(),[]),{isLoaded:r,loadError:i}=tR({id:"gmaps-js",googleMapsApiKey:t||"",libraries:M4});if(!t)return console.error("Google Maps API key nu este configurat."),o.jsxs("div",{className:"p-4 text-red-600",children:["Google Maps nu poate fi ncrcat: lipsete cheia API. Configureaz ",o.jsx("code",{children:"VITE_GMAPS_KEY"}),"pentru producie i, opional, ",o.jsx("code",{children:"VITE_GMAPS_KEY_LOCAL"})," pentru mediul local."]});if(i){const u=((i==null?void 0:i.message)||"").includes("RefererNotAllowedMapError");return console.error("Eroare la ncrcarea Google Maps:",i),o.jsx("div",{className:"p-4 text-red-600",children:u?o.jsxs(o.Fragment,{children:["Cheia Google Maps refuz referer-ul "," ",o.jsx("strong",{children:typeof window<"u"?window.location.origin:""}),"."," ","Adaug aceast origine n restriciile cheii sau seteaz o cheie local prin"," ",o.jsx("code",{children:"VITE_GMAPS_KEY_LOCAL"})," / ",o.jsx("code",{children:"VITE_GMAPS_KEY_DEV"}),"."]}):o.jsx(o.Fragment,{children:"Eroare la ncrcarea hrii."})})}return r?e:o.jsx("div",{className:"p-4 text-gray-500",children:"Se ncarc harta..."})}Q_.createRoot(document.getElementById("root")).render(o.jsx(f.StrictMode,{children:o.jsx(L4,{children:o.jsx(E4,{})})}));
